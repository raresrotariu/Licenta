(self.webpackChunksucd=self.webpackChunksucd||[]).push([[179],{8255:Ye=>{function we(U){return Promise.resolve().then(()=>{var a=new Error("Cannot find module '"+U+"'");throw a.code="MODULE_NOT_FOUND",a})}we.keys=()=>[],we.resolve=we,we.id=8255,Ye.exports=we},7716:(Ye,we,U)=>{"use strict";U.d(we,{deG:()=>Nf,tb:()=>o0,AFp:()=>r0,ip1:()=>N_,CZH:()=>Hh,hGG:()=>Vx,z2F:()=>Qp,sBO:()=>ZS,Sil:()=>Zp,_Vd:()=>ju,EJc:()=>l0,SBq:()=>vn,qLn:()=>pl,vpe:()=>mo,gxx:()=>fm,tBr:()=>ll,XFs:()=>Ke,OlP:()=>Mn,zs3:()=>qe,ZZ4:()=>r_,aQg:()=>Op,soG:()=>kc,YKP:()=>tI,v3s:()=>Tx,h0i:()=>Ih,PXZ:()=>h0,R0b:()=>qs,FiY:()=>cl,Lbi:()=>mD,g9A:()=>s0,Qsj:()=>uk,FYo:()=>Es,JOm:()=>v,Tiy:()=>fE,q3G:()=>ri,tp0:()=>Ai,EAV:()=>Ix,Rgc:()=>Pp,dDg:()=>si,DyG:()=>ro,q4F:()=>Sh,GfV:()=>i_,s_b:()=>Ab,ifc:()=>Le,eFA:()=>dA,G48:()=>vx,Gpc:()=>G,f3M:()=>Ug,X6Q:()=>d0,_c5:()=>m0,VLi:()=>sr,c2e:()=>a0,zSh:()=>ip,wAp:()=>at,vHH:()=>Ae,EiD:()=>Yd,mCW:()=>dl,qzn:()=>_u,JVY:()=>Oy,pB0:()=>Gd,eBb:()=>qg,L6k:()=>zg,LAX:()=>_a,cg1:()=>Vu,Tjo:()=>Rx,kL8:()=>nr,yhl:()=>Ff,dqk:()=>bt,sIi:()=>dh,CqO:()=>gC,QGY:()=>Qv,F4k:()=>hS,RDi:()=>ra,AaK:()=>J,z3N:()=>ma,qOj:()=>Pv,TTD:()=>An,_Bn:()=>aE,xp6:()=>h1,uIk:()=>Dm,Tol:()=>ab,DjV:()=>VC,ekj:()=>Sa,Suo:()=>Fh,Xpm:()=>zi,lG2:()=>md,Yz7:()=>wn,cJS:()=>On,oAB:()=>ea,Yjl:()=>zr,Y36:()=>xm,_UZ:()=>Gn,GkF:()=>_p,BQk:()=>_h,ynx:()=>pC,qZA:()=>Kv,TgZ:()=>mp,EpF:()=>dS,n5z:()=>ou,Ikx:()=>jC,SDv:()=>nE,QtT:()=>iE,pQV:()=>Tb,LFG:()=>Rn,$8M:()=>If,NdJ:()=>mC,CRH:()=>Mc,kcU:()=>kg,O4$:()=>Ad,oxw:()=>vC,ALo:()=>LE,lcZ:()=>Gb,Hsn:()=>pS,F$t:()=>fS,Q6J:()=>Ta,s9C:()=>Xv,MGl:()=>eb,VKq:()=>$p,WLB:()=>Hb,kEZ:()=>FE,iGM:()=>qb,MAs:()=>J1,CHM:()=>Xc,LSH:()=>Yg,kYT:()=>Gc,Udp:()=>ob,WFA:()=>_C,d8E:()=>$C,YNc:()=>Hv,W1O:()=>BI,_uU:()=>xC,Oqu:()=>ub,hij:()=>Um,Gf:()=>Wb});var a=U(9765),se=U(5319),H=U(7574),fe=U(6682),ae=U(8819);function ie(s){for(let o in s)if(s[o]===ie)return o;throw Error("Could not find renamed property on target object.")}function ne(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function J(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(J).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function K(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const V=ie({__forward_ref__:ie});function G(s){return s.__forward_ref__=G,s.toString=function(){return J(this())},s}function W(s){return he(s)?s():s}function he(s){return"function"==typeof s&&s.hasOwnProperty(V)&&s.__forward_ref__===G}class Ae extends Error{constructor(o,c){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,c)),this.code=o}}function le(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():le(s)}function Ut(s,o){const c=o?` in ${o}`:"";throw new Ae("201",`No provider for ${ve(s)} found${c}`)}function Jt(s,o,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}function wn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function On(s){return{providers:s.providers||[],imports:s.imports||[]}}function fi(s){return zt(s,Rs)||zt(s,Si)}function zt(s,o){return s.hasOwnProperty(o)?s[o]:null}function as(s){return s&&(s.hasOwnProperty(Ie)||s.hasOwnProperty(ci))?s[Ie]:null}const Rs=ie({\u0275prov:ie}),Ie=ie({\u0275inj:ie}),Si=ie({ngInjectableDef:ie}),ci=ie({ngInjectorDef:ie});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Xt;function lr(s){const o=Xt;return Xt=s,o}function st(s,o,c){const d=fi(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&Ke.Optional?null:void 0!==o?o:void Ut(J(s),"Injector")}function xt(s){return{toString:s}.toString()}var Ot=(()=>((Ot=Ot||{})[Ot.OnPush=0]="OnPush",Ot[Ot.Default=1]="Default",Ot))(),Le=(()=>((Le=Le||{})[Le.Emulated=0]="Emulated",Le[Le.None=2]="None",Le[Le.ShadowDom=3]="ShadowDom",Le))();const rt="undefined"!=typeof globalThis&&globalThis,jc="undefined"!=typeof window&&window,Eo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bt=rt||"undefined"!=typeof global&&global||jc||Eo,Q={},z=[],X=ie({\u0275cmp:ie}),De=ie({\u0275dir:ie}),ce=ie({\u0275pipe:ie}),Ge=ie({\u0275mod:ie}),wt=ie({\u0275loc:ie}),qt=ie({\u0275fac:ie}),Yn=ie({__NG_ELEMENT_ID__:ie});let Kn=0;function zi(s){return xt(()=>{const c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Ot.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||z,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Le.Emulated,id:"c",styles:s.styles||z,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,y=s.pipes;return d.id+=Kn++,d.inputs=ta(s.inputs,c),d.outputs=ta(s.outputs),p&&p.forEach(b=>b(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(Pi):null,d.pipeDefs=y?()=>("function"==typeof y?y():y).map(Xo):null,d})}function Pi(s){return pi(s)||function(s){return s[De]||null}(s)}function Xo(s){return function(s){return s[ce]||null}(s)}const $c={};function ea(s){return xt(()=>{const o={type:s.type,bootstrap:s.bootstrap||z,declarations:s.declarations||z,imports:s.imports||z,exports:s.exports||z,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&($c[s.id]=s.type),o})}function Gc(s,o){return xt(()=>{const c=qr(s,!0);c.declarations=o.declarations||z,c.imports=o.imports||z,c.exports=o.exports||z})}function ta(s,o){if(null==s)return Q;const c={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=d,o&&(o[h]=p)}return c}const md=zi;function zr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function pi(s){return s[X]||null}function qr(s,o){const c=s[Ge]||null;if(!c&&!0===o)throw new Error(`Type ${J(s)} does not have '\u0275mod' property.`);return c}function Dn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Vi(s){return Array.isArray(s)&&!0===s[1]}function rf(s){return 0!=(8&s.flags)}function Ll(s){return 2==(2&s.flags)}function fr(s){return 1==(1&s.flags)}function us(s){return null!==s.template}function ds(s){return 0!=(512&s[2])}function ks(s,o){return s.hasOwnProperty(qt)?s[qt]:null}class Hl{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function An(){return jl}function jl(s){return s.type.prototype.ngOnChanges&&(s.setInput=Zi),Cy}function Cy(){const s=$l(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===Q)s.previous=o;else for(let d in o)c[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Zi(s,o,c,d){const h=$l(s)||function(s,o){return s[xs]=o}(s,{previous:Q,current:null}),p=h.current||(h.current={}),y=h.previous,b=this.declaredInputs[c],E=y[b];p[b]=new Hl(E&&E.currentValue,o,y===Q),s[d]=o}An.ngInherit=!0;const xs="__ngSimpleChanges__";function $l(s){return s[xs]||null}const Gl="http://www.w3.org/2000/svg";let Wa;function ra(s){Wa=s}function So(){return void 0!==Wa?Wa:"undefined"!=typeof document?document:void 0}function hn(s){return!!s.listen}const Os={createRenderer:(s,o)=>So()};function sn(s){for(;Array.isArray(s);)s=s[0];return s}function sa(s,o){return sn(o[s])}function Ar(s,o){return sn(o[s.index])}function Io(s,o){return s.data[o]}function Ao(s,o){return s[o]}function Bi(s,o){const c=o[s];return Dn(c)?c:c[0]}function Yc(s){return 4==(4&s[2])}function Kc(s){return 128==(128&s[2])}function Xn(s,o){return null==o?null:s[o]}function zl(s){s[18]=0}function ql(s,o){s[5]+=o;let c=s,d=s[3];for(;null!==d&&(1===o&&1===c[5]||-1===o&&0===c[5]);)d[5]+=o,c=d,d=d[3]}const dt={lFrame:Sd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Wl(){return dt.bindingsEnabled}function Te(){return dt.lFrame.lView}function Nt(){return dt.lFrame.tView}function Xc(s){return dt.lFrame.contextLView=s,s[8]}function mn(){let s=eu();for(;null!==s&&64===s.type;)s=s.parent;return s}function eu(){return dt.lFrame.currentTNode}function Ps(){const s=dt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function Yi(s,o){const c=dt.lFrame;c.currentTNode=s,c.isParent=o}function Ya(){return dt.lFrame.isParent}function Zl(){dt.lFrame.isParent=!1}function Ka(){return dt.isInCheckNoChangesMode}function Qa(s){dt.isInCheckNoChangesMode=s}function ei(){const s=dt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Zr(){return dt.lFrame.bindingIndex}function Yr(){return dt.lFrame.bindingIndex++}function Ki(s){const o=dt.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function tu(s){dt.lFrame.inI18n=s}function Kl(s,o){const c=dt.lFrame;c.bindingIndex=c.bindingRootIndex=s,Ql(o)}function Ql(s){dt.lFrame.currentDirectiveIndex=s}function Jl(s){const o=dt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function nu(){return dt.lFrame.currentQueryIndex}function Ja(s){dt.lFrame.currentQueryIndex=s}function Xa(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Td(s,o,c){if(c&Ke.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||c&Ke.Host||(h=Xa(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const d=dt.lFrame=vf();return d.currentTNode=o,d.lView=s,!0}function oa(s){const o=vf(),c=s[1];dt.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function vf(){const s=dt.lFrame,o=null===s?null:s.child;return null===o?Sd(s):o}function Sd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function bf(){const s=dt.lFrame;return dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const wf=bf;function Js(){const s=bf();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function gi(){return dt.lFrame.selectedIndex}function el(s){dt.lFrame.selectedIndex=s}function Fn(){const s=dt.lFrame;return Io(s.tView,s.selectedIndex)}function Ad(){dt.lFrame.currentNamespace=Gl}function kg(){dt.lFrame.currentNamespace=null}function iu(s,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:b,ngAfterViewInit:E,ngAfterViewChecked:I,ngOnDestroy:R}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-c,y),b&&((s.contentHooks||(s.contentHooks=[])).push(c,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,b)),E&&(s.viewHooks||(s.viewHooks=[])).push(-c,E),I&&((s.viewHooks||(s.viewHooks=[])).push(c,I),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,I)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(c,R)}}function Mo(s,o,c){Nd(s,o,3,c)}function ec(s,o,c,d){(3&s[2])===c&&Nd(s,o,c,d)}function Bn(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function Nd(s,o,c,d){const p=null!=d?d:-1,y=o.length-1;let b=0;for(let E=void 0!==d?65535&s[18]:0;E<y;E++)if("number"==typeof o[E+1]){if(b=o[E],null!=d&&b>=d)break}else o[E]<0&&(s[18]+=65536),(b<p||-1==p)&&(Og(s,c,o,E),s[18]=(4294901760&s[18])+E+2),E++}function Og(s,o,c,d){const h=c[d]<0,p=c[d+1],b=s[h?-c[d]:c[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(b)}finally{}}}else try{p.call(b)}finally{}}class nl{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Ef(s,o,c){const d=hn(s);let h=0;for(;h<c.length;){const p=c[h];if("number"==typeof p){if(0!==p)break;h++;const y=c[h++],b=c[h++],E=c[h++];d?s.setAttribute(o,b,E,y):o.setAttributeNS(y,b,E)}else{const y=p,b=c[++h];eo(y)?d&&s.setProperty(o,y,b):d?s.setAttribute(o,y,b):o.setAttribute(y,b),h++}}return h}function Pg(s){return 3===s||4===s||6===s}function eo(s){return 64===s.charCodeAt(0)}function ru(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?c=h:0===c||Fg(s,c,h,null,-1===c||2===c?o[++d]:null)}}return s}function Fg(s,o,c,d,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const b=s[p++];if("number"==typeof b){if(b===o){y=-1;break}if(b>o){y=p-1;break}}}for(;p<s.length;){const b=s[p];if("number"==typeof b)break;if(b===c){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,c),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}function kd(s){return-1!==s}function ko(s){return 32767&s}function Nr(s,o){let c=function(s){return s>>16}(s),d=o;for(;c>0;)d=d[15],c--;return d}let tc=!0;function rl(s){const o=tc;return tc=s,o}let Sf=0;function nc(s,o){const c=fn(s,o);if(-1!==c)return c;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,aa(d.data,s),aa(o,null),aa(d.blueprint,null));const h=He(s,o),p=s.injectorIndex;if(kd(h)){const y=ko(h),b=Nr(h,o),E=b[1].data;for(let I=0;I<8;I++)o[p+I]=b[y+I]|E[y+I]}return o[p+8]=h,p}function aa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function fn(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function He(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,h=o;for(;null!==h;){const p=h[1],y=p.type;if(d=2===y?p.declTNode:1===y?h[6]:null,null===d)return-1;if(c++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function nt(s,o,c){!function(s,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Yn)&&(d=c[Yn]),null==d&&(d=c[Yn]=Sf++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,c)}function Nn(s,o,c){if(c&Ke.Optional)return s;Ut(o,"NodeInjector")}function to(s,o,c,d){if(c&Ke.Optional&&void 0===d&&(d=null),0==(c&(Ke.Self|Ke.Host))){const h=s[9],p=lr(void 0);try{return h?h.get(o,d,c&Ke.Optional):st(o,d,c&Ke.Optional)}finally{lr(p)}}return Nn(d,o,c)}function la(s,o,c,d=Ke.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Yn)?s[Yn]:void 0;return"number"==typeof o?o>=0?255&o:ic:o}(c);if("function"==typeof p){if(!Td(o,s,d))return d&Ke.Host?Nn(h,c,d):to(o,c,d,h);try{const y=p(d);if(null!=y||d&Ke.Optional)return y;Ut(c)}finally{wf()}}else if("number"==typeof p){let y=null,b=fn(s,o),E=-1,I=d&Ke.Host?o[16][6]:null;for((-1===b||d&Ke.SkipSelf)&&(E=-1===b?He(s,o):o[b+8],-1!==E&&rc(d,!1)?(y=o[1],b=ko(E),o=Nr(E,o)):b=-1);-1!==b;){const R=o[1];if(sl(p,b,R.data)){const P=Ty(b,o,c,y,d,I);if(P!==an)return P}E=o[b+8],-1!==E&&rc(d,o[1].data[b+8]===I)&&sl(p,b,o)?(y=R,b=ko(E),o=Nr(E,o)):b=-1}}}return to(o,c,d,h)}const an={};function ic(){return new Fs(mn(),Te())}function Ty(s,o,c,d,h,p){const y=o[1],b=y.data[s+8],R=xo(b,y,c,null==d?Ll(b)&&tc:d!=y&&0!=(3&b.type),h&Ke.Host&&p===b);return null!==R?Cn(o,y,R,b):an}function xo(s,o,c,d,h){const p=s.providerIndexes,y=o.data,b=1048575&p,E=s.directiveStart,R=p>>20,L=h?b+R:s.directiveEnd;for(let q=d?b:b+R;q<L;q++){const ee=y[q];if(q<E&&c===ee||q>=E&&ee.type===c)return q}if(h){const q=y[E];if(q&&us(q)&&q.type===c)return E}return null}function Cn(s,o,c,d){let h=s[c];const p=o.data;if(function(s){return s instanceof nl}(h)){const y=h;y.resolving&&function(s,o){throw new Ae("200",`Circular dependency in DI detected for ${s}`)}(ve(p[c]));const b=rl(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?lr(y.injectImpl):null;Td(s,d,Ke.Default);try{h=s[c]=y.factory(void 0,p,s,d),o.firstCreatePass&&c>=d.directiveStart&&function(s,o,c){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(d){const y=jl(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,y),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,y)}h&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,h),p&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,p),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,p))}(c,p[c],o)}finally{null!==E&&lr(E),rl(b),y.resolving=!1,wf()}}return h}function sl(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function rc(s,o){return!(s&Ke.Self||s&Ke.Host&&o)}class Fs{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return la(this._tNode,this._lView,o,d,c)}}function ou(s){return xt(()=>{const o=s.prototype.constructor,c=o[qt]||sc(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[qt]||sc(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function sc(s){return he(s)?()=>{const o=sc(W(s));return o&&o()}:ks(s)}function If(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const d=c.length;let h=0;for(;h<d;){const p=c[h];if(Pg(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof c[h];)h++;else{if(p===o)return c[h+1];h+=2}}}return null}(mn(),s)}const no="__parameters__";function Qr(s,o,c){return xt(()=>{const d=function(s){return function(...c){if(s){const d=s(...c);for(const h in d)this[h]=d[h]}}}(o);function h(...p){if(this instanceof h)return d.apply(this,p),this;const y=new h(...p);return b.annotation=y,b;function b(E,I,R){const P=E.hasOwnProperty(no)?E[no]:Object.defineProperty(E,no,{value:[]})[no];for(;P.length<=R;)P.push(null);return(P[R]=P[R]||[]).push(y),E}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Mn{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=wn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nf=new Mn("AnalyzeForEntryComponents"),ro=Function;function Mr(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let d=s[c];Array.isArray(d)?(o===s&&(o=s.slice(0,c)),Mr(d,o)):o!==s&&o.push(d)}return o}function Ls(s,o){s.forEach(c=>Array.isArray(c)?Ls(c,o):o(c))}function oc(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Jr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function so(s,o){const c=[];for(let d=0;d<s;d++)c.push(o);return c}function mi(s,o,c){let d=al(s,o);return d>=0?s[1|d]=c:(d=~d,function(s,o,c,d){let h=s.length;if(h==o)s.push(c,d);else if(1===h)s.push(d,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=d}}(s,d,o,c)),d}function Ln(s,o){const c=al(s,o);if(c>=0)return s[1|c]}function al(s,o){return function(s,o,c){let d=0,h=s.length>>c;for(;h!==d;){const p=d+(h-d>>1),y=s[p<<c];if(o===y)return p<<c;y>o?h=p:d=p+1}return~(h<<c)}(s,o,1)}const Vt={},pn="__NG_DI_FLAG__",ii="ngTempTokenPath",_i=/\n/gm,ha="__source",gs=ie({provide:String,useValue:ie});let ms;function mt(s){const o=ms;return ms=s,o}function Bg(s,o=Ke.Default){if(void 0===ms)throw new Error("inject() must be called from an injection context");return null===ms?st(s,void 0,o):ms.get(s,o&Ke.Optional?null:void 0,o)}function Rn(s,o=Ke.Default){return(Xt||Bg)(W(s),o)}const Ug=Rn;function ac(s){const o=[];for(let c=0;c<s.length;c++){const d=W(s[c]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let h,p=Ke.Default;for(let y=0;y<d.length;y++){const b=d[y],E=Hg(b);"number"==typeof E?-1===E?h=b.token:p|=E:h=b}o.push(Rn(h,p))}else o.push(Rn(d))}return o}function lc(s,o){return s[pn]=o,s.prototype[pn]=o,s}function Hg(s){return s[pn]}function _s(s,o,c,d){const h=s[ii];throw o[ha]&&h.unshift(o[ha]),s.message=function(s,o,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=J(o);if(Array.isArray(o))h=o.map(J).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let b=o[y];p.push(y+":"+("string"==typeof b?JSON.stringify(b):J(b)))}h=`{${p.join(", ")}}`}return`${c}${d?"("+d+")":""}[${h}]: ${s.replace(_i,"\n  ")}`}("\n"+s.message,h,c,d),s.ngTokenPath=h,s[ii]=null,s}const ll=lc(Qr("Inject",s=>({token:s})),-1),cl=lc(Qr("Optional"),8),Ai=lc(Qr("SkipSelf"),4);let pu;function ga(s){var o;return(null===(o=function(){if(void 0===pu&&(pu=null,bt.trustedTypes))try{pu=bt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return pu}())||void 0===o?void 0:o.createHTML(s))||s}class uc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class hw extends uc{getTypeName(){return"HTML"}}class fw extends uc{getTypeName(){return"Style"}}class Pf extends uc{getTypeName(){return"Script"}}class pw extends uc{getTypeName(){return"URL"}}class gw extends uc{getTypeName(){return"ResourceURL"}}function ma(s){return s instanceof uc?s.changingThisBreaksApplicationSecurity:s}function _u(s,o){const c=Ff(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}function Ff(s){return s instanceof uc&&s.getTypeName()||null}function Oy(s){return new hw(s)}function zg(s){return new fw(s)}function qg(s){return new Pf(s)}function _a(s){return new pw(s)}function Gd(s){return new gw(s)}function Lf(s){const o=new mw(s);return function(){try{return!!(new window.DOMParser).parseFromString(ga(""),"text/html")}catch(s){return!1}}()?new Py(o):o}class Py{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const c=(new window.DOMParser).parseFromString(ga(o),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(o):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class mw{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(o){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=ga(o),c;const d=this.inertDocument.createElement("body");return d.innerHTML=ga(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const c=o.attributes;for(let h=c.length-1;0<h;h--){const y=c.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Fy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function dl(s){return(s=String(s)).match(Fy)||s.match(Vf)?s:"unsafe:"+s}function Bf(s){return(s=String(s)).split(",").map(o=>dl(o.trim())).join(", ")}function Bs(s){const o={};for(const c of s.split(","))o[c]=!0;return o}function dc(...s){const o={};for(const c of s)for(const d in c)c.hasOwnProperty(d)&&(o[d]=!0);return o}const vu=Bs("area,br,col,hr,img,wbr"),Vy=Bs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bu=Bs("rp,rt"),Wg=dc(vu,dc(Vy,Bs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dc(bu,Bs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dc(bu,Vy)),zd=Bs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ys=Bs("srcset"),qd=dc(zd,ys,Bs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yw=Bs("script,style,template");class Wd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let c=o.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let h=this.checkClobberedElement(c,c.nextSibling);if(h){c=h;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(o){const c=o.nodeName.toLowerCase();if(!Wg.hasOwnProperty(c))return this.sanitizedSomething=!0,!yw.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=o.attributes;for(let h=0;h<d.length;h++){const p=d.item(h),y=p.name,b=y.toLowerCase();if(!qd.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let E=p.value;zd[b]&&(E=dl(E)),ys[b]&&(E=Bf(E)),this.buf.push(" ",y,'="',Uf(E),'"')}return this.buf.push(">"),!0}endElement(o){const c=o.nodeName.toLowerCase();Wg.hasOwnProperty(c)&&!vu.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(o){this.buf.push(Uf(o))}checkClobberedElement(o,c){if(c&&(o.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return c}}const vw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bw=/([^\#-~ |!])/g;function Uf(s){return s.replace(/&/g,"&amp;").replace(vw,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(bw,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zd;function Yd(s,o){let c=null;try{Zd=Zd||Lf(s);let d=o?String(o):"";c=Zd.getInertBodyElement(d);let h=5,p=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=p,p=c.innerHTML,c=Zd.getInertBodyElement(d)}while(d!==p);return ga((new Wd).sanitizeChildren(Kd(c)||c))}finally{if(c){const d=Kd(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Kd(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var ri=(()=>((ri=ri||{})[ri.NONE=0]="NONE",ri[ri.HTML=1]="HTML",ri[ri.STYLE=2]="STYLE",ri[ri.SCRIPT=3]="SCRIPT",ri[ri.URL=4]="URL",ri[ri.RESOURCE_URL=5]="RESOURCE_URL",ri))();function Yg(s){const o=function(){const s=Te();return s&&s[12]}();return o?o.sanitize(ri.URL,s)||"":_u(s,"URL")?ma(s):dl(le(s))}const hc="__ngContext__";function Xi(s,o){s[hc]=o}function em(s){const o=function(s){return s[hc]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function fl(s){return s.ngOriginalError}function sm(s,...o){s.error(...o)}class pl{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),d=this._findContext(o),h=(s=o)&&s.ngErrorLogger||sm;var s;h(this._console,"ERROR",o),c&&h(this._console,"ORIGINAL ERROR",c),d&&h(this._console,"ERROR CONTEXT",d)}_findContext(o){return o?o.ngDebugContext||this._findContext(fl(o)):null}_findOriginalError(o){let c=o&&fl(o);for(;c&&fl(c);)c=fl(c);return c||null}}const Tw=/^>|^->|<!--|-->|--!>|<!-$/g,Lo=/(<|>)/;const Yy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(bt))();function Us(s){return s instanceof Function?s():s}var v=(()=>((v=v||{})[v.Important=1]="Important",v[v.DashCase=2]="DashCase",v))();let g;function _(s,o){return g(s,o)}function x(s){const o=s[3];return Vi(o)?o[3]:o}function xe(s){return We(s[13])}function Re(s){return We(s[4])}function We(s){for(;null!==s&&!Vi(s);)s=s[4];return s}function Mt(s,o,c,d,h){if(null!=d){let p,y=!1;Vi(d)?p=d:Dn(d)&&(y=!0,d=d[0]);const b=sn(d);0===s&&null!==c?null==h?r1(o,c,b):Su(o,c,b,h||null,!0):1===s&&null!==c?Su(o,c,b,h||null,!0):2===s?Nw(o,b,y):3===s&&o.destroyNode(b),null!=p&&function(s,o,c,d,h){const p=c[7];p!==sn(c)&&Mt(o,s,d,p,h);for(let b=10;b<c.length;b++){const E=c[b];ih(E[1],E,s,o,d,p)}}(o,s,p,c,h)}}function di(s,o){return hn(s)?s.createText(o):s.createTextNode(o)}function ba(s,o,c){hn(s)?s.setValue(o,c):o.textContent=c}function qf(s,o){return s.createComment(function(s){return s.replace(Tw,o=>o.replace(Lo,"\u200b$1\u200b"))}(o))}function Xd(s,o,c){return hn(s)?s.createElement(o,c):null===c?s.createElement(o):s.createElementNS(c,o)}function th(s,o){const c=s[9],d=c.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,ql(h,-1)),c.splice(d,1)}function Wf(s,o){if(s.length<=10)return;const c=10+o,d=s[c];if(d){const h=d[17];null!==h&&h!==s&&th(h,d),o>0&&(s[c-1][4]=d[4]);const p=Jr(s,10+o);!function(s,o){ih(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const y=p[19];null!==y&&y.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Zf(s,o){if(!(256&o[2])){const c=o[11];hn(c)&&c.destroyNode&&ih(s,o,c,3,null,null),function(s){let o=s[13];if(!o)return gl(s[1],s);for(;o;){let c=null;if(Dn(o))c=o[13];else{const d=o[10];d&&(c=d)}if(!c){for(;o&&!o[4]&&o!==s;)Dn(o)&&gl(o[1],o),o=o[3];null===o&&(o=s),Dn(o)&&gl(o[1],o),c=o&&o[4]}o=c}}(o)}}function gl(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const h=o[c[d]];if(!(h instanceof nl)){const p=c[d+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const b=h[p[y]],E=p[y+1];try{E.call(b)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const c=s.cleanup,d=o[7];let h=-1;if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const y=c[p+1],b="function"==typeof y?y(o):sn(o[y]),E=d[h=c[p+2]],I=c[p+3];"boolean"==typeof I?b.removeEventListener(c[p],E,I):I>=0?d[h=I]():d[h=-I].unsubscribe(),p+=2}else{const y=d[h=c[p+1]];c[p].call(y)}if(null!==d){for(let p=h+1;p<d.length;p++)d[p]();o[7]=null}}(s,o),1===o[1].type&&hn(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&Vi(o[3])){c!==o[3]&&th(c,o);const d=o[19];null!==d&&d.detachView(s)}}}function n1(s,o,c){return i1(s,o.parent,c)}function i1(s,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===Le.None||h===Le.Emulated)return null}return Ar(d,c)}function Su(s,o,c,d,h){hn(s)?s.insertBefore(o,c,d,h):o.insertBefore(c,d,h)}function r1(s,o,c){hn(s)?s.appendChild(o,c):o.appendChild(c)}function s1(s,o,c,d,h){null!==d?Su(s,o,c,d,h):r1(s,o,c)}function nv(s,o){return hn(s)?s.parentNode(o):o.parentNode}function rv(s,o,c){return nh(s,o,c)}function Yf(s,o,c){return 40&s.type?Ar(s,c):null}let Sw,nh=Yf;function o1(s,o){nh=s,Sw=o}function Kf(s,o,c,d){const h=n1(s,d,o),p=o[11],b=rv(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(c))for(let E=0;E<c.length;E++)s1(p,h,c[E],b,!1);else s1(p,h,c,b,!1);void 0!==Sw&&Sw(p,d,o,c,h)}function sv(s,o){if(null!==o){const c=o.type;if(3&c)return Ar(o,s);if(4&c)return Aw(-1,s[o.index]);if(8&c){const d=o.child;if(null!==d)return sv(s,d);{const h=s[o.index];return Vi(h)?Aw(-1,h):sn(h)}}if(32&c)return _(o,s)()||sn(s[o.index]);{const d=Iw(s,o);return null!==d?Array.isArray(d)?d[0]:sv(x(s[16]),d):sv(s,o.next)}}return null}function Iw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Aw(s,o){const c=10+s+1;if(c<o.length){const d=o[c],h=d[1].firstChild;if(null!==h)return sv(d,h)}return o[7]}function Nw(s,o,c){const d=nv(s,o);d&&function(s,o,c,d){hn(s)?s.removeChild(o,c,d):o.removeChild(c)}(s,d,o,c)}function ov(s,o,c,d,h,p,y){for(;null!=c;){const b=d[c.index],E=c.type;if(y&&0===o&&(b&&Xi(sn(b),d),c.flags|=4),64!=(64&c.flags))if(8&E)ov(s,o,c.child,d,h,p,!1),Mt(o,s,h,b,p);else if(32&E){const I=_(c,d);let R;for(;R=I();)Mt(o,s,h,R,p);Mt(o,s,h,b,p)}else 16&E?Iu(s,o,d,c,h,p):Mt(o,s,h,b,p);c=y?c.projectionNext:c.next}}function ih(s,o,c,d,h,p){ov(c,d,s.firstChild,o,h,p,!1)}function Iu(s,o,c,d,h,p){const y=c[16],E=y[6].projection[d.projection];if(Array.isArray(E))for(let I=0;I<E.length;I++)Mt(o,s,h,E[I],p);else ov(s,o,E,y[3],h,p,!0)}function l1(s,o,c){hn(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function Mw(s,o,c){hn(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function Rw(s,o,c){let d=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}c=h+1}}const c1="ng-template";function VM(s,o,c){let d=0;for(;d<s.length;){let h=s[d++];if(c&&"class"===h){if(h=s[d],-1!==Rw(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function kw(s){return 4===s.type&&s.value!==c1}function BM(s,o,c){return o===(4!==s.type||c?s.value:c1)}function UM(s,o,c){let d=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(Pg(s[o]))return o;return s.length}(h);let y=!1;for(let b=0;b<o.length;b++){const E=o[b];if("number"!=typeof E){if(!y)if(4&d){if(d=2|1&d,""!==E&&!BM(s,E,c)||""===E&&1===o.length){if(wa(d))return!1;y=!0}}else{const I=8&d?E:o[++b];if(8&d&&null!==s.attrs){if(!VM(s.attrs,I,c)){if(wa(d))return!1;y=!0}continue}const P=xw(8&d?"class":E,h,kw(s),c);if(-1===P){if(wa(d))return!1;y=!0;continue}if(""!==I){let L;L=P>p?"":h[P+1].toLowerCase();const q=8&d?L:null;if(q&&-1!==Rw(q,I,0)||2&d&&I!==L){if(wa(d))return!1;y=!0}}}}else{if(!y&&!wa(d)&&!wa(E))return!1;if(y&&wa(E))continue;y=!1,d=E|1&d}}return wa(d)||y}function wa(s){return 0==(1&s)}function xw(s,o,c,d){if(null===o)return-1;let h=0;if(d||!c){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,s)}function u1(s,o,c=!1){for(let d=0;d<o.length;d++)if(UM(s,o[d],c))return!0;return!1}function gL(s,o){e:for(let c=0;c<o.length;c++){const d=o[c];if(s.length===d.length){for(let h=0;h<s.length;h++)if(s[h]!==d[h])continue e;return!0}}return!1}function rh(s,o){return s?":not("+o.trim()+")":o}function am(s){let o=s[0],c=1,d=2,h="",p=!1;for(;c<s.length;){let y=s[c];if("string"==typeof y)if(2&d){const b=s[++c];h+="["+y+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!wa(y)&&(o+=rh(p,h),h=""),d=y,p=p||!wa(d);c++}return""!==h&&(o+=rh(p,h)),o}const Dt={};function h1(s){av(Nt(),Te(),gi()+s,Ka())}function av(s,o,c,d){if(!d)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Mo(o,p,c)}else{const p=s.preOrderHooks;null!==p&&ec(o,p,0,c)}el(c)}function lv(s,o){return s<<17|o<<2}function Vo(s){return s>>17&32767}function Or(s){return 2|s}function ml(s){return(131068&s)>>2}function Qf(s,o){return-131069&s|o<<2}function p1(s){return 1|s}function v1(s,o){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const h=c[d],p=c[d+1];if(-1!==p){const y=s.data[p];Ja(h),y.contentQueries(2,o[p],p)}}}function Xf(s,o,c,d,h,p,y,b,E,I){const R=o.blueprint.slice();return R[0]=h,R[2]=140|d,zl(R),R[3]=R[15]=s,R[8]=c,R[10]=y||s&&s[10],R[11]=b||s&&s[11],R[12]=E||s&&s[12]||null,R[9]=I||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function mc(s,o,c,d,h){let p=s.data[o];if(null===p)p=gv(s,o,c,d,h),dt.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=c,p.value=d,p.attrs=h;const y=Ps();p.injectorIndex=null===y?-1:y.injectorIndex}return Yi(p,!0),p}function gv(s,o,c,d,h){const p=eu(),y=Ya(),E=s.data[o]=function(s,o,c,d,h,p){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,c,o,d,h);return null===s.firstChild&&(s.firstChild=E),null!==p&&(y?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E)),E}function ep(s,o,c,d){if(0===c)return-1;const h=o.length;for(let p=0;p<c;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function cm(s,o,c){oa(o);try{const d=s.viewQuery;null!==d&&k1(1,d,c);const h=s.template;null!==h&&Vw(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&v1(s,o),s.staticViewQueries&&k1(2,s.viewQuery,c);const p=s.components;null!==p&&function(s,o){for(let c=0;c<o.length;c++)IL(s,o[c])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Js()}}function tp(s,o,c,d){const h=o[2];if(256==(256&h))return;oa(o);const p=Ka();try{zl(o),function(s){dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Vw(s,o,c,2,d);const y=3==(3&h);if(!p)if(y){const I=s.preOrderCheckHooks;null!==I&&Mo(o,I,null)}else{const I=s.preOrderHooks;null!==I&&ec(o,I,0,null),Bn(o,0)}if(function(s){for(let o=xe(s);null!==o;o=Re(o)){if(!o[2])continue;const c=o[9];for(let d=0;d<c.length;d++){const h=c[d],p=h[3];0==(1024&h[2])&&ql(p,1),h[2]|=1024}}}(o),function(s){for(let o=xe(s);null!==o;o=Re(o))for(let c=10;c<o.length;c++){const d=o[c],h=d[1];Kc(d)&&tp(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&v1(s,o),!p)if(y){const I=s.contentCheckHooks;null!==I&&Mo(o,I)}else{const I=s.contentHooks;null!==I&&ec(o,I,1),Bn(o,1)}!function(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const h=c[d];if(h<0)el(~h);else{const p=h,y=c[++d],b=c[++d];Kl(y,p),b(2,o[p])}}}finally{el(-1)}}(s,o);const b=s.components;null!==b&&function(s,o){for(let c=0;c<o.length;c++)SL(s,o[c])}(o,b);const E=s.viewQuery;if(null!==E&&k1(2,E,d),!p)if(y){const I=s.viewCheckHooks;null!==I&&Mo(o,I)}else{const I=s.viewHooks;null!==I&&ec(o,I,2),Bn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ql(o[3],-1))}finally{Js()}}function QM(s,o,c,d){const h=o[10],p=!Ka(),y=Yc(o);try{p&&!y&&h.begin&&h.begin(),y&&cm(s,o,d),tp(s,o,c,d)}finally{p&&!y&&h.end&&h.end()}}function Vw(s,o,c,d,h){const p=gi(),y=2&d;try{el(-1),y&&o.length>20&&av(s,o,20,Ka()),c(d,h)}finally{el(p)}}function mv(s,o,c){if(rf(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,c[p],p)}}}function _v(s,o,c){!Wl()||(function(s,o,c,d){const h=c.directiveStart,p=c.directiveEnd;s.firstCreatePass||nc(c,o),Xi(d,o);const y=c.initialInputs;for(let b=h;b<p;b++){const E=s.data[b],I=us(E);I&&A1(o,c,E);const R=Cn(o,s,b,c);Xi(R,o),null!==y&&cR(0,b-h,R,E,0,y),I&&(Bi(c.index,o)[8]=R)}}(s,o,c,Ar(c,o)),128==(128&c.flags)&&function(s,o,c){const d=c.directiveStart,h=c.directiveEnd,y=c.index,b=dt.lFrame.currentDirectiveIndex;try{el(y);for(let E=d;E<h;E++){const I=s.data[E],R=o[E];Ql(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&T1(I,R)}}finally{el(-1),Ql(b)}}(s,o,c))}function um(s,o,c=Ar){const d=o.localNames;if(null!==d){let h=o.index+1;for(let p=0;p<d.length;p+=2){const y=d[p+1],b=-1===y?c(o,s):s[y];s[h++]=b}}}function Bw(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=sh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function sh(s,o,c,d,h,p,y,b,E,I){const R=20+d,P=R+h,L=function(s,o){const c=[];for(let d=0;d<o;d++)c.push(d<s?null:Dt);return c}(R,P),q="function"==typeof I?I():I;return L[1]={type:s,blueprint:L,template:c,queries:null,viewQuery:b,declTNode:o,data:L.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:q,incompleteFirstPass:!1}}function vv(s,o,c,d){const h=O1(o);null===c?h.push(d):(h.push(c),s.firstCreatePass&&hR(s).push(d,h.length-1))}function Uw(s,o,c){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(o,h):c[d]=[o,h]}return c}function ao(s,o,c,d,h,p,y,b){const E=Ar(o,c);let R,I=o.inputs;!b&&null!=I&&(R=I[d])?(fR(s,c,R,d,h),Ll(o)&&function(s,o){const c=Bi(o,s);16&c[2]||(c[2]|=64)}(c,o.index)):3&o.type&&(d=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,o.value||"",d):h,hn(p)?p.setProperty(E,d,h):eo(d)||(E.setProperty?E.setProperty(d,h):E[d]=h))}function oh(s,o,c,d){let h=!1;if(Wl()){const p=function(s,o,c){const d=s.directiveRegistry;let h=null;if(d)for(let p=0;p<d.length;p++){const y=d[p];u1(c,y.selectors,!1)&&(h||(h=[]),nt(nc(c,o),s,y.type),us(y)?(S1(s,c),h.unshift(y)):h.push(y))}return h}(s,o,c),y=null===d?null:{"":-1};if(null!==p){h=!0,I1(c,s.data.length,p.length);for(let R=0;R<p.length;R++){const P=p[R];P.providersResolver&&P.providersResolver(P)}let b=!1,E=!1,I=ep(s,o,p.length,null);for(let R=0;R<p.length;R++){const P=p[R];c.mergedAttrs=ru(c.mergedAttrs,P.hostAttrs),dm(s,c,o,I,P),lR(I,P,y),null!==P.contentQueries&&(c.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(c.flags|=128);const L=P.type.prototype;!b&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),b=!0),!E&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),E=!0),I++}!function(s,o){const d=o.directiveEnd,h=s.data,p=o.attrs,y=[];let b=null,E=null;for(let I=o.directiveStart;I<d;I++){const R=h[I],P=R.inputs,L=null===p||kw(o)?null:uR(P,p);y.push(L),b=Uw(P,I,b),E=Uw(R.outputs,I,E)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=b,o.outputs=E}(s,c)}y&&function(s,o,c){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=c[o[h+1]];if(null==p)throw new Ae("301",`Export of name '${o[h+1]}' not found!`);d.push(o[h],p)}}}(c,d,y)}return c.mergedAttrs=ru(c.mergedAttrs,c.attrs),h}function D1(s,o,c,d,h,p){const y=p.hostBindings;if(y){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const E=~o.index;(function(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(b)!=E&&b.push(E),b.push(d,h,y)}}function T1(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function S1(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function lR(s,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=s;us(o)&&(c[""]=s)}}function I1(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function dm(s,o,c,d,h){s.data[d]=h;const p=h.factory||(h.factory=ks(h.type)),y=new nl(p,us(h),null);s.blueprint[d]=y,c[d]=y,D1(s,o,0,d,ep(s,c,h.hostVars,Dt),h)}function A1(s,o,c){const d=Ar(o,s),h=Bw(c),p=s[10],y=np(s,Xf(s,h,null,c.onPush?64:16,d,o,p,p.createRenderer(d,c),null,null));s[o.index]=y}function hm(s,o,c,d,h,p,y){if(null==p)hn(s)?s.removeAttribute(o,h,c):o.removeAttribute(h);else{const b=null==y?le(p):y(p,d||"",h);hn(s)?s.setAttribute(o,h,b,c):c?o.setAttributeNS(c,h,b):o.setAttribute(h,b)}}function cR(s,o,c,d,h,p){const y=p[o];if(null!==y){const b=d.setInput;for(let E=0;E<y.length;){const I=y[E++],R=y[E++],P=y[E++];null!==b?d.setInput(c,P,I,R):c[R]=P}}}function uR(s,o){let c=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===c&&(c=[]),c.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return c}function jw(s,o,c,d){return new Array(s,!0,!1,o,null,0,d,c,null,null)}function SL(s,o){const c=Bi(o,s);if(Kc(c)){const d=c[1];80&c[2]?tp(d,c,d.template,c[8]):c[5]>0&&$w(c)}}function $w(s){for(let d=xe(s);null!==d;d=Re(d))for(let h=10;h<d.length;h++){const p=d[h];if(1024&p[2]){const y=p[1];tp(y,p,y.template,p[8])}else p[5]>0&&$w(p)}const c=s[1].components;if(null!==c)for(let d=0;d<c.length;d++){const h=Bi(c[d],s);Kc(h)&&h[5]>0&&$w(h)}}function IL(s,o){const c=Bi(o,s),d=c[1];(function(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(d,c),cm(d,c,c[8])}function np(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function R1(s){for(;s;){s[2]|=64;const o=x(s);if(ds(s)&&!o)return s;s=o}return null}function Gw(s,o,c){const d=o[10];d.begin&&d.begin();try{tp(s,o,s.template,c)}catch(h){throw F1(o,h),h}finally{d.end&&d.end()}}function zw(s){!function(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],d=em(c),h=d[1];QM(h,d,h.template,c)}}(s[8])}function k1(s,o,c){Ja(0),o(s,c)}const NL=(()=>Promise.resolve(null))();function O1(s){return s[7]||(s[7]=[])}function hR(s){return s.cleanup||(s.cleanup=[])}function P1(s,o,c){return(null===s||us(s))&&(c=function(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(c[o.index])),c[11]}function F1(s,o){const c=s[9],d=c?c.get(pl,null):null;d&&d.handleError(o)}function fR(s,o,c,d,h){for(let p=0;p<c.length;){const y=c[p++],b=c[p++],E=o[y],I=s.data[y];null!==I.setInput?I.setInput(E,h,d,b):E[b]=h}}function Dv(s,o,c){let d=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const b=o[y];"number"==typeof b?p=b:1==p?h=K(h,b):2==p&&(d=K(d,b+": "+o[++y]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=h:s.classesWithoutHost=h}const fm=new Mn("INJECTOR",-1);class pR{get(o,c=Vt){if(c===Vt){const d=new Error(`NullInjectorError: No provider for ${J(o)}!`);throw d.name="NullInjectorError",d}return c}}const ip=new Mn("Set Injector scope."),pm={},Ww={};let gm;function Tv(){return void 0===gm&&(gm=new pR),gm}function Sv(s,o=null,c=null,d){return new Yw(s,c,o||Tv(),d)}class Yw{constructor(o,c,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];c&&Ls(c,b=>this.processProvider(b,o,c)),Ls([o],b=>this.processInjectorType(b,[],p)),this.records.set(fm,_c(void 0,this));const y=this.records.get(ip);this.scope=null!=y?y.value:null,this.source=h||("object"==typeof o?null:J(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=Vt,d=Ke.Default){this.assertNotDestroyed();const h=mt(this),p=lr(void 0);try{if(!(d&Ke.SkipSelf)){let b=this.records.get(o);if(void 0===b){const E=("function"==typeof(s=o)||"object"==typeof s&&s instanceof Mn)&&fi(o);b=E&&this.injectableDefInScope(E)?_c(mm(o),pm):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(d&Ke.Self?Tv():this.parent).get(o,c=d&Ke.Optional&&c===Vt?null:c)}catch(y){if("NullInjectorError"===y.name){if((y[ii]=y[ii]||[]).unshift(J(o)),h)throw y;return _s(y,o,"R3InjectorError",this.source)}throw y}finally{lr(p),mt(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(J(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,c,d){if(!(o=W(o)))return!1;let h=as(o);const p=null==h&&o.ngModule||void 0,y=void 0===p?o:p,b=-1!==d.indexOf(y);if(void 0!==p&&(h=as(p)),null==h)return!1;if(null!=h.imports&&!b){let R;d.push(y);try{Ls(h.imports,P=>{this.processInjectorType(P,c,d)&&(void 0===R&&(R=[]),R.push(P))})}finally{}if(void 0!==R)for(let P=0;P<R.length;P++){const{ngModule:L,providers:q}=R[P];Ls(q,ee=>this.processProvider(ee,L,q||z))}}this.injectorDefTypes.add(y);const E=ks(y)||(()=>new y);this.records.set(y,_c(E,pm));const I=h.providers;if(null!=I&&!b){const R=o;Ls(I,P=>this.processProvider(P,R,I))}return void 0!==p&&void 0!==o.providers}processProvider(o,c,d){let h=rp(o=W(o))?o:W(o&&o.provide);const p=L1(s=o)?_c(void 0,s.useValue):_c(ah(s),pm);var s;if(rp(o)||!0!==o.multi)this.records.get(h);else{let y=this.records.get(h);y||(y=_c(void 0,pm,!0),y.factory=()=>ac(y.multi),this.records.set(h,y)),h=o,y.multi.push(o)}this.records.set(h,p)}hydrate(o,c){return c.value===pm&&(c.value=Ww,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(s=c.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const c=W(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function mm(s){const o=fi(s),c=null!==o?o.factory:ks(s);if(null!==c)return c;if(s instanceof Mn)throw new Error(`Token ${J(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const d=so(o,"?");throw new Error(`Can't resolve all parameters for ${J(s)}: (${d.join(", ")}).`)}const c=function(s){const o=s&&(s[Rs]||s[Si]);if(o){const c=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Error("unreachable")}function ah(s,o,c){let d;if(rp(s)){const h=W(s);return ks(h)||mm(h)}if(L1(s))d=()=>W(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...ac(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))d=()=>Rn(W(s.useExisting));else{const h=W(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return ks(h)||mm(h);d=()=>new h(...ac(s.deps))}return d}function _c(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function L1(s){return null!==s&&"object"==typeof s&&gs in s}function rp(s){return"function"==typeof s}const Iv=function(s,o,c){return function(s,o=null,c=null,d){const h=Sv(s,o,c,d);return h._resolveInjectorDefTypes(),h}({name:c},o,s,c)};let qe=(()=>{class s{static create(c,d){return Array.isArray(c)?Iv(c,d,""):Iv(c.providers,c.parent,c.name||"")}}return s.THROW_IF_NOT_FOUND=Vt,s.NULL=new pR,s.\u0275prov=wn({token:s,providedIn:"any",factory:()=>Rn(fm)}),s.__NG_ELEMENT_ID__=-1,s})();function SR(s,o){iu(em(s)[1],mn())}function Pv(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;o;){let h;if(us(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(c){d.push(h);const y=s;y.inputs=iC(s.inputs),y.declaredInputs=iC(s.declaredInputs),y.outputs=iC(s.outputs);const b=h.hostBindings;b&&AR(s,b);const E=h.viewQuery,I=h.contentQueries;if(E&&Xr(s,E),I&&wm(s,I),ne(s.inputs,h.inputs),ne(s.declaredInputs,h.declaredInputs),ne(s.outputs,h.outputs),us(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const b=p[y];b&&b.ngInherit&&b(s),b===Pv&&(c=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,c=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=ru(h.hostAttrs,c=ru(c,h.hostAttrs))}}(d)}function iC(s){return s===Q?{}:s===z?[]:s}function Xr(s,o){const c=s.viewQuery;s.viewQuery=c?(d,h)=>{o(d,h),c(d,h)}:o}function wm(s,o){const c=s.contentQueries;s.contentQueries=c?(d,h,p)=>{o(d,h,p),c(d,h,p)}:o}function AR(s,o){const c=s.hostBindings;s.hostBindings=c?(d,h)=>{o(d,h),c(d,h)}:o}let uh=null;function vc(){if(!uh){const s=bt.Symbol;if(s&&s.iterator)uh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const d=o[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(uh=d)}}}return uh}class co{constructor(o){this.wrapped=o}static wrap(o){return new co(o)}static unwrap(o){return co.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof co}}function dh(s){return!!Lv(s)&&(Array.isArray(s)||!(s instanceof Map)&&vc()in s)}function Lv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function vl(s,o,c){return s[o]=c}function Pr(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function bc(s,o,c,d){const h=Pr(s,o,c);return Pr(s,o+1,d)||h}function Dm(s,o,c,d){const h=Te();return Pr(h,Yr(),o)&&(Nt(),function(s,o,c,d,h,p){const y=Ar(s,o);hm(o[11],y,p,s.value,c,d,h)}(Fn(),h,s,o,c,d)),Dm}function Ou(s,o,c,d){return Pr(s,Yr(),c)?o+le(c)+d:Dt}function wc(s,o,c,d,h,p,y,b,E,I){const P=function(s,o,c,d,h,p){const y=bc(s,o,c,d);return bc(s,o+2,h,p)||y}(s,Zr(),c,h,y,E);return Ki(4),P?o+le(c)+d+le(h)+p+le(y)+b+le(E)+I:Dt}function Hv(s,o,c,d,h,p,y,b){const E=Te(),I=Nt(),R=s+20,P=I.firstCreatePass?function(s,o,c,d,h,p,y,b,E){const I=o.consts,R=mc(o,s,4,y||null,Xn(I,b));oh(o,c,R,Xn(I,E)),iu(o,R);const P=R.tViews=sh(2,R,d,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,I);return null!==o.queries&&(o.queries.template(o,R),P.queries=o.queries.embeddedTView(R)),R}(R,I,E,o,c,d,h,p,y):I.data[R];Yi(P,!1);const L=E[11].createComment("");Kf(I,E,L,P),Xi(L,E),np(E,E[R]=jw(L,E,L,P)),fr(P)&&_v(I,E,P),null!=y&&um(E,P,b)}function J1(s){return Ao(dt.lFrame.contextLView,20+s)}function xm(s,o=Ke.Default){const c=Te();return null===c?Rn(s,o):la(mn(),c,W(s),o)}function Ta(s,o,c){const d=Te();return Pr(d,Yr(),o)&&ao(Nt(),Fn(),d,s,o,d[11],c,!1),Ta}function gp(s,o,c,d,h){const y=h?"class":"style";fR(s,c,o.inputs[y],y,d)}function mp(s,o,c,d){const h=Te(),p=Nt(),y=20+s,b=h[11],E=h[y]=Xd(b,o,dt.lFrame.currentNamespace),I=p.firstCreatePass?function(s,o,c,d,h,p,y){const b=o.consts,I=mc(o,s,2,h,Xn(b,p));return oh(o,c,I,Xn(b,y)),null!==I.attrs&&Dv(I,I.attrs,!1),null!==I.mergedAttrs&&Dv(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(y,p,h,0,o,c,d):p.data[y];Yi(I,!0);const R=I.mergedAttrs;null!==R&&Ef(b,E,R);const P=I.classes;null!==P&&Mw(b,E,P);const L=I.styles;null!==L&&l1(b,E,L),64!=(64&I.flags)&&Kf(p,h,E,I),0===dt.lFrame.elementDepthCount&&Xi(E,h),dt.lFrame.elementDepthCount++,fr(I)&&(_v(p,h,I),mv(p,I,h)),null!==d&&um(h,I)}function Kv(){let s=mn();Ya()?Zl():(s=s.parent,Yi(s,!1));const o=s;dt.lFrame.elementDepthCount--;const c=Nt();c.firstCreatePass&&(iu(c,s),rf(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&gp(c,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&gp(c,o,Te(),o.stylesWithoutHost,!1)}function Gn(s,o,c,d){mp(s,o,c,d),Kv()}function pC(s,o,c){const d=Te(),h=Nt(),p=s+20,y=h.firstCreatePass?function(s,o,c,d,h){const p=o.consts,y=Xn(p,d),b=mc(o,s,8,"ng-container",y);return null!==y&&Dv(b,y,!0),oh(o,c,b,Xn(p,h)),null!==o.queries&&o.queries.elementStart(o,b),b}(p,h,d,o,c):h.data[p];Yi(y,!0);const b=d[p]=d[11].createComment("");Kf(h,d,b,y),Xi(b,d),fr(y)&&(_v(h,d,y),mv(h,y,d)),null!=c&&um(d,y)}function _h(){let s=mn();const o=Nt();Ya()?Zl():(s=s.parent,Yi(s,!1)),o.firstCreatePass&&(iu(o,s),rf(s)&&o.queries.elementEnd(s))}function _p(s,o,c){pC(s,o,c),_h()}function dS(){return Te()}function Qv(s){return!!s&&"function"==typeof s.then}function hS(s){return!!s&&"function"==typeof s.subscribe}const gC=hS;function mC(s,o,c,d){const h=Te(),p=Nt(),y=mn();return Cc(p,h,h[11],y,s,o,!!c,d),mC}function _C(s,o){const c=mn(),d=Te(),h=Nt();return Cc(h,d,P1(Jl(h.data),c,d),c,s,o,!1),_C}function Cc(s,o,c,d,h,p,y,b){const E=fr(d),R=s.firstCreatePass&&hR(s),P=o[8],L=O1(o);let q=!0;if(3&d.type||b){const oe=Ar(d,o),ke=b?b(oe):oe,be=L.length,Xe=b?ht=>b(sn(ht[d.index])):d.index;if(hn(c)){let ht=null;if(!b&&E&&(ht=function(s,o,c,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===c&&h[p+1]===d){const b=o[7],E=h[p+2];return b.length>E?b[E]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,d.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=p,ht.__ngLastListenerFn__=p,q=!1;else{p=Jv(d,o,P,p,!1);const Zt=c.listen(ke,h,p);L.push(p,Zt),R&&R.push(h,Xe,be,be+1)}}else p=Jv(d,o,P,p,!0),ke.addEventListener(h,p,y),L.push(p),R&&R.push(h,Xe,be,y)}else p=Jv(d,o,P,p,!1);const ee=d.outputs;let ge;if(q&&null!==ee&&(ge=ee[h])){const oe=ge.length;if(oe)for(let ke=0;ke<oe;ke+=2){const ki=o[ge[ke]][ge[ke+1]].subscribe(p),Ss=L.length;L.push(p,ki),R&&R.push(h,d.index,Ss,-(Ss+1))}}}function yC(s,o,c,d){try{return!1!==c(d)}catch(h){return F1(s,h),!1}}function Jv(s,o,c,d,h){return function p(y){if(y===Function)return d;const b=2&s.flags?Bi(s.index,o):o;0==(32&o[2])&&R1(b);let E=yC(o,0,d,y),I=p.__ngNextListenerFn__;for(;I;)E=yC(o,0,I,y)&&E,I=I.__ngNextListenerFn__;return h&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function vC(s=1){return function(s){return(dt.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,dt.lFrame.contextLView))[8]}(s)}function yp(s,o){let c=null;const d=function(s){const o=s.attrs;if(null!=o){const c=o.indexOf(5);if(0==(1&c))return o[c+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===d?u1(s,p,!0):gL(d,p))return h}else c=h}return c}function fS(s){const o=Te()[16][6];if(!o.projection){const d=o.projection=so(s?s.length:1,null),h=d.slice();let p=o.child;for(;null!==p;){const y=s?yp(p,s):0;null!==y&&(h[y]?h[y].projectionNext=p:d[y]=p,h[y]=p),p=p.next}}}function pS(s,o=0,c){const d=Te(),h=Nt(),p=mc(h,20+s,16,null,c||null);null===p.projection&&(p.projection=o),Zl(),64!=(64&p.flags)&&function(s,o,c){Iu(o[11],0,o,c,n1(s,c,o),rv(c.parent||o[6],c,o))}(h,d,p)}function Xv(s,o,c){return eb(s,"",o,"",c),Xv}function eb(s,o,c,d,h){const p=Te(),y=Ou(p,o,c,d);return y!==Dt&&ao(Nt(),Fn(),p,s,y,p[11],h,!1),eb}function vp(s,o,c,d,h){const p=s[c+1],y=null===o;let b=d?Vo(p):ml(p),E=!1;for(;0!==b&&(!1===E||y);){const R=s[b+1];sb(s[b],o)&&(E=!0,s[b+1]=d?p1(R):Or(R)),b=d?Vo(R):ml(R)}E&&(s[c+1]=d?Or(p):p1(p))}function sb(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&al(s,o)>=0}const Ni={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function DC(s){return s.substring(Ni.key,Ni.keyEnd)}function mS(s,o){const c=Ni.textEnd;return c===o?-1:(o=Ni.keyEnd=function(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,Ni.key=o,c),bp(s,o,c))}function bp(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function ob(s,o,c){return Ho(s,o,c,!1),ob}function Sa(s,o){return Ho(s,o,null,!0),Sa}function ab(s){uo(mi,js,s,!0)}function js(s,o){for(let c=function(s){return function(s){Ni.key=0,Ni.keyEnd=0,Ni.value=0,Ni.valueEnd=0,Ni.textEnd=s.length}(s),mS(s,bp(s,0,Ni.textEnd))}(o);c>=0;c=mS(o,c))mi(s,DC(o),!0)}function Ho(s,o,c,d){const h=Te(),p=Nt(),y=Ki(2);p.firstUpdatePass&&NC(p,s,y,d),o!==Dt&&Pr(h,y,o)&&kC(p,p.data[gi()],h,h[11],s,h[y+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=J(ma(s)))),s}(o,c),d,y)}function uo(s,o,c,d){const h=Nt(),p=Ki(2);h.firstUpdatePass&&NC(h,null,p,d);const y=Te();if(c!==Dt&&Pr(y,p,c)){const b=h.data[gi()];if(Fu(b,d)&&!Lm(h,p)){let E=d?b.classesWithoutHost:b.stylesWithoutHost;null!==E&&(c=K(E,c||"")),gp(h,b,y,c,d)}else!function(s,o,c,d,h,p,y,b){h===Dt&&(h=z);let E=0,I=0,R=0<h.length?h[0]:null,P=0<p.length?p[0]:null;for(;null!==R||null!==P;){const L=E<h.length?h[E+1]:void 0,q=I<p.length?p[I+1]:void 0;let ge,ee=null;R===P?(E+=2,I+=2,L!==q&&(ee=P,ge=q)):null===P||null!==R&&R<P?(E+=2,ee=R):(I+=2,ee=P,ge=q),null!==ee&&kC(s,o,c,d,ee,ge,y,b),R=E<h.length?h[E]:null,P=I<p.length?p[I]:null}}(h,b,y,y[11],y[p+1],y[p+1]=function(s,o,c){if(null==c||""===c)return z;const d=[],h=ma(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(d,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(d,p,h[p]);else"string"==typeof h&&o(d,h);return d}(s,o,c),d,p)}}function Lm(s,o){return o>=s.expandoStartIndex}function NC(s,o,c,d){const h=s.data;if(null===h[c+1]){const p=h[gi()],y=Lm(s,c);Fu(p,d)&&null===o&&!y&&(o=!1),o=function(s,o,c,d){const h=Jl(s);let p=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(c=wp(c=yh(null,s,o,c,d),o.attrs,d),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(c=yh(h,s,o,c,d),null===p){let E=function(s,o,c){const d=c?o.classBindings:o.styleBindings;if(0!==ml(d))return s[Vo(d)]}(s,o,d);void 0!==E&&Array.isArray(E)&&(E=yh(null,s,o,E[1],d),E=wp(E,o.attrs,d),function(s,o,c,d){s[Vo(c?o.classBindings:o.styleBindings)]=d}(s,o,d,E))}else p=function(s,o,c){let d;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)d=wp(d,s[p].hostAttrs,c);return wp(d,o.attrs,c)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),c}(h,p,o,d),function(s,o,c,d,h,p){let y=p?o.classBindings:o.styleBindings,b=Vo(y),E=ml(y);s[d]=c;let R,I=!1;if(Array.isArray(c)){const P=c;R=P[1],(null===R||al(P,R)>0)&&(I=!0)}else R=c;if(h)if(0!==E){const L=Vo(s[b+1]);s[d+1]=lv(L,b),0!==L&&(s[L+1]=Qf(s[L+1],d)),s[b+1]=function(s,o){return 131071&s|o<<17}(s[b+1],d)}else s[d+1]=lv(b,0),0!==b&&(s[b+1]=Qf(s[b+1],d)),b=d;else s[d+1]=lv(E,0),0===b?b=d:s[E+1]=Qf(s[E+1],d),E=d;I&&(s[d+1]=Or(s[d+1])),vp(s,R,d,!0),vp(s,R,d,!1),function(s,o,c,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&al(p,o)>=0&&(c[d+1]=p1(c[d+1]))}(o,R,s,d,p),y=lv(b,E),p?o.classBindings=y:o.styleBindings=y}(h,p,o,c,y,d)}}function yh(s,o,c,d,h){let p=null;const y=c.directiveEnd;let b=c.directiveStylingLast;for(-1===b?b=c.directiveStart:b++;b<y&&(p=o[b],d=wp(d,p.hostAttrs,h),p!==s);)b++;return null!==s&&(c.directiveStylingLast=b),d}function wp(s,o,c){const d=c?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),mi(s,y,!!c||o[++p]))}return void 0===s?null:s}function kC(s,o,c,d,h,p,y,b){if(!(3&o.type))return;const E=s.data,I=E[b+1];Bm(function(s){return 1==(1&s)}(I)?Vm(E,o,c,h,ml(I),y):void 0)||(Bm(p)||function(s){return 2==(2&s)}(I)&&(p=Vm(E,null,c,h,b,y)),function(s,o,c,d,h){const p=hn(s);if(o)h?p?s.addClass(c,d):c.classList.add(d):p?s.removeClass(c,d):c.classList.remove(d);else{let y=-1===d.indexOf("-")?void 0:v.DashCase;if(null==h)p?s.removeStyle(c,d,y):c.style.removeProperty(d);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),y|=v.Important),p?s.setStyle(c,d,h,y):c.style.setProperty(d,h,b?"important":"")}}}(d,y,sa(gi(),c),h,p))}function Vm(s,o,c,d,h,p){const y=null===o;let b;for(;h>0;){const E=s[h],I=Array.isArray(E),R=I?E[1]:E,P=null===R;let L=c[h+1];L===Dt&&(L=P?z:void 0);let q=P?Ln(L,d):R===d?L:void 0;if(I&&!Bm(q)&&(q=Ln(E,d)),Bm(q)&&(b=q,y))return b;const ee=s[h+1];h=y?Vo(ee):ml(ee)}if(null!==o){let E=p?o.residualClasses:o.residualStyles;null!=E&&(b=Ln(E,d))}return b}function Bm(s){return void 0!==s}function Fu(s,o){return 0!=(s.flags&(o?16:32))}function xC(s,o=""){const c=Te(),d=Nt(),h=s+20,p=d.firstCreatePass?mc(d,h,1,o,null):d.data[h],y=c[h]=di(c[11],o);Kf(d,c,y,p),Yi(p,!1)}function ub(s){return Um("",s,""),ub}function Um(s,o,c){const d=Te(),h=Ou(d,s,o,c);return h!==Dt&&function(s,o,c){const d=sa(o,s);ba(s[11],d,c)}(d,gi(),h),Um}function VC(s,o,c,d,h,p,y,b,E){uo(mi,js,wc(Te(),s,o,c,d,h,p,y,b,E),!0)}function jC(s,o,c){const d=Te();return Pr(d,Yr(),o)&&ao(Nt(),Fn(),d,s,o,d[11],c,!0),jC}function $C(s,o,c){const d=Te();if(Pr(d,Yr(),o)){const p=Nt(),y=Fn();ao(p,y,d,s,o,P1(Jl(p.data),y,d),c,!0)}return $C}const bh=void 0;var KR=["en",[["a","p"],["AM","PM"],bh],[["AM","PM"],bh,bh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bh,"{1} 'at' {0}",bh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let wh={};function Vu(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=Rt(o);if(c)return c;const d=o.split("-")[0];if(c=Rt(d),c)return c;if("en"===d)return KR;throw new Error(`Missing locale data for the locale "${s}".`)}function nr(s){return Vu(s)[at.PluralCase]}function Rt(s){return s in wh||(wh[s]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[s]),wh[s]}var at=(()=>((at=at||{})[at.LocaleId=0]="LocaleId",at[at.DayPeriodsFormat=1]="DayPeriodsFormat",at[at.DayPeriodsStandalone=2]="DayPeriodsStandalone",at[at.DaysFormat=3]="DaysFormat",at[at.DaysStandalone=4]="DaysStandalone",at[at.MonthsFormat=5]="MonthsFormat",at[at.MonthsStandalone=6]="MonthsStandalone",at[at.Eras=7]="Eras",at[at.FirstDayOfWeek=8]="FirstDayOfWeek",at[at.WeekendRange=9]="WeekendRange",at[at.DateFormat=10]="DateFormat",at[at.TimeFormat=11]="TimeFormat",at[at.DateTimeFormat=12]="DateTimeFormat",at[at.NumberSymbols=13]="NumberSymbols",at[at.NumberFormats=14]="NumberFormats",at[at.CurrencyCode=15]="CurrencyCode",at[at.CurrencySymbol=16]="CurrencySymbol",at[at.CurrencyName=17]="CurrencyName",at[at.Currencies=18]="Currencies",at[at.Directionality=19]="Directionality",at[at.PluralCase=20]="PluralCase",at[at.ExtraData=21]="ExtraData",at))();const $m=["zero","one","two","few","many"],hb="en-US",Ec={marker:"element"},fb={marker:"ICU"};var Bt=(()=>((Bt=Bt||{})[Bt.SHIFT=2]="SHIFT",Bt[Bt.APPEND_EAGERLY=1]="APPEND_EAGERLY",Bt[Bt.COMMENT=2]="COMMENT",Bt))();let Dc=hb;function bi(s){(function(s,o){null==s&&Jt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(Dc=s.toLowerCase().replace(/_/g,"-"))}function pb(s,o,c){const d=o.insertBeforeIndex,h=Array.isArray(d)?d[0]:d;return null===h?Yf(s,0,c):sn(c[h])}function GC(s,o,c,d,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let y=d,b=null;if(3&o.type||(b=y,y=h),null!==y&&0==(2&o.flags))for(let E=1;E<p.length;E++)Su(s,y,c[p[E]],b,!1)}}function Dp(s,o){if(s.push(o),s.length>1)for(let c=s.length-2;c>=0;c--){const d=s[c];Bu(d)||gb(d,o)&&null===NS(d)&&it(d,o.index)}}function Bu(s){return!(64&s.type)}function gb(s,o){return Bu(o)||s.index>o.index}function NS(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function it(s,o){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=o:(o1(pb,GC),s.insertBeforeIndex=o)}function Aa(s,o){const c=s.data[o];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function Tp(s,o,c){const d=gv(s,c,64,null,null);return Dp(o,d),d}function zm(s,o){const c=o[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function mb(s){return s>>>17}function _b(s){return(131070&s)>>>1}let Ch=0,Sp=0;function Vr(s,o,c,d){const h=c[11];let y,p=null;for(let b=0;b<o.length;b++){const E=o[b];if("string"==typeof E){const I=o[++b];null===c[I]&&(c[I]=di(h,E))}else if("number"==typeof E)switch(1&E){case 0:const I=mb(E);let R,P;if(null===p&&(p=I,y=nv(h,d)),I===p?(R=d,P=y):(R=null,P=sn(c[I])),null!==P){const ge=_b(E);Su(h,P,c[ge],R,!1);const ke=Aa(s,ge);if(null!==ke&&"object"==typeof ke){const be=zm(ke,c);null!==be&&Vr(s,ke.create[be],c,c[ke.anchorIdx])}}break;case 1:const q=o[++b],ee=o[++b];hm(h,sa(E>>>1,c),null,null,q,ee,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${E}"`)}else switch(E){case fb:const I=o[++b],R=o[++b];null===c[R]&&Xi(c[R]=qf(h,I),c);break;case Ec:const P=o[++b],L=o[++b];null===c[L]&&Xi(c[L]=Xd(h,P,null),c)}}}function qC(s,o,c,d,h){for(let p=0;p<c.length;p++){const y=c[p],b=c[++p];if(y&h){let E="";for(let I=p+1;I<=p+b;I++){const R=c[I];if("string"==typeof R)E+=R;else if("number"==typeof R)if(R<0)E+=le(o[d-R]);else{const P=R>>>2;switch(3&R){case 1:const L=c[++I],q=c[++I],ee=s.data[P];"string"==typeof ee?hm(o[11],o[P],null,ee,L,E,q):ao(s,ee,o,L,E,o[11],q,!1);break;case 0:const ge=o[P];null!==ge&&ba(o[11],ge,E);break;case 2:XR(s,Aa(s,P),o,E);break;case 3:zn(s,Aa(s,P),d,o)}}}}else{const E=c[p+1];if(E>0&&3==(3&E)){const R=Aa(s,E>>>2);o[R.currentCaseLViewIndex]<0&&zn(s,R,d,o)}}p+=b}}function zn(s,o,c,d){let h=d[o.currentCaseLViewIndex];if(null!==h){let p=Ch;h<0&&(h=d[o.currentCaseLViewIndex]=~h,p=-1),qC(s,d,o.update[h],c,p)}}function XR(s,o,c,d){const h=function(s,o){let c=s.cases.indexOf(o);if(-1===c)switch(s.type){case 1:{const d=function(s,o){const c=nr(o)(parseInt(s,10)),d=$m[c];return void 0!==d?d:"other"}(o,Dc);c=s.cases.indexOf(d),-1===c&&"other"!==d&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(o,d);if(zm(o,c)!==h&&(WC(s,o,c),c[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const y=c[o.anchorIdx];y&&Vr(s,o.create[h],c,y)}}function WC(s,o,c){let d=zm(o,c);if(null!==d){const h=o.remove[d];for(let p=0;p<h.length;p++){const y=h[p];if(y>0){const b=sa(y,c);null!==b&&Nw(c[11],b)}else WC(s,Aa(s,~y),c)}}}function ek(){const s=[];let c,d,o=-1;function p(b,E){o=0;const I=zm(b,E);d=null!==I?b.remove[I]:z}function y(){if(o<d.length){const b=d[o++];return b>0?c[b]:(s.push(o,d),p(c[1].data[~b],c),y())}return 0===s.length?null:(d=s.pop(),o=s.pop(),y())}return function(b,E){for(c=E;s.length;)s.pop();return p(b.value,E),y}}const vb=/\ufffd(\d+):?\d*\ufffd/gi,kS=/\ufffd(\d+)\ufffd/,xS=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,nk=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ik=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Km=/\uE500/g;function OS(s,o,c,d,h,p,y){const b=ep(s,d,1,null);let E=b<<Bt.SHIFT,I=Ps();o===I&&(I=null),null===I&&(E|=Bt.APPEND_EAGERLY),y&&(E|=Bt.COMMENT,function(s){void 0===g&&(g=s())}(ek)),h.push(E,null===p?"":p);const R=gv(s,b,y?32:1,null===p?"":p,null);Dp(c,R);const P=R.index;return Yi(R,!1),null!==I&&o!==I&&function(s,o){let c=s.insertBeforeIndex;null===c?(o1(pb,GC),c=s.insertBeforeIndex=[null,o]):(function(s,o,c){s!=o&&Jt(c,s,o,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(o))}(I,P),R}function PS(s,o,c,d,h,p,y){const b=y.match(vb),E=OS(s,o,c,p,d,b?null:y,!1);b&&zs(h,y,E.index,null,0,null)}function zs(s,o,c,d,h,p){const y=s.length,b=y+1;s.push(null,null);const E=y+2,I=o.split(vb);let R=0;for(let P=0;P<I.length;P++){const L=I[P];if(1&P){const q=h+parseInt(L,10);s.push(-1-q),R|=Eh(q)}else""!==L&&s.push(L)}return s.push(c<<2|(d?1:0)),d&&s.push(d,p),s[y]=R,s[b]=s.length-E,R}function Eh(s){return 1<<Math.min(s,31)}function Qm(s){let o,p,c="",d=0,h=!1;for(;null!==(o=nk.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(d=o.index,h=!1):(c+=s.substring(d,o.index+o[0].length),p=o[1],h=!0);return c+=s.substr(d),c}function Cb(s,o,c,d,h,p){let y=0;const b={type:h.type,currentCaseLViewIndex:ep(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,c){s.push(Eh(o.mainBinding),2,-1-o.mainBinding,c<<2|2)})(c,h,p),function(s,o,c){const d=s.data[o];null===d?s.data[o]=c:d.value=c}(s,p,b);const E=h.values;for(let I=0;I<E.length;I++){const R=E[I],P=[];for(let L=0;L<R.length;L++){const q=R[L];if("string"!=typeof q){const ee=P.push(q)-1;R[L]=`\x3c!--\ufffd${ee}\ufffd--\x3e`}}y=jo(s,b,o,c,d,h.cases[I],R.join(""),P)|y}y&&function(s,o,c){s.push(o,1,c<<2|3)}(c,y,p)}function QC(s){const o=[],c=[];let d=1,h=0;const p=Uu(s=s.replace(xS,function(y,b,E){return d="select"===E?0:1,h=parseInt(b.substr(1),10),""}));for(let y=0;y<p.length;){let b=p[y++].trim();1===d&&(b=b.replace(/\s*(?:=)?(\w+)\s*/,"$1")),b.length&&o.push(b);const E=Uu(p[y++]);o.length>c.length&&c.push(E)}return{type:d,mainBinding:h,cases:o,values:c}}function Uu(s){if(!s)return[];let o=0;const c=[],d=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const b=p.index;if("}"==p[0]){if(c.pop(),0==c.length){const E=s.substring(o,b);xS.test(E)?d.push(QC(E)):d.push(E),o=b+1}}else{if(0==c.length){const E=s.substring(o,b);d.push(E),o=b+1}c.push("{")}}const y=s.substring(o);return d.push(y),d}function jo(s,o,c,d,h,p,y,b){const E=[],I=[],R=[];o.cases.push(p),o.create.push(E),o.remove.push(I),o.update.push(R);const L=Lf(So()).getInertBodyElement(y),q=Kd(L)||L;return q?JC(s,o,c,d,E,I,R,q,h,b,0):0}function JC(s,o,c,d,h,p,y,b,E,I,R){let P=0,L=b.firstChild;for(;L;){const q=ep(s,c,1,null);switch(L.nodeType){case Node.ELEMENT_NODE:const ee=L,ge=ee.tagName.toLowerCase();if(Wg.hasOwnProperty(ge)){Eb(h,Ec,ge,E,q),s.data[q]=ge;const Xe=ee.attributes;for(let ht=0;ht<Xe.length;ht++){const Zt=Xe.item(ht),ki=Zt.name.toLowerCase();Zt.value.match(vb)?qd.hasOwnProperty(ki)&&zs(y,Zt.value,q,Zt.name,0,zd[ki]?dl:ys[ki]?Bf:null):rk(h,q,Zt)}P=JC(s,o,c,d,h,p,y,L,q,I,R+1)|P,Ap(p,q,R)}break;case Node.TEXT_NODE:const oe=L.textContent||"",ke=oe.match(vb);Eb(h,null,ke?"":oe,E,q),Ap(p,q,R),ke&&(P=zs(y,oe,q,null,0,null)|P);break;case Node.COMMENT_NODE:const be=kS.exec(L.textContent||"");if(be){const ht=I[parseInt(be[1],10)];Eb(h,fb,"",E,q),Cb(s,c,d,E,ht,q),VS(p,q,R)}}L=L.nextSibling}return P}function Ap(s,o,c){0===c&&s.push(o)}function VS(s,o,c){0===c&&(s.push(~o),s.push(o))}function Eb(s,o,c,d,h){null!==o&&s.push(o),s.push(c,h,function(s,o,c){return 0|o<<17|c<<1}(0,d,h))}function rk(s,o,c){s.push(o<<1|1,c.name,c.value)}function tE(s,o,c=-1){const d=Nt(),h=Te(),p=20+s,y=Xn(d.consts,o),b=Ps();d.firstCreatePass&&function(s,o,c,d,h,p){const y=Ps(),b=[],E=[],I=[[]],R=function(s){return s.replace(Km," ")}(h=function(s,o){if(function(s){return-1===s}(o))return Qm(s);{const c=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,d=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return Qm(s.substring(c,d))}}(h,p)).split(ik);for(let P=0;P<R.length;P++){let L=R[P];if(0==(1&P)){const q=Uu(L);for(let ee=0;ee<q.length;ee++){let ge=q[ee];if(0==(1&ee)){const oe=ge;""!==oe&&PS(s,y,I[0],b,E,c,oe)}else{const oe=ge;if("object"!=typeof oe)throw new Error(`Unable to parse ICU expression in "${h}" message.`);Cb(s,c,E,o,oe,OS(s,y,I[0],c,b,"",!0).index)}}}else{const q=47===L.charCodeAt(0),ge=(L.charCodeAt(q?1:0),20+Number.parseInt(L.substring(q?2:1)));if(q)I.shift(),Yi(Ps(),!1);else{const oe=Tp(s,I[0],ge);I.unshift([]),Yi(oe,!0)}}}s.data[d]={create:b,update:E}}(d,null===b?0:b.index,h,p,y,c);const E=d.data[p],R=i1(d,b===h[6]?null:b,h);(function(s,o,c,d){const h=s[11];for(let p=0;p<o.length;p++){const y=o[p++],b=o[p],E=(y&Bt.COMMENT)===Bt.COMMENT,I=(y&Bt.APPEND_EAGERLY)===Bt.APPEND_EAGERLY,R=y>>>Bt.SHIFT;let P=s[R];null===P&&(P=s[R]=E?h.createComment(b):di(h,b)),I&&null!==c&&Su(h,c,P,d,!1)}})(h,E.create,R,b&&8&b.type?h[b.index]:null),tu(!0)}function nE(s,o,c){tE(s,o,c),tu(!1)}function Tb(s){return function(s){s&&(Ch|=1<<Math.min(Sp,31)),Sp++}(Pr(Te(),Yr(),s)),Tb}function iE(s){!function(s,o,c){if(Sp>0){const d=s.data[c];qC(s,o,Array.isArray(d)?d:d.update,Zr()-Sp-1,Ch)}Ch=0,Sp=0}(Nt(),Te(),s+20)}function rE(s,o,c,d,h){if(s=W(s),Array.isArray(s))for(let p=0;p<s.length;p++)rE(s[p],o,c,d,h);else{const p=Nt(),y=Te();let b=rp(s)?s:W(s.provide),E=ah(s);const I=mn(),R=1048575&I.providerIndexes,P=I.directiveStart,L=I.providerIndexes>>20;if(rp(s)||!s.multi){const q=new nl(E,h,xm),ee=Rp(b,o,h?R:R+L,P);-1===ee?(nt(nc(I,y),p,b),wi(p,s,o.length),o.push(b),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),c.push(q),y.push(q)):(c[ee]=q,y[ee]=q)}else{const q=Rp(b,o,R+L,P),ee=Rp(b,o,R,R+L),ge=q>=0&&c[q],oe=ee>=0&&c[ee];if(h&&!oe||!h&&!ge){nt(nc(I,y),p,b);const ke=function(s,o,c,d,h){const p=new nl(s,c,xm);return p.multi=[],p.index=o,p.componentProviders=0,e_(p,h,d&&!c),p}(h?sE:lk,c.length,h,d,E);!h&&oe&&(c[ee].providerFactory=ke),wi(p,s,o.length,0),o.push(b),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),c.push(ke),y.push(ke)}else wi(p,s,q>-1?q:ee,e_(c[h?ee:q],E,!h&&d));!h&&d&&oe&&c[ee].componentProviders++}}}function wi(s,o,c,d){const h=rp(o);if(h||function(s){return!!s.useClass}(o)){const y=(o.useClass||o).prototype.ngOnDestroy;if(y){const b=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const E=b.indexOf(c);-1===E?b.push(c,[d,y]):b[E+1].push(d,y)}else b.push(c,y)}}}function e_(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function Rp(s,o,c,d){for(let h=c;h<d;h++)if(o[h]===s)return h;return-1}function lk(s,o,c,d){return oE(this.multi,[])}function sE(s,o,c,d){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,b=Cn(c,c[1],this.providerFactory.index,d);p=b.slice(0,y),oE(h,p);for(let E=y;E<b.length;E++)p.push(b[E])}else p=[],oE(h,p);return p}function oE(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function aE(s,o=[]){return c=>{c.providersResolver=(d,h)=>function(s,o,c){const d=Nt();if(d.firstCreatePass){const h=us(s);rE(c,d.data,d.blueprint,h,!0),rE(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class Tc{}const cE="ngComponent";class n_{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${J(s)}. Did you add it to @NgModule.entryComponents?`);return o[cE]=s,o}(o)}}let ju=(()=>{class s{}return s.NULL=new n_,s})();function Wt(...s){}function Th(s,o){return new vn(Ar(s,o))}const Br=function(){return Th(mn(),Te())};let vn=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=Br,s})();function dE(s){return s instanceof vn?s.nativeElement:s}class Es{}let uk=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>GS(),s})();const GS=function(){const s=Te(),c=Bi(mn().index,s);return function(s){return s[11]}(Dn(c)?c:s)};let fE=(()=>{class s{}return s.\u0275prov=wn({token:s,providedIn:"root",factory:()=>null}),s})();class i_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Sh=new i_("12.2.13");class kp{constructor(){}supports(o){return dh(o)}create(o){return new zS(o)}}const Sb=(s,o)=>o;class zS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Sb}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,h=0,p=null;for(;c||d;){const y=!d||c&&c.currentIndex<gE(d,h,p)?c:d,b=gE(y,h,p),E=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(c=c._next,null==y.previousIndex)h++;else{p||(p=[]);const I=b-h,R=E-h;if(I!=R){for(let L=0;L<I;L++){const q=L<p.length?p[L]:p[L]=0,ee=q+L;R<=ee&&ee<I&&(p[L]=q+1)}p[y.previousIndex]=R-I}}b!==E&&o(y,b,E)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!dh(o))throw new Error(`Error trying to diff '${J(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)p=o[b],y=this._trackByFn(b,p),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,p,y,b)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,y,b),d=!0),c=c._next}else h=0,function(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[vc()]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,b=>{y=this._trackByFn(h,b),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,b,y,h)),Object.is(c.item,b)||this._addIdentityChange(c,b)):(c=this._mismatch(c,b,y,h),d=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,h)):o=this._addAfter(new qS(c,d),p,h),o}_verifyReinsertion(o,c,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new pE),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class qS{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fk{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class pE{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new fk,this.map.set(c,d)),d.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gE(s,o,c){const d=s.previousIndex;if(null===d)return d;let h=0;return c&&d<c.length&&(h=c[d]),d+o+h}class WS{constructor(){}supports(o){return o instanceof Map||Lv(o)}create(){return new pk}}class pk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||Lv(o)))throw new Error(`Error trying to diff '${J(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,d);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const d=new gk(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class gk{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xp(){return new r_([new kp])}let r_=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||xp()),deps:[[s,new Ai,new cl]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(s){return s.name||typeof s}(c)}'`)}}return s.\u0275prov=wn({token:s,providedIn:"root",factory:xp}),s})();function rr(){return new Op([new WS])}let Op=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||rr()),deps:[[s,new Ai,new cl]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(d)return d;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return s.\u0275prov=wn({token:s,providedIn:"root",factory:rr}),s})();function s_(s,o,c,d,h=!1){for(;null!==c;){const p=o[c.index];if(null!==p&&d.push(sn(p)),Vi(p))for(let b=10;b<p.length;b++){const E=p[b],I=E[1].firstChild;null!==I&&s_(E[1],E,I,d)}const y=c.type;if(8&y)s_(s,o,c.child,d);else if(32&y){const b=_(c,o);let E;for(;E=b();)d.push(E)}else if(16&y){const b=Iw(o,c);if(Array.isArray(b))d.push(...b);else{const E=x(o[16]);s_(E[1],E,b,d,!0)}}c=h?c.projectionNext:c.next}return d}class Sc{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return s_(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Vi(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(Wf(o,d),Jr(c,d))}this._attachedToViewContainer=!1}Zf(this._lView[1],this._lView)}onDestroy(o){vv(this._lView[1],this._lView,null,o)}markForCheck(){R1(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Gw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,c){Qa(!0);try{Gw(s,o,c)}finally{Qa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,ih(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class Cl extends Sc{constructor(o){super(o),this._view=o}detectChanges(){zw(this._view)}checkNoChanges(){!function(s){Qa(!0);try{zw(s)}finally{Qa(!1)}}(this._view)}get context(){return null}}const o_=function(s){return function(s,o,c){if(Ll(s)&&!c){const d=Bi(s.index,o);return new Sc(d,d)}return 47&s.type?new Sc(o[16],o):null}(mn(),Te(),16==(16&s))};let ZS=(()=>{class s{}return s.__NG_ELEMENT_ID__=o_,s})();const yk=[new WS],Ib=new r_([new kp]),QS=new Op(yk),JS=function(){return a_(mn(),Te())};let Pp=(()=>{class s{}return s.__NG_ELEMENT_ID__=JS,s})();const Ck=Pp,XS=class extends Ck{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(o){const c=this._declarationTContainer.tViews,d=Xf(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(d[19]=p.createEmbeddedView(c)),cm(c,d,o),new Sc(d)}};function a_(s,o){return 4&s.type?new XS(o,s,Th(s,o)):null}class Ih{}class tI{}const Ek=function(){return El(mn(),Te())};let Ab=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ek,s})();const nI=Ab,$o=class extends nI{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return Th(this._hostTNode,this._hostLView)}get injector(){return new Fs(this._hostTNode,this._hostLView)}get parentInjector(){const o=He(this._hostTNode,this._hostLView);if(kd(o)){const c=Nr(o,this._hostLView),d=ko(o);return new Fs(c[1].data[d+8],c)}return new Fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=iI(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,d){const h=o.createEmbeddedView(c||{});return this.insert(h,d),h}createComponent(o,c,d,h,p){const y=d||this.parentInjector;if(!p&&null==o.ngModule&&y){const E=y.get(Ih,null);E&&(p=E)}const b=o.create(y,h,void 0,p);return this.insert(b.hostView,c),b}insert(o,c){const d=o._lView,h=d[1];if(Vi(d[3])){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const P=d[3],L=new $o(P,P[6],P[3]);L.detach(L.indexOf(o))}}const p=this._adjustIndex(c),y=this._lContainer;!function(s,o,c,d){const h=10+d,p=c.length;d>0&&(c[h-1][4]=o),d<p-10?(o[4]=c[h],oc(c,10+d,o)):(c.push(o),o[4]=null),o[3]=c;const y=o[17];null!==y&&c!==y&&function(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(y,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,d,y,p);const b=Aw(p,y),E=d[11],I=nv(E,y[7]);return null!==I&&function(s,o,c,d,h,p){d[0]=h,d[6]=o,ih(s,d,c,1,h,p)}(h,y[6],E,d,I,b),o.attachToViewContainerRef(),oc(Nb(y),p,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=iI(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=Wf(this._lContainer,c);d&&(Jr(Nb(this._lContainer),c),Zf(d[1],d))}detach(o){const c=this._adjustIndex(o,-1),d=Wf(this._lContainer,c);return d&&null!=Jr(Nb(this._lContainer),c)?new Sc(d):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function iI(s){return s[8]}function Nb(s){return s[8]||(s[8]=[])}function El(s,o){let c;const d=o[s.index];if(Vi(d))c=d;else{let h;if(8&s.type)h=sn(d);else{const p=o[11];h=p.createComment("");const y=Ar(s,o);Su(p,nv(p,y),h,function(s,o){return hn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=c=jw(d,o,h,s),np(o,c)}return new $o(c,s,o)}const Ku={};class MI extends ju{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=pi(o);return new __(c,this.ngModule)}}function Vb(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}const kI=new Mn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Yy});class __ extends Tc{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=o.selectors.map(am).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return Vb(this.componentDef.inputs)}get outputs(){return Vb(this.componentDef.outputs)}create(o,c,d,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(c,d,h)=>{const p=s.get(c,Ku,h);return p!==Ku||d===Ku?p:o.get(c,d,h)}}}(o,h.injector):o,y=p.get(Es,Os),b=p.get(fE,null),E=y.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",R=d?function(s,o,c){if(hn(s))return s.selectRootElement(o,c===Le.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(E,d,this.componentDef.encapsulation):Xd(y.createRenderer(null,this.componentDef),I,function(s){const o=s.toLowerCase();return"svg"===o?Gl:"math"===o?"http://www.w3.org/1998/MathML/":null}(I)),P=this.componentDef.onPush?576:528,L=function(s,o){return{components:[],scheduler:s||Yy,clean:NL,playerHandler:o||null,flags:0}}(),q=sh(0,null,null,1,0,null,null,null,null,null),ee=Xf(null,q,L,P,null,null,y,E,b,p);let ge,oe;oa(ee);try{const ke=function(s,o,c,d,h,p){const y=c[1];c[20]=s;const E=mc(y,20,2,"#host",null),I=E.mergedAttrs=o.hostAttrs;null!==I&&(Dv(E,I,!0),null!==s&&(Ef(h,s,I),null!==E.classes&&Mw(h,s,E.classes),null!==E.styles&&l1(h,s,E.styles)));const R=d.createRenderer(s,o),P=Xf(c,Bw(o),null,o.onPush?64:16,c[20],E,d,R,p||null,null);return y.firstCreatePass&&(nt(nc(E,c),y,o.type),S1(y,E),I1(E,c.length,1)),np(c,P),c[20]=P}(R,this.componentDef,ee,y,E);if(R)if(d)Ef(E,R,["ng-version",Sh.full]);else{const{attrs:be,classes:Xe}=function(s){const o=[],c=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++d]):8===h&&c.push(p);else{if(!wa(h))break;h=p}d++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);be&&Ef(E,R,be),Xe&&Xe.length>0&&Mw(E,R,Xe.join(" "))}if(oe=Io(q,20),void 0!==c){const be=oe.projection=[];for(let Xe=0;Xe<this.ngContentSelectors.length;Xe++){const ht=c[Xe];be.push(null!=ht?Array.from(ht):null)}}ge=function(s,o,c,d,h){const p=c[1],y=function(s,o,c){const d=mn();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),dm(s,d,o,ep(s,o,1,null),c));const h=Cn(o,s,d.directiveStart,d);Xi(h,o);const p=Ar(d,o);return p&&Xi(p,o),h}(p,c,o);if(d.components.push(y),s[8]=y,h&&h.forEach(E=>E(y,o)),o.contentQueries){const E=mn();o.contentQueries(1,y,E.directiveStart)}const b=mn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(el(b.index),D1(c[1],b,0,b.directiveStart,b.directiveEnd,o),T1(o,y)),y}(ke,this.componentDef,ee,L,[SR]),cm(q,ee,null)}finally{Js()}return new OE(this.componentType,ge,Th(oe,ee),ee,oe)}}class OE extends class{}{constructor(o,c,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.instance=c,this.hostView=this.changeDetectorRef=new Cl(h),this.componentType=o}get injector(){return new Fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const Qu=new Map;class jk extends Ih{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new MI(this);const d=qr(o),h=o[wt]||null;h&&bi(h),this._bootstrapComponents=Us(d.bootstrap),this._r3Injector=Sv(o,c,[{provide:Ih,useValue:this},{provide:ju,useValue:this.componentFactoryResolver}],J(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=qe.THROW_IF_NOT_FOUND,d=Ke.Default){return o===qe||o===Ih||o===fm?this:this._r3Injector.get(o,c,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Bb extends tI{constructor(o){super(),this.moduleType=o,null!==qr(o)&&function(s){const o=new Set;!function c(d){const h=qr(d,!0),p=h.id;null!==p&&(function(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${J(o)} vs ${J(o.name)}`)}(p,Qu.get(p),d),Qu.set(p,d));const y=Us(h.imports);for(const b of y)o.has(b)||(o.add(b),c(b))}(s)}(o)}create(o){return new jk(this.moduleType,o)}}function $p(s,o,c,d){return Oh(Te(),ei(),s,o,c,d)}function Hb(s,o,c,d,h){return function(s,o,c,d,h,p,y){const b=o+c;return bc(s,b,h,p)?vl(s,b+2,y?d.call(y,h,p):d(h,p)):xh(s,b+2)}(Te(),ei(),s,o,c,d,h)}function FE(s,o,c,d,h,p){return function(s,o,c,d,h,p,y,b){const E=o+c;return function(s,o,c,d,h){const p=bc(s,o,c,d);return Pr(s,o+2,h)||p}(s,E,h,p,y)?vl(s,E+3,b?d.call(b,h,p,y):d(h,p,y)):xh(s,E+3)}(Te(),ei(),s,o,c,d,h,p)}function xh(s,o){const c=s[o];return c===Dt?void 0:c}function Oh(s,o,c,d,h,p){const y=o+c;return Pr(s,y,h)?vl(s,y+1,p?d.call(p,h):d(h)):xh(s,y+1)}function LE(s,o){const c=Nt();let d;const h=s+20;c.firstCreatePass?(d=function(s,o){if(o)for(let c=o.length-1;c>=0;c--){const d=o[c];if(s===d.name)return d}throw new Ae("302",`The pipe '${s}' could not be found!`)}(o,c.pipeRegistry),c.data[h]=d,d.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(h,d.onDestroy)):d=c.data[h];const p=d.factory||(d.factory=ks(d.type)),y=lr(xm);try{const b=rl(!1),E=p();return rl(b),function(s,o,c,d){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=d}(c,Te(),h,E),E}finally{lr(y)}}function Gb(s,o,c){const d=s+20,h=Te(),p=Ao(h,d);return function(s,o){co.isWrapped(o)&&(o=co.unwrap(o),s[Zr()]=Dt);return o}(h,function(s,o){return s[1].data[o].pure}(h,d)?Oh(h,ei(),o,p.transform,c,p):p.transform(c))}function C_(s){return o=>{setTimeout(s,void 0,o)}}const mo=class extends a.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){var h,p,y;let b=o,E=c||(()=>null),I=d;if(o&&"object"==typeof o){const P=o;b=null===(h=P.next)||void 0===h?void 0:h.bind(P),E=null===(p=P.error)||void 0===p?void 0:p.bind(P),I=null===(y=P.complete)||void 0===y?void 0:y.bind(P)}this.__isAsync&&(E=C_(E),b&&(b=C_(b)),I&&(I=C_(I)));const R=super.subscribe({next:b,error:E,complete:I});return o instanceof se.w&&o.add(R),R}};function UE(){return this._results[vc()]()}class E_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=vc(),d=E_.prototype;d[c]||(d[c]=UE)}get changes(){return this._changes||(this._changes=new mo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const h=Mr(o);(this._changesDetected=!function(s,o,c){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=o[d];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(d._results,h,c))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class jE{constructor(o){this.queryList=o,this.matches=null}clone(){return new jE(this.queryList)}setDirty(){this.queryList.setDirty()}}class zb{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let p=0;p<d;p++){const y=c.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new zb(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==Bh(o,c).matches&&this.queries[c].setDirty()}}class $E{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class GE{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const h=null!==c?c.length:0,p=this.getByIndex(d).embeddedTView(o,h);p&&(p.indexInDeclarationView=d,null!==c?c.push(p):c=[p])}return null!==c?new GE(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class D_{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new D_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(o,c,Kk(c,p)),this.matchTNodeWithReadOption(o,c,xo(c,o,p,!1,!1))}else d===Pp?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,xo(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===vn||h===Ab||h===Pp&&4&c.type)this.addMatch(c.index,-2);else{const p=xo(c,o,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function Kk(s,o){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function Qk(s,o,c,d){return-1===c?function(s,o){return 11&s.type?Th(s,o):4&s.type?a_(s,o):null}(o,s):-2===c?function(s,o,c){return c===vn?Th(o,s):c===Pp?a_(o,s):c===Ab?El(o,s):void 0}(s,o,d):Cn(s,s[1],c,o)}function LI(s,o,c,d){const h=o[19].queries[d];if(null===h.matches){const p=s.data,y=c.matches,b=[];for(let E=0;E<y.length;E+=2){const I=y[E];b.push(I<0?null:Qk(o,p[I],y[E+1],c.metadata.read))}h.matches=b}return h.matches}function T_(s,o,c,d){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const y=LI(s,o,h,c);for(let b=0;b<p.length;b+=2){const E=p[b];if(E>0)d.push(y[b/2]);else{const I=p[b+1],R=o[-E];for(let P=10;P<R.length;P++){const L=R[P];L[17]===L[3]&&T_(L[1],L,I,d)}if(null!==R[9]){const P=R[9];for(let L=0;L<P.length;L++){const q=P[L];T_(q[1],q,I,d)}}}}}return d}function qb(s){const o=Te(),c=Nt(),d=nu();Ja(d+1);const h=Bh(c,d);if(s.dirty&&Yc(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?T_(c,o,d,[]):LI(c,o,h,d);s.reset(p,dE),s.notifyOnChanges()}return!0}return!1}function Wb(s,o,c){const d=Nt();d.firstCreatePass&&(Vh(d,new $E(s,o,c),-1),2==(2&o)&&(d.staticViewQueries=!0)),Lh(d,Te(),o)}function Fh(s,o,c,d){const h=Nt();if(h.firstCreatePass){const p=mn();Vh(h,new $E(o,c,d),p.index),function(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}Lh(h,Te(),c)}function Mc(){return s=Te(),o=nu(),s[19].queries[o].queryList;var s,o}function Lh(s,o,c){const d=new E_(4==(4&c));vv(s,o,d,d.destroy),null===o[19]&&(o[19]=new zb),o[19].queries.push(new jE(d))}function Vh(s,o,c){null===s.queries&&(s.queries=new GE),s.queries.track(new D_(o,c))}function Bh(s,o){return s.queries.getByIndex(o)}function BI(s,o){return a_(s,o)}const N_=new Mn("Application Initializer");let Hh=(()=>{class s{constructor(c){this.appInits=c,this.resolve=Wt,this.reject=Wt,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Qv(p))c.push(p);else if(gC(p)){const y=new Promise((b,E)=>{p.subscribe({complete:b,error:E})});c.push(y)}}Promise.all(c).then(()=>{d()}).catch(h=>{this.reject(h)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(Rn(N_,8))},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();const r0=new Mn("AppId"),gD={provide:r0,useFactory:function(){return`${Wp()}${Wp()}${Wp()}`},deps:[]};function Wp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const s0=new Mn("Platform Initializer"),mD=new Mn("Platform ID"),o0=new Mn("appBootstrapListener");let a0=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();const kc=new Mn("LocaleId"),l0=new Mn("DefaultCurrencyCode");class dx{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}const _D=function(s){return new Bb(s)},hx=_D,yD=function(s){return Promise.resolve(_D(s))},vD=function(s){const o=_D(s),d=Us(qr(s).declarations).reduce((h,p)=>{const y=pi(p);return y&&h.push(new __(y)),h},[]);return new dx(o,d)},iA=vD,rA=function(s){return Promise.resolve(vD(s))};let Zp=(()=>{class s{constructor(){this.compileModuleSync=hx,this.compileModuleAsync=yD,this.compileModuleAndAllComponentsSync=iA,this.compileModuleAndAllComponentsAsync=rA}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();const Wn=(()=>Promise.resolve(0))();function vr(s){"undefined"==typeof Zone?Wn.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class qs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mo(!1),this.onMicrotaskEmpty=new mo(!1),this.onStable=new mo(!1),this.onError=new mo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&c,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=bt.requestAnimationFrame,o=bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,wD(s),s.isCheckStableRunning=!0,Yp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),wD(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,h,p,y,b)=>{try{return c0(s),c.invokeTask(h,p,y,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),aA(s)}},onInvoke:(c,d,h,p,y,b,E)=>{try{return c0(s),c.invoke(h,p,y,b,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),aA(s)}},onHasTask:(c,d,h,p)=>{c.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,wD(s),Yp(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,d,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(qs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,mx,Wt,Wt);try{return p.runTask(y,c,d)}finally{p.cancelTask(y)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const mx={};function Yp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function wD(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function c0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function aA(s){s._nesting--,Yp(s)}class _x{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mo,this.onMicrotaskEmpty=new mo,this.onStable=new mo,this.onError=new mo}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,h){return o.apply(c,d)}}let si=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qs.assertNotInAngularZone(),vr(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vr(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,h){return[]}}return s.\u0275fac=function(c){return new(c||s)(Rn(qs))},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})(),yx=(()=>{class s{constructor(){this._applications=new Map,u0.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return u0.findTestabilityInTree(this,c,d)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();class g2{addToWindow(o){}findTestabilityInTree(o,c,d){return null}}function sr(s){u0=s}let u0=new g2,lA=!0,cA=!1;function d0(){return cA=!0,lA}function vx(){if(cA)throw new Error("Cannot enable prod mode after platform setup.");lA=!1}let Ma;const ed=new Mn("AllowMultipleToken");class h0{constructor(o,c){this.name=o,this.token=c}}function dA(s,o,c=[]){const d=`Platform: ${o}`,h=new Mn(d);return(p=[])=>{let y=x_();if(!y||y.injector.get(ed,!1))if(s)s(c.concat(p).concat({provide:h,useValue:!0}));else{const b=c.concat(p).concat({provide:h,useValue:!0},{provide:ip,useValue:"platform"});!function(s){if(Ma&&!Ma.destroyed&&!Ma.injector.get(ed,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ma=s.get(fA);const o=s.get(s0,null);o&&o.forEach(c=>c())}(qe.create({providers:b,name:d}))}return function(s){const o=x_();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function x_(){return Ma&&!Ma.destroyed?Ma:null}let fA=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const b=function(s,o){let c;return c="noop"===s?new _x:("zone.js"===s?void 0:s)||new qs({enableLongStackTrace:d0(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),E=[{provide:qs,useValue:b}];return b.run(()=>{const I=qe.create({providers:E,parent:this.injector,name:c.moduleType.name}),R=c.create(I),P=R.injector.get(pl,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return b.runOutsideAngular(()=>{const L=b.onError.subscribe({next:q=>{P.handleError(q)}});R.onDestroy(()=>{O_(this._modules,R),L.unsubscribe()})}),function(s,o,c){try{const d=c();return Qv(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(P,b,()=>{const L=R.injector.get(Hh);return L.runInitializers(),L.donePromise.then(()=>(bi(R.injector.get(kc,hb)||hb),this._moduleDoBootstrap(R),R))})})}bootstrapModule(c,d=[]){const h=Kp({},d);return function(s,o,c){const d=new Bb(c);return Promise.resolve(d)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const d=c.injector.get(Qp);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new Error(`The module ${J(c.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(Rn(qe))},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();function Kp(s,o){return Array.isArray(o)?o.reduce(Kp,s):Object.assign(Object.assign({},s),o)}let Qp=(()=>{class s{constructor(c,d,h,p,y){this._zone=c,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new H.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new H.y(I=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{qs.assertNotInAngularZone(),vr(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{R.unsubscribe(),P.unsubscribe()}});this.isStable=(0,fe.T)(b,E.pipe((0,ae.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=c instanceof Tc?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Ih),b=h.create(qe.NULL,[],d||h.selector,p),E=b.location.nativeElement,I=b.injector.get(si,null),R=I&&b.injector.get(yx);return I&&R&&R.registerApplication(E,I),b.onDestroy(()=>{this.detachView(b.hostView),O_(this.components,b),R&&R.unregisterApplication(E)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;O_(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(o0,[]).concat(this._bootstrapListeners).forEach(h=>h(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(Rn(qs),Rn(qe),Rn(pl),Rn(ju),Rn(Hh))},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();function O_(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}class Tx{}class ED{}const DD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ix=(()=>{class s{constructor(c,d){this._compiler=c,this._config=d||DD}load(c){return this.loadAndCompile(c)}loadAndCompile(c){let[d,h]=c.split("#");return void 0===h&&(h="default"),U(8255)(d).then(p=>p[h]).then(p=>p0(p,d,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(c){let[d,h]=c.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),U(8255)(this._config.factoryPathPrefix+d+this._config.factoryPathSuffix).then(y=>y[h+p]).then(y=>p0(y,d,h))}}return s.\u0275fac=function(c){return new(c||s)(Rn(Zp),Rn(ED,8))},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();function p0(s,o,c){if(!s)throw new Error(`Cannot find '${c}' in '${o}'`);return s}const Rx=function(s){return null},m0=dA(null,"core",[{provide:mD,useValue:"unknown"},{provide:fA,deps:[qe]},{provide:yx,deps:[]},{provide:a0,deps:[]}]),Fx=[{provide:Qp,useClass:Qp,deps:[qs,qe,pl,ju,Hh]},{provide:kI,deps:[qs],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(c){o.push(c)}}},{provide:Hh,useClass:Hh,deps:[[new cl,N_]]},{provide:Zp,useClass:Zp,deps:[]},gD,{provide:r_,useFactory:function(){return Ib},deps:[]},{provide:Op,useFactory:function(){return QS},deps:[]},{provide:kc,useFactory:function(s){return bi(s=s||"undefined"!=typeof $localize&&$localize.locale||hb),s},deps:[[new ll(kc),new cl,new Ai]]},{provide:l0,useValue:"USD"}];let Vx=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(Rn(Qp))},s.\u0275mod=ea({type:s}),s.\u0275inj=On({providers:Fx}),s})()},8939:(Ye,we,U)=>{"use strict";U.d(we,{hO:()=>he,xv:()=>K,Dh:()=>J,GT:()=>ie,cc:()=>Ee,on:()=>V,pX:()=>ae});var a=U(7716),se=U(7841),H=U(1732);Ye=U.hmd(Ye);const fe=["ngOnDestroy"],ae=(le,ve,Fe,je={})=>new Proxy(le,{get:(Lt,Ut)=>Fe.runOutsideAngular(()=>{var tn;if(le[Ut])return(null===(tn=null==je?void 0:je.spy)||void 0===tn?void 0:tn.get)&&je.spy.get(Ut,le[Ut]),le[Ut];if(fe.indexOf(Ut)>-1)return()=>{};const Tt=ve.toPromise().then(xn=>{const St=xn&&xn[Ut];return"function"==typeof St?St.bind(xn):St&&St.then?St.then(vt=>Fe.run(()=>vt)):Fe.run(()=>St)});return new Proxy(()=>{},{get:(xn,St)=>Tt[St],apply:(xn,St,vt)=>Tt.then(Ht=>{var ct;const Gt=Ht&&Ht(...vt);return(null===(ct=null==je?void 0:je.spy)||void 0===ct?void 0:ct.apply)&&je.spy.apply(Ut,vt,Gt),Gt})})})}),ie=(le,ve)=>{ve.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(je=>{Object.defineProperty(le.prototype,je,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,je))})})};class ne{constructor(ve){return ve}}const J=new a.OlP("angularfire2.app.options"),K=new a.OlP("angularfire2.app.name");function V(le,ve,Fe){const Lt="object"==typeof Fe&&Fe||{};Lt.name=Lt.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const tn=se.Z.apps.filter(Tt=>Tt&&Tt.name===Lt.name)[0]||ve.runOutsideAngular(()=>se.Z.initializeApp(le,Lt));try{JSON.stringify(le)!==JSON.stringify(tn.options)&&G("error",`${tn.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Tt){}return new ne(tn)}const G=(le,...ve)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[le](...ve)},W={provide:ne,useFactory:V,deps:[J,a.R0b,[new a.FiY,K]]};let he=(()=>{class le{constructor(Fe){se.Z.registerVersion("angularfire",H.q4.full,"core"),se.Z.registerVersion("angularfire",H.q4.full,"app-compat"),se.Z.registerVersion("angular",a.q4F.full,Fe.toString())}static initializeApp(Fe,je){return{ngModule:le,providers:[{provide:J,useValue:Fe},{provide:K,useValue:je}]}}}return le.\u0275fac=function(Fe){return new(Fe||le)(a.LFG(a.Lbi))},le.\u0275mod=a.oAB({type:le}),le.\u0275inj=a.cJS({providers:[W]}),le})();function Ee(le,ve,Fe,je,Lt){const[,Ut,tn]=globalThis.\u0275AngularfireInstanceCache.find(Tt=>Tt[0]===le)||[];if(Ut)return function(le,ve){try{return le.toString()===ve.toString()}catch(Fe){return le===ve}}(Lt,tn)||(_e("error",`${ve} was already initialized on the ${Fe} Firebase App with different settings.${Ce?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Lt,was:tn})),Ut;{const Tt=je();return globalThis.\u0275AngularfireInstanceCache.push([le,Tt,Lt]),Tt}}const Ce=!!Ye.hot,_e=(le,...ve)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[le](...ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},1732:(Ye,we,U)=>{"use strict";U.d(we,{q4:()=>Mf,iC:()=>Ln,HU:()=>Fd,vb:()=>oc,JM:()=>Ls});var a=U(7716),se=U(2329),H=U(8239),fe=U(8026),ae=U(3854),ie=U(3910),ne=U(5422),J=U(6676);const K="@firebase/installations",V="0.5.4",W=`w:${V}`,he="FIS_v2",ve=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Fe(S){return S instanceof ae.ZR&&S.code.includes("request-failed")}function je({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Lt(S){return{token:S.token,requestStatus:2,expiresIn:Ht(S.expiresIn),creationTime:Date.now()}}function Ut(S,M){return tn.apply(this,arguments)}function tn(){return(tn=(0,H.Z)(function*(S,M){const $=(yield M.json()).error;return ve.create("request-failed",{requestName:S,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function Tt({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function xn(S,{refreshToken:M}){const O=Tt(S);return O.append("Authorization",function(S){return`${he} ${S}`}(M)),O}function St(S){return vt.apply(this,arguments)}function vt(){return(vt=(0,H.Z)(function*(S){const M=yield S();return M.status>=500&&M.status<600?S():M})).apply(this,arguments)}function Ht(S){return Number(S.replace("s","000"))}function Gt(S,M){return Je.apply(this,arguments)}function Je(){return(Je=(0,H.Z)(function*(S,{fid:M}){const O=je(S),pe={method:"POST",headers:Tt(S),body:JSON.stringify({fid:M,authVersion:he,appId:S.appId,sdkVersion:W})},Se=yield St(()=>fetch(O,pe));if(Se.ok){const $e=yield Se.json();return{fid:$e.fid||M,registrationStatus:2,refreshToken:$e.refreshToken,authToken:Lt($e.authToken)}}throw yield Ut("Create Installation",Se)})).apply(this,arguments)}function Hc(S){return new Promise(M=>{setTimeout(M,S)})}const Ns=/^[cdef][\w-]{21}$/;function jt(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const O=function(S){return function(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Ns.test(O)?O:""}catch(S){return""}}function Ys(S){return`${S.appName}!${S.appId}`}const Co=new Map;function Ms(S,M){const O=Ys(S);On(O,M),function(S,M){const O=(!zt&&"BroadcastChannel"in self&&(zt=new BroadcastChannel("[Firebase] FID Change"),zt.onmessage=S=>{On(S.data.key,S.data.fid)}),zt);O&&O.postMessage({key:S,fid:M}),0===Co.size&&zt&&(zt.close(),zt=null)}(O,M)}function On(S,M){const O=Co.get(S);if(O)for(const $ of O)$(M)}let zt=null;const Ie="firebase-installations-store";let Si=null;function ci(){return Si||(Si=(0,J.openDb)("firebase-installations-database",1,S=>{switch(S.oldVersion){case 0:S.createObjectStore(Ie)}})),Si}function Ke(S,M){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,H.Z)(function*(S,M){const O=Ys(S),re=(yield ci()).transaction(Ie,"readwrite"),pe=re.objectStore(Ie),Se=yield pe.get(O);return yield pe.put(M,O),yield re.complete,(!Se||Se.fid!==M.fid)&&Ms(S,M.fid),M})).apply(this,arguments)}function ls(S){return lr.apply(this,arguments)}function lr(){return(lr=(0,H.Z)(function*(S){const M=Ys(S),$=(yield ci()).transaction(Ie,"readwrite");yield $.objectStore(Ie).delete(M),yield $.complete})).apply(this,arguments)}function st(S,M){return ut.apply(this,arguments)}function ut(){return(ut=(0,H.Z)(function*(S,M){const O=Ys(S),re=(yield ci()).transaction(Ie,"readwrite"),pe=re.objectStore(Ie),Se=yield pe.get(O),$e=M(Se);return void 0===$e?yield pe.delete(O):yield pe.put($e,O),yield re.complete,$e&&(!Se||Se.fid!==$e.fid)&&Ms(S,$e.fid),$e})).apply(this,arguments)}function xt(S){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,H.Z)(function*(S){let M;const O=yield st(S,$=>{const re=cr($),pe=nn(S,re);return M=pe.registrationPromise,pe.installationEntry});return""===O.fid?{installationEntry:yield M}:{installationEntry:O,registrationPromise:M}})).apply(this,arguments)}function cr(S){return bt(S||{fid:jt(),registrationStatus:0})}function nn(S,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(ve.create("app-offline"))};const O={fid:M.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:O,registrationPromise:function(S,M){return rt.apply(this,arguments)}(S,O)}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:jc(S)}:{installationEntry:M}}function rt(){return(rt=(0,H.Z)(function*(S,M){try{return Ke(S,yield Gt(S,M))}catch(O){throw Fe(O)&&409===O.customData.serverCode?yield ls(S):yield Ke(S,{fid:M.fid,registrationStatus:0}),O}})).apply(this,arguments)}function jc(S){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,H.Z)(function*(S){let M=yield on(S);for(;1===M.registrationStatus;)yield Hc(100),M=yield on(S);if(0===M.registrationStatus){const{installationEntry:O,registrationPromise:$}=yield xt(S);return $||O}return M})).apply(this,arguments)}function on(S){return st(S,M=>{if(!M)throw ve.create("installation-not-found");return bt(M)})}function bt(S){return function(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function gd(S,M){return Q.apply(this,arguments)}function Q(){return(Q=(0,H.Z)(function*({appConfig:S,platformLoggerProvider:M},O){const $=z(S,O),re=xn(S,O),pe=M.getImmediate({optional:!0});pe&&re.append("x-firebase-client",pe.getPlatformInfoString());const $e={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:W}})},ze=yield St(()=>fetch($,$e));if(ze.ok)return Lt(yield ze.json());throw yield Ut("Generate Auth Token",ze)})).apply(this,arguments)}function z(S,{fid:M}){return`${je(S)}/${M}/authTokens:generate`}function X(S){return De.apply(this,arguments)}function De(){return(De=(0,H.Z)(function*(S,M=!1){let O;const $=yield st(S.appConfig,pe=>{if(!Kn(pe))throw ve.create("not-registered");const Se=pe.authToken;if(!M&&zi(Se))return pe;if(1===Se.requestStatus)return O=ce(S,M),pe;{if(!navigator.onLine)throw ve.create("app-offline");const $e=Pi(pe);return O=qt(S,$e),$e}});return O?yield O:$.authToken})).apply(this,arguments)}function ce(S,M){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,H.Z)(function*(S,M){let O=yield wt(S.appConfig);for(;1===O.authToken.requestStatus;)yield Hc(100),O=yield wt(S.appConfig);const $=O.authToken;return 0===$.requestStatus?X(S,M):$})).apply(this,arguments)}function wt(S){return st(S,M=>{if(!Kn(M))throw ve.create("not-registered");return function(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function qt(S,M){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,H.Z)(function*(S,M){try{const O=yield gd(S,M),$=Object.assign(Object.assign({},M),{authToken:O});return yield Ke(S.appConfig,$),O}catch(O){if(!Fe(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const $=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield Ke(S.appConfig,$)}else yield ls(S.appConfig);throw O}})).apply(this,arguments)}function Kn(S){return void 0!==S&&2===S.registrationStatus}function zi(S){return 2===S.requestStatus&&!function(S){const M=Date.now();return M<S.creationTime||S.creationTime+S.expiresIn<M+36e5}(S)}function Pi(S){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:M})}function ea(){return(ea=(0,H.Z)(function*(S){const M=S,{installationEntry:O,registrationPromise:$}=yield xt(M.appConfig);return $?$.catch(console.error):X(M).catch(console.error),O.fid})).apply(this,arguments)}function ta(){return(ta=(0,H.Z)(function*(S,M=!1){const O=S;return yield md(O.appConfig),(yield X(O,M)).token})).apply(this,arguments)}function md(S){return zr.apply(this,arguments)}function zr(){return(zr=(0,H.Z)(function*(S){const{registrationPromise:M}=yield xt(S);M&&(yield M)})).apply(this,arguments)}function un(S){return ve.create("missing-app-config-values",{valueName:S})}const dr="installations";(0,fe._registerComponent)(new ie.wA(dr,S=>{const M=S.getProvider("app").getImmediate();return{app:M,appConfig:function(S){if(!S||!S.options)throw un("App Configuration");if(!S.name)throw un("App Name");const M=["projectId","apiKey","appId"];for(const O of M)if(!S.options[O])throw un(O);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(M),platformLoggerProvider:(0,fe._getProvider)(M,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,fe._registerComponent)(new ie.wA("installations-internal",S=>{const M=S.getProvider("app").getImmediate(),O=(0,fe._getProvider)(M,dr).getImmediate();return{getId:()=>function(S){return ea.apply(this,arguments)}(O),getToken:re=>function(S){return ta.apply(this,arguments)}(O,re)}},"PRIVATE")),(0,fe.registerVersion)(K,V),(0,fe.registerVersion)(K,V,"esm2017");const Sr="@firebase/remote-config",Ii=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fr{constructor(M,O,$,re){this.client=M,this.storage=O,this.storageCache=$,this.logger=re}isCachedDataFresh(M,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-O,re=$<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${re}.`),re}fetch(M){var O=this;return(0,H.Z)(function*(){const[$,re]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(re&&O.isCachedDataFresh(M.cacheMaxAgeMillis,$))return re;M.eTag=re&&re.eTag;const pe=yield O.client.fetch(M),Se=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pe.status&&Se.push(O.storage.setLastSuccessfulFetchResponse(pe)),yield Promise.all(Se),pe})()}}function us(S=navigator){return S.languages&&S.languages[0]||S.language}class ds{constructor(M,O,$,re,pe,Se){this.firebaseInstallations=M,this.sdkVersion=O,this.namespace=$,this.projectId=re,this.apiKey=pe,this.appId=Se}fetch(M){var O=this;return(0,H.Z)(function*(){const[$,re]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,$e={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},ze={sdk_version:O.sdkVersion,app_instance_id:$,app_instance_id_token:re,app_id:O.appId,language_code:us()},Vt={method:"POST",headers:$e,body:JSON.stringify(ze)},pn=fetch(Se,Vt),ii=new Promise((gs,ms)=>{M.signal.addEventListener(()=>{const mt=new Error("The operation was aborted.");mt.name="AbortError",ms(mt)})});let pr;try{yield Promise.race([pn,ii]),pr=yield pn}catch(gs){let ms="fetch-client-network";throw"AbortError"===gs.name&&(ms="fetch-timeout"),Ii.create(ms,{originalErrorMessage:gs.message})}let _i=pr.status;const cu=pr.headers.get("ETag")||void 0;let ha,uu;if(200===pr.status){let gs;try{gs=yield pr.json()}catch(ms){throw Ii.create("fetch-client-parse",{originalErrorMessage:ms.message})}ha=gs.entries,uu=gs.state}if("INSTANCE_STATE_UNSPECIFIED"===uu?_i=500:"NO_CHANGE"===uu?_i=304:("NO_TEMPLATE"===uu||"EMPTY_CONFIG"===uu)&&(ha={}),304!==_i&&200!==_i)throw Ii.create("fetch-status",{httpStatus:_i});return{status:_i,eTag:cu,config:ha}})()}}class yd{constructor(M,O){this.client=M,this.storage=O}fetch(M){var O=this;return(0,H.Z)(function*(){const $=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(M,$)})()}attemptFetch(M,{throttleEndTimeMillis:O,backoffCount:$}){var re=this;return(0,H.Z)(function*(){yield function(S,M){return new Promise((O,$)=>{const re=Math.max(M-Date.now(),0),pe=setTimeout(O,re);S.addEventListener(()=>{clearTimeout(pe),$(Ii.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,O);try{const pe=yield re.client.fetch(M);return yield re.storage.deleteThrottleMetadata(),pe}catch(pe){if(!function(S){if(!(S instanceof ae.ZR&&S.customData))return!1;const M=Number(S.customData.httpStatus);return 429===M||500===M||503===M||504===M}(pe))throw pe;const Se={throttleEndTimeMillis:Date.now()+(0,ae.$s)($),backoffCount:$+1};return yield re.storage.setThrottleMetadata(Se),re.attemptFetch(M,Se)}})()}}class yy{constructor(M,O,$,re,pe){this.app=M,this._client=O,this._storageCache=$,this._storage=re,this._logger=pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bl(S,M){const O=S.target.error||void 0;return Ii.create(M,{originalErrorMessage:O&&O.message})}const za="app_namespace_store";class vy{constructor(M,O,$,re=function(){return new Promise((S,M)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=$=>{M(Bl($,"storage-open"))},O.onsuccess=$=>{S($.target.result)},O.onupgradeneeded=$=>{const re=$.target.result;switch($.oldVersion){case 0:re.createObjectStore(za,{keyPath:"compositeKey"})}}}catch(O){M(Ii.create("storage-open",{originalErrorMessage:O}))}})}()){this.appId=M,this.appName=O,this.namespace=$,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var O=this;return(0,H.Z)(function*(){const $=yield O.openDbPromise;return new Promise((re,pe)=>{const $e=$.transaction([za],"readonly").objectStore(za),ze=O.createCompositeKey(M);try{const Vt=$e.get(ze);Vt.onerror=pn=>{pe(Bl(pn,"storage-get"))},Vt.onsuccess=pn=>{const ii=pn.target.result;re(ii?ii.value:void 0)}}catch(Vt){pe(Ii.create("storage-get",{originalErrorMessage:Vt&&Vt.message}))}})})()}set(M,O){var $=this;return(0,H.Z)(function*(){const re=yield $.openDbPromise;return new Promise((pe,Se)=>{const ze=re.transaction([za],"readwrite").objectStore(za),Vt=$.createCompositeKey(M);try{const pn=ze.put({compositeKey:Vt,value:O});pn.onerror=ii=>{Se(Bl(ii,"storage-set"))},pn.onsuccess=()=>{pe()}}catch(pn){Se(Ii.create("storage-set",{originalErrorMessage:pn&&pn.message}))}})})()}delete(M){var O=this;return(0,H.Z)(function*(){const $=yield O.openDbPromise;return new Promise((re,pe)=>{const $e=$.transaction([za],"readwrite").objectStore(za),ze=O.createCompositeKey(M);try{const Vt=$e.delete(ze);Vt.onerror=pn=>{pe(Bl(pn,"storage-delete"))},Vt.onsuccess=()=>{re()}}catch(Vt){pe(Ii.create("storage-delete",{originalErrorMessage:Vt&&Vt.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class uf{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,H.Z)(function*(){const O=M.storage.getLastFetchStatus(),$=M.storage.getLastSuccessfulFetchTimestampMillis(),re=M.storage.getActiveConfig(),pe=yield O;pe&&(M.lastFetchStatus=pe);const Se=yield $;Se&&(M.lastSuccessfulFetchTimestampMillis=Se);const $e=yield re;$e&&(M.activeConfig=$e)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function bd(){return zc.apply(this,arguments)}function zc(){return(zc=(0,H.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(S){return!1}})).apply(this,arguments)}(0,fe._registerComponent)(new ie.wA("remote-config",function(M,{instanceIdentifier:O}){const $=M.getProvider("app").getImmediate(),re=M.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ii.create("registration-window");if(!(0,ae.hl)())throw Ii.create("indexed-db-unavailable");const{projectId:pe,apiKey:Se,appId:$e}=$.options;if(!pe)throw Ii.create("registration-project-id");if(!Se)throw Ii.create("registration-api-key");if(!$e)throw Ii.create("registration-app-id");const ze=new vy($e,$.name,O=O||"firebase"),Vt=new uf(ze),pn=new ne.Yd(Sr);pn.logLevel=ne.in.ERROR;const ii=new ds(re,fe.SDK_VERSION,O,pe,Se,$e),pr=new yd(ii,ze),_i=new fr(pr,ze,Vt,pn),cu=new yy($,_i,Vt,ze,pn);return function(S){const M=(0,ae.m9)(S);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(cu),cu},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(Sr,"0.3.3"),(0,fe.registerVersion)(Sr,"0.3.3","esm2017");const qa="/firebase-messaging-sw.js",wy="/firebase-cloud-messaging-push-scope",Ul="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ks="google.c.a.c_id",Hl="google.c.a.c_l",An="google.c.a.ts",jl="google.c.a.e";var Zi=(()=>{return(S=Zi||(Zi={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Zi;var S})();function xs(S){const M=new Uint8Array(S);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $l(S){const O=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(O),re=new Uint8Array($.length);for(let pe=0;pe<$.length;++pe)re[pe]=$.charCodeAt(pe);return re}const qc="fcm_token_details_db",Ng="fcm_token_object_Store";function Ir(S){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,H.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pe=>pe.name).includes(qc))return null;let M=null;return(yield(0,J.openDb)(qc,5,function(){var $=(0,H.Z)(function*(re){var pe;if(re.oldVersion<2||!re.objectStoreNames.contains(Ng))return;const Se=re.transaction.objectStore(Ng),$e=yield Se.index("fcmSenderId").get(S);if(yield Se.clear(),$e)if(2===re.oldVersion){const ze=$e;if(!ze.auth||!ze.p256dh||!ze.endpoint)return;M={token:ze.fcmToken,createTime:null!==(pe=ze.createTime)&&void 0!==pe?pe:Date.now(),subscriptionOptions:{auth:ze.auth,p256dh:ze.p256dh,endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:"string"==typeof ze.vapidKey?ze.vapidKey:xs(ze.vapidKey)}}}else if(3===re.oldVersion){const ze=$e;M={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:xs(ze.auth),p256dh:xs(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:xs(ze.vapidKey)}}}else if(4===re.oldVersion){const ze=$e;M={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:xs(ze.auth),p256dh:xs(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:xs(ze.vapidKey)}}}});return function(re){return $.apply(this,arguments)}}())).close(),yield(0,J.deleteDb)(qc),yield(0,J.deleteDb)("fcm_vapid_details_db"),yield(0,J.deleteDb)("undefined"),ff(M)?M:null})).apply(this,arguments)}function ff(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:M}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const So="firebase-messaging-store";let pf=null;function hn(){return pf||(pf=(0,J.openDb)("firebase-messaging-database",1,S=>{switch(S.oldVersion){case 0:S.createObjectStore(So)}})),pf}function gf(S){return Os.apply(this,arguments)}function Os(){return(Os=(0,H.Z)(function*(S){const M=sa(S),$=yield(yield hn()).transaction(So).objectStore(So).get(M);if($)return $;{const re=yield Ir(S.appConfig.senderId);if(re)return yield hs(S,re),re}})).apply(this,arguments)}function hs(S,M){return sn.apply(this,arguments)}function sn(){return(sn=(0,H.Z)(function*(S,M){const O=sa(S),re=(yield hn()).transaction(So,"readwrite");return yield re.objectStore(So).put(M,O),yield re.complete,M})).apply(this,arguments)}function Za(S){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,H.Z)(function*(S){const M=sa(S),$=(yield hn()).transaction(So,"readwrite");yield $.objectStore(So).delete(M),yield $.complete})).apply(this,arguments)}function sa({appConfig:S}){return S.appId}const ui=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Io(S,M){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,H.Z)(function*(S,M){const O=yield zl(S),$=dt(M),re={method:"POST",headers:O,body:JSON.stringify($)};let pe;try{pe=yield(yield fetch(Xn(S.appConfig),re)).json()}catch(Se){throw ui.create("token-subscribe-failed",{errorInfo:Se})}if(pe.error)throw ui.create("token-subscribe-failed",{errorInfo:pe.error.message});if(!pe.token)throw ui.create("token-subscribe-no-token");return pe.token})).apply(this,arguments)}function Bi(S,M){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,H.Z)(function*(S,M){const O=yield zl(S),$=dt(M.subscriptionOptions),re={method:"PATCH",headers:O,body:JSON.stringify($)};let pe;try{pe=yield(yield fetch(`${Xn(S.appConfig)}/${M.token}`,re)).json()}catch(Se){throw ui.create("token-update-failed",{errorInfo:Se})}if(pe.error)throw ui.create("token-update-failed",{errorInfo:pe.error.message});if(!pe.token)throw ui.create("token-update-no-token");return pe.token})).apply(this,arguments)}function Kc(S,M){return No.apply(this,arguments)}function No(){return(No=(0,H.Z)(function*(S,M){const $={method:"DELETE",headers:yield zl(S)};try{const pe=yield(yield fetch(`${Xn(S.appConfig)}/${M}`,$)).json();if(pe.error)throw ui.create("token-unsubscribe-failed",{errorInfo:pe.error.message})}catch(re){throw ui.create("token-unsubscribe-failed",{errorInfo:re})}})).apply(this,arguments)}function Xn({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function zl(S){return ql.apply(this,arguments)}function ql(){return(ql=(0,H.Z)(function*({appConfig:S,installations:M}){const O=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function dt({p256dh:S,auth:M,endpoint:O,vapidKey:$}){const re={web:{endpoint:O,auth:M,p256dh:S}};return $!==Ul&&(re.web.applicationPubKey=$),re}const Qc=6048e5;function mf(S){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,H.Z)(function*(S){const M=yield Xc(S.swRegistration,S.vapidKey),O={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:M.endpoint,auth:xs(M.getKey("auth")),p256dh:xs(M.getKey("p256dh"))},$=yield gf(S.firebaseDependencies);if($){if(eu($.subscriptionOptions,O))return Date.now()>=$.createTime+Qc?wd(S,{token:$.token,createTime:Date.now(),subscriptionOptions:O}):$.token;try{yield Kc(S.firebaseDependencies,$.token)}catch(re){console.warn(re)}return Te(S.firebaseDependencies,O)}return Te(S.firebaseDependencies,O)})).apply(this,arguments)}function _f(S){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,H.Z)(function*(S){const M=yield gf(S.firebaseDependencies);M&&(yield Kc(S.firebaseDependencies,M.token),yield Za(S.firebaseDependencies));const O=yield S.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function wd(S,M){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,H.Z)(function*(S,M){try{const O=yield Bi(S.firebaseDependencies,M),$=Object.assign(Object.assign({},M),{token:O,createTime:Date.now()});return yield hs(S.firebaseDependencies,$),O}catch(O){throw yield _f(S),O}})).apply(this,arguments)}function Te(S,M){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,H.Z)(function*(S,M){const $={token:yield Io(S,M),createTime:Date.now(),subscriptionOptions:M};return yield hs(S,$),$.token})).apply(this,arguments)}function Xc(S,M){return mn.apply(this,arguments)}function mn(){return(mn=(0,H.Z)(function*(S,M){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$l(M)})})).apply(this,arguments)}function eu(S,M){return M.vapidKey===S.vapidKey&&M.endpoint===S.endpoint&&M.auth===S.auth&&M.p256dh===S.p256dh}function Ps(S){const M={from:S.from,collapseKey:S.collapse_key,messageId:S.fcm_message_id};return function(S,M){if(!M.notification)return;S.notification={};const O=M.notification.title;O&&(S.notification.title=O);const $=M.notification.body;$&&(S.notification.body=$);const re=M.notification.image;re&&(S.notification.image=re)}(M,S),function(S,M){!M.data||(S.data=M.data)}(M,S),function(S,M){if(!M.fcmOptions)return;S.fcmOptions={};const O=M.fcmOptions.link;O&&(S.fcmOptions.link=O);const $=M.fcmOptions.analytics_label;$&&(S.fcmOptions.analyticsLabel=$)}(M,S),M}function yf(S){return"object"==typeof S&&!!S&&ks in S}function Cd(S,M){const O=[];for(let $=0;$<S.length;$++)O.push(S.charAt($)),$<M.length&&O.push(M.charAt($));return O.join("")}function Qa(S){return ui.create("missing-app-config-values",{valueName:S})}Cd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Cd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ei{constructor(M,O,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function(S){if(!S||!S.options)throw Qa("App Configuration Object");if(!S.name)throw Qa("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:O}=S;for(const $ of M)if(!O[$])throw Qa($);return{appName:S.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:re,installations:O,analyticsProvider:$}}_delete(){return Promise.resolve()}}function Zr(S){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,H.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(qa,{scope:wy}),S.swRegistration.update().catch(()=>{})}catch(M){throw ui.create("failed-service-worker-registration",{browserErrorMessage:M.message})}})).apply(this,arguments)}function Yr(S,M){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,H.Z)(function*(S,M){if(!M&&!S.swRegistration&&(yield Zr(S)),M||!S.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw ui.create("invalid-sw-registration");S.swRegistration=M}})).apply(this,arguments)}function Ed(S,M){return tu.apply(this,arguments)}function tu(){return(tu=(0,H.Z)(function*(S,M){M?S.vapidKey=M:S.vapidKey||(S.vapidKey=Ul)})).apply(this,arguments)}function Dd(){return(Dd=(0,H.Z)(function*(S,M){if(!navigator)throw ui.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ui.create("permission-blocked");return yield Ed(S,null==M?void 0:M.vapidKey),yield Yr(S,null==M?void 0:M.serviceWorkerRegistration),mf(S)})).apply(this,arguments)}function Ql(S,M,O){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,H.Z)(function*(S,M,O){const $=nu(M);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:O[ks],message_name:O[Hl],message_time:O[An],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function nu(S){switch(S){case Zi.NOTIFICATION_CLICKED:return"notification_open";case Zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xa(){return(Xa=(0,H.Z)(function*(S,M){const O=M.data;if(!O.isFirebaseMessaging)return;S.onMessageHandler&&O.messageType===Zi.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Ps(O)):S.onMessageHandler.next(Ps(O)));const $=O.data;yf($)&&"1"===$[jl]&&(yield Ql(S,O.messageType,$))})).apply(this,arguments)}const Td="@firebase/messaging";function wf(){return Js.apply(this,arguments)}function Js(){return(Js=(0,H.Z)(function*(){return"undefined"!=typeof window&&(0,ae.hl)()&&(yield(0,ae.eu)())&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,fe._registerComponent)(new ie.wA("messaging",S=>{const M=new ei(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function(S,M){return Xa.apply(this,arguments)}(M,O)),M},"PUBLIC")),(0,fe._registerComponent)(new ie.wA("messaging-internal",S=>{const M=S.getProvider("messaging").getImmediate();return{getToken:$=>function(S,M){return Dd.apply(this,arguments)}(M,$)}},"PRIVATE")),(0,fe.registerVersion)(Td,"0.9.4"),(0,fe.registerVersion)(Td,"0.9.4","esm2017");const tl="analytics",xg="firebase_id",Mo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ec="https://www.googletagmanager.com/gtag/js",Bn=new ne.Yd("@firebase/analytics");function Nd(S){return Promise.all(S.map(M=>M.catch(O=>O)))}function Og(S,M){const O=document.createElement("script");O.src=`${ec}?l=${S}&id=${M}`,O.async=!0,document.head.appendChild(O)}function nl(S,M,O,$,re,pe){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,H.Z)(function*(S,M,O,$,re,pe){const Se=$[re];try{if(Se)yield M[Se];else{const ze=(yield Nd(O)).find(Vt=>Vt.measurementId===re);ze&&(yield M[ze.appId])}}catch($e){Bn.error($e)}S("config",re,pe)})).apply(this,arguments)}function il(S,M,O,$,re){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,H.Z)(function*(S,M,O,$,re){try{let pe=[];if(re&&re.send_to){let Se=re.send_to;Array.isArray(Se)||(Se=[Se]);const $e=yield Nd(O);for(const ze of Se){const Vt=$e.find(ii=>ii.measurementId===ze),pn=Vt&&M[Vt.appId];if(!pn){pe=[];break}pe.push(pn)}}0===pe.length&&(pe=Object.values(M)),yield Promise.all(pe),S("event",$,re||{})}catch(pe){Bn.error(pe)}})).apply(this,arguments)}function Ey(){const S=window.document.getElementsByTagName("script");for(const M of Object.values(S))if(M.src&&M.src.includes(ec))return M;return null}const fs=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ru=new class{constructor(M={},O=1e3){this.throttleMetadata=M,this.intervalMillis=O}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,O){this.throttleMetadata[M]=O}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Fg(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function kd(S){return ko.apply(this,arguments)}function ko(){return(ko=(0,H.Z)(function*(S){var M;const{appId:O,apiKey:$}=S,re={method:"GET",headers:Fg($)},pe=Mo.replace("{app-id}",O),Se=yield fetch(pe,re);if(200!==Se.status&&304!==Se.status){let $e="";try{const ze=yield Se.json();(null===(M=ze.error)||void 0===M?void 0:M.message)&&($e=ze.error.message)}catch(ze){}throw fs.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:$e})}return Se.json()})).apply(this,arguments)}function Df(S){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,H.Z)(function*(S,M=ru,O){const{appId:$,apiKey:re,measurementId:pe}=S.options;if(!$)throw fs.create("no-app-id");if(!re){if(pe)return{measurementId:pe,appId:$};throw fs.create("no-api-key")}const Se=M.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new Lg;return setTimeout((0,H.Z)(function*(){$e.abort()}),void 0!==O?O:6e4),tc({appId:$,apiKey:re,measurementId:pe},Se,$e,M)})).apply(this,arguments)}function tc(S,M,O){return rl.apply(this,arguments)}function rl(){return(rl=(0,H.Z)(function*(S,{throttleEndTimeMillis:M,backoffCount:O},$,re=ru){const{appId:pe,measurementId:Se}=S;try{yield aw($,M)}catch($e){if(Se)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${$e.message}]`),{appId:pe,measurementId:Se};throw $e}try{const $e=yield kd(S);return re.deleteThrottleMetadata(pe),$e}catch($e){if(!Tf($e)){if(re.deleteThrottleMetadata(pe),Se)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${$e.message}]`),{appId:pe,measurementId:Se};throw $e}const ze=503===Number($e.customData.httpStatus)?(0,ae.$s)(O,re.intervalMillis,30):(0,ae.$s)(O,re.intervalMillis),Vt={throttleEndTimeMillis:Date.now()+ze,backoffCount:O+1};return re.setThrottleMetadata(pe,Vt),Bn.debug(`Calling attemptFetch again in ${ze} millis`),tc(S,Vt,$,re)}})).apply(this,arguments)}function aw(S,M){return new Promise((O,$)=>{const re=Math.max(M-Date.now(),0),pe=setTimeout(O,re);S.addEventListener(()=>{clearTimeout(pe),$(fs.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function Tf(S){if(!(S instanceof ae.ZR&&S.customData))return!1;const M=Number(S.customData.httpStatus);return 429===M||500===M||503===M||504===M}class Lg{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}function Sf(){return su.apply(this,arguments)}function su(){return(su=(0,H.Z)(function*(){if(!(0,ae.hl)())return Bn.warn(fs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(S){return Bn.warn(fs.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function aa(){return(aa=(0,H.Z)(function*(S,M,O,$,re,pe,Se){var $e;const ze=Df(S);ze.then(_i=>{O[_i.measurementId]=_i.appId,S.options.measurementId&&_i.measurementId!==S.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${_i.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_i=>Bn.error(_i)),M.push(ze);const Vt=Sf().then(_i=>{if(_i)return $.getId()}),[pn,ii]=yield Promise.all([ze,Vt]);Ey()||Og(pe,pn.measurementId),re("js",new Date);const pr=null!==($e=null==Se?void 0:Se.config)&&void 0!==$e?$e:{};return pr.origin="firebase",pr.update=!0,null!=ii&&(pr[xg]=ii),re("config",pn.measurementId,pr),pn.measurementId})).apply(this,arguments)}class fn{constructor(M){this.app=M}_delete(){return delete He[this.app.options.appId],Promise.resolve()}}let He={},nt=[];const xd={};let la,an,Nn="dataLayer",ic=!1;function Cn(S,M,O){!function(){const S=[];if((0,ae.ru)()&&S.push("This is a browser extension environment."),(0,ae.zI)()||S.push("Cookies are not available."),S.length>0){const M=S.map(($,re)=>`(${re+1}) ${$}`).join(" "),O=fs.create("invalid-analytics-context",{errorInfo:M});Bn.warn(O.message)}}();const $=S.options.appId;if(!$)throw fs.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw fs.create("no-api-key");Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=He[$])throw fs.create("already-exists",{id:$});if(!ic){!function(S){let M=[];Array.isArray(window[S])?M=window[S]:window[S]=M}(Nn);const{wrappedGtag:pe,gtagCore:Se}=function(S,M,O,$,re){let pe=function(...Se){window[$].push(arguments)};return window[re]&&"function"==typeof window[re]&&(pe=window[re]),window[re]=function(S,M,O,$){function pe(){return(pe=(0,H.Z)(function*(Se,$e,ze){try{"event"===Se?yield il(S,M,O,$e,ze):"config"===Se?yield nl(S,M,O,$,$e,ze):S("set",$e)}catch(Vt){Bn.error(Vt)}})).apply(this,arguments)}return function(Se,$e,ze){return pe.apply(this,arguments)}}(pe,S,M,O),{gtagCore:pe,wrappedGtag:window[re]}}(He,nt,xd,Nn,"gtag");an=pe,la=Se,ic=!0}return He[$]=function(S,M,O,$,re,pe,Se){return aa.apply(this,arguments)}(S,nt,xd,M,la,Nn,O),new fn(S)}function sl(){return(sl=(0,H.Z)(function*(S,M,O,$,re){if(re&&re.global)S("event",O,$);else{const pe=yield M;S("event",O,Object.assign(Object.assign({},$),{send_to:pe}))}})).apply(this,arguments)}function Qr(){return Af.apply(this,arguments)}function Af(){return(Af=(0,H.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(S){return!1}})).apply(this,arguments)}const Nf="@firebase/analytics";(0,fe._registerComponent)(new ie.wA(tl,(M,{options:O})=>Cn(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,fe._registerComponent)(new ie.wA("analytics-internal",function(M){try{const O=M.getProvider(tl).getImmediate();return{logEvent:($,re,pe)=>function(S,M,O,$){S=(0,ae.m9)(S),function(S,M,O,$,re){return sl.apply(this,arguments)}(an,He[S.app.options.appId],M,O,$).catch(re=>Bn.error(re))}(O,$,re,pe)}}catch(O){throw fs.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,fe.registerVersion)(Nf,"0.7.4"),(0,fe.registerVersion)(Nf,"0.7.4","esm2017");var lw=U(7771),lu=U(3637),io=U(8307),ol=U(9673),Iy=U(9746);const Mf=new a.GfV("7.1.1"),Od="__angularfire_symbol__analyticsIsSupported",Po="__angularfire_symbol__remoteConfigIsSupported",ro="__angularfire_symbol__messagingIsSupported";function Ls(S,M,O){if(M){if(1===M.length)return M[0];const pe=M.filter(Se=>Se.app===O);if(1===pe.length)return pe[0]}return O.container.getProvider(S).getImmediate({optional:!0})}globalThis[Od]||(globalThis[Od]=Qr().then(S=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=S)),globalThis[ro]||(globalThis[ro]=wf().then(S=>globalThis.__angularfire_symbol__messagingIsSupportedValue=S)),globalThis[Po]||(globalThis[Po]=bd().then(S=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=S));const oc=(S,M)=>{const O=M?[M]:(0,se.C6)(),$=[];return O.forEach(re=>{re.container.getProvider(S).instances.forEach(Se=>{$.includes(Se)||$.push(Se)})}),$};function Jr(){}class so{constructor(M,O=lw.N){this.zone=M,this.delegate=O}now(){return this.delegate.now()}schedule(M,O,$){const re=this.zone;return this.delegate.schedule(function(Se){re.runGuarded(()=>{M.apply(this,[Se])})},O,$)}}class kf{constructor(M){this.zone=M,this.task=null}call(M,O){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jr,{},Jr,Jr)),O.pipe((0,io.b)({next:$,complete:$,error:$})).subscribe(M).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fd=(()=>{class S{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new so(Zone.current)),this.insideAngular=O.run(()=>new so(Zone.current,lu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(O){return new(O||S)(a.LFG(a.R0b))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function ua(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function Ln(S){return ua(),function(S){return function(O){return(O=O.lift(new kf(S.ngZone))).pipe((0,ol.R)(S.outsideAngular),(0,Iy.QV)(S.insideAngular))}}(ua())(S)}},3854:(Ye,we,U)=>{"use strict";U.d(we,{BH:()=>he,LL:()=>Je,ZR:()=>Gt,gQ:()=>Ie,zI:()=>vt,hu:()=>se,g5:()=>H,US:()=>ie,tV:()=>K,h$:()=>ne,$s:()=>on,r3:()=>wn,Sg:()=>Ee,ne:()=>Si,p$:()=>V,vZ:()=>zt,ZB:()=>G,gK:()=>st,pd:()=>Rs,m9:()=>gd,z$:()=>Ae,GJ:()=>Ms,jU:()=>le,ru:()=>ve,d:()=>je,xb:()=>On,w1:()=>Lt,hl:()=>xn,uI:()=>Ce,UG:()=>_e,Yr:()=>tn,b$:()=>Fe,G6:()=>Tt,Mn:()=>Ut,w9:()=>Co,cI:()=>Ns,UI:()=>fi,xO:()=>Ba,zd:()=>as,DV:()=>Va,ug:()=>nn,dS:()=>cr,Pz:()=>La,Dv:()=>lr,Wj:()=>xt,lb:()=>Ot,eu:()=>St});const se=function(Q,z){if(!Q)throw H(z)},H=function(Q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Q)},fe=function(Q){const z=[];let X=0;for(let De=0;De<Q.length;De++){let ce=Q.charCodeAt(De);ce<128?z[X++]=ce:ce<2048?(z[X++]=ce>>6|192,z[X++]=63&ce|128):55296==(64512&ce)&&De+1<Q.length&&56320==(64512&Q.charCodeAt(De+1))?(ce=65536+((1023&ce)<<10)+(1023&Q.charCodeAt(++De)),z[X++]=ce>>18|240,z[X++]=ce>>12&63|128,z[X++]=ce>>6&63|128,z[X++]=63&ce|128):(z[X++]=ce>>12|224,z[X++]=ce>>6&63|128,z[X++]=63&ce|128)}return z},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,z){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ce=0;ce<Q.length;ce+=3){const Ge=Q[ce],wt=ce+1<Q.length,qt=wt?Q[ce+1]:0,Yn=ce+2<Q.length,Kn=Yn?Q[ce+2]:0;let Pi=(15&qt)<<2|Kn>>6,Xo=63&Kn;Yn||(Xo=64,wt||(Pi=64)),De.push(X[Ge>>2],X[(3&Ge)<<4|qt>>4],X[Pi],X[Xo])}return De.join("")},encodeString(Q,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(Q):this.encodeByteArray(fe(Q),z)},decodeString(Q,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(Q):function(Q){const z=[];let X=0,De=0;for(;X<Q.length;){const ce=Q[X++];if(ce<128)z[De++]=String.fromCharCode(ce);else if(ce>191&&ce<224){const Ge=Q[X++];z[De++]=String.fromCharCode((31&ce)<<6|63&Ge)}else if(ce>239&&ce<365){const Yn=((7&ce)<<18|(63&Q[X++])<<12|(63&Q[X++])<<6|63&Q[X++])-65536;z[De++]=String.fromCharCode(55296+(Yn>>10)),z[De++]=String.fromCharCode(56320+(1023&Yn))}else{const Ge=Q[X++],wt=Q[X++];z[De++]=String.fromCharCode((15&ce)<<12|(63&Ge)<<6|63&wt)}}return z.join("")}(this.decodeStringToByteArray(Q,z))},decodeStringToByteArray(Q,z){this.init_();const X=z?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ce=0;ce<Q.length;){const Ge=X[Q.charAt(ce++)],qt=ce<Q.length?X[Q.charAt(ce)]:0;++ce;const Kn=ce<Q.length?X[Q.charAt(ce)]:64;++ce;const $t=ce<Q.length?X[Q.charAt(ce)]:64;if(++ce,null==Ge||null==qt||null==Kn||null==$t)throw Error();De.push(Ge<<2|qt>>4),64!==Kn&&(De.push(qt<<4&240|Kn>>2),64!==$t&&De.push(Kn<<6&192|$t))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},ne=function(Q){const z=fe(Q);return ie.encodeByteArray(z,!0)},J=function(Q){return ne(Q).replace(/\./g,"")},K=function(Q){try{return ie.decodeString(Q,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function V(Q){return G(void 0,Q)}function G(Q,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return z}for(const X in z)!z.hasOwnProperty(X)||!W(X)||(Q[X]=G(Q[X],z[X]));return Q}function W(Q){return"__proto__"!==Q}class he{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,X)=>{this.resolve=z,this.reject=X})}wrapCallback(z){return(X,De)=>{X?this.reject(X):this.resolve(De),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(X):z(X,De))}}}function Ee(Q,z){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=z||"demo-project",ce=Q.iat||0,Ge=Q.sub||Q.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ce,exp:ce+3600,auth_time:ce,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[J(JSON.stringify({alg:"none",type:"JWT"})),J(JSON.stringify(wt)),""].join(".")}function Ae(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ce(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Q){return!1}}function le(){return"object"==typeof self&&self.self===self}function ve(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function Fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function je(){return Ae().indexOf("Electron/")>=0}function Lt(){const Q=Ae();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Ut(){return Ae().indexOf("MSAppHost/")>=0}function tn(){return!1}function Tt(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xn(){return"object"==typeof indexedDB}function St(){return new Promise((Q,z)=>{try{let X=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ce=self.indexedDB.open(De);ce.onsuccess=()=>{ce.result.close(),X||self.indexedDB.deleteDatabase(De),Q(!0)},ce.onupgradeneeded=()=>{X=!1},ce.onerror=()=>{var Ge;z((null===(Ge=ce.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(X){z(X)}})}function vt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Gt extends Error{constructor(z,X,De){super(X),this.code=z,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(z,X,De){this.service=z,this.serviceName=X,this.errors=De}create(z,...X){const De=X[0]||{},ce=`${this.service}/${z}`,Ge=this.errors[z],wt=Ge?function(Q,z){return Q.replace(wo,(X,De)=>{const ce=z[De];return null!=ce?String(ce):`<${De}?>`})}(Ge,De):"Error";return new Gt(ce,`${this.serviceName}: ${wt} (${ce}).`,De)}}const wo=/\{\$([^}]+)}/g;function Ns(Q){return JSON.parse(Q)}function La(Q){return JSON.stringify(Q)}const jt=function(Q){let z={},X={},De={},ce="";try{const Ge=Q.split(".");z=Ns(K(Ge[0])||""),X=Ns(K(Ge[1])||""),ce=Ge[2],De=X.d||{},delete X.d}catch(Ge){}return{header:z,claims:X,data:De,signature:ce}},Co=function(Q){const X=jt(Q).claims;return!!X&&"object"==typeof X&&X.hasOwnProperty("iat")},Ms=function(Q){const z=jt(Q).claims;return"object"==typeof z&&!0===z.admin};function wn(Q,z){return Object.prototype.hasOwnProperty.call(Q,z)}function Va(Q,z){if(Object.prototype.hasOwnProperty.call(Q,z))return Q[z]}function On(Q){for(const z in Q)if(Object.prototype.hasOwnProperty.call(Q,z))return!1;return!0}function fi(Q,z,X){const De={};for(const ce in Q)Object.prototype.hasOwnProperty.call(Q,ce)&&(De[ce]=z.call(X,Q[ce],ce,Q));return De}function zt(Q,z){if(Q===z)return!0;const X=Object.keys(Q),De=Object.keys(z);for(const ce of X){if(!De.includes(ce))return!1;const Ge=Q[ce],wt=z[ce];if(Pn(Ge)&&Pn(wt)){if(!zt(Ge,wt))return!1}else if(Ge!==wt)return!1}for(const ce of De)if(!X.includes(ce))return!1;return!0}function Pn(Q){return null!==Q&&"object"==typeof Q}function Ba(Q){const z=[];for(const[X,De]of Object.entries(Q))Array.isArray(De)?De.forEach(ce=>{z.push(encodeURIComponent(X)+"="+encodeURIComponent(ce))}):z.push(encodeURIComponent(X)+"="+encodeURIComponent(De));return z.length?"&"+z.join("&"):""}function as(Q){const z={};return Q.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ce,Ge]=De.split("=");z[decodeURIComponent(ce)]=decodeURIComponent(Ge)}}),z}function Rs(Q){const z=Q.indexOf("?");if(!z)return"";const X=Q.indexOf("#",z);return Q.substring(z,X>0?X:void 0)}class Ie{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,X){X||(X=0);const De=this.W_;if("string"==typeof z)for(let $t=0;$t<16;$t++)De[$t]=z.charCodeAt(X)<<24|z.charCodeAt(X+1)<<16|z.charCodeAt(X+2)<<8|z.charCodeAt(X+3),X+=4;else for(let $t=0;$t<16;$t++)De[$t]=z[X]<<24|z[X+1]<<16|z[X+2]<<8|z[X+3],X+=4;for(let $t=16;$t<80;$t++){const Pi=De[$t-3]^De[$t-8]^De[$t-14]^De[$t-16];De[$t]=4294967295&(Pi<<1|Pi>>>31)}let Kn,zi,ce=this.chain_[0],Ge=this.chain_[1],wt=this.chain_[2],qt=this.chain_[3],Yn=this.chain_[4];for(let $t=0;$t<80;$t++){$t<40?$t<20?(Kn=qt^Ge&(wt^qt),zi=1518500249):(Kn=Ge^wt^qt,zi=1859775393):$t<60?(Kn=Ge&wt|qt&(Ge|wt),zi=2400959708):(Kn=Ge^wt^qt,zi=3395469782);const Pi=(ce<<5|ce>>>27)+Kn+Yn+zi+De[$t]&4294967295;Yn=qt,qt=wt,wt=4294967295&(Ge<<30|Ge>>>2),Ge=ce,ce=Pi}this.chain_[0]=this.chain_[0]+ce&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+wt&4294967295,this.chain_[3]=this.chain_[3]+qt&4294967295,this.chain_[4]=this.chain_[4]+Yn&4294967295}update(z,X){if(null==z)return;void 0===X&&(X=z.length);const De=X-this.blockSize;let ce=0;const Ge=this.buf_;let wt=this.inbuf_;for(;ce<X;){if(0===wt)for(;ce<=De;)this.compress_(z,ce),ce+=this.blockSize;if("string"==typeof z){for(;ce<X;)if(Ge[wt]=z.charCodeAt(ce),++wt,++ce,wt===this.blockSize){this.compress_(Ge),wt=0;break}}else for(;ce<X;)if(Ge[wt]=z[ce],++wt,++ce,wt===this.blockSize){this.compress_(Ge),wt=0;break}}this.inbuf_=wt,this.total_+=X}digest(){const z=[];let X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ce=this.blockSize-1;ce>=56;ce--)this.buf_[ce]=255&X,X/=256;this.compress_(this.buf_);let De=0;for(let ce=0;ce<5;ce++)for(let Ge=24;Ge>=0;Ge-=8)z[De]=this.chain_[ce]>>Ge&255,++De;return z}}function Si(Q,z){const X=new ci(Q,z);return X.subscribe.bind(X)}class ci{constructor(z,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{z(this)}).catch(De=>{this.error(De)})}next(z){this.forEachObserver(X=>{X.next(z)})}error(z){this.forEachObserver(X=>{X.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,X,De){let ce;if(void 0===z&&void 0===X&&void 0===De)throw new Error("Missing Observer.");ce=function(Q,z){if("object"!=typeof Q||null===Q)return!1;for(const X of["next","error","complete"])if(X in Q&&"function"==typeof Q[X])return!0;return!1}(z)?z:{next:z,error:X,complete:De},void 0===ce.next&&(ce.next=ls),void 0===ce.error&&(ce.error=ls),void 0===ce.complete&&(ce.complete=ls);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ce.error(this.finalError):ce.complete()}catch(wt){}}),this.observers.push(ce),Ge}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,z)}sendOne(z,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{X(this.observers[z])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ls(){}const lr=function(Q,z,X,De){let ce;if(De<z?ce="at least "+z:De>X&&(ce=0===X?"none":"no more than "+X),ce)throw new Error(Q+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+ce+".")};function st(Q,z){return`${Q} failed: ${z} argument `}function xt(Q,z,X,De){if((!De||X)&&"function"!=typeof X)throw new Error(st(Q,z)+"must be a valid function.")}function Ot(Q,z,X,De){if((!De||X)&&("object"!=typeof X||null===X))throw new Error(st(Q,z)+"must be a valid context object.")}const cr=function(Q){const z=[];let X=0;for(let De=0;De<Q.length;De++){let ce=Q.charCodeAt(De);if(ce>=55296&&ce<=56319){const Ge=ce-55296;De++,se(De<Q.length,"Surrogate pair missing trail surrogate."),ce=65536+(Ge<<10)+(Q.charCodeAt(De)-56320)}ce<128?z[X++]=ce:ce<2048?(z[X++]=ce>>6|192,z[X++]=63&ce|128):ce<65536?(z[X++]=ce>>12|224,z[X++]=ce>>6&63|128,z[X++]=63&ce|128):(z[X++]=ce>>18|240,z[X++]=ce>>12&63|128,z[X++]=ce>>6&63|128,z[X++]=63&ce|128)}return z},nn=function(Q){let z=0;for(let X=0;X<Q.length;X++){const De=Q.charCodeAt(X);De<128?z++:De<2048?z+=2:De>=55296&&De<=56319?(z+=4,X++):z+=3}return z};function on(Q,z=1e3,X=2){const De=z*Math.pow(X,Q),ce=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+ce)}function gd(Q){return Q&&Q._delegate?Q._delegate:Q}},2329:(Ye,we,U)=>{"use strict";U.d(we,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=U(8026);(0,a.registerVersion)("firebase","9.4.0","app")},7841:(Ye,we,U)=>{"use strict";U.d(we,{Z:()=>a.Z});var a=U(3394);a.Z.registerVersion("firebase","9.4.0","app-compat")},7683:(Ye,we,U)=>{"use strict";U.r(we);var a=U(8239),se=U(3394),H=U(3854),fe=U(8026);function J(v,g){var _={};for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&g.indexOf(C)<0&&(_[C]=v[C]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(C=Object.getOwnPropertySymbols(v);N<C.length;N++)g.indexOf(C[N])<0&&Object.prototype.propertyIsEnumerable.call(v,C[N])&&(_[C[N]]=v[C[N]])}return _}var Gt=U(5422),Je=U(3910);const Co=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ms=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wn=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),On=new Gt.Yd("@firebase/auth");function fi(v,...g){On.logLevel<=Gt.in.ERROR&&On.error(`Auth (${fe.SDK_VERSION}): ${v}`,...g)}function zt(v,...g){throw Rs(v,...g)}function Pn(v,...g){return Rs(v,...g)}function Ba(v,g,_){const C=Object.assign(Object.assign({},Ms()),{[g]:_});return new H.LL("auth","Firebase",C).create(g,{appName:v.name})}function as(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&zt(v,"argument-error"),Ba(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rs(v,...g){if("string"!=typeof v){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(_,...C)}return wn.create(v,...g)}function Ie(v,g,..._){if(!v)throw Rs(g,..._)}function Si(v){const g="INTERNAL ASSERTION FAILED: "+v;throw fi(g),new Error(g)}function ci(v,g){v||Si(g)}const Ke=new Map;function Xt(v){ci(v instanceof Function,"Expected a class definition");let g=Ke.get(v);return g?(ci(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Ke.set(v,g),g)}function st(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ut(){return"http:"===xt()||"https:"===xt()}function xt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class nn{constructor(g,_){this.shortDelay=g,this.longDelay=_,ci(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,H.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Le(v,g){ci(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class rt{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Eo=new nn(3e4,6e4);function on(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function bt(v,g,_,C){return ur.apply(this,arguments)}function ur(){return(ur=(0,a.Z)(function*(v,g,_,C,N={}){return gd(v,N,()=>{let x={},Y={};C&&("GET"===g?Y=C:x={body:JSON.stringify(C)});const ue=(0,H.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),xe=new(rt.headers());return xe.set("Content-Type","application/json"),xe.set("X-Client-Version",v._getSdkClientVersion()),v.languageCode&&xe.set("X-Firebase-Locale",v.languageCode),rt.fetch()(De(v,v.config.apiHost,_,ue),Object.assign({method:g,headers:xe,referrerPolicy:"no-referrer"},x))})})).apply(this,arguments)}function gd(v,g,_){return Q.apply(this,arguments)}function Q(){return(Q=(0,a.Z)(function*(v,g,_){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},jc),g);try{const N=new ce(v),x=yield Promise.race([_(),N.promise]);N.clearNetworkTimeout();const Y=yield x.json();if("needConfirmation"in Y)throw Ge(v,"account-exists-with-different-credential",Y);if(x.ok&&!("errorMessage"in Y))return Y;{const ue=x.ok?Y.errorMessage:Y.error.message,[xe,Re]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw Ge(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===xe)throw Ge(v,"email-already-in-use",Y);const We=C[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(Re)throw Ba(v,We,Re);zt(v,We)}}catch(N){if(N instanceof H.ZR)throw N;zt(v,"network-request-failed")}})).apply(this,arguments)}function z(v,g,_,C){return X.apply(this,arguments)}function X(){return(X=(0,a.Z)(function*(v,g,_,C,N={}){const x=yield bt(v,g,_,C,N);return"mfaPendingCredential"in x&&zt(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function De(v,g,_,C){const N=`${g}${_}?${C}`;return v.config.emulator?Le(v.config,N):`${v.config.apiScheme}://${N}`}class ce{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Pn(this.auth,"timeout")),Eo.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ge(v,g,_){const C={appName:v.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const N=Pn(v,g,C);return N.customData._tokenResponse=_,N}function qt(){return(qt=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Yn(v,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function zi(v,g){return $t.apply(this,arguments)}function $t(){return($t=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Pi(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function ea(){return(ea=(0,a.Z)(function*(v,g=!1){const _=(0,H.m9)(v),C=yield _.getIdToken(g),N=ta(C);Ie(N&&N.exp&&N.auth_time&&N.iat,_.auth,"internal-error");const x="object"==typeof N.firebase?N.firebase:void 0,Y=null==x?void 0:x.sign_in_provider;return{claims:N,token:C,authTime:Pi(Gc(N.auth_time)),issuedAtTime:Pi(Gc(N.iat)),expirationTime:Pi(Gc(N.exp)),signInProvider:Y||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function Gc(v){return 1e3*Number(v)}function ta(v){const[g,_,C]=v.split(".");if(void 0===g||void 0===_||void 0===C)return fi("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,H.tV)(_);return N?JSON.parse(N):(fi("Failed to decode base64 JWT payload"),null)}catch(N){return fi("Caught error parsing JWT payload as JSON",N),null}}function zr(v,g){return pi.apply(this,arguments)}function pi(){return(pi=(0,a.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof H.ZR&&Dr(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function Dr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class cs{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const N=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,a.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,a.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class qr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function na(v){return qi.apply(this,arguments)}function qi(){return(qi=(0,a.Z)(function*(v){var g;const _=v.auth,C=yield v.getIdToken(),N=yield zr(v,zi(_,{idToken:C}));Ie(null==N?void 0:N.users.length,_,"internal-error");const x=N.users[0];v._notifyReloadListener(x);const Y=(null===(g=x.providerUserInfo)||void 0===g?void 0:g.length)?dr(x.providerUserInfo):[],ue=un(v.providerData,Y),We=!!v.isAnonymous&&!(v.email&&x.passwordHash||(null==ue?void 0:ue.length)),Qe={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ue,metadata:new qr(x.createdAt,x.lastLoginAt),isAnonymous:We};Object.assign(v,Qe)})).apply(this,arguments)}function It(){return(It=(0,a.Z)(function*(v){const g=(0,H.m9)(v);yield na(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function un(v,g){return[...v.filter(C=>!g.some(N=>N.providerId===C.providerId)),...g]}function dr(v){return v.map(g=>{var{providerId:_}=g,C=J(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Qn(){return(Qn=(0,a.Z)(function*(v,g){const _=yield gd(v,{},()=>{const C=(0,H.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:N,apiKey:x}=v.config,Y=De(v,N,"/v1/token",`key=${x}`);return rt.fetch()(Y,{method:"POST",headers:{"X-Client-Version":v._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:C})});return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ie(g.idToken,"internal-error"),Ie(void 0!==g.idToken,"internal-error"),Ie(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(v){const g=ta(v);return Ie(g,"internal-error"),Ie(void 0!==g.exp,"internal-error"),Ie(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,a.Z)(function*(){return Ie(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,a.Z)(function*(){const{accessToken:N,refreshToken:x,expiresIn:Y}=yield function(v,g){return Qn.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(N,x,Number(Y))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:N,expirationTime:x}=_,Y=new Tr;return C&&(Ie("string"==typeof C,"internal-error",{appName:g}),Y.refreshToken=C),N&&(Ie("string"==typeof N,"internal-error",{appName:g}),Y.accessToken=N),x&&(Ie("number"==typeof x,"internal-error",{appName:g}),Y.expirationTime=x),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Tr,this.toJSON())}_performRefresh(){return Si("not implemented")}}function dn(v,g){Ie("string"==typeof v||void 0===v,"internal-error",{appName:g})}class Sr{constructor(g){var{uid:_,auth:C,stsTokenManager:N}=g,x=J(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new cs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.metadata=new qr(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,a.Z)(function*(){const C=yield zr(_,_.stsTokenManager.getToken(_.auth,g));return Ie(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function(v){return ea.apply(this,arguments)}(this,g)}reload(){return function(v){return It.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ie(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Sr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,a.Z)(function*(){let N=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),N=!0),_&&(yield na(C)),yield C.auth._persistUserIfCurrent(C),N&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,a.Z)(function*(){const _=yield g.getIdToken();return yield zr(g,function(v,g){return qt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,N,x,Y,ue,xe,Re,We;const Qe=null!==(C=_.displayName)&&void 0!==C?C:void 0,Mt=null!==(N=_.email)&&void 0!==N?N:void 0,di=null!==(x=_.phoneNumber)&&void 0!==x?x:void 0,ba=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,qf=null!==(ue=_.tenantId)&&void 0!==ue?ue:void 0,Xd=null!==(xe=_._redirectEventId)&&void 0!==xe?xe:void 0,Jy=null!==(Re=_.createdAt)&&void 0!==Re?Re:void 0,Xy=null!==(We=_.lastLoginAt)&&void 0!==We?We:void 0,{uid:eh,emailVerified:ev,isAnonymous:tv,providerData:om,stsTokenManager:th}=_;Ie(eh&&th,g,"internal-error");const Wf=Tr.fromJSON(this.name,th);Ie("string"==typeof eh,g,"internal-error"),dn(Qe,g.name),dn(Mt,g.name),Ie("boolean"==typeof ev,g,"internal-error"),Ie("boolean"==typeof tv,g,"internal-error"),dn(di,g.name),dn(ba,g.name),dn(qf,g.name),dn(Xd,g.name),dn(Jy,g.name),dn(Xy,g.name);const Zf=new Sr({uid:eh,auth:g,email:Mt,emailVerified:ev,displayName:Qe,isAnonymous:tv,photoURL:ba,phoneNumber:di,tenantId:qf,stsTokenManager:Wf,createdAt:Jy,lastLoginAt:Xy});return om&&Array.isArray(om)&&(Zf.providerData=om.map(gl=>Object.assign({},gl))),Xd&&(Zf._redirectEventId=Xd),Zf}static _fromIdTokenResponse(g,_,C=!1){return(0,a.Z)(function*(){const N=new Tr;N.updateFromServerResponse(_);const x=new Sr({uid:_.localId,auth:g,stsTokenManager:N,isAnonymous:C});return yield na(x),x})()}}const ft=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(_,C){var N=this;return(0,a.Z)(function*(){N.storage[_]=C})()}_get(_){var C=this;return(0,a.Z)(function*(){const N=C.storage[_];return void 0===N?null:N})()}_remove(_){var C=this;return(0,a.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return v.type="NONE",v})();function hr(v,g,_){return`firebase:${v}:${g}:${_}`}class Wr{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:N,name:x}=this.auth;this.fullUserKey=hr(this.userKey,N.apiKey,x),this.fullPersistenceKey=hr("persistence",N.apiKey,x),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,a.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Sr._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,a.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,a.Z)(function*(){if(!_.length)return new Wr(Xt(ft),g,C);const N=(yield Promise.all(_.map(function(){var Re=(0,a.Z)(function*(We){if(yield We._isAvailable())return We});return function(We){return Re.apply(this,arguments)}}()))).filter(Re=>Re);let x=N[0]||Xt(ft);const Y=hr(C,g.config.apiKey,g.name);let ue=null;for(const Re of _)try{const We=yield Re._get(Y);if(We){const Qe=Sr._fromJSON(g,We);Re!==x&&(ue=Qe),x=Re;break}}catch(We){}const xe=N.filter(Re=>Re._shouldAllowMigration);return x._shouldAllowMigration&&xe.length?(x=xe[0],ue&&(yield x._set(Y,ue.toJSON())),yield Promise.all(_.map(function(){var Re=(0,a.Z)(function*(We){if(We!==x)try{yield We._remove(Y)}catch(Qe){}});return function(We){return Re.apply(this,arguments)}}())),new Wr(x,g,C)):new Wr(x,g,C)})()}}function Ii(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Do(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ha(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(At(g))return"Blackberry";if(nf(g))return"Webos";if(Fi(g))return"Safari";if((g.includes("chrome/")||ja(g))&&!g.includes("edge/"))return"Chrome";if(Wi(g))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function Ha(v=(0,H.z$)()){return/firefox\//i.test(v)}function Fi(v=(0,H.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ja(v=(0,H.z$)()){return/crios\//i.test(v)}function Do(v=(0,H.z$)()){return/iemobile/i.test(v)}function Wi(v=(0,H.z$)()){return/android/i.test(v)}function At(v=(0,H.z$)()){return/blackberry/i.test(v)}function nf(v=(0,H.z$)()){return/webos/i.test(v)}function $a(v=(0,H.z$)()){return/iphone|ipad|ipod/i.test(v)}function Ks(v=(0,H.z$)()){return $a(v)||Wi(v)||nf(v)||At(v)||/windows phone/i.test(v)||Do(v)}function Li(v,g=[]){let _;switch(v){case"Browser":_=Ii((0,H.z$)());break;case"Worker":_=`${Ii((0,H.z$)())}-${v}`;break;default:_=v}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${fe.SDK_VERSION}/${C}`}class _y{constructor(g,_){this.app=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vi(this),this.idTokenSubscription=new Vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=Xt(_)),this._initializationPromise=this.queue((0,a.Z)(function*(){var N,x;C._deleted||(C.persistenceManager=yield Wr.create(C,g),!C._deleted&&((null===(N=C._popupRedirectResolver)||void 0===N?void 0:N._shouldInitProactively)&&(yield C._popupRedirectResolver._initialize(C)),yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(x=C.currentUser)||void 0===x?void 0:x.uid)||null,!C._deleted&&(C._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,a.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_)}})()}initializeCurrentUser(g){var _=this;return(0,a.Z)(function*(){var C;let N=yield _.assertedPersistence.getCurrentUser();if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const x=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,Y=null==N?void 0:N._redirectEventId,ue=yield _.tryRedirectSignIn(g);(!x||x===Y)&&(null==ue?void 0:ue.user)&&(N=ue.user)}return N?N._redirectEventId?(Ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)):_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var _=this;return(0,a.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(N){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,a.Z)(function*(){try{yield na(g)}catch(C){if("auth/network-request-failed"!==C.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,a.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,a.Z)(function*(){const C=g?(0,H.m9)(g):null;return C&&Ie(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g){var _=this;return(0,a.Z)(function*(){if(!_._deleted)return g&&Ie(_.tenantId===g.tenantId,_,"tenant-id-mismatch"),_.queue((0,a.Z)(function*(){yield _.directlySetCurrentUser(g),_.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,a.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var _=this;return this.queue((0,a.Z)(function*(){yield _.assertedPersistence.setPersistence(Xt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new H.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,a.Z)(function*(){const N=yield C.getOrInitRedirectPersistenceManager(_);return null===g?N.removeCurrentUser():N.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,a.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&Xt(g)||_._popupRedirectResolver;Ie(C,_,"argument-error"),_.redirectPersistenceManager=yield Wr.create(_,[Xt(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,a.Z)(function*(){var C,N;return _._isInitialized&&(yield _.queue((0,a.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(N=_.redirectUser)||void 0===N?void 0:N._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,a.Z)(function*(){if(g===_.currentUser)return _.queue((0,a.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,N){if(this._deleted)return()=>{};const x="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return Ie(Y,this,"internal-error"),Y.then(()=>x(this.currentUser)),"function"==typeof _?g.addObserver(_,C,N):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,a.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Li(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Dn(v){return(0,H.m9)(v)}class Vi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,H.ne)(_=>this.observer=_)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ll(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function us(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Vl{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Si("not implemented")}_getIdTokenResponse(g){return Si("not implemented")}_linkToIdToken(g,_){return Si("not implemented")}_getReauthenticationResolver(g){return Si("not implemented")}}function sf(v,g){return yd.apply(this,arguments)}function yd(){return(yd=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:resetPassword",on(v,g))})).apply(this,arguments)}function Ig(v,g){return af.apply(this,arguments)}function af(){return(af=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function yy(v,g){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:update",on(v,g))})).apply(this,arguments)}function lf(){return(lf=(0,a.Z)(function*(v,g){return z(v,"POST","/v1/accounts:signInWithPassword",on(v,g))})).apply(this,arguments)}function vd(v,g){return cf.apply(this,arguments)}function cf(){return(cf=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:sendOobCode",on(v,g))})).apply(this,arguments)}function vy(v,g){return uf.apply(this,arguments)}function uf(){return(uf=(0,a.Z)(function*(v,g){return vd(v,g)})).apply(this,arguments)}function by(v,g){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,a.Z)(function*(v,g){return vd(v,g)})).apply(this,arguments)}function df(v,g){return bd.apply(this,arguments)}function bd(){return(bd=(0,a.Z)(function*(v,g){return vd(v,g)})).apply(this,arguments)}function zc(v,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,a.Z)(function*(v,g){return vd(v,g)})).apply(this,arguments)}function Ul(){return(Ul=(0,a.Z)(function*(v,g){return z(v,"POST","/v1/accounts:signInWithEmailLink",on(v,g))})).apply(this,arguments)}function ks(){return(ks=(0,a.Z)(function*(v,g){return z(v,"POST","/v1/accounts:signInWithEmailLink",on(v,g))})).apply(this,arguments)}class Hl extends Vl{constructor(g,_,C,N=null){super("password",C),this._email=g,this._password=_,this._tenantId=N}static _fromEmailAndPassword(g,_){return new Hl(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Hl(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,a.Z)(function*(){switch(_.signInMethod){case"password":return function(v,g){return lf.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(v,g){return Ul.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:zt(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,a.Z)(function*(){switch(C.signInMethod){case"password":return Ig(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(v,g){return ks.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:zt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function An(v,g){return jl.apply(this,arguments)}function jl(){return(jl=(0,a.Z)(function*(v,g){return z(v,"POST","/v1/accounts:signInWithIdp",on(v,g))})).apply(this,arguments)}class Zi extends Vl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Zi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):zt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:N}=_,x=J(_,["providerId","signInMethod"]);if(!C||!N)return null;const Y=new Zi(C,N);return Y.idToken=x.idToken||void 0,Y.accessToken=x.accessToken||void 0,Y.secret=x.secret,Y.nonce=x.nonce,Y.pendingToken=x.pendingToken||null,Y}_getIdTokenResponse(g){return An(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,An(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,An(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,H.xO)(_)}return g}}function xs(v,g){return $l.apply(this,arguments)}function $l(){return($l=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:sendVerificationCode",on(v,g))})).apply(this,arguments)}function Wc(){return(Wc=(0,a.Z)(function*(v,g){return z(v,"POST","/v1/accounts:signInWithPhoneNumber",on(v,g))})).apply(this,arguments)}function Ir(){return(Ir=(0,a.Z)(function*(v,g){const _=yield z(v,"POST","/v1/accounts:signInWithPhoneNumber",on(v,g));if(_.temporaryProof)throw Ge(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Gl={USER_NOT_FOUND:"user-not-found"};function Wa(){return(Wa=(0,a.Z)(function*(v,g){return z(v,"POST","/v1/accounts:signInWithPhoneNumber",on(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Gl)})).apply(this,arguments)}class ra extends Vl{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ra({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ra({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function(v,g){return Wc.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function(v,g){return Ir.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(v,g){return Wa.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:N}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:N}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:N,temporaryProof:x}=g;return C||_||N||x?new ra({verificationId:_,verificationCode:C,phoneNumber:N,temporaryProof:x}):null}}class hn{constructor(g){var _,C,N,x,Y,ue;const xe=(0,H.zd)((0,H.pd)(g)),Re=null!==(_=xe.apiKey)&&void 0!==_?_:null,We=null!==(C=xe.oobCode)&&void 0!==C?C:null,Qe=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=xe.mode)&&void 0!==N?N:null);Ie(Re&&We&&Qe,"argument-error"),this.apiKey=Re,this.operation=Qe,this.code=We,this.continueUrl=null!==(x=xe.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(Y=xe.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ue=xe.tenantId)&&void 0!==ue?ue:null}static parseLink(g){const _=function(v){const g=(0,H.zd)((0,H.pd)(v)).link,_=g?(0,H.zd)((0,H.pd)(g)).deep_link_id:null,C=(0,H.zd)((0,H.pd)(v)).deep_link_id;return(C?(0,H.zd)((0,H.pd)(C)).link:null)||C||_||g||v}(g);try{return new hn(_)}catch(C){return null}}}let Os=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,C){return Hl._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const N=hn.parseLink(C);return Ie(N,"argument-error"),Hl._fromEmailAndCode(_,N.code,N.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class hs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class sn extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Za extends sn{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return Ie("providerId"in _&&"signInMethod"in _,"argument-error"),Zi._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ie(g.idToken||g.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Za.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Za.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:N,pendingToken:x,nonce:Y,providerId:ue}=g;if(!C&&!N&&!_&&!x||!ue)return null;try{return new Za(ue)._credential({idToken:_,accessToken:C,nonce:Y,pendingToken:x})}catch(xe){return null}}}let Zc=(()=>{class v extends sn{constructor(){super("facebook.com")}static credential(_){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(C){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),sa=(()=>{class v extends sn{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:N}=_;if(!C&&!N)return null;try{return v.credential(C,N)}catch(x){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ar=(()=>{class v extends sn{constructor(){super("github.com")}static credential(_){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(C){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Io extends Vl{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return An(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,An(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,An(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:N,pendingToken:x}=_;return C&&N&&x&&C===N?new Io(C,x):null}static _create(g,_){return new Io(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bi extends hs{constructor(g){Ie(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Bi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Bi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Io.fromJSON(g);return Ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return Io._create(C,_)}catch(N){return null}}}let Yc=(()=>{class v extends sn{constructor(){super("twitter.com")}static credential(_,C){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:N}=_;if(!C||!N)return null;try{return v.credential(C,N)}catch(x){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Kc(v,g){return No.apply(this,arguments)}function No(){return(No=(0,a.Z)(function*(v,g){return z(v,"POST","/v1/accounts:signUp",on(v,g))})).apply(this,arguments)}class Xn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,N=!1){return(0,a.Z)(function*(){const x=yield Sr._fromIdTokenResponse(g,C,N),Y=zl(C);return new Xn({user:x,providerId:Y,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,a.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const N=zl(C);return new Xn({user:g,providerId:N,_tokenResponse:C,operationType:_})})()}}function zl(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function dt(){return(dt=(0,a.Z)(function*(v){var g;const _=Dn(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Xn({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Kc(_,{returnSecureToken:!0}),N=yield Xn._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}class Qc extends H.ZR{constructor(g,_,C,N){var x;super(_.code,_.message),this.operationType=C,this.user=N,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:g.name,tenantId:null!==(x=g.tenantId)&&void 0!==x?x:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,N){return new Qc(g,_,C,N)}}function mf(v,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Qc._fromErrorAndOperation(v,x,g,C):x})}function Jc(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Wl(){return(Wl=(0,a.Z)(function*(v,g){const _=(0,H.m9)(v);yield Te(!0,_,g);const{providerUserInfo:C}=yield Yn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),N=Jc(C||[]);return _.providerData=_.providerData.filter(x=>N.has(x.providerId)),N.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function wd(v,g){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,a.Z)(function*(v,g,_=!1){const C=yield zr(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return Xn._forOperation(v,"link",C)})).apply(this,arguments)}function Te(v,g,_){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,a.Z)(function*(v,g,_){yield na(g);const N=!1===v?"provider-already-linked":"no-such-provider";Ie(Jc(g.providerData).has(_)===v,g.auth,N)})).apply(this,arguments)}function Xc(v,g){return mn.apply(this,arguments)}function mn(){return(mn=(0,a.Z)(function*(v,g,_=!1){const{auth:C}=v,N="reauthenticate";try{const x=yield zr(v,mf(C,N,g,v),_);Ie(x.idToken,C,"internal-error");const Y=ta(x.idToken);Ie(Y,C,"internal-error");const{sub:ue}=Y;return Ie(v.uid===ue,C,"user-mismatch"),Xn._forOperation(v,N,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&zt(C,"user-mismatch"),x}})).apply(this,arguments)}function eu(v,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,a.Z)(function*(v,g,_=!1){const C="signIn",N=yield mf(v,C,g),x=yield Xn._fromIdTokenResponse(v,C,N);return _||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Yi(v,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,a.Z)(function*(v,g){return eu(Dn(v),g)})).apply(this,arguments)}function Zl(v,g){return yf.apply(this,arguments)}function yf(){return(yf=(0,a.Z)(function*(v,g){const _=(0,H.m9)(v);return yield Te(!1,_,g.providerId),wd(_,g)})).apply(this,arguments)}function Cd(v,g){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,a.Z)(function*(v,g){return Xc((0,H.m9)(v),g)})).apply(this,arguments)}function Qa(v,g){return ei.apply(this,arguments)}function ei(){return(ei=(0,a.Z)(function*(v,g){return z(v,"POST","/v1/accounts:signInWithCustomToken",on(v,g))})).apply(this,arguments)}function Yl(){return(Yl=(0,a.Z)(function*(v,g){const _=Dn(v),C=yield Qa(_,{token:g,returnSecureToken:!0}),N=yield Xn._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}class Yr{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Ki._fromServerResponse(g,_):zt(g,"internal-error")}}class Ki extends Yr{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Ki(_)}}function Ed(v,g,_){var C;Ie((null===(C=_.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),Ie(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ie(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(Ie(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Kl(){return(Kl=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v),N={requestType:"PASSWORD_RESET",email:g};_&&Ed(C,N,_),yield by(C,N)})).apply(this,arguments)}function Ql(){return(Ql=(0,a.Z)(function*(v,g,_){yield sf((0,H.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function nu(){return(nu=(0,a.Z)(function*(v,g){yield yy((0,H.m9)(v),{oobCode:g})})).apply(this,arguments)}function Ja(v,g){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,a.Z)(function*(v,g){const _=(0,H.m9)(v),C=yield sf(_,{oobCode:g}),N=C.requestType;switch(Ie(N,_,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ie(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ie(C.mfaInfo,_,"internal-error");default:Ie(C.email,_,"internal-error")}let x=null;return C.mfaInfo&&(x=Yr._fromServerResponse(Dn(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:x},operation:N}})).apply(this,arguments)}function oa(){return(oa=(0,a.Z)(function*(v,g){const{data:_}=yield Ja((0,H.m9)(v),g);return _.email})).apply(this,arguments)}function Sd(){return(Sd=(0,a.Z)(function*(v,g,_){const C=Dn(v),N=yield Kc(C,{returnSecureToken:!0,email:g,password:_}),x=yield Xn._fromIdTokenResponse(C,"signIn",N);return yield C._updateCurrentUser(x.user),x})).apply(this,arguments)}function Js(){return(Js=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v),N={requestType:"EMAIL_SIGNIN",email:g};Ie(_.handleCodeInApp,C,"argument-error"),_&&Ed(C,N,_),yield df(C,N)})).apply(this,arguments)}function gi(){return(gi=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v),N=Os.credentialWithLink(g,_||st());return Ie(N._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Yi(C,N)})).apply(this,arguments)}function el(v,g){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:createAuthUri",on(v,g))})).apply(this,arguments)}function Rg(){return(Rg=(0,a.Z)(function*(v,g){const C={identifier:g,continueUri:ut()?st():"http://localhost"},{signinMethods:N}=yield el((0,H.m9)(v),C);return N||[]})).apply(this,arguments)}function tl(){return(tl=(0,a.Z)(function*(v,g){const _=(0,H.m9)(v),N={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Ed(_.auth,N,g);const{email:x}=yield vy(_.auth,N);x!==v.email&&(yield v.reload())})).apply(this,arguments)}function Xl(){return(Xl=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&Ed(C.auth,x,_);const{email:Y}=yield zc(C.auth,x);Y!==v.email&&(yield v.reload())})).apply(this,arguments)}function iu(v,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,a.Z)(function*(v,g){return bt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Bn(){return(Bn=(0,a.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,H.m9)(v),x={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Y=yield zr(C,iu(C.auth,x));C.displayName=Y.displayName||null,C.photoURL=Y.photoUrl||null;const ue=C.providerData.find(({providerId:xe})=>"password"===xe);ue&&(ue.displayName=C.displayName,ue.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Y)})).apply(this,arguments)}function Xs(v,g,_){return nl.apply(this,arguments)}function nl(){return(nl=(0,a.Z)(function*(v,g,_){const{auth:C}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(x.email=g),_&&(x.password=_);const Y=yield zr(v,Ig(C,x));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class il{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class Ro extends il{constructor(g,_,C,N){super(g,_,C),this.username=N}}class Md extends il{constructor(g,_){super(g,"facebook.com",_)}}class Rd extends Ro{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Ey extends il{constructor(g,_){super(g,"google.com",_)}}class Dy extends Ro{constructor(g,_,C){super(g,"twitter.com",_,C)}}function fs(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(v){var g,_;if(!v)return null;const{providerId:C}=v,N=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&(null==v?void 0:v.idToken)){const Y=null===(_=null===(g=ta(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new il(x,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!C)return null;switch(C){case"facebook.com":return new Md(x,N);case"github.com":return new Rd(x,N);case"google.com":return new Ey(x,N);case"twitter.com":return new Dy(x,N,v.screenName||null);case"custom":case"anonymous":return new il(x,null);default:return new il(x,C,N)}}(_)}class Nr{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Nr("enroll",g)}static _fromMfaPendingCredential(g){return new Nr("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Nr._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return Nr._fromIdtoken(g.multiFactorSession.idToken)}return null}}class tc{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=Dn(g),N=_.customData._serverResponse,x=(N.mfaInfo||[]).map(ue=>Yr._fromServerResponse(C,ue));Ie(N.mfaPendingCredential,C,"internal-error");const Y=Nr._fromMfaPendingCredential(N.mfaPendingCredential);return new tc(Y,x,function(){var ue=(0,a.Z)(function*(xe){const Re=yield xe._process(C,Y);delete N.mfaInfo,delete N.mfaPendingCredential;const We=Object.assign(Object.assign({},N),{idToken:Re.idToken,refreshToken:Re.refreshToken});switch(_.operationType){case"signIn":const Qe=yield Xn._fromIdTokenResponse(C,_.operationType,We);return yield C._updateCurrentUser(Qe.user),Qe;case"reauthenticate":return Ie(_.user,C,"internal-error"),Xn._forOperation(_.user,_.operationType,We);default:zt(C,"internal-error")}});return function(xe){return ue.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,a.Z)(function*(){return _.signInResolver(g)})()}}function aw(v,g){return bt(v,"POST","/v2/accounts/mfaEnrollment:start",on(v,g))}class Sf{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Yr._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Sf(g)}getSession(){var g=this;return(0,a.Z)(function*(){return Nr._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,a.Z)(function*(){const N=g,x=yield C.getSession(),Y=yield zr(C.user,N._process(C.user.auth,x,_));return yield C.user._updateTokensIfNecessary(Y),C.user.reload()})()}unenroll(g){var _=this;return(0,a.Z)(function*(){const C="string"==typeof g?g:g.uid,N=yield _.user.getIdToken(),x=yield zr(_.user,function(v,g){return bt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",on(v,g))}(_.user.auth,{idToken:N,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Y})=>Y!==C),yield _.user._updateTokensIfNecessary(x);try{yield _.user.reload()}catch(Y){if("auth/user-token-expired"!==Y.code)throw Y}})()}}const su=new WeakMap,aa="__sak";class fn{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const to=(()=>{class v extends fn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,H.z$)();return Fi(v)||$a(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Ks(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const N=this.storage.getItem(C),x=this.localCache[C];N!==x&&_(C,x,N)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((ue,xe,Re)=>{this.notifyListeners(ue,Re)});const N=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(N);if(_.newValue!==ue)null!==_.newValue?this.storage.setItem(N,_.newValue):this.storage.removeItem(N);else if(this.localCache[N]===_.newValue&&!C)return}const x=()=>{const ue=this.storage.getItem(N);!C&&this.localCache[N]===ue||this.notifyListeners(N,ue)},Y=this.storage.getItem(N);(0,H.w1)()&&10===document.documentMode&&Y!==_.newValue&&_.newValue!==_.oldValue?setTimeout(x,10):x()}notifyListeners(_,C){this.localCache[_]=C;const N=this.listeners[_];if(N)for(const x of Array.from(N))x(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var N=()=>super._set,x=this;return(0,a.Z)(function*(){yield N().call(x,_,C),x.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,N=this;return(0,a.Z)(function*(){const x=yield C().call(N,_);return N.localCache[_]=JSON.stringify(x),x})()}_remove(_){var C=()=>super._remove,N=this;return(0,a.Z)(function*(){yield C().call(N,_),delete N.localCache[_]})()}}return v.type="LOCAL",v})(),an=(()=>{class v extends fn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return v.type="SESSION",v})();let Ty=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(x=>x.isListeningto(_));if(C)return C;const N=new v(_);return this.receivers.push(N),N}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,a.Z)(function*(){const N=_,{eventId:x,eventType:Y,data:ue}=N.data,xe=C.handlersMap[Y];if(!(null==xe?void 0:xe.size))return;N.ports[0].postMessage({status:"ack",eventId:x,eventType:Y});const Re=Array.from(xe).map(function(){var Qe=(0,a.Z)(function*(Mt){return Mt(N.origin,ue)});return function(Mt){return Qe.apply(this,arguments)}}()),We=yield function(v){return Promise.all(v.map(function(){var g=(0,a.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(Re);N.ports[0].postMessage({status:"done",eventId:x,eventType:Y,response:We})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function xo(v="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return v+_}class Cn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var N=this;return(0,a.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let Y,ue;return new Promise((xe,Re)=>{const We=xo("",20);x.port1.start();const Qe=setTimeout(()=>{Re(new Error("unsupported_event"))},C);ue={messageChannel:x,onMessage(Mt){const di=Mt;if(di.data.eventId===We)switch(di.data.status){case"ack":clearTimeout(Qe),Y=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),xe(di.data.response);break;default:clearTimeout(Qe),clearTimeout(Y),Re(new Error("invalid_response"))}}},N.handlers.add(ue),x.port1.addEventListener("message",ue.onMessage),N.target.postMessage({eventType:g,eventId:We,data:_},[x.port2])}).finally(()=>{ue&&N.removeMessageHandler(ue)})})()}}function Un(){return window}function rc(){return void 0!==Un().WorkerGlobalScope&&"function"==typeof Un().importScripts}function ou(){return(ou=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Kr="firebaseLocalStorageDb",ps="firebaseLocalStorage",Oo="fbase_key";class Qi{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Qr(v,g){return v.transaction([ps],g?"readwrite":"readonly").objectStore(ps)}function et(){const v=indexedDB.open(Kr,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(ps,{keyPath:Oo})}catch(N){_(N)}}),v.addEventListener("success",(0,a.Z)(function*(){const C=v.result;C.objectStoreNames.contains(ps)?g(C):(C.close(),yield function(){const v=indexedDB.deleteDatabase(Kr);return new Qi(v).toPromise()}(),g(yield et()))}))})}function Ji(v,g,_){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,a.Z)(function*(v,g,_){const C=Qr(v,!0).put({[Oo]:g,value:_});return new Qi(C).toPromise()})).apply(this,arguments)}function Mn(){return(Mn=(0,a.Z)(function*(v,g){const _=Qr(v,!1).get(g),C=yield new Qi(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Nf(v,g){const _=Qr(v,!0).delete(g);return new Qi(_).toPromise()}const lu=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,a.Z)(function*(){return _.db||(_.db=yield et()),_.db})()}_withRetries(_){var C=this;return(0,a.Z)(function*(){let N=0;for(;;)try{const x=yield C._openDb();return yield _(x)}catch(x){if(N++>3)throw x;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,a.Z)(function*(){return rc()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,a.Z)(function*(){_.receiver=Ty._getInstance(rc()?self:null),_.receiver._subscribe("keyChanged",function(){var C=(0,a.Z)(function*(N,x){return{keyProcessed:(yield _._poll()).includes(x.key)}});return function(N,x){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,a.Z)(function*(N,x){return["keyChanged"]});return function(N,x){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,a.Z)(function*(){var C,N;if(_.activeServiceWorker=yield function(){return ou.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Cn(_.activeServiceWorker);const x=yield _.sender._send("ping",{},800);!x||(null===(C=x[0])||void 0===C?void 0:C.fulfilled)&&(null===(N=x[0])||void 0===N?void 0:N.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,a.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(N){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const _=yield et();return yield Ji(_,aa,"1"),yield Nf(_,aa),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,a.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var N=this;return(0,a.Z)(function*(){return N._withPendingWrite((0,a.Z)(function*(){return yield N._withRetries(x=>Ji(x,_,C)),N.localCache[_]=C,N.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,a.Z)(function*(){const N=yield C._withRetries(x=>function(v,g){return Mn.apply(this,arguments)}(x,_));return C.localCache[_]=N,N})()}_remove(_){var C=this;return(0,a.Z)(function*(){return C._withPendingWrite((0,a.Z)(function*(){return yield C._withRetries(N=>Nf(N,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,a.Z)(function*(){const C=yield _._withRetries(Y=>{const ue=Qr(Y,!1).getAll();return new Qi(ue).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const N=[],x=new Set;for(const{fbase_key:Y,value:ue}of C)x.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(ue)&&(_.notifyListeners(Y,ue),N.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!x.has(Y)&&(_.notifyListeners(Y,null),N.push(Y));return N})()}notifyListeners(_,C){this.localCache[_]=C;const N=this.listeners[_];if(N)for(const x of Array.from(N))x(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function io(v,g){return bt(v,"POST","/v2/accounts/mfaSignIn:start",on(v,g))}function Mf(){return(Mf=(0,a.Z)(function*(v){return(yield bt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Od(v){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=g,C.onerror=N=>{const x=Pn("internal-error");x.customData=N,_(x)},C.type="text/javascript",C.charset="UTF-8",function(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(C)})}function ca(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ro=1e12;class jn{constructor(g){this.auth=g,this.counter=ro,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Pd(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||ro;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||ro))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,a.Z)(function*(){var C;return null===(C=_._widgets.get(g||ro))||void 0===C||C.execute(),""})()}}class Pd{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof g?document.getElementById(g):g;Ie(N,"argument-error",{appName:_}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<50;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}();const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mr=ca("rcb"),Ls=new nn(3e4,6e4);class Jr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Un().grecaptcha}load(g,_=""){return Ie((v=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Un().grecaptcha):new Promise((C,N)=>{const x=Un().setTimeout(()=>{N(Pn(g,"network-request-failed"))},Ls.get());Un()[Mr]=()=>{Un().clearTimeout(x),delete Un()[Mr];const ue=Un().grecaptcha;if(!ue)return void N(Pn(g,"internal-error"));const xe=ue.render;ue.render=(Re,We)=>{const Qe=xe(Re,We);return this.counter++,Qe},this.hostLanguage=_,C(ue)},Od(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:Mr,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(x),N(Pn(g,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Un().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kf{load(g){return(0,a.Z)(function*(){return new jn(g)})()}clearedOneInstance(){}}const Fd="recaptcha",ua={theme:"light",type:"image"};class Ay{constructor(g,_=Object.assign({},ua),C){this.parameters=_,this.type=Fd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(C),this.isInvisible="invisible"===this.parameters.size,Ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof g?document.getElementById(g):g;Ie(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kf:new Jr,this.validateStartingState()}verify(){var g=this;return(0,a.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(x=>{const Y=ue=>{!ue||(g.tokenChangeListeners.delete(Y),x(ue))};g.tokenChangeListeners.add(Y),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ie(!this.parameters.sitekey,this.auth,"argument-error"),Ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=Un()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){Ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,a.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,a.Z)(function*(){Ie(ut()&&!rc(),g.auth,"internal-error"),yield function(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function(v){return Mf.apply(this,arguments)}(g.auth);Ie(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ld{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ra._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Ln(){return(Ln=(0,a.Z)(function*(v,g,_){const C=Dn(v),N=yield M(C,g,(0,H.m9)(_));return new Ld(N,x=>Yi(C,x))})).apply(this,arguments)}function Vs(){return(Vs=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v);yield Te(!1,C,"phone");const N=yield M(C.auth,g,(0,H.m9)(_));return new Ld(N,x=>Zl(C,x))})).apply(this,arguments)}function S(){return(S=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v),N=yield M(C.auth,g,(0,H.m9)(_));return new Ld(N,x=>Cd(C,x))})).apply(this,arguments)}function M(v,g,_){return O.apply(this,arguments)}function O(){return(O=(0,a.Z)(function*(v,g,_){var C;const N=yield _.verify();try{let x;if(Ie("string"==typeof N,v,"argument-error"),Ie(_.type===Fd,v,"argument-error"),x="string"==typeof g?{phoneNumber:g}:g,"session"in x){const Y=x.session;if("phoneNumber"in x)return Ie("enroll"===Y.type,v,"internal-error"),(yield aw(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{Ie("signin"===Y.type,v,"internal-error");const ue=(null===(C=x.multiFactorHint)||void 0===C?void 0:C.uid)||x.multiFactorUid;return Ie(ue,v,"missing-multi-factor-info"),(yield io(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield xs(v,{phoneNumber:x.phoneNumber,recaptchaToken:N});return Y}}finally{_._reset()}})).apply(this,arguments)}function re(){return(re=(0,a.Z)(function*(v,g){yield wd((0,H.m9)(v),g)})).apply(this,arguments)}let pe=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Dn(_)}verifyPhoneNumber(_,C){return M(this.auth,_,(0,H.m9)(C))}static credential(_,C){return ra._fromVerification(_,C)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:N}=_;return C&&N?ra._fromTokenResponse(C,N):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Se(v,g){return g?Xt(g):(Ie(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class $e extends Vl{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return An(g,this._buildIdpRequest())}_linkToIdToken(g,_){return An(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return An(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function ze(v){return eu(v.auth,new $e(v),v.bypassAuthState)}function Vt(v){const{auth:g,user:_}=v;return Ie(_,g,"internal-error"),Xc(_,new $e(v),v.bypassAuthState)}function pn(v){return ii.apply(this,arguments)}function ii(){return(ii=(0,a.Z)(function*(v){const{auth:g,user:_}=v;return Ie(_,g,"internal-error"),wd(_,new $e(v),v.bypassAuthState)})).apply(this,arguments)}class pr{constructor(g,_,C,N,x=!1){this.auth=g,this.resolver=C,this.user=N,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,a.Z)(function*(C,N){g.pendingPromise={resolve:C,reject:N};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(x){g.reject(x)}});return function(C,N){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,a.Z)(function*(){const{urlResponse:C,sessionId:N,postBody:x,tenantId:Y,error:ue,type:xe}=g;if(ue)return void _.reject(ue);const Re={auth:_.auth,requestUri:C,sessionId:N,tenantId:Y||void 0,postBody:x||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(xe)(Re))}catch(We){_.reject(We)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ze;case"linkViaPopup":case"linkViaRedirect":return pn;case"reauthViaPopup":case"reauthViaRedirect":return Vt;default:zt(this.auth,"internal-error")}}resolve(g){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _i=new nn(2e3,1e4);function ha(){return(ha=(0,a.Z)(function*(v,g,_){const C=Dn(v);as(v,g,hs);const N=Se(C,_);return new Bg(C,"signInViaPopup",g,N).executeNotNull()})).apply(this,arguments)}function gs(){return(gs=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v);as(C.auth,g,hs);const N=Se(C.auth,_);return new Bg(C.auth,"reauthViaPopup",g,N,C).executeNotNull()})).apply(this,arguments)}function mt(){return(mt=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v);as(C.auth,g,hs);const N=Se(C.auth,_);return new Bg(C.auth,"linkViaPopup",g,N,C).executeNotNull()})).apply(this,arguments)}let Bg=(()=>{class v extends pr{constructor(_,C,N,x,Y){super(_,C,x,Y),this.provider=N,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,a.Z)(function*(){const C=yield _.execute();return Ie(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,a.Z)(function*(){ci(1===_.filter.length,"Popup operations only handle one event");const C=xo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(N=>{_.reject(N)}),_.resolver._isIframeWebStorageSupported(_.auth,N=>{N||_.reject(Pn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,N;this.pollId=(null===(N=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===N?void 0:N.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,_i.get())};_()}}return v.currentPopupAction=null,v})();const du=new Map;class Ug extends pr{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,a.Z)(function*(){let C=du.get(_.auth._key());if(!C){try{const x=(yield function(v,g){return lc.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(x)}catch(N){C=()=>Promise.reject(N)}du.set(_.auth._key(),C)}return _.bypassAuthState||du.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,a.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const N=yield C.auth._redirectUserForId(g.eventId);if(N)return C.user=N,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function lc(){return(lc=(0,a.Z)(function*(v,g){const _=ll(g),C=Ny(v);if(!(yield C._isAvailable()))return!1;const N="true"===(yield C._get(_));return yield C._remove(_),N})).apply(this,arguments)}function Hg(v,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,a.Z)(function*(v,g){return Ny(v)._set(ll(g),"true")})).apply(this,arguments)}function Ny(v){return Xt(v._redirectPersistence)}function ll(v){return hr("pendingRedirect",v.config.apiKey,v.name)}function Ai(){return(Ai=(0,a.Z)(function*(v,g,_){const C=Dn(v);as(v,g,hs);const N=Se(C,_);return yield Hg(N,C),N._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function hu(){return(hu=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v);as(C.auth,g,hs);const N=Se(C.auth,_);yield Hg(N,C.auth);const x=yield cc(C);return N._openRedirect(C.auth,g,"reauthViaRedirect",x)})).apply(this,arguments)}function xf(){return(xf=(0,a.Z)(function*(v,g,_){const C=(0,H.m9)(v);as(C.auth,g,hs);const N=Se(C.auth,_);yield Te(!1,C,g.providerId),yield Hg(N,C.auth);const x=yield cc(C);return N._openRedirect(C.auth,g,"linkViaRedirect",x)})).apply(this,arguments)}function fa(){return(fa=(0,a.Z)(function*(v,g){return yield Dn(v)._initializationPromise,pa(v,g,!1)})).apply(this,arguments)}function pa(v,g){return fu.apply(this,arguments)}function fu(){return(fu=(0,a.Z)(function*(v,g,_=!1){const C=Dn(v),N=Se(C,g),Y=yield new Ug(C,N,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield C._persistUserIfCurrent(Y.user),yield C._setRedirectUser(null,g)),Y})).apply(this,arguments)}function cc(v){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,a.Z)(function*(v){const g=xo(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class dw{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ky(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!ky(g)){const N=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Pn(this.auth,N))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ul(g))}saveEventToCache(g){this.cachedEventUids.add(ul(g)),this.lastProcessedEventTime=Date.now()}}function ul(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function ky({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function pu(v){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,a.Z)(function*(v,g={}){return bt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const ga=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hd=/^https?/;function jd(){return(jd=(0,a.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield pu(v);for(const _ of g)try{if(Of(_))return}catch(C){}zt(v,"unauthorized-domain")})).apply(this,arguments)}function Of(v){const g=st(),{protocol:_,hostname:C}=new URL(g);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===C?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===C}if(!Hd.test(_))return!1;if(ga.test(v))return C===v;const N=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(C)}const $d=new nn(3e4,6e4);function gu(){const v=Un().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let mu=null;function uc(v){return mu=mu||function(v){return new Promise((g,_)=>{var C,N,x;function Y(){gu(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{gu(),_(Pn(v,"network-request-failed"))},timeout:$d.get()})}if(null===(N=null===(C=Un().gapi)||void 0===C?void 0:C.iframes)||void 0===N?void 0:N.Iframe)g(gapi.iframes.getContext());else{if(!(null===(x=Un().gapi)||void 0===x?void 0:x.load)){const ue=ca("iframefcb");return Un()[ue]=()=>{gapi.load?Y():_(Pn(v,"network-request-failed"))},Od(`https://apis.google.com/js/api.js?onload=${ue}`)}Y()}}).catch(g=>{throw mu=null,g})}(v),mu}const hw=new nn(5e3,15e3),pw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ma(v){const g=v.config;Ie(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?Le(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:v.name,v:fe.SDK_VERSION},N=gw.get(v.config.apiHost);N&&(C.eid=N);const x=v._getFrameworks();return x.length&&(C.fw=x.join(",")),`${_}?${(0,H.xO)(C).slice(1)}`}function Ff(){return(Ff=(0,a.Z)(function*(v){const g=yield uc(v),_=Un().gapi;return Ie(_,v,"internal-error"),g.open({where:document.body,url:ma(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pw,dontclear:!0},C=>new Promise(function(){var N=(0,a.Z)(function*(x,Y){yield C.restyle({setHideOnLeave:!1});const ue=Pn(v,"network-request-failed"),xe=Un().setTimeout(()=>{Y(ue)},hw.get());function Re(){Un().clearTimeout(xe),x(C)}C.ping(Re).then(Re,()=>{Y(ue)})});return function(x,Y){return N.apply(this,arguments)}}()))})).apply(this,arguments)}const Oy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lf{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Ly(v,g,_,C,N,x){Ie(v.config.authDomain,v,"auth-domain-config-required"),Ie(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:C,v:fe.SDK_VERSION,eventId:N};if(g instanceof hs){g.setDefaultLanguage(v.languageCode),Y.providerId=g.providerId||"",(0,H.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[xe,Re]of Object.entries(x||{}))Y[xe]=Re}if(g instanceof sn){const xe=g.getScopes().filter(Re=>""!==Re);xe.length>0&&(Y.scopes=xe.join(","))}v.tenantId&&(Y.tid=v.tenantId);const ue=Y;for(const xe of Object.keys(ue))void 0===ue[xe]&&delete ue[xe];return`${function({config:v}){return v.emulator?Le(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,H.xO)(ue).slice(1)}`}const dl="webStorageSupport";class vu extends class{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return Si("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new vu(g)}_finalizeEnroll(g,_,C){return function(v,g){return bt(v,"POST","/v2/accounts/mfaEnrollment:finalize",on(v,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function(v,g){return bt(v,"POST","/v2/accounts/mfaSignIn:finalize",on(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vy=(()=>{class v{constructor(){}static assertion(_){return vu._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var v,bu="@firebase/auth";class KT{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,a.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var N;g((null===(N=C)||void 0===N?void 0:N.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ys(){return window}function qd(){return(qd=(0,a.Z)(function*(v,g,_){var C;const{BuildInfo:N}=ys();ci(g.sessionId,"AuthEvent did not contain a session ID");const x=yield Yd(g.sessionId),Y={};return $a()?Y.ibi=N.packageName:Wi()?Y.apn=N.packageName:zt(v,"operation-not-supported-in-this-environment"),N.displayName&&(Y.appDisplayName=N.displayName),Y.sessionId=x,Ly(v,_,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,Y)})).apply(this,arguments)}function Wd(){return(Wd=(0,a.Z)(function*(v){const{BuildInfo:g}=ys(),_={};$a()?_.iosBundleId=g.packageName:Wi()?_.androidPackageName=g.packageName:zt(v,"operation-not-supported-in-this-environment"),yield pu(v,_)})).apply(this,arguments)}function Uf(){return(Uf=(0,a.Z)(function*(v,g,_){const{cordova:C}=ys();let N=()=>{};try{yield new Promise((x,Y)=>{let ue=null;function xe(){var Qe;x();const Mt=null===(Qe=C.plugins.browsertab)||void 0===Qe?void 0:Qe.close;"function"==typeof Mt&&Mt(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Re(){ue||(ue=window.setTimeout(()=>{Y(Pn(v,"redirect-cancelled-by-user"))},2e3))}function We(){"visible"===(null==document?void 0:document.visibilityState)&&Re()}g.addPassiveListener(xe),document.addEventListener("resume",Re,!1),Wi()&&document.addEventListener("visibilitychange",We,!1),N=()=>{g.removePassiveListener(xe),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",We,!1),ue&&window.clearTimeout(ue)}})}finally{N()}})).apply(this,arguments)}function Yd(v){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,a.Z)(function*(v){const g=Zg(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Zg(v){if(ci(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let C=0;C<v.length;C++)_[C]=v.charCodeAt(C);return _}v="Browser",(0,fe._registerComponent)(new Je.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),{apiKey:N,authDomain:x}=C.options;return(Y=>{Ie(N&&!N.includes(":"),"invalid-api-key",{appName:Y.name}),Ie(!(null==x?void 0:x.includes(":")),"argument-error",{appName:Y.name});const ue={apiKey:N,authDomain:x,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Li(v)},xe=new _y(Y,ue);return function(v,g){const _=(null==g?void 0:g.persistence)||[],C=(Array.isArray(_)?_:[_]).map(Xt);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(xe,_),xe})(C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new Je.wA("auth-internal",g=>{const _=Dn(g.getProvider("auth").getImmediate());return new KT(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(bu,"0.19.2",void 0),(0,fe.registerVersion)(bu,"0.19.2","esm2017");class Hy extends dw{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,a.Z)(function*(){yield g.initPromise})()}}function Kg(v){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,a.Z)(function*(v){const g=yield Fo()._get(Jg(v));return g&&(yield Fo()._remove(Jg(v))),g})).apply(this,arguments)}function Qg(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const C=Math.floor(Math.random()*g.length);v.push(g.charAt(C))}return v.join("")}function Fo(){return Xt(to)}function Jg(v){return hr("authEvent",v.config.apiKey,v.name)}function hl(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,..._]=v.split("?");return(0,H.zd)(_.join("?"))}function hc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Pn("no-auth-event")}}function Du(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function tm(v=(0,H.z$)()){return!("file:"!==Du()&&"ionic:"!==Du()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function $y(){try{const v=self.localStorage,g=xo();if(v)return v.setItem(g,"1"),v.removeItem(g),!function(v=(0,H.z$)()){return(0,H.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,H.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,H.hl)()}catch(v){return im()&&(0,H.hl)()}return!1}function im(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function $f(){return("http:"===Du()||"https:"===Du()||(0,H.ru)()||tm())&&!((0,H.b$)()||(0,H.UG)())&&$y()&&!im()}function fc(){return tm()&&"undefined"!=typeof document}function Gf(){return(Gf=(0,a.Z)(function*(){return!!fc()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const gr={LOCAL:"local",NONE:"none",SESSION:"session"},pc=Ie,fl="persistence";function sm(v){return pl.apply(this,arguments)}function pl(){return(pl=(0,a.Z)(function*(v){yield v._initializationPromise;const g=zy(),_=hr(fl,v.config.apiKey,v.name);(null==g?void 0:g.sessionStorage)&&g.sessionStorage.setItem(_,v._getPersistence())})).apply(this,arguments)}function zy(){return"undefined"!=typeof window?window:null}const Tw=Ie;class Lo{constructor(){this.browserResolver=Xt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=an,this._completeRedirectFn=pa}_openPopup(g,_,C,N){var x=this;return(0,a.Z)(function*(){var Y;ci(null===(Y=x.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ue=Ly(g,_,C,st(),N);return function(v,g,_,C=500,N=600){const x=Math.max((window.screen.availHeight-N)/2,0).toString(),Y=Math.max((window.screen.availWidth-C)/2,0).toString();let ue="";const xe=Object.assign(Object.assign({},Oy),{width:C.toString(),height:N.toString(),top:x,left:Y}),Re=(0,H.z$)().toLowerCase();_&&(ue=ja(Re)?"_blank":_),Ha(Re)&&(g=g||"http://localhost",xe.scrollbars="yes");const We=Object.entries(xe).reduce((Mt,[di,ba])=>`${Mt}${di}=${ba},`,"");if(function(v=(0,H.z$)()){var g;return $a(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Re)&&"_self"!==ue)return function(v,g){const _=document.createElement("a");_.href=v,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",ue),new Lf(null);const Qe=window.open(g||"",ue,We);Ie(Qe,v,"popup-blocked");try{Qe.focus()}catch(Mt){}return new Lf(Qe)}(g,ue,xo())})()}_openRedirect(g,_,C,N){var x=this;return(0,a.Z)(function*(){return yield x._originValidation(g),v=Ly(g,_,C,st(),N),Un().location.href=v,new Promise(()=>{});var v})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:N,promise:x}=this.eventManagers[_];return N?Promise.resolve(N):(ci(x,"If manager is not set, promise should be"),x)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C}initAndGetManager(g){var _=this;return(0,a.Z)(function*(){const C=yield function(v){return Ff.apply(this,arguments)}(g),N=new dw(g);return C.register("authEvent",x=>(Ie(null==x?void 0:x.authEvent,g,"invalid-auth-event"),{status:N.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:N},_.iframes[g._key()]=C,N})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(dl,{type:dl},N=>{var x;const Y=null===(x=null==N?void 0:N[0])||void 0===x?void 0:x[dl];void 0!==Y&&_(!!Y),zt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(v){return jd.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ks()||Fi()||$a()}}),this.cordovaResolver=Xt(class{constructor(){this._redirectPersistence=an,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pa}_initialize(g){var _=this;return(0,a.Z)(function*(){const C=g._key();let N=_.eventManagers.get(C);return N||(N=new Hy(g),_.eventManagers.set(C,N),_.attachCallbackListeners(g,N)),N})()}_openPopup(g){zt(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,C,N){var x=this;return(0,a.Z)(function*(){!function(v){var g,_,C,N,x,Y,ue,xe,Re,We;const Qe=ys();Ie("function"==typeof(null===(g=null==Qe?void 0:Qe.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ie(void 0!==(null===(_=null==Qe?void 0:Qe.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ie("function"==typeof(null===(x=null===(N=null===(C=null==Qe?void 0:Qe.cordova)||void 0===C?void 0:C.plugins)||void 0===N?void 0:N.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(xe=null===(ue=null===(Y=null==Qe?void 0:Qe.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===xe?void 0:xe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(We=null===(Re=null==Qe?void 0:Qe.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===We?void 0:We.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield x._initialize(g);yield Y.initialized(),Y.resetRedirect(),du.clear(),yield x._originValidation(g);const ue=function(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:Qg(),postBody:null,tenantId:v.tenantId,error:Pn(v,"no-auth-event")}}(g,C,N);yield function(v,g){return Fo()._set(Jg(v),g)}(g,ue);const xe=yield function(v,g,_){return qd.apply(this,arguments)}(g,ue,_),Re=yield function(v){const{cordova:g}=ys();return new Promise(_=>{g.plugins.browsertab.isAvailable(C=>{let N=null;C?g.plugins.browsertab.openUrl(v):N=g.InAppBrowser.open(v,function(v=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(N)})})}(xe);return function(v,g,_){return Uf.apply(this,arguments)}(g,Y,Re)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(v){return Wd.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:C,handleOpenURL:N,BuildInfo:x}=ys(),Y=setTimeout((0,a.Z)(function*(){yield Kg(g),_.onEvent(hc())}),500),ue=function(){var We=(0,a.Z)(function*(Qe){clearTimeout(Y);const Mt=yield Kg(g);let di=null;Mt&&(null==Qe?void 0:Qe.url)&&(di=function(v,g){var _,C;const N=function(v){const g=hl(v),_=g.link?decodeURIComponent(g.link):void 0,C=hl(_).link,N=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return hl(N).link||N||C||_||v}(g);if(N.includes("/__/auth/callback")){const x=hl(N),Y=x.firebaseError?function(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(x.firebaseError)):null,ue=null===(C=null===(_=null==Y?void 0:Y.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],xe=ue?Pn(ue):null;return xe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:N,postBody:null}}return null}(Mt,Qe.url)),_.onEvent(di||hc())});return function(Mt){return We.apply(this,arguments)}}();void 0!==C&&"function"==typeof C.subscribe&&C.subscribe(null,ue);const xe=N,Re=`${x.packageName.toLowerCase()}://`;ys().handleOpenURL=function(){var We=(0,a.Z)(function*(Qe){if(Qe.toLowerCase().startsWith(Re)&&ue({url:Qe}),"function"==typeof xe)try{xe(Qe)}catch(Mt){console.error(Mt)}});return function(Qe){return We.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=an,this._completeRedirectFn=pa}_initialize(g){var _=this;return(0,a.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,C,N){var x=this;return(0,a.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(g,_,C,N)})()}_openRedirect(g,_,C,N){var x=this;return(0,a.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(g,_,C,N)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return fc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tw(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,a.Z)(function*(){if(g.underlyingResolver)return;const _=yield function(){return Gf.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function qy(v){return v.unwrap()}function kr(v){return Zy(v)}function Zy(v){const{_tokenResponse:g}=v instanceof H.ZR?v.customData:v;if(!g)return null;if(!(v instanceof H.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return pe.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let C;switch(_){case"google.com":C=sa;break;case"facebook.com":C=Zc;break;case"github.com":C=Ar;break;case"twitter.com":C=Yc;break;default:const{oauthIdToken:N,oauthAccessToken:x,oauthTokenSecret:Y,pendingToken:ue,nonce:xe}=g;return x||Y||N||ue?ue?_.startsWith("saml.")?Io._create(_,ue):Zi._fromParams({providerId:_,signInMethod:_,pendingToken:ue,idToken:N,accessToken:x}):new Za(_).credential({idToken:N,accessToken:x,rawNonce:xe}):null}return v instanceof H.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function er(v,g){return g.catch(_=>{throw _ instanceof H.ZR&&function(v,g){var _;const C=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Yy(v,function(v,g){var _;const C=(0,H.m9)(v),N=g;return Ie(g.customData.operationType,C,"argument-error"),Ie(null===(_=N.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),tc._fromError(C,N)}(v,g));else if(C){const N=Zy(g),x=g;N&&(x.credential=N,x.tenantId=C.tenantId||void 0,x.email=C.email||void 0,x.phoneNumber=C.phoneNumber||void 0)}}(v,_),_}).then(_=>{const N=_.user;return{operationType:_.operationType,credential:kr(_),additionalUserInfo:fs(_),user:ya.getOrCreate(N)}})}function zf(v,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,a.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:C=>er(v,_.confirm(C))}})).apply(this,arguments)}class Yy{constructor(g,_){this.resolver=_,this.auth=function(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return er(qy(this.auth),this.resolver.resolveSignIn(g))}}class ya{constructor(g){this._delegate=g,this.multiFactor=function(v){const g=(0,H.m9)(v);return su.has(g)||su.set(g,Sf._fromUser(g)),su.get(g)}(g)}static getOrCreate(g){return ya.USER_MAP.has(g)||ya.USER_MAP.set(g,new ya(g)),ya.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,a.Z)(function*(){return er(_.auth,Zl(_._delegate,g))})()}linkWithPhoneNumber(g,_){var C=this;return(0,a.Z)(function*(){return zf(C.auth,function(v,g,_){return Vs.apply(this,arguments)}(C._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,a.Z)(function*(){return er(_.auth,function(v,g,_){return mt.apply(this,arguments)}(_._delegate,g,Lo))})()}linkWithRedirect(g){var _=this;return(0,a.Z)(function*(){return yield sm(Dn(_.auth)),function(v,g,_){return function(v,g,_){return xf.apply(this,arguments)}(v,g,_)}(_._delegate,g,Lo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,a.Z)(function*(){return er(_.auth,Cd(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return zf(this.auth,function(v,g,_){return S.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return er(this.auth,function(v,g,_){return gs.apply(this,arguments)}(this._delegate,g,Lo))}reauthenticateWithRedirect(g){var _=this;return(0,a.Z)(function*(){return yield sm(Dn(_.auth)),function(v,g,_){return function(v,g,_){return hu.apply(this,arguments)}(v,g,_)}(_._delegate,g,Lo)})()}sendEmailVerification(g){return function(v,g){return tl.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,a.Z)(function*(){return yield function(v,g){return Wl.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function(v,g){return Xs((0,H.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function(v,g){return Xs((0,H.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(v,g){return re.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(v,g){return Bn.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function(v,g,_){return Xl.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ya.USER_MAP=new WeakMap;const va=Ie;let Ky=(()=>{class v{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:N}=_.options;va(N,"invalid-api-key",{appName:_.name});let x=[ft];if("undefined"!=typeof window){x=function(v,g){const _=zy();if(!(null==_?void 0:_.sessionStorage))return[];const C=hr(fl,v,g);switch(_.sessionStorage.getItem(C)){case gr.NONE:return[ft];case gr.LOCAL:return[lu,an];case gr.SESSION:return[an];default:return[]}}(N,_.name);for(const ue of[lu,to,an])x.includes(ue)||x.push(ue)}va(N,"invalid-api-key",{appName:_.name});const Y="undefined"!=typeof window?Lo:void 0;this._delegate=C.initialize({options:{persistence:x,popupRedirectResolver:Y}}),this._delegate._updateErrorMap(Co),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ya.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function(v,g,_){const C=Dn(v);Ie(C._canInitEmulator,C,"emulator-config-failed"),Ie(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const N=!!(null==_?void 0:_.disableWarnings),x=Ll(g),{host:Y,port:ue}=function(v){const g=Ll(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(C);if(N){const x=N[1];return{host:x,port:us(C.substr(x.length+1))}}{const[x,Y]=C.split(":");return{host:x,port:us(Y)}}}(g);C.config.emulator={url:`${x}//${Y}${null===ue?"":`:${ue}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Y,port:ue,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,C)}applyActionCode(_){return function(v,g){return nu.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Ja(this._delegate,_)}confirmPasswordReset(_,C){return function(v,g,_){return Ql.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var N=this;return(0,a.Z)(function*(){return er(N._delegate,function(v,g,_){return Sd.apply(this,arguments)}(N._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function(v,g){return Rg.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function(v,g){const _=hn.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,a.Z)(function*(){va($f(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function(v,g){return fa.apply(this,arguments)}(_._delegate,Lo);return C?er(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function(v,g){Dn(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,C,N){const{next:x,error:Y,complete:ue}=gc(_,C,N);return this._delegate.onAuthStateChanged(x,Y,ue)}onIdTokenChanged(_,C,N){const{next:x,error:Y,complete:ue}=gc(_,C,N);return this._delegate.onIdTokenChanged(x,Y,ue)}sendSignInLinkToEmail(_,C){return function(v,g,_){return Js.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function(v,g,_){return Kl.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,a.Z)(function*(){let N;switch(function(v,g){pc(Object.values(gr).includes(g),v,"invalid-persistence-type"),(0,H.b$)()?pc(g!==gr.SESSION,v,"unsupported-persistence-type"):(0,H.UG)()?pc(g===gr.NONE,v,"unsupported-persistence-type"):im()?pc(g===gr.NONE||g===gr.LOCAL&&(0,H.hl)(),v,"unsupported-persistence-type"):pc(g===gr.NONE||$y(),v,"unsupported-persistence-type")}(C._delegate,_),_){case gr.SESSION:N=an;break;case gr.LOCAL:N=(yield Xt(lu)._isAvailable())?lu:to;break;case gr.NONE:N=ft;break;default:return zt("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(N)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return er(this._delegate,function(v){return dt.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return er(this._delegate,Yi(this._delegate,_))}signInWithCustomToken(_){return er(this._delegate,function(v,g){return Yl.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return er(this._delegate,function(v,g,_){return Yi((0,H.m9)(v),Os.credential(g,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return er(this._delegate,function(v,g,_){return gi.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return zf(this._delegate,function(v,g,_){return Ln.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,a.Z)(function*(){return va($f(),C._delegate,"operation-not-supported-in-this-environment"),er(C._delegate,function(v,g,_){return ha.apply(this,arguments)}(C._delegate,_,Lo))})()}signInWithRedirect(_){var C=this;return(0,a.Z)(function*(){return va($f(),C._delegate,"operation-not-supported-in-this-environment"),yield sm(C._delegate),function(v,g,_){return function(v,g,_){return Ai.apply(this,arguments)}(v,g,_)}(C._delegate,_,Lo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function(v,g){return oa.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=gr,v})();function gc(v,g,_){let C=v;"function"!=typeof v&&({next:C,error:g,complete:_}=v);const N=C;return{next:Y=>N(Y&&ya.getOrCreate(Y)),error:g,complete:_}}class Us{constructor(){this.providerId="phone",this._delegate=new pe(qy(se.Z.auth()))}static credential(g,_){return pe.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}Us.PHONE_SIGN_IN_METHOD=pe.PHONE_SIGN_IN_METHOD,Us.PROVIDER_ID=pe.PROVIDER_ID;const XT=Ie;class e1{constructor(g,_,C=se.Z.app()){var N;XT(null===(N=C.options)||void 0===N?void 0:N.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new Ay(g,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new Je.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new Ky(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Os,FacebookAuthProvider:Zc,GithubAuthProvider:Ar,GoogleAuthProvider:sa,OAuthProvider:Za,SAMLAuthProvider:Bi,PhoneAuthProvider:Us,PhoneMultiFactorGenerator:Vy,RecaptchaVerifier:e1,TwitterAuthProvider:Yc,Auth:Ky,AuthCredential:Vl,Error:H.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.2")}(se.Z)},6676:function(Ye,we){!function(U){"use strict";function a(_e){return Array.prototype.slice.call(_e)}function se(_e){return new Promise(function(le,ve){_e.onsuccess=function(){le(_e.result)},_e.onerror=function(){ve(_e.error)}})}function H(_e,le,ve){var Fe,je=new Promise(function(Lt,Ut){se(Fe=_e[le].apply(_e,ve)).then(Lt,Ut)});return je.request=Fe,je}function fe(_e,le,ve){var Fe=H(_e,le,ve);return Fe.then(function(je){if(je)return new V(je,Fe.request)})}function ae(_e,le,ve){ve.forEach(function(Fe){Object.defineProperty(_e.prototype,Fe,{get:function(){return this[le][Fe]},set:function(je){this[le][Fe]=je}})})}function ie(_e,le,ve,Fe){Fe.forEach(function(je){je in ve.prototype&&(_e.prototype[je]=function(){return H(this[le],je,arguments)})})}function ne(_e,le,ve,Fe){Fe.forEach(function(je){je in ve.prototype&&(_e.prototype[je]=function(){return this[le][je].apply(this[le],arguments)})})}function J(_e,le,ve,Fe){Fe.forEach(function(je){je in ve.prototype&&(_e.prototype[je]=function(){return fe(this[le],je,arguments)})})}function K(_e){this._index=_e}function V(_e,le){this._cursor=_e,this._request=le}function G(_e){this._store=_e}function W(_e){this._tx=_e,this.complete=new Promise(function(le,ve){_e.oncomplete=function(){le()},_e.onerror=function(){ve(_e.error)},_e.onabort=function(){ve(_e.error)}})}function he(_e,le,ve){this._db=_e,this.oldVersion=le,this.transaction=new W(ve)}function Ee(_e){this._db=_e}ae(K,"_index",["name","keyPath","multiEntry","unique"]),ie(K,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),J(K,"_index",IDBIndex,["openCursor","openKeyCursor"]),ae(V,"_cursor",["direction","key","primaryKey","value"]),ie(V,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(_e){_e in IDBCursor.prototype&&(V.prototype[_e]=function(){var le=this,ve=arguments;return Promise.resolve().then(function(){return le._cursor[_e].apply(le._cursor,ve),se(le._request).then(function(Fe){if(Fe)return new V(Fe,le._request)})})})}),G.prototype.createIndex=function(){return new K(this._store.createIndex.apply(this._store,arguments))},G.prototype.index=function(){return new K(this._store.index.apply(this._store,arguments))},ae(G,"_store",["name","keyPath","indexNames","autoIncrement"]),ie(G,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),J(G,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ne(G,"_store",IDBObjectStore,["deleteIndex"]),W.prototype.objectStore=function(){return new G(this._tx.objectStore.apply(this._tx,arguments))},ae(W,"_tx",["objectStoreNames","mode"]),ne(W,"_tx",IDBTransaction,["abort"]),he.prototype.createObjectStore=function(){return new G(this._db.createObjectStore.apply(this._db,arguments))},ae(he,"_db",["name","version","objectStoreNames"]),ne(he,"_db",IDBDatabase,["deleteObjectStore","close"]),Ee.prototype.transaction=function(){return new W(this._db.transaction.apply(this._db,arguments))},ae(Ee,"_db",["name","version","objectStoreNames"]),ne(Ee,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(_e){[G,K].forEach(function(le){_e in le.prototype&&(le.prototype[_e.replace("open","iterate")]=function(){var ve=a(arguments),Fe=ve[ve.length-1],je=this._store||this._index,Lt=je[_e].apply(je,ve.slice(0,-1));Lt.onsuccess=function(){Fe(Lt.result)}})})}),[K,G].forEach(function(_e){_e.prototype.getAll||(_e.prototype.getAll=function(le,ve){var Fe=this,je=[];return new Promise(function(Lt){Fe.iterateCursor(le,function(Ut){Ut?(je.push(Ut.value),void 0===ve||je.length!=ve?Ut.continue():Lt(je)):Lt(je)})})})}),U.openDb=function(_e,le,ve){var Fe=H(indexedDB,"open",[_e,le]),je=Fe.request;return je&&(je.onupgradeneeded=function(Lt){ve&&ve(new he(je.result,Lt.oldVersion,je.transaction))}),Fe.then(function(Lt){return new Ee(Lt)})},U.deleteDb=function(_e){return H(indexedDB,"deleteDatabase",[_e])},Object.defineProperty(U,"__esModule",{value:!0})}(we)},1593:(Ye,we,U)=>{"use strict";U.d(we,{P:()=>ne});var a=U(9193),se=U(5917),H=U(7574);class ne{constructor(K,V,G){this.kind=K,this.value=V,this.error=G,this.hasValue="N"===K}observe(K){switch(this.kind){case"N":return K.next&&K.next(this.value);case"E":return K.error&&K.error(this.error);case"C":return K.complete&&K.complete()}}do(K,V,G){switch(this.kind){case"N":return K&&K(this.value);case"E":return V&&V(this.error);case"C":return G&&G()}}accept(K,V,G){return K&&"function"==typeof K.next?this.observe(K):this.do(K,V,G)}toObservable(){switch(this.kind){case"N":return(0,se.of)(this.value);case"E":return J=this.error,new H.y(V=>V.error(J));case"C":return(0,a.c)()}var J;throw new Error("unexpected notification kind value")}static createNext(K){return void 0!==K?new ne("N",K):ne.undefinedValueNotification}static createError(K){return new ne("E",void 0,K)}static createComplete(){return ne.completeNotification}}ne.completeNotification=new ne("C"),ne.undefinedValueNotification=new ne("N",void 0)},7574:(Ye,we,U)=>{"use strict";U.d(we,{y:()=>G});var a=U(7393),H=U(9181),fe=U(6490),ie=U(6554),ne=U(4487);var V=U(2494);let G=(()=>{class he{constructor(Ae){this._isScalar=!1,Ae&&(this._subscribe=Ae)}lift(Ae){const Ce=new he;return Ce.source=this,Ce.operator=Ae,Ce}subscribe(Ae,Ce,_e){const{operator:le}=this,ve=function(he,Ee,Ae){if(he){if(he instanceof a.L)return he;if(he[H.b])return he[H.b]()}return he||Ee||Ae?new a.L(he,Ee,Ae):new a.L(fe.c)}(Ae,Ce,_e);if(ve.add(le?le.call(ve,this.source):this.source||V.v.useDeprecatedSynchronousErrorHandling&&!ve.syncErrorThrowable?this._subscribe(ve):this._trySubscribe(ve)),V.v.useDeprecatedSynchronousErrorHandling&&ve.syncErrorThrowable&&(ve.syncErrorThrowable=!1,ve.syncErrorThrown))throw ve.syncErrorValue;return ve}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Ce){V.v.useDeprecatedSynchronousErrorHandling&&(Ae.syncErrorThrown=!0,Ae.syncErrorValue=Ce),function(he){for(;he;){const{closed:Ee,destination:Ae,isStopped:Ce}=he;if(Ee||Ce)return!1;he=Ae&&Ae instanceof a.L?Ae:null}return!0}(Ae)?Ae.error(Ce):console.warn(Ce)}}forEach(Ae,Ce){return new(Ce=W(Ce))((_e,le)=>{let ve;ve=this.subscribe(Fe=>{try{Ae(Fe)}catch(je){le(je),ve&&ve.unsubscribe()}},le,_e)})}_subscribe(Ae){const{source:Ce}=this;return Ce&&Ce.subscribe(Ae)}[ie.L](){return this}pipe(...Ae){return 0===Ae.length?this:function(he){return 0===he.length?ne.y:1===he.length?he[0]:function(Ae){return he.reduce((Ce,_e)=>_e(Ce),Ae)}}(Ae)(this)}toPromise(Ae){return new(Ae=W(Ae))((Ce,_e)=>{let le;this.subscribe(ve=>le=ve,ve=>_e(ve),()=>Ce(le))})}}return he.create=Ee=>new he(Ee),he})();function W(he){if(he||(he=V.v.Promise||Promise),!he)throw new Error("no Promise impl found");return he}},6490:(Ye,we,U)=>{"use strict";U.d(we,{c:()=>H});var a=U(2494),se=U(4449);const H={closed:!0,next(fe){},error(fe){if(a.v.useDeprecatedSynchronousErrorHandling)throw fe;(0,se.z)(fe)},complete(){}}},9765:(Ye,we,U)=>{"use strict";U.d(we,{Yc:()=>ne,xQ:()=>J});var a=U(7574),se=U(7393),H=U(5319),fe=U(7971),ae=U(8858),ie=U(9181);class ne extends se.L{constructor(G){super(G),this.destination=G}}let J=(()=>{class V extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ie.b](){return new ne(this)}lift(W){const he=new K(this,this);return he.operator=W,he}next(W){if(this.closed)throw new fe.N;if(!this.isStopped){const{observers:he}=this,Ee=he.length,Ae=he.slice();for(let Ce=0;Ce<Ee;Ce++)Ae[Ce].next(W)}}error(W){if(this.closed)throw new fe.N;this.hasError=!0,this.thrownError=W,this.isStopped=!0;const{observers:he}=this,Ee=he.length,Ae=he.slice();for(let Ce=0;Ce<Ee;Ce++)Ae[Ce].error(W);this.observers.length=0}complete(){if(this.closed)throw new fe.N;this.isStopped=!0;const{observers:W}=this,he=W.length,Ee=W.slice();for(let Ae=0;Ae<he;Ae++)Ee[Ae].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(W){if(this.closed)throw new fe.N;return super._trySubscribe(W)}_subscribe(W){if(this.closed)throw new fe.N;return this.hasError?(W.error(this.thrownError),H.w.EMPTY):this.isStopped?(W.complete(),H.w.EMPTY):(this.observers.push(W),new ae.W(this,W))}asObservable(){const W=new a.y;return W.source=this,W}}return V.create=(G,W)=>new K(G,W),V})();class K extends J{constructor(G,W){super(),this.destination=G,this.source=W}next(G){const{destination:W}=this;W&&W.next&&W.next(G)}error(G){const{destination:W}=this;W&&W.error&&this.destination.error(G)}complete(){const{destination:G}=this;G&&G.complete&&this.destination.complete()}_subscribe(G){const{source:W}=this;return W?this.source.subscribe(G):H.w.EMPTY}}},8858:(Ye,we,U)=>{"use strict";U.d(we,{W:()=>se});var a=U(5319);class se extends a.w{constructor(fe,ae){super(),this.subject=fe,this.subscriber=ae,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const fe=this.subject,ae=fe.observers;if(this.subject=null,!ae||0===ae.length||fe.isStopped||fe.closed)return;const ie=ae.indexOf(this.subscriber);-1!==ie&&ae.splice(ie,1)}}},7393:(Ye,we,U)=>{"use strict";U.d(we,{L:()=>ne});var a=U(9105),se=U(6490),H=U(5319),fe=U(9181),ae=U(2494),ie=U(4449);class ne extends H.w{constructor(V,G,W){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=se.c;break;case 1:if(!V){this.destination=se.c;break}if("object"==typeof V){V instanceof ne?(this.syncErrorThrowable=V.syncErrorThrowable,this.destination=V,V.add(this)):(this.syncErrorThrowable=!0,this.destination=new J(this,V));break}default:this.syncErrorThrowable=!0,this.destination=new J(this,V,G,W)}}[fe.b](){return this}static create(V,G,W){const he=new ne(V,G,W);return he.syncErrorThrowable=!1,he}next(V){this.isStopped||this._next(V)}error(V){this.isStopped||(this.isStopped=!0,this._error(V))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(V){this.destination.next(V)}_error(V){this.destination.error(V),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:V}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=V,this}}class J extends ne{constructor(V,G,W,he){super(),this._parentSubscriber=V;let Ee,Ae=this;(0,a.m)(G)?Ee=G:G&&(Ee=G.next,W=G.error,he=G.complete,G!==se.c&&(Ae=Object.create(G),(0,a.m)(Ae.unsubscribe)&&this.add(Ae.unsubscribe.bind(Ae)),Ae.unsubscribe=this.unsubscribe.bind(this))),this._context=Ae,this._next=Ee,this._error=W,this._complete=he}next(V){if(!this.isStopped&&this._next){const{_parentSubscriber:G}=this;ae.v.useDeprecatedSynchronousErrorHandling&&G.syncErrorThrowable?this.__tryOrSetError(G,this._next,V)&&this.unsubscribe():this.__tryOrUnsub(this._next,V)}}error(V){if(!this.isStopped){const{_parentSubscriber:G}=this,{useDeprecatedSynchronousErrorHandling:W}=ae.v;if(this._error)W&&G.syncErrorThrowable?(this.__tryOrSetError(G,this._error,V),this.unsubscribe()):(this.__tryOrUnsub(this._error,V),this.unsubscribe());else if(G.syncErrorThrowable)W?(G.syncErrorValue=V,G.syncErrorThrown=!0):(0,ie.z)(V),this.unsubscribe();else{if(this.unsubscribe(),W)throw V;(0,ie.z)(V)}}}complete(){if(!this.isStopped){const{_parentSubscriber:V}=this;if(this._complete){const G=()=>this._complete.call(this._context);ae.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?(this.__tryOrSetError(V,G),this.unsubscribe()):(this.__tryOrUnsub(G),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(V,G){try{V.call(this._context,G)}catch(W){if(this.unsubscribe(),ae.v.useDeprecatedSynchronousErrorHandling)throw W;(0,ie.z)(W)}}__tryOrSetError(V,G,W){if(!ae.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{G.call(this._context,W)}catch(he){return ae.v.useDeprecatedSynchronousErrorHandling?(V.syncErrorValue=he,V.syncErrorThrown=!0,!0):((0,ie.z)(he),!0)}return!1}_unsubscribe(){const{_parentSubscriber:V}=this;this._context=null,this._parentSubscriber=null,V.unsubscribe()}}},5319:(Ye,we,U)=>{"use strict";U.d(we,{w:()=>ie});var a=U(9796),se=U(1555),H=U(9105);const ae=(()=>{function J(K){return Error.call(this),this.message=K?`${K.length} errors occurred during unsubscription:\n${K.map((V,G)=>`${G+1}) ${V.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=K,this}return J.prototype=Object.create(Error.prototype),J})();class ie{constructor(K){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,K&&(this._ctorUnsubscribe=!0,this._unsubscribe=K)}unsubscribe(){let K;if(this.closed)return;let{_parentOrParents:V,_ctorUnsubscribe:G,_unsubscribe:W,_subscriptions:he}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,V instanceof ie)V.remove(this);else if(null!==V)for(let Ee=0;Ee<V.length;++Ee)V[Ee].remove(this);if((0,H.m)(W)){G&&(this._unsubscribe=void 0);try{W.call(this)}catch(Ee){K=Ee instanceof ae?ne(Ee.errors):[Ee]}}if((0,a.k)(he)){let Ee=-1,Ae=he.length;for(;++Ee<Ae;){const Ce=he[Ee];if((0,se.K)(Ce))try{Ce.unsubscribe()}catch(_e){K=K||[],_e instanceof ae?K=K.concat(ne(_e.errors)):K.push(_e)}}}if(K)throw new ae(K)}add(K){let V=K;if(!K)return ie.EMPTY;switch(typeof K){case"function":V=new ie(K);case"object":if(V===this||V.closed||"function"!=typeof V.unsubscribe)return V;if(this.closed)return V.unsubscribe(),V;if(!(V instanceof ie)){const he=V;V=new ie,V._subscriptions=[he]}break;default:throw new Error("unrecognized teardown "+K+" added to Subscription.")}let{_parentOrParents:G}=V;if(null===G)V._parentOrParents=this;else if(G instanceof ie){if(G===this)return V;V._parentOrParents=[G,this]}else{if(-1!==G.indexOf(this))return V;G.push(this)}const W=this._subscriptions;return null===W?this._subscriptions=[V]:W.push(V),V}remove(K){const V=this._subscriptions;if(V){const G=V.indexOf(K);-1!==G&&V.splice(G,1)}}}var J;function ne(J){return J.reduce((K,V)=>K.concat(V instanceof ae?V.errors:V),[])}ie.EMPTY=((J=new ie).closed=!0,J)},2494:(Ye,we,U)=>{"use strict";U.d(we,{v:()=>se});let a=!1;const se={Promise:void 0,set useDeprecatedSynchronousErrorHandling(H){if(H){const fe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+fe.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=H},get useDeprecatedSynchronousErrorHandling(){return a}}},5345:(Ye,we,U)=>{"use strict";U.d(we,{IY:()=>fe,Ds:()=>ie,ft:()=>J});var a=U(7393),se=U(7574),H=U(7444);class fe extends a.L{constructor(V){super(),this.parent=V}_next(V){this.parent.notifyNext(V)}_error(V){this.parent.notifyError(V),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ie extends a.L{notifyNext(V){this.destination.next(V)}notifyError(V){this.destination.error(V)}notifyComplete(){this.destination.complete()}}function J(K,V){if(V.closed)return;if(K instanceof se.y)return K.subscribe(V);let G;try{G=(0,H.s)(K)(V)}catch(W){V.error(W)}return G}},2441:(Ye,we,U)=>{"use strict";U.d(we,{c:()=>ae,N:()=>ie});var a=U(9765),se=U(7574),H=U(5319),fe=U(1307);class ae extends se.y{constructor(G,W){super(),this.source=G,this.subjectFactory=W,this._refCount=0,this._isComplete=!1}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let G=this._connection;return G||(this._isComplete=!1,G=this._connection=new H.w,G.add(this.source.subscribe(new ne(this.getSubject(),this))),G.closed&&(this._connection=null,G=H.w.EMPTY)),G}refCount(){return(0,fe.x)()(this)}}const ie=(()=>{const V=ae.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:V._subscribe},_isComplete:{value:V._isComplete,writable:!0},getSubject:{value:V.getSubject},connect:{value:V.connect},refCount:{value:V.refCount}}})();class ne extends a.Yc{constructor(G,W){super(G),this.connectable=W}_error(G){this._unsubscribe(),super._error(G)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const G=this.connectable;if(G){this.connectable=null;const W=G._connection;G._refCount=0,G._subject=null,G._connection=null,W&&W.unsubscribe()}}}},9193:(Ye,we,U)=>{"use strict";U.d(we,{E:()=>se,c:()=>H});var a=U(7574);const se=new a.y(ae=>ae.complete());function H(ae){return ae?function(ae){return new a.y(ie=>ae.schedule(()=>ie.complete()))}(ae):se}},4402:(Ye,we,U)=>{"use strict";U.d(we,{D:()=>Ae});var a=U(7574),se=U(7444),H=U(5319),fe=U(6554),ne=U(4087),J=U(377),G=U(4072),W=U(9489);function Ae(Ce,_e){return _e?function(Ce,_e){if(null!=Ce){if(function(Ce){return Ce&&"function"==typeof Ce[fe.L]}(Ce))return function(Ce,_e){return new a.y(le=>{const ve=new H.w;return ve.add(_e.schedule(()=>{const Fe=Ce[fe.L]();ve.add(Fe.subscribe({next(je){ve.add(_e.schedule(()=>le.next(je)))},error(je){ve.add(_e.schedule(()=>le.error(je)))},complete(){ve.add(_e.schedule(()=>le.complete()))}}))})),ve})}(Ce,_e);if((0,G.t)(Ce))return function(Ce,_e){return new a.y(le=>{const ve=new H.w;return ve.add(_e.schedule(()=>Ce.then(Fe=>{ve.add(_e.schedule(()=>{le.next(Fe),ve.add(_e.schedule(()=>le.complete()))}))},Fe=>{ve.add(_e.schedule(()=>le.error(Fe)))}))),ve})}(Ce,_e);if((0,W.z)(Ce))return(0,ne.r)(Ce,_e);if(function(Ce){return Ce&&"function"==typeof Ce[J.hZ]}(Ce)||"string"==typeof Ce)return function(Ce,_e){if(!Ce)throw new Error("Iterable cannot be null");return new a.y(le=>{const ve=new H.w;let Fe;return ve.add(()=>{Fe&&"function"==typeof Fe.return&&Fe.return()}),ve.add(_e.schedule(()=>{Fe=Ce[J.hZ](),ve.add(_e.schedule(function(){if(le.closed)return;let je,Lt;try{const Ut=Fe.next();je=Ut.value,Lt=Ut.done}catch(Ut){return void le.error(Ut)}Lt?le.complete():(le.next(je),this.schedule())}))})),ve})}(Ce,_e)}throw new TypeError((null!==Ce&&typeof Ce||Ce)+" is not observable")}(Ce,_e):Ce instanceof a.y?Ce:new a.y((0,se.s)(Ce))}},6693:(Ye,we,U)=>{"use strict";U.d(we,{n:()=>fe});var a=U(7574),se=U(5015),H=U(4087);function fe(ae,ie){return ie?(0,H.r)(ae,ie):new a.y((0,se.V)(ae))}},6682:(Ye,we,U)=>{"use strict";U.d(we,{T:()=>ae});var a=U(7574),se=U(4869),H=U(3282),fe=U(6693);function ae(...ie){let ne=Number.POSITIVE_INFINITY,J=null,K=ie[ie.length-1];return(0,se.K)(K)?(J=ie.pop(),ie.length>1&&"number"==typeof ie[ie.length-1]&&(ne=ie.pop())):"number"==typeof K&&(ne=ie.pop()),null===J&&1===ie.length&&ie[0]instanceof a.y?ie[0]:(0,H.J)(ne)((0,fe.n)(ie,J))}},5917:(Ye,we,U)=>{"use strict";U.d(we,{of:()=>fe});var a=U(4869),se=U(6693),H=U(4087);function fe(...ae){let ie=ae[ae.length-1];return(0,a.K)(ie)?(ae.pop(),(0,H.r)(ae,ie)):(0,se.n)(ae)}},8002:(Ye,we,U)=>{"use strict";U.d(we,{U:()=>se});var a=U(7393);function se(ae,ie){return function(J){if("function"!=typeof ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return J.lift(new H(ae,ie))}}class H{constructor(ie,ne){this.project=ie,this.thisArg=ne}call(ie,ne){return ne.subscribe(new fe(ie,this.project,this.thisArg))}}class fe extends a.L{constructor(ie,ne,J){super(ie),this.project=ne,this.count=0,this.thisArg=J||this}_next(ie){let ne;try{ne=this.project.call(this.thisArg,ie,this.count++)}catch(J){return void this.destination.error(J)}this.destination.next(ne)}}},3282:(Ye,we,U)=>{"use strict";U.d(we,{J:()=>H});var a=U(9773),se=U(4487);function H(fe=Number.POSITIVE_INFINITY){return(0,a.zg)(se.y,fe)}},9773:(Ye,we,U)=>{"use strict";U.d(we,{zg:()=>fe});var a=U(8002),se=U(4402),H=U(5345);function fe(J,K,V=Number.POSITIVE_INFINITY){return"function"==typeof K?G=>G.pipe(fe((W,he)=>(0,se.D)(J(W,he)).pipe((0,a.U)((Ee,Ae)=>K(W,Ee,he,Ae))),V)):("number"==typeof K&&(V=K),G=>G.lift(new ae(J,V)))}class ae{constructor(K,V=Number.POSITIVE_INFINITY){this.project=K,this.concurrent=V}call(K,V){return V.subscribe(new ie(K,this.project,this.concurrent))}}class ie extends H.Ds{constructor(K,V,G=Number.POSITIVE_INFINITY){super(K),this.project=V,this.concurrent=G,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(K){this.active<this.concurrent?this._tryNext(K):this.buffer.push(K)}_tryNext(K){let V;const G=this.index++;try{V=this.project(K,G)}catch(W){return void this.destination.error(W)}this.active++,this._innerSub(V)}_innerSub(K){const V=new H.IY(this),G=this.destination;G.add(V);const W=(0,H.ft)(K,V);W!==V&&G.add(W)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(K){this.destination.next(K)}notifyComplete(){const K=this.buffer;this.active--,K.length>0?this._next(K.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(Ye,we,U)=>{"use strict";U.d(we,{QV:()=>H,ht:()=>ae});var a=U(7393),se=U(1593);function H(ne,J=0){return function(V){return V.lift(new fe(ne,J))}}class fe{constructor(J,K=0){this.scheduler=J,this.delay=K}call(J,K){return K.subscribe(new ae(J,this.scheduler,this.delay))}}class ae extends a.L{constructor(J,K,V=0){super(J),this.scheduler=K,this.delay=V}static dispatch(J){const{notification:K,destination:V}=J;K.observe(V),this.unsubscribe()}scheduleMessage(J){this.destination.add(this.scheduler.schedule(ae.dispatch,this.delay,new ie(J,this.destination)))}_next(J){this.scheduleMessage(se.P.createNext(J))}_error(J){this.scheduleMessage(se.P.createError(J)),this.unsubscribe()}_complete(){this.scheduleMessage(se.P.createComplete()),this.unsubscribe()}}class ie{constructor(J,K){this.notification=J,this.destination=K}}},1307:(Ye,we,U)=>{"use strict";U.d(we,{x:()=>se});var a=U(7393);function se(){return function(ie){return ie.lift(new H(ie))}}class H{constructor(ie){this.connectable=ie}call(ie,ne){const{connectable:J}=this;J._refCount++;const K=new fe(ie,J),V=ne.subscribe(K);return K.closed||(K.connection=J.connect()),V}}class fe extends a.L{constructor(ie,ne){super(ie),this.connectable=ne}_unsubscribe(){const{connectable:ie}=this;if(!ie)return void(this.connection=null);this.connectable=null;const ne=ie._refCount;if(ne<=0)return void(this.connection=null);if(ie._refCount=ne-1,ne>1)return void(this.connection=null);const{connection:J}=this,K=ie._connection;this.connection=null,K&&(!J||K===J)&&K.unsubscribe()}}},8819:(Ye,we,U)=>{"use strict";U.d(we,{B:()=>ne});var a=U(2441);var fe=U(1307),ae=U(9765);function ie(){return new ae.xQ}function ne(){return J=>(0,fe.x)()(function(J,K){return function(G){let W;W="function"==typeof J?J:function(){return J};const he=Object.create(G,a.N);return he.source=G,he.subjectFactory=W,he}}(ie)(J))}},9673:(Ye,we,U)=>{"use strict";U.d(we,{R:()=>ae});var a=U(7574),se=U(4581),H=U(6561);class fe extends a.y{constructor(J,K=0,V=se.e){super(),this.source=J,this.delayTime=K,this.scheduler=V,(!(0,H.k)(K)||K<0)&&(this.delayTime=0),(!V||"function"!=typeof V.schedule)&&(this.scheduler=se.e)}static create(J,K=0,V=se.e){return new fe(J,K,V)}static dispatch(J){const{source:K,subscriber:V}=J;return this.add(K.subscribe(V))}_subscribe(J){return this.scheduler.schedule(fe.dispatch,this.delayTime,{source:this.source,subscriber:J})}}function ae(ne,J=0){return function(V){return V.lift(new ie(ne,J))}}class ie{constructor(J,K){this.scheduler=J,this.delay=K}call(J,K){return new fe(K,this.delay,this.scheduler).subscribe(J)}}},8307:(Ye,we,U)=>{"use strict";U.d(we,{b:()=>fe});var a=U(7393),se=U(8640),H=U(9105);function fe(ne,J,K){return function(G){return G.lift(new ae(ne,J,K))}}class ae{constructor(J,K,V){this.nextOrObserver=J,this.error=K,this.complete=V}call(J,K){return K.subscribe(new ie(J,this.nextOrObserver,this.error,this.complete))}}class ie extends a.L{constructor(J,K,V,G){super(J),this._tapNext=se.Z,this._tapError=se.Z,this._tapComplete=se.Z,this._tapError=V||se.Z,this._tapComplete=G||se.Z,(0,H.m)(K)?(this._context=this,this._tapNext=K):K&&(this._context=K,this._tapNext=K.next||se.Z,this._tapError=K.error||se.Z,this._tapComplete=K.complete||se.Z)}_next(J){try{this._tapNext.call(this._context,J)}catch(K){return void this.destination.error(K)}this.destination.next(J)}_error(J){try{this._tapError.call(this._context,J)}catch(K){return void this.destination.error(K)}this.destination.error(J)}_complete(){try{this._tapComplete.call(this._context)}catch(J){return void this.destination.error(J)}return this.destination.complete()}}},4087:(Ye,we,U)=>{"use strict";U.d(we,{r:()=>H});var a=U(7574),se=U(5319);function H(fe,ae){return new a.y(ie=>{const ne=new se.w;let J=0;return ne.add(ae.schedule(function(){J!==fe.length?(ie.next(fe[J++]),ie.closed||ne.add(this.schedule())):ie.complete()})),ne})}},6465:(Ye,we,U)=>{"use strict";U.d(we,{o:()=>H});var a=U(5319);class se extends a.w{constructor(ae,ie){super()}schedule(ae,ie=0){return this}}class H extends se{constructor(ae,ie){super(ae,ie),this.scheduler=ae,this.work=ie,this.pending=!1}schedule(ae,ie=0){if(this.closed)return this;this.state=ae;const ne=this.id,J=this.scheduler;return null!=ne&&(this.id=this.recycleAsyncId(J,ne,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(J,this.id,ie),this}requestAsyncId(ae,ie,ne=0){return setInterval(ae.flush.bind(ae,this),ne)}recycleAsyncId(ae,ie,ne=0){if(null!==ne&&this.delay===ne&&!1===this.pending)return ie;clearInterval(ie)}execute(ae,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ne=this._execute(ae,ie);if(ne)return ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ie){let J,ne=!1;try{this.work(ae)}catch(K){ne=!0,J=!!K&&K||new Error(K)}if(ne)return this.unsubscribe(),J}_unsubscribe(){const ae=this.id,ie=this.scheduler,ne=ie.actions,J=ne.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==J&&ne.splice(J,1),null!=ae&&(this.id=this.recycleAsyncId(ie,ae,null)),this.delay=null}}},6102:(Ye,we,U)=>{"use strict";U.d(we,{v:()=>se});let a=(()=>{class H{constructor(ae,ie=H.now){this.SchedulerAction=ae,this.now=ie}schedule(ae,ie=0,ne){return new this.SchedulerAction(this,ae).schedule(ne,ie)}}return H.now=()=>Date.now(),H})();class se extends a{constructor(fe,ae=a.now){super(fe,()=>se.delegate&&se.delegate!==this?se.delegate.now():ae()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(fe,ae=0,ie){return se.delegate&&se.delegate!==this?se.delegate.schedule(fe,ae,ie):super.schedule(fe,ae,ie)}flush(fe){const{actions:ae}=this;if(this.active)return void ae.push(fe);let ie;this.active=!0;do{if(ie=fe.execute(fe.state,fe.delay))break}while(fe=ae.shift());if(this.active=!1,ie){for(;fe=ae.shift();)fe.unsubscribe();throw ie}}}},4581:(Ye,we,U)=>{"use strict";U.d(we,{e:()=>W,E:()=>G});let a=1;const se=Promise.resolve(),H={};function fe(he){return he in H&&(delete H[he],!0)}const ae={setImmediate(he){const Ee=a++;return H[Ee]=!0,se.then(()=>fe(Ee)&&he()),Ee},clearImmediate(he){fe(he)}};var ne=U(6465),K=U(6102);const G=new class extends K.v{flush(Ee){this.active=!0,this.scheduled=void 0;const{actions:Ae}=this;let Ce,_e=-1,le=Ae.length;Ee=Ee||Ae.shift();do{if(Ce=Ee.execute(Ee.state,Ee.delay))break}while(++_e<le&&(Ee=Ae.shift()));if(this.active=!1,Ce){for(;++_e<le&&(Ee=Ae.shift());)Ee.unsubscribe();throw Ce}}}(class extends ne.o{constructor(Ee,Ae){super(Ee,Ae),this.scheduler=Ee,this.work=Ae}requestAsyncId(Ee,Ae,Ce=0){return null!==Ce&&Ce>0?super.requestAsyncId(Ee,Ae,Ce):(Ee.actions.push(this),Ee.scheduled||(Ee.scheduled=ae.setImmediate(Ee.flush.bind(Ee,null))))}recycleAsyncId(Ee,Ae,Ce=0){if(null!==Ce&&Ce>0||null===Ce&&this.delay>0)return super.recycleAsyncId(Ee,Ae,Ce);0===Ee.actions.length&&(ae.clearImmediate(Ae),Ee.scheduled=void 0)}}),W=G},3637:(Ye,we,U)=>{"use strict";U.d(we,{z:()=>H,P:()=>fe});var a=U(6465);const H=new(U(6102).v)(a.o),fe=H},7771:(Ye,we,U)=>{"use strict";U.d(we,{c:()=>ie,N:()=>ae});var a=U(6465),H=U(6102);const ae=new class extends H.v{}(class extends a.o{constructor(J,K){super(J,K),this.scheduler=J,this.work=K}schedule(J,K=0){return K>0?super.schedule(J,K):(this.delay=K,this.state=J,this.scheduler.flush(this),this)}execute(J,K){return K>0||this.closed?super.execute(J,K):this._execute(J,K)}requestAsyncId(J,K,V=0){return null!==V&&V>0||null===V&&this.delay>0?super.requestAsyncId(J,K,V):J.flush(this)}}),ie=ae},377:(Ye,we,U)=>{"use strict";U.d(we,{hZ:()=>se});const se="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ye,we,U)=>{"use strict";U.d(we,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ye,we,U)=>{"use strict";U.d(we,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ye,we,U)=>{"use strict";U.d(we,{N:()=>se});const se=(()=>{function H(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return H.prototype=Object.create(Error.prototype),H})()},4449:(Ye,we,U)=>{"use strict";function a(se){setTimeout(()=>{throw se},0)}U.d(we,{z:()=>a})},4487:(Ye,we,U)=>{"use strict";function a(se){return se}U.d(we,{y:()=>a})},9796:(Ye,we,U)=>{"use strict";U.d(we,{k:()=>a});const a=Array.isArray||(se=>se&&"number"==typeof se.length)},9489:(Ye,we,U)=>{"use strict";U.d(we,{z:()=>a});const a=se=>se&&"number"==typeof se.length&&"function"!=typeof se},9105:(Ye,we,U)=>{"use strict";function a(se){return"function"==typeof se}U.d(we,{m:()=>a})},6561:(Ye,we,U)=>{"use strict";U.d(we,{k:()=>se});var a=U(9796);function se(H){return!(0,a.k)(H)&&H-parseFloat(H)+1>=0}},1555:(Ye,we,U)=>{"use strict";function a(se){return null!==se&&"object"==typeof se}U.d(we,{K:()=>a})},4072:(Ye,we,U)=>{"use strict";function a(se){return!!se&&"function"!=typeof se.subscribe&&"function"==typeof se.then}U.d(we,{t:()=>a})},4869:(Ye,we,U)=>{"use strict";function a(se){return se&&"function"==typeof se.schedule}U.d(we,{K:()=>a})},8640:(Ye,we,U)=>{"use strict";function a(){}U.d(we,{Z:()=>a})},7444:(Ye,we,U)=>{"use strict";U.d(we,{s:()=>G});var a=U(5015),se=U(4449),fe=U(377),ie=U(6554),J=U(9489),K=U(4072),V=U(1555);const G=W=>{if(W&&"function"==typeof W[ie.L])return(W=>he=>{const Ee=W[ie.L]();if("function"!=typeof Ee.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ee.subscribe(he)})(W);if((0,J.z)(W))return(0,a.V)(W);if((0,K.t)(W))return(W=>he=>(W.then(Ee=>{he.closed||(he.next(Ee),he.complete())},Ee=>he.error(Ee)).then(null,se.z),he))(W);if(W&&"function"==typeof W[fe.hZ])return(W=>he=>{const Ee=W[fe.hZ]();for(;;){let Ae;try{Ae=Ee.next()}catch(Ce){return he.error(Ce),he}if(Ae.done){he.complete();break}if(he.next(Ae.value),he.closed)break}return"function"==typeof Ee.return&&he.add(()=>{Ee.return&&Ee.return()}),he})(W);{const Ee=`You provided ${(0,V.K)(W)?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ee)}}},5015:(Ye,we,U)=>{"use strict";U.d(we,{V:()=>a});const a=se=>H=>{for(let fe=0,ae=se.length;fe<ae&&!H.closed;fe++)H.next(se[fe]);H.complete()}},5911:(Ye,we,U)=>{"use strict";var a=U(7716);let se=null;function H(){return se}const ne=new a.OlP("DocumentToken");let J=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:K,token:n,providedIn:"platform"}),n})();function K(){return(0,a.LFG)(G)}const V=new a.OlP("Location Initialized");let G=(()=>{class n extends J{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(e){const i=H().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=H().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){W()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){W()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne))},n.\u0275prov=(0,a.Yz7)({factory:he,token:n,providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function he(){return new G((0,a.LFG)(ne))}function Ee(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ae(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ce(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:le,token:n,providedIn:"root"}),n})();function le(n){const t=(0,a.LFG)(ne).location;return new Fe((0,a.LFG)(J),t&&t.origin||"")}const ve=new a.OlP("appBaseHref");let Fe=(()=>{class n extends _e{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ee(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Ce(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,l){const u=this.prepareExternalUrl(r+Ce(l));this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,l){const u=this.prepareExternalUrl(r+Ce(l));this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(J),a.LFG(ve,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n extends _e{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Ee(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,l){let u=this.prepareExternalUrl(r+Ce(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,l){let u=this.prepareExternalUrl(r+Ce(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(J),a.LFG(ve,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Lt=(()=>{class n{constructor(e,i){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Ae(Tt(r)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Ce(i))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Tt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ce(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ce(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(_e),a.LFG(J))},n.normalizeQueryParams=Ce,n.joinWithSlash=Ee,n.stripTrailingSlash=Ae,n.\u0275prov=(0,a.Yz7)({factory:Ut,token:n,providedIn:"root"}),n})();function Ut(){return new Lt((0,a.LFG)(_e),(0,a.LFG)(J))}function Tt(n){return n.replace(/\/index.html$/,"")}var vt=(()=>((vt=vt||{})[vt.Zero=0]="Zero",vt[vt.One=1]="One",vt[vt.Two=2]="Two",vt[vt.Few=3]="Few",vt[vt.Many=4]="Many",vt[vt.Other=5]="Other",vt))();const Rs=a.kL8;class hr{}let Ii=(()=>{class n extends hr{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(Rs(i||this.locale)(e)){case vt.Zero:return"zero";case vt.One:return"one";case vt.Two:return"two";case vt.Few:return"few";case vt.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.soG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),An=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[{provide:hr,useClass:Ii}]}),n})();function qc(n){return"server"===n}let Gl=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new ff((0,a.LFG)(ne),window)}),n})();class ff{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const l=r.shadowRoot;if(l){const u=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(i-l[0],r-l[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Wa(this.window.history)||Wa(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Wa(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class gf extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new gf,se||(se=n)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Os=Os||document.querySelector("base"),Os?Os.getAttribute("href"):null);return null==e?null:function(n){sn=sn||document.createElement("a"),sn.setAttribute("href",n);const t=sn.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Os=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,l]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(l)}return null}(document.cookie,t)}}let sn,Os=null;const Zc=new a.OlP("TRANSITION_ID"),Ar=[{provide:a.ip1,useFactory:function(n,t,e){return()=>{e.get(a.CZH).donePromise.then(()=>{const i=H(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<r.length;l++)i.remove(r[l])})}},deps:[Zc,ne,a.zs3],multi:!0}];class ui{static init(){(0,a.VLi)(new ui)}addToWindow(t){a.dqk.getAngularTestability=(i,r=!0)=>{const l=t.findTestabilityInTree(i,r);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(i=>{const r=a.dqk.getAllAngularTestabilities();let l=r.length,u=!1;const f=function(m){u=u||m,l--,0==l&&i(u)};r.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?H().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Io=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Qs=new a.OlP("EventManagerPlugins");let Te=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let l=0;l<r.length;l++){const u=r[l];if(u.supports(e))return this._eventNameToPlugin.set(e,u),u}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Qs),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Nt{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=H().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Xc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),mn=(()=>{class n extends Xc{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,r.push(i.appendChild(u))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(eu),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(eu))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function eu(n){H().remove(n)}const Ps={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Yi=/%COMP%/g;function ei(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?ei(n,r,e):(r=r.replace(Yi,n),e.push(r))}return e}function Zr(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Yr=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Ki(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case a.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Dd(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case a.ifc.ShadowDom:return new Ql(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=ei(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Te),a.LFG(mn),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Ki{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Ps[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const l=Ps[r];l?t.setAttributeNS(l,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Ps[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(a.JOm.DashCase|a.JOm.Important)?t.style.setProperty(e,i,r&a.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&a.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Zr(i)):this.eventManager.addEventListener(t,e,Zr(i))}}class Dd extends Ki{constructor(t,e,i,r){super(t),this.component=i;const l=ei(r+"-"+i.id,i.styles,[]);e.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(Yi,r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Yi,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Ql extends Ki{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ei(r.id,r.styles,[]);for(let u=0;u<l.length;u++){const f=document.createElement("style");f.textContent=l[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Jl=(()=>{class n extends Nt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Js=["alt","control","meta","shift"],Id={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},kg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tl=(()=>{class n extends Nt{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const l=n.parseEventName(i),u=n.eventCallback(l.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>H().onAndCancel(e,l.domEventName,u))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const l=n._normalizeKey(i.pop());let u="";if(Js.forEach(m=>{const w=i.indexOf(m);w>-1&&(i.splice(w,1),u+=m+".")}),u+=l,0!=i.length||0===l.length)return null;const f={};return f.domEventName=r,f.fullKey=u,f}static getEventFullKey(e){let i="",r=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&gi.hasOwnProperty(t)&&(t=gi[t]))}return Id[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Js.forEach(l=>{l!=r&&kg[l](e)&&(i+=l+".")}),i+=r,i}static eventCallback(e,i,r){return l=>{n.getEventFullKey(l)===e&&r.runGuarded(()=>i(l))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Ro=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function(){gf.makeCurrent(),ui.init()},multi:!0},{provide:ne,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),Md=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:Qs,useClass:Jl,multi:!0,deps:[ne,a.R0b,a.Lbi]},{provide:Qs,useClass:tl,multi:!0,deps:[ne]},[],{provide:Yr,useClass:Yr,deps:[Te,mn,a.AFp]},{provide:a.FYo,useExisting:Yr},{provide:Xc,useExisting:mn},{provide:mn,useClass:mn,deps:[ne]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:Te,useClass:Te,deps:[Qs,a.R0b]},{provide:class{},useClass:Io,deps:[]},[]];let Rd=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:a.AFp,useValue:e.appId},{provide:Zc,useExisting:a.AFp},Ar]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:Md,imports:[An,a.hGG]}),n})();"undefined"!=typeof window&&window;var fn=U(4402),He=U(5917),nt=U(9765),xd=U(7971);class Nn extends nt.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new xd.N;return this._value}next(t){super.next(this._value=t)}}var to=U(4869),la=U(9796),an=U(7393);class ic extends an.L{notifyNext(t,e,i,r,l){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Ty extends an.L{constructor(t,e,i){super(),this.parent=t,this.outerValue=e,this.outerIndex=i,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var xo=U(7444),Cn=U(7574);function Un(n,t,e,i,r=new Ty(n,e,i)){if(!r.closed)return t instanceof Cn.y?t.subscribe(r):(0,xo.s)(t)(r)}var sl=U(6693);const rc={};class ou{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new sc(t,this.resultSelector))}}class sc extends ic{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(rc),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let i=0;i<e;i++)this.add(Un(this,t[i],void 0,i))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,i){const r=this.values,u=this.toRespond?r[i]===rc?--this.toRespond:this.toRespond:0;r[i]=e,0===u&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const Kr=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var no=U(3282);function Oo(...n){return(0,no.J)(1)((0,He.of)(...n))}var Qi=U(9193);function Qr(n){return new Cn.y(t=>{let e;try{e=n()}catch(r){return void t.error(r)}return(e?(0,fn.D)(e):(0,Qi.c)()).subscribe(t)})}var Af=U(2441),et=U(8002),Ji=U(5345);function Hn(n,t){return"function"==typeof t?e=>e.pipe(Hn((i,r)=>(0,fn.D)(n(i,r)).pipe((0,et.U)((l,u)=>t(i,l,r,u))))):e=>e.lift(new Sy(n))}class Sy{constructor(t){this.project=t}call(t,e){return e.subscribe(new Mn(t,this.project))}}class Mn extends Ji.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const i=this.index++;try{e=this.project(t,i)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const i=new Ji.IY(this),r=this.destination;r.add(i),this.innerSubscription=(0,Ji.ft)(t,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const au=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function ti(n){return t=>0===n?(0,Qi.c)():t.lift(new lw(n))}class lw{constructor(t){if(this.total=t,this.total<0)throw new au}call(t,e){return e.subscribe(new lu(t,this.total))}}class lu extends an.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))}}function io(...n){const t=n[n.length-1];return(0,to.K)(t)?(n.pop(),e=>Oo(n,e,t)):e=>Oo(n,e)}function ol(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(r){return r.lift(new Iy(n,t,e))}}class Iy{constructor(t,e,i=!1){this.accumulator=t,this.seed=e,this.hasSeed=i}call(t,e){return e.subscribe(new Mf(t,this.accumulator,this.seed,this.hasSeed))}}class Mf extends an.L{constructor(t,e,i,r){super(t),this.accumulator=e,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let i;try{i=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function _n(n,t){return function(i){return i.lift(new Od(n,t))}}class Od{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ca(t,this.predicate,this.thisArg))}}class ca extends an.L{constructor(t,e,i){super(t),this.predicate=e,this.thisArg=i,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(t)}}function Po(n){return function(e){const i=new ni(n),r=e.lift(i);return i.caught=r}}class ni{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ro(t,this.selector,this.caught))}}class ro extends Ji.Ds{constructor(t,e,i){super(t),this.selector=e,this.caught=i}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const i=new Ji.IY(this);this.add(i);const r=(0,Ji.ft)(e,i);r!==i&&this.add(r)}}}var jn=U(9773);function Pd(n,t){return(0,jn.zg)(n,t,1)}function Rf(n){return function(e){return 0===n?(0,Qi.c)():e.lift(new Mr(n))}}class Mr{constructor(t){if(this.total=t,this.total<0)throw new au}call(t,e){return e.subscribe(new Ls(t,this.total))}}class Ls extends an.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,i=this.total,r=this.count++;e.length<i?e.push(t):e[r%i]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let l=0;l<i;l++){const u=e++%i;t.next(r[u])}}t.complete()}}function oc(n=kf){return t=>t.lift(new Jr(n))}class Jr{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new so(t,this.errorFactory))}}class so extends an.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function kf(){return new Kr}function Fd(n=null){return t=>t.lift(new ua(n))}class ua{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ay(t,this.defaultValue))}}class Ay extends an.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var da=U(4487);function mi(n,t){const e=arguments.length>=2;return i=>i.pipe(n?_n((r,l)=>n(r,l,i)):da.y,ti(1),e?Fd(t):oc(()=>new Kr))}var Ln=U(8307),al=U(1307),Vs=U(5319);class S{constructor(t){this.callback=t}call(t,e){return e.subscribe(new M(t,this.callback))}}class M extends an.L{constructor(t,e){super(t),this.add(new Vs.w(e))}}class O{constructor(t,e){this.id=t,this.url=e}}class $ extends O{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class re extends O{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pe extends O{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Se extends O{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $e extends O{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ze extends O{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vt extends O{constructor(t,e,i,r,l){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pn extends O{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ii extends O{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _i{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cu{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ha{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uu{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ms{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const mt="primary";class Bg{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Rn(n){return new Bg(n)}const du="ngNavigationCancelingError";function Ug(n){const t=Error("NavigationCancelingError: "+n);return t[du]=!0,t}function lc(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let l=0;l<i.length;l++){const u=i[l],f=n[l];if(u.startsWith(":"))r[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _s(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let l=0;l<e.length;l++)if(r=e[l],!jg(n[r],t[r]))return!1;return!0}function jg(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,l)=>i[l]===r)}return n===t}function Ny(n){return Array.prototype.concat.apply([],n)}function ll(n){return n.length>0?n[n.length-1]:null}function yi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Ai(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,fn.D)(Promise.resolve(n)):(0,He.of)(n)}const My={exact:function xf(n,t,e){if(!ul(n.segments,t.segments)||!fu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!xf(n.children[i],t.children[i],e))return!1;return!0},subset:fa},hu={exact:function(n,t){return _s(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>jg(n[e],t[e]))},ignored:()=>!0};function Vd(n,t,e){return My[e.paths](n.root,t.root,e.matrixParams)&&hu[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function fa(n,t,e){return pa(n,t,t.segments,e)}function pa(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!ul(r,e)||t.hasChildren()||!fu(r,e,i))}if(n.segments.length===e.length){if(!ul(n.segments,e)||!fu(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!fa(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),l=e.slice(n.segments.length);return!!(ul(n.segments,r)&&fu(n.segments,r,i)&&n.children[mt])&&pa(n.children[mt],t,l,i)}}function fu(n,t,e){return t.every((i,r)=>hu[e](n[r].parameters,i.parameters))}class cc{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rn(this.queryParams)),this._queryParamMap}toString(){return Ud.serialize(this)}}class Pt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,yi(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ga(this)}}class Bd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Rn(this.parameters)),this._parameterMap}toString(){return mu(this)}}function ul(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class $g{}class pu{parse(t){const e=new Ff(t);return new cc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${Hd(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${jd(e)}=${jd(r)}`).join("&"):`${jd(e)}=${jd(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const Ud=new pu;function ga(n){return n.segments.map(t=>mu(t)).join("/")}function Hd(n,t){if(!n.hasChildren())return ga(n);if(t){const e=n.children[mt]?Hd(n.children[mt],!1):"",i=[];return yi(n.children,(r,l)=>{l!==mt&&i.push(`${l}:${Hd(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function(n,t){let e=[];return yi(n.children,(i,r)=>{r===mt&&(e=e.concat(t(i,r)))}),yi(n.children,(i,r)=>{r!==mt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===mt?[Hd(n.children[mt],!1)]:[`${r}:${Hd(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[mt]?`${ga(n)}/${e[0]}`:`${ga(n)}/(${e.join("//")})`}}function xy(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jd(n){return xy(n).replace(/%3B/gi,";")}function $d(n){return xy(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gu(n){return decodeURIComponent(n)}function Gg(n){return gu(n.replace(/\+/g,"%20"))}function mu(n){return`${$d(n.path)}${function(n){return Object.keys(n).map(t=>`;${$d(t)}=${$d(n[t])}`).join("")}(n.parameters)}`}const fw=/^[^\/()?;=#]+/;function Pf(n){const t=n.match(fw);return t?t[0]:""}const pw=/^[^=?&#]+/,ma=/^[^?&#]+/;class Ff{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pt([],{}):new Pt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[mt]=new Pt(t,e)),i}parseSegment(){const t=Pf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Bd(gu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Pf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Pf(this.remaining);r&&(i=r,this.capture(i))}t[gu(e)]=gu(i)}parseQueryParam(t){const e=function(n){const t=n.match(pw);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const u=function(n){const t=n.match(ma);return t?t[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=Gg(e),l=Gg(i);if(t.hasOwnProperty(r)){let u=t[r];Array.isArray(u)||(u=[u],t[r]=u),u.push(l)}else t[r]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Pf(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let l;i.indexOf(":")>-1?(l=i.substr(0,i.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=mt);const u=this.parseChildren();e[l]=1===Object.keys(u).length?u[mt]:new Pt([],u),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Oy{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=zg(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=zg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=qg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return qg(t,this._root).map(e=>e.value)}}function zg(n,t){if(n===t.value)return t;for(const e of t.children){const i=zg(n,e);if(i)return i}return null}function qg(n,t){if(n===t.value)return[t];for(const e of t.children){const i=qg(n,e);if(i.length)return i.unshift(t),i}return[]}class _a{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Gd(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Lf extends Oy{constructor(t,e){super(t),this.snapshot=e,Bf(this,t)}toString(){return this.snapshot.toString()}}function Py(n,t){const e=function(n,t){const u=new Vf([],{},{},"",{},mt,t,null,n.root,-1,{});return new dl("",new _a(u,[]))}(n,t),i=new Nn([new Bd("",{})]),r=new Nn({}),l=new Nn({}),u=new Nn({}),f=new Nn(""),m=new yu(i,r,u,f,l,mt,t,e.root);return m.snapshot=e.root,new Lf(new _a(m,[]),e)}class yu{constructor(t,e,i,r,l,u,f,m){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=l,this.outlet=u,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,et.U)(t=>Rn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,et.U)(t=>Rn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fy(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],l=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(l.component)break;i--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Vf{constructor(t,e,i,r,l,u,f,m,w,D,T){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=l,this.outlet=u,this.component=f,this.routeConfig=m,this._urlSegment=w,this._lastPathIndex=D,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Rn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class dl extends Oy{constructor(t,e){super(e),this.url=t,Bf(this,e)}toString(){return Bs(this._root)}}function Bf(n,t){t.value._routerState=n,t.children.forEach(e=>Bf(n,e))}function Bs(n){const t=n.children.length>0?` { ${n.children.map(Bs).join(", ")} } `:"";return`${n.value}${t}`}function dc(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,_s(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),_s(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!_s(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),_s(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function vu(n,t){return _s(n.params,t.params)&&function(n,t){return ul(n,t)&&n.every((e,i)=>_s(e.parameters,t[i].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||vu(n.parent,t.parent))}function bu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return bu(n,i,r);return bu(n,i)})}(n,t,e);return new _a(i,r)}{if(n.shouldAttach(t.value)){const l=n.retrieve(t.value);if(null!==l){const u=l.route;return By(t,u),u}}const i=function(n){return new yu(new Nn(n.url),new Nn(n.params),new Nn(n.queryParams),new Nn(n.fragment),new Nn(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(l=>bu(n,l));return new _a(i,r)}}function By(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)By(n.children[e],t.children[e])}function zd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ys(n){return"object"==typeof n&&null!=n&&n.outlets}function Uy(n,t,e,i,r){let l={};return i&&yi(i,(u,f)=>{l[f]=Array.isArray(u)?u.map(m=>`${m}`):`${u}`}),new cc(e.root===n?t:_w(e.root,n,t),l,r)}function _w(n,t,e){const i={};return yi(n.children,(r,l)=>{i[l]=r===t?e:_w(r,t,e)}),new Pt(n.segments,i)}class qd{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&zd(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(ys);if(r&&r!==ll(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wd{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Zd(n,t,e){if(n||(n=new Pt([],{})),0===n.segments.length&&n.hasChildren())return Yd(n,t,e);const i=function(n,t,e){let i=0,r=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return l;const u=n.segments[r],f=e[i];if(ys(f))break;const m=`${f}`,w=i<e.length-1?e[i+1]:null;if(r>0&&void 0===m)break;if(m&&w&&"object"==typeof w&&void 0===w.outlets){if(!jy(m,w,u))return l;i+=2}else{if(!jy(m,{},u))return l;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const l=new Pt(n.segments.slice(0,i.pathIndex),{});return l.children[mt]=new Pt(n.segments.slice(i.pathIndex),n.children),Yd(l,0,r)}return i.match&&0===r.length?new Pt(n.segments,{}):i.match&&!n.hasChildren()?Zg(n,t,e):i.match?Yd(n,0,r):Zg(n,t,e)}function Yd(n,t,e){if(0===e.length)return new Pt(n.segments,{});{const i=function(n){return ys(n[0])?n[0].outlets:{[mt]:n}}(e),r={};return yi(i,(l,u)=>{"string"==typeof l&&(l=[l]),null!==l&&(r[u]=Zd(n.children[u],t,l))}),yi(n.children,(l,u)=>{void 0===i[u]&&(r[u]=l)}),new Pt(n.segments,r)}}function Zg(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const l=e[r];if(ys(l)){const m=ri(l.outlets);return new Pt(i,m)}if(0===r&&zd(e[0])){i.push(new Bd(n.segments[t].path,Hy(e[0]))),r++;continue}const u=ys(l)?l.outlets[mt]:`${l}`,f=r<e.length-1?e[r+1]:null;u&&f&&zd(f)?(i.push(new Bd(u,Hy(f))),r+=2):(i.push(new Bd(u,{})),r++)}return new Pt(i,{})}function ri(n){const t={};return yi(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=Zg(new Pt([],{}),0,e))}),t}function Hy(n){const t={};return yi(n,(e,i)=>t[i]=`${e}`),t}function jy(n,t,e){return n==e.path&&_s(t,e.parameters)}class Kg{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),dc(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Gd(e);t.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,r[u],i),delete r[u]}),yi(r,(l,u)=>{this.deactivateRouteAndItsChildren(l,i)})}deactivateRoutes(t,e,i){const r=t.value,l=e?e.value:null;if(r===l)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(t,e,u.children)}else this.deactivateChildRoutes(t,e,i);else l&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet);if(i&&i.outlet){const r=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,l=Gd(t);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Gd(e);t.children.forEach(l=>{this.activateRoutes(l,r[l.value.outlet],i),this.forwardEvent(new gs(l.value.snapshot))}),t.children.length&&this.forwardEvent(new ha(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,l=e?e.value:null;if(dc(r),r===l)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,u.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const f=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),Hf(f.route)}else{const f=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),m=f?f.module.componentFactoryResolver:null;u.attachRef=null,u.route=r,u.resolver=m,u.outlet&&u.outlet.activateWith(r,m),this.activateChildRoutes(t,null,u.children)}}else this.activateChildRoutes(t,null,i)}}function Hf(n){dc(n.value),n.children.forEach(Hf)}class Qg{constructor(t,e){this.routes=t,this.module=e}}function Fo(n){return"function"==typeof n}function wu(n){return n instanceof cc}const Cu=Symbol("INITIAL_VALUE");function hc(){return Hn(n=>function(...n){let t,e;return(0,to.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,la.k)(n[0])&&(n=n[0]),(0,sl.n)(n,e).lift(new ou(t))}(n.map(t=>t.pipe(ti(1),io(Cu)))).pipe(ol((t,e)=>{let i=!1;return e.reduce((r,l,u)=>r!==Cu?r:(l===Cu&&(i=!0),i||!1!==l&&u!==e.length-1&&!wu(l)?r:l),t)},Cu),_n(t=>t!==Cu),(0,et.U)(t=>wu(t)?t:!0===t),ti(1)))}let Xi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&a._UZ(0,"router-outlet")},directives:function(){return[Kf]},encapsulation:2}),n})();function Eu(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];em(i,Cw(t,i))}}function em(n,t){n.children&&Eu(n.children,t)}function Cw(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Du(n){const t=n.children&&n.children.map(Du),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==mt&&(e.component=Xi),e}function vs(n){return n.outlet||mt}function tm(n,t){const e=n.filter(i=>vs(i)===t);return e.push(...n.filter(i=>vs(i)!==t)),e}const nm={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function jf(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},nm):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||lc)(e,n,t);if(!l)return Object.assign({},nm);const u={};yi(l.posParams,(m,w)=>{u[w]=m.path});const f=l.consumed.length>0?Object.assign(Object.assign({},u),l.consumed[l.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:f,positionalParamSegments:null!==(i=l.posParams)&&void 0!==i?i:{}}}function Qd(n,t,e,i,r="corrected"){if(e.length>0&&function(n,t,e){return e.some(i=>fc(n,t,i)&&vs(i)!==mt)}(n,e,i)){const u=new Pt(t,function(n,t,e,i){const r={};r[mt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&vs(l)!==mt){const u=new Pt([],{});u._sourceSegment=n,u._segmentIndexShift=t.length,r[vs(l)]=u}return r}(n,t,i,new Pt(e,n.children)));return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(i=>fc(n,t,i))}(n,e,i)){const u=new Pt(n.segments,function(n,t,e,i,r,l){const u={};for(const f of i)if(fc(n,e,f)&&!r[vs(f)]){const m=new Pt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===l?n.segments.length:t.length,u[vs(f)]=m}return Object.assign(Object.assign({},r),u)}(n,t,e,i,n.children,r));return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}const l=new Pt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function fc(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function rm(n,t,e,i){return!!(vs(n)===i||i!==mt&&fc(t,e,n))&&("**"===n.path||jf(t,n,e).matched)}function Gf(n,t,e){return 0===t.length&&!n.children[e]}class gr{constructor(t){this.segmentGroup=t||null}}class pc{constructor(t){this.urlTree=t}}function fl(n){return new Cn.y(t=>t.error(new gr(n)))}function Gy(n){return new Cn.y(t=>t.error(new pc(n)))}function sm(n){return new Cn.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class zy{constructor(t,e,i,r,l){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(a.h0i)}apply(){const t=Qd(this.urlTree.root,[],[],this.config).segmentGroup,e=new Pt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,mt).pipe((0,et.U)(l=>this.createUrlTree(Lo(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Po(l=>{if(l instanceof pc)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof gr?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,mt).pipe((0,et.U)(r=>this.createUrlTree(Lo(r),t.queryParams,t.fragment))).pipe(Po(r=>{throw r instanceof gr?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new Pt([],{[mt]:t}):t;return new cc(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,et.U)(l=>new Pt([],l))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const l of Object.keys(i.children))"primary"===l?r.unshift(l):r.push(l);return(0,fn.D)(r).pipe(Pd(l=>{const u=i.children[l],f=tm(e,l);return this.expandSegmentGroup(t,f,u,l).pipe((0,et.U)(m=>({segment:m,outlet:l})))}),ol((l,u)=>(l[u.outlet]=u.segment,l),{}),function(n,t){const e=arguments.length>=2;return i=>i.pipe(n?_n((r,l)=>n(r,l,i)):da.y,Rf(1),e?Fd(t):oc(()=>new Kr))}())}expandSegment(t,e,i,r,l,u){return(0,fn.D)(i).pipe(Pd(f=>this.expandSegmentAgainstRoute(t,e,i,f,r,l,u).pipe(Po(w=>{if(w instanceof gr)return(0,He.of)(null);throw w}))),mi(f=>!!f),Po((f,m)=>{if(f instanceof Kr||"EmptyError"===f.name){if(Gf(e,r,l))return(0,He.of)(new Pt([],{}));throw new gr(e)}throw f}))}expandSegmentAgainstRoute(t,e,i,r,l,u,f){return rm(r,e,l,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,l,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,l,u):fl(e):fl(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,l,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,l,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const l=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Gy(l):this.lineralizeSegments(i,l).pipe((0,jn.zg)(u=>{const f=new Pt(u,{});return this.expandSegment(t,f,e,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,l,u){const{matched:f,consumedSegments:m,lastChild:w,positionalParamSegments:D}=jf(e,r,l);if(!f)return fl(e);const T=this.applyRedirectCommands(m,r.redirectTo,D);return r.redirectTo.startsWith("/")?Gy(T):this.lineralizeSegments(r,T).pipe((0,jn.zg)(k=>this.expandSegment(t,e,i,k.concat(l.slice(w)),u,!1)))}matchSegmentAgainstRoute(t,e,i,r,l){if("**"===i.path)return i.loadChildren?(i._loadedConfig?(0,He.of)(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe((0,et.U)(k=>(i._loadedConfig=k,new Pt(r,{})))):(0,He.of)(new Pt(r,{}));const{matched:u,consumedSegments:f,lastChild:m}=jf(e,i,r);if(!u)return fl(e);const w=r.slice(m);return this.getChildConfig(t,i,r).pipe((0,jn.zg)(T=>{const k=T.module,F=T.routes,{segmentGroup:j,slicedSegments:te}=Qd(e,f,w,F),de=new Pt(j.segments,j.children);if(0===te.length&&de.hasChildren())return this.expandChildren(k,F,de).pipe((0,et.U)(lt=>new Pt(f,lt)));if(0===F.length&&0===te.length)return(0,He.of)(new Pt(f,{}));const Pe=vs(i)===l;return this.expandSegment(k,de,F,te,Pe?mt:l,!0).pipe((0,et.U)(pt=>new Pt(f.concat(pt.segments),pt.children)))}))}getChildConfig(t,e,i){return e.children?(0,He.of)(new Qg(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,He.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe((0,jn.zg)(r=>{return r?this.configLoader.load(t.injector,e).pipe((0,et.U)(l=>(e._loadedConfig=l,l))):(n=e,new Cn.y(t=>t.error(Ug(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,He.of)(new Qg([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;if(!r||0===r.length)return(0,He.of)(!0);const l=r.map(u=>{const f=t.get(u);let m;if((n=f)&&Fo(n.canLoad))m=f.canLoad(e,i);else{if(!Fo(f))throw new Error("Invalid CanLoad guard");m=f(e,i)}var n;return Ai(m)});return(0,He.of)(l).pipe(hc(),(0,Ln.b)(u=>{if(!wu(u))return;const f=Ug(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw f.url=u,f}),(0,et.U)(u=>!0===u))}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,He.of)(i);if(r.numberOfChildren>1||!r.children[mt])return sm(t.redirectTo);r=r.children[mt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const l=this.createSegmentGroup(t,e.root,i,r);return new cc(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return yi(t,(r,l)=>{if("string"==typeof r&&r.startsWith(":")){const f=r.substring(1);i[l]=e[f]}else i[l]=r}),i}createSegmentGroup(t,e,i,r){const l=this.createSegments(t,e.segments,i,r);let u={};return yi(e.children,(f,m)=>{u[m]=this.createSegmentGroup(t,f,i,r)}),new Pt(l,u)}createSegments(t,e,i,r){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,r):this.findOrReturn(l,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function Lo(n){const t={};for(const i of Object.keys(n.children)){const l=Lo(n.children[i]);(l.segments.length>0||l.hasChildren())&&(t[i]=l)}return function(n){if(1===n.numberOfChildren&&n.children[mt]){const t=n.children[mt];return new Pt(n.segments.concat(t.segments),t.children)}return n}(new Pt(n.segments,t))}class Jd{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class kr{constructor(t,e){this.component=t,this.route=e}}function Wy(n,t,e){const i=n._root;return Tu(i,t?t._root:null,e,[i.value])}function er(n,t,e){const i=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Tu(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const l=Gd(t);return n.children.forEach(u=>{(function(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,u=t?t.value:null,f=e?e.getContext(n.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const m=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!ul(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ul(n.url,t.url)||!_s(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vu(n,t)||!_s(n.queryParams,t.queryParams);case"paramsChange":default:return!vu(n,t)}}(u,l,l.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new Jd(i)):(l.data=u.data,l._resolvedData=u._resolvedData),Tu(n,t,l.component?f?f.children:null:e,i,r),m&&f&&f.outlet&&f.outlet.isActivated&&r.canDeactivateChecks.push(new kr(f.outlet.component,u))}else u&&va(t,f,r),r.canActivateChecks.push(new Jd(i)),Tu(n,null,l.component?f?f.children:null:e,i,r)})(u,l[u.value.outlet],e,i.concat([u.value]),r),delete l[u.value.outlet]}),yi(l,(u,f)=>va(u,e.getContext(f),r)),r}function va(n,t,e){const i=Gd(n),r=n.value;yi(i,(l,u)=>{va(l,r.component?t?t.children.getContext(u):null:t,e)}),e.canDeactivateChecks.push(new kr(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class g{}function _(n){return new Cn.y(t=>t.error(n))}class N{constructor(t,e,i,r,l,u){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=u}recognize(){const t=Qd(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,mt);if(null===e)return null;const i=new Vf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},mt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new _a(i,e),l=new dl(this.url,r);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,i=Fy(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const l of Object.keys(e.children)){const u=e.children[l],f=tm(t,l),m=this.processSegmentGroup(f,u,l);if(null===m)return null;i.push(...m)}const r=xe(i);return r.sort((t,e)=>t.value.outlet===mt?-1:e.value.outlet===mt?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,i,r){for(const l of t){const u=this.processSegmentAgainstRoute(l,e,i,r);if(null!==u)return u}return Gf(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!rm(t,e,i,r))return null;let l,u=[],f=[];if("**"===t.path){const F=i.length>0?ll(i).parameters:{};l=new Vf(i,F,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mt(t),vs(t),t.component,t,We(e),Qe(e)+i.length,di(t))}else{const F=jf(e,t,i);if(!F.matched)return null;u=F.consumedSegments,f=i.slice(F.lastChild),l=new Vf(u,F.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mt(t),vs(t),t.component,t,We(e),Qe(e)+u.length,di(t))}const m=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:w,slicedSegments:D}=Qd(e,u,f,m.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&w.hasChildren()){const F=this.processChildren(m,w);return null===F?null:[new _a(l,F)]}if(0===m.length&&0===D.length)return[new _a(l,[])];const T=vs(t)===r,k=this.processSegment(m,w,D,T?mt:r);return null===k?null:[new _a(l,k)]}}function ue(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function xe(n){const t=[],e=new Set;for(const i of n){if(!ue(i)){t.push(i);continue}const r=t.find(l=>i.value.routeConfig===l.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=xe(i.children);t.push(new _a(i.value,r))}return t.filter(i=>!e.has(i))}function We(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Qe(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function Mt(n){return n.data||{}}function di(n){return n.resolve||{}}function eh(n){return Hn(t=>{const e=n(t);return e?(0,fn.D)(e).pipe((0,et.U)(()=>t)):(0,He.of)(t)})}class om extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const th=new a.OlP("ROUTES");class Wf{constructor(t,e,i,r){this.loader=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe((0,et.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const u=l.create(t);return new Qg(Ny(u.injector.get(th,void 0,a.XFs.Self|a.XFs.Optional)).map(Du),u)}),Po(l=>{throw e._loader$=void 0,l}));return e._loader$=new Af.c(r,()=>new nt.xQ).pipe((0,al.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,fn.D)(this.loader.load(t)):Ai(t()).pipe((0,jn.zg)(e=>e instanceof a.YKP?(0,He.of)(e):(0,fn.D)(this.compiler.compileModuleAsync(e))))}}class Zf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new gl,this.attachRef=null}}class gl{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Zf,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class FM{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function n1(n){throw n}function i1(n,t,e){return t.parse("/")}function Su(n,t){return(0,He.of)(null)}const r1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},s1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xr=(()=>{class n{constructor(e,i,r,l,u,f,m,w){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nt.xQ,this.errorHandler=n1,this.malformedUriErrorHandler=i1,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Su,afterPreactivation:Su},this.urlHandlingStrategy=new FM,this.routeReuseStrategy=new om,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(a.h0i),this.console=u.get(a.c2e);const k=u.get(a.R0b);this.isNgZoneEnabled=k instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=new cc(new Pt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Wf(f,m,F=>this.triggerEvent(new pr(F)),F=>this.triggerEvent(new _i(F))),this.routerState=Py(this.currentUrlTree,this.rootComponentType),this.transitions=new Nn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(_n(r=>0!==r.id),(0,et.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Hn(r=>{let l=!1,u=!1;return(0,He.of)(r).pipe((0,Ln.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Hn(f=>{const m=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return iv(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,He.of)(f).pipe(Hn(T=>{const k=this.transitions.getValue();return i.next(new $(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),k!==this.transitions.getValue()?Qi.E:Promise.resolve(T)}),function(n,t,e,i){return Hn(r=>function(n,t,e,i,r){return new zy(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,et.U)(l=>Object.assign(Object.assign({},r),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ln.b)(T=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:T.urlAfterRedirects})}),function(n,t,e,i,r){return(0,jn.zg)(l=>function(n,t,e,i,r="emptyOnly",l="legacy"){try{const u=new N(n,t,e,i,r,l).recognize();return null===u?_(new g):(0,He.of)(u)}catch(u){return _(u)}}(n,t,l.urlAfterRedirects,e(l.urlAfterRedirects),i,r).pipe((0,et.U)(u=>Object.assign(Object.assign({},l),{targetSnapshot:u}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ln.b)(T=>{"eager"===this.urlUpdateStrategy&&(T.extras.skipLocationChange||this.setBrowserUrl(T.urlAfterRedirects,T),this.browserUrlTree=T.urlAfterRedirects);const k=new $e(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);i.next(k)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:F,source:j,restoredState:te,extras:de}=f,Pe=new $(k,this.serializeUrl(F),j,te);i.next(Pe);const Ve=Py(F,this.rootComponentType).snapshot;return(0,He.of)(Object.assign(Object.assign({},f),{targetSnapshot:Ve,urlAfterRedirects:F,extras:Object.assign(Object.assign({},de),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),Qi.E}),eh(f=>{const{targetSnapshot:m,id:w,extractedUrl:D,rawUrl:T,extras:{skipLocationChange:k,replaceUrl:F}}=f;return this.hooks.beforePreactivation(m,{navigationId:w,appliedUrlTree:D,rawUrlTree:T,skipLocationChange:!!k,replaceUrl:!!F})}),(0,Ln.b)(f=>{const m=new ze(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,et.U)(f=>Object.assign(Object.assign({},f),{guards:Wy(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,t){return(0,jn.zg)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:l,canDeactivateChecks:u}}=e;return 0===u.length&&0===l.length?(0,He.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,i){return(0,fn.D)(n).pipe((0,jn.zg)(r=>function(n,t,e,i,r){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,He.of)(!0);const u=l.map(f=>{const m=er(f,t,r);let w;if(function(n){return n&&Fo(n.canDeactivate)}(m))w=Ai(m.canDeactivate(n,t,e,i));else{if(!Fo(m))throw new Error("Invalid CanDeactivate guard");w=Ai(m(n,t,e,i))}return w.pipe(mi())});return(0,He.of)(u).pipe(hc())}(r.component,r.route,e,t,i)),mi(r=>!0!==r,!0))}(u,i,r,n).pipe((0,jn.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,t,e,i){return(0,fn.D)(t).pipe(Pd(r=>Oo(function(n,t){return null!==n&&t&&t(new cu(n)),(0,He.of)(!0)}(r.route.parent,i),function(n,t){return null!==n&&t&&t(new uu(n)),(0,He.of)(!0)}(r.route,i),function(n,t,e){const i=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(u=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(u)).filter(u=>null!==u).map(u=>Qr(()=>{const f=u.guards.map(m=>{const w=er(m,u.node,e);let D;if(function(n){return n&&Fo(n.canActivateChild)}(w))D=Ai(w.canActivateChild(i,n));else{if(!Fo(w))throw new Error("Invalid CanActivateChild guard");D=Ai(w(i,n))}return D.pipe(mi())});return(0,He.of)(f).pipe(hc())}));return(0,He.of)(l).pipe(hc())}(n,r.path,e),function(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,He.of)(!0);const r=i.map(l=>Qr(()=>{const u=er(l,t,e);let f;if(function(n){return n&&Fo(n.canActivate)}(u))f=Ai(u.canActivate(t,n));else{if(!Fo(u))throw new Error("Invalid CanActivate guard");f=Ai(u(t,n))}return f.pipe(mi())}));return(0,He.of)(r).pipe(hc())}(n,r.route,e))),mi(r=>!0!==r,!0))}(i,l,n,t):(0,He.of)(f)),(0,et.U)(f=>Object.assign(Object.assign({},e),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Ln.b)(f=>{if(wu(f.guardsResult)){const w=Ug(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw w.url=f.guardsResult,w}const m=new Vt(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),_n(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),eh(f=>{if(f.guards.canActivateChecks.length)return(0,He.of)(f).pipe((0,Ln.b)(m=>{const w=new pn(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),Hn(m=>{let w=!1;return(0,He.of)(m).pipe(function(n,t){return(0,jn.zg)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return(0,He.of)(e);let l=0;return(0,fn.D)(r).pipe(Pd(u=>function(n,t,e,i){return function(n,t,e,i){const r=Object.keys(n);if(0===r.length)return(0,He.of)({});const l={};return(0,fn.D)(r).pipe((0,jn.zg)(u=>function(n,t,e,i){const r=er(n,t,i);return Ai(r.resolve?r.resolve(t,e):r(t,e))}(n[u],t,e,i).pipe((0,Ln.b)(f=>{l[u]=f}))),Rf(1),(0,jn.zg)(()=>Object.keys(l).length===r.length?(0,He.of)(l):Qi.E))}(n._resolve,n,t,i).pipe((0,et.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),Fy(n,e).resolve),null)))}(u.route,i,n,t)),(0,Ln.b)(()=>l++),Rf(1),(0,jn.zg)(u=>l===r.length?(0,He.of)(e):Qi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ln.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Ln.b)(m=>{const w=new ii(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}))}),eh(f=>{const{targetSnapshot:m,id:w,extractedUrl:D,rawUrl:T,extras:{skipLocationChange:k,replaceUrl:F}}=f;return this.hooks.afterPreactivation(m,{navigationId:w,appliedUrlTree:D,rawUrlTree:T,skipLocationChange:!!k,replaceUrl:!!F})}),(0,et.U)(f=>{const m=function(n,t,e){const i=bu(n,t._root,e?e._root:void 0);return new Lf(i,t)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,Ln.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,et.U)(i=>(new Kg(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Ln.b)({next(){l=!0},complete(){l=!0}}),function(n){return t=>t.lift(new S(n))}(()=>{var f;if(!l&&!u){const m=`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(r),this.cancelNavigationTransition(r,m)):this.cancelNavigationTransition(r,m)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===r.id&&(this.currentNavigation=null)}),Po(f=>{if(u=!0,function(n){return n&&n[du]}(f)){const m=wu(f.url);m||(this.navigated=!0,this.restoreHistory(r,!0));const w=new pe(r.id,this.serializeUrl(r.extractedUrl),f.message);i.next(w),m?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),T={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iv(r.source)};this.scheduleNavigation(D,"imperative",null,T,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const m=new Se(r.id,this.serializeUrl(r.extractedUrl),f);i.next(m);try{r.resolve(this.errorHandler(f))}catch(w){r.reject(w)}}return Qi.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,i)&&setTimeout(()=>{const{source:r,state:l,urlTree:u}=i,f={replaceUrl:!0};if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}this.scheduleNavigation(u,r,l,f)},0),this.lastLocationChangeInfo=i}))}extractLocationChangeInfoFromEvent(e){var i;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(i=e.state)||void 0===i?void 0:i.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,i){if(!e)return!0;const r=i.urlTree.toString()===e.urlTree.toString();return i.transitionId!==e.transitionId||!r||!("hashchange"===i.source&&"popstate"===e.source||"popstate"===i.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Eu(e),this.config=e.map(Du),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:l,fragment:u,queryParamsHandling:f,preserveFragment:m}=i,w=r||this.routerState.root,D=m?this.currentUrlTree.fragment:u;let T=null;switch(f){case"merge":T=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=l||null}return null!==T&&(T=this.removeEmptyProps(T)),function(n,t,e,i,r){if(0===e.length)return Uy(t.root,t.root,t,i,r);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new qd(!0,0,n);let t=0,e=!1;const i=n.reduce((r,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return yi(l.outlets,(m,w)=>{f[w]="string"==typeof m?m.split("/"):m}),[...r,{outlets:f}]}if(l.segmentPath)return[...r,l.segmentPath]}return"string"!=typeof l?[...r,l]:0===u?(l.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?e=!0:".."===f?t++:""!=f&&r.push(f))}),r):[...r,l]},[]);return new qd(e,t,i)}(e);if(l.toRoot())return Uy(t.root,new Pt([],{}),t,i,r);const u=function(n,t,e){if(n.isAbsolute)return new Wd(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new Wd(l,l===t.root,0)}const i=zd(n.commands[0])?0:1;return function(n,t,e){let i=n,r=t,l=e;for(;l>r;){if(l-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Wd(i,!1,r-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(l,t,n),f=u.processChildren?Yd(u.segmentGroup,u.index,l.commands):Zd(u.segmentGroup,u.index,l.commands);return Uy(u.segmentGroup,f,t,i,r)}(w,this.currentUrlTree,e,T,null!=D?D:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=wu(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},r1):!1===i?Object.assign({},s1):i,wu(e))return Vd(this.currentUrlTree,e,r);const l=this.parseUrl(e);return Vd(this.currentUrlTree,l,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const l=e[r];return null!=l&&(i[r]=l),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new re(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,l,u){var f,m;if(this.disposed)return Promise.resolve(!1);const w=this.getTransition(),D=iv(i)&&w&&!iv(w.source),F=(this.lastSuccessfulId===w.id||this.currentNavigation?w.rawUrl:w.urlAfterRedirects).toString()===e.toString();if(D&&F)return Promise.resolve(!0);let j,te,de;u?(j=u.resolve,te=u.reject,de=u.promise):de=new Promise((pt,lt)=>{j=pt,te=lt});const Pe=++this.navigationId;let Ve;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),Ve=r&&r.\u0275routerPageId?r.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):Ve=0,this.setTransition({id:Pe,targetPageId:Ve,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:j,reject:te,promise:de,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),de.catch(pt=>Promise.reject(pt))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",l):this.location.go(r,"",l)}restoreHistory(e,i=!1){var r,l;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===u?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===u&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new pe(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.DyG),a.LFG($g),a.LFG(gl),a.LFG(Lt),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function iv(n){return"imperative"!==n}let Yf=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this.commands=[],this.onChanges=new nt.xQ,this.subscription=e.events.subscribe(l=>{l instanceof re&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,l,u){if(0!==e||i||r||l||u||"string"==typeof this.target&&"_self"!=this.target)return!0;const f={skipLocationChange:nh(this.skipLocationChange),replaceUrl:nh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:nh(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(xr),a.Y36(yu),a.Y36(_e))},n.\u0275dir=a.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&a.NdJ("click",function(l){return i.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&e&&(a.Ikx("href",i.href,a.LSH),a.uIk("target",i.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.TTD]}),n})();function nh(n){return""===n||!!n}let Kf=(()=>{class n{constructor(e,i,r,l,u){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=l||mt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const u=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new sv(e,f,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(gl),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class sv{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===yu?this.route:t===gl?this.childContexts:this.parent.get(t,e)}}class Iw{}class Nw{preload(t,e){return(0,He.of)(null)}}let ov=(()=>{class n{constructor(e,i,r,l,u){this.router=e,this.injector=l,this.preloadingStrategy=u,this.loader=new Wf(i,r,w=>e.triggerEvent(new pr(w)),w=>e.triggerEvent(new _i(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(_n(e=>e instanceof re),Pd(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(a.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const l of i)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const u=l._loadedConfig;r.push(this.processRoutes(u.module,u.routes))}else l.loadChildren&&!l.canLoad?r.push(this.preloadConfig(e,l)):l.children&&r.push(this.processRoutes(e,l.children));return(0,fn.D)(r).pipe((0,no.J)(),(0,et.U)(l=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?(0,He.of)(i._loadedConfig):this.loader.load(e.injector,i)).pipe((0,jn.zg)(l=>(i._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(xr),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(Iw))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),ih=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof $?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof re&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ms&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new ms(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(xr),a.LFG(Gl),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=new a.OlP("ROUTER_CONFIGURATION"),a1=new a.OlP("ROUTER_FORROOT_GUARD"),l1=[Lt,{provide:$g,useClass:pu},{provide:xr,useFactory:function(n,t,e,i,r,l,u,f={},m,w){const D=new xr(null,n,t,e,i,r,l,Ny(u));return m&&(D.urlHandlingStrategy=m),w&&(D.routeReuseStrategy=w),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(f,D),f.enableTracing&&D.events.subscribe(T=>{var k,F;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(F=console.groupEnd)||void 0===F||F.call(console)}),D},deps:[$g,gl,Lt,a.zs3,a.v3s,a.Sil,th,Iu,[class{},new a.FiY],[class{},new a.FiY]]},gl,{provide:yu,useFactory:function(n){return n.routerState.root},deps:[xr]},{provide:a.v3s,useClass:a.EAV},ov,Nw,class{preload(t,e){return e().pipe(Po(()=>(0,He.of)(null)))}},{provide:Iu,useValue:{enableTracing:!1}}];function Mw(){return new a.PXZ("Router",xr)}let Rw=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[l1,kw(e),{provide:a1,useFactory:VM,deps:[[xr,new a.FiY,new a.tp0]]},{provide:Iu,useValue:i||{}},{provide:_e,useFactory:c1,deps:[J,[new a.tBr(ve),new a.FiY],Iu]},{provide:ih,useFactory:pL,deps:[xr,Gl,Iu]},{provide:Iw,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:Nw},{provide:a.PXZ,multi:!0,useFactory:Mw},[xw,{provide:a.ip1,multi:!0,useFactory:u1,deps:[xw]},{provide:d1,useFactory:HM,deps:[xw]},{provide:a.tb,multi:!0,useExisting:d1}]]}}static forChild(e){return{ngModule:n,providers:[kw(e)]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a1,8),a.LFG(xr,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function pL(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new ih(n,t,e)}function c1(n,t,e={}){return e.useHash?new je(n,t):new Fe(n,t)}function VM(n){return"guarded"}function kw(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:th,multi:!0,useValue:n}]}let xw=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new nt.xQ}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(f=>i=f),l=this.injector.get(xr),u=this.injector.get(Iu);return"disabled"===u.initialNavigation?(l.setUpLocationChangeListener(),i(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,He.of)(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),l.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(Iu),r=this.injector.get(ov),l=this.injector.get(ih),u=this.injector.get(xr),f=this.injector.get(a.z2F);e===f.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&u.initialNavigation(),r.setUpPreloading(),l.init(),u.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function u1(n){return n.appInitializer.bind(n)}function HM(n){return n.bootstrapListener.bind(n)}const d1=new a.OlP("Router Initializer");var rh=U(6682),am=U(9746),$M=U(7771),GM=U(8858);class Dt extends nt.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new h1(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,i=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,l=i.length;let u;if(this.closed)throw new xd.N;if(this.isStopped||this.hasError?u=Vs.w.EMPTY:(this.observers.push(t),u=new GM.W(this,t)),r&&t.add(t=new am.ht(t,r)),e)for(let f=0;f<l&&!t.closed;f++)t.next(i[f]);else for(let f=0;f<l&&!t.closed;f++)t.next(i[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),u}_getNow(){return(this.scheduler||$M.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,i=this._windowTime,r=this._events,l=r.length;let u=0;for(;u<l&&!(t-r[u].time<i);)u++;return l>e&&(u=Math.max(u,l-e)),u>0&&r.splice(0,u),r}}class h1{constructor(t,e){this.time=t,this.value=e}}function av(n,t,e){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},r=>r.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:i}){let r,u,l=0,f=!1,m=!1;return function(D){let T;l++,!r||f?(f=!1,r=new Dt(n,t,i),T=r.subscribe(this),u=D.subscribe({next(k){r.next(k)},error(k){f=!0,r.error(k)},complete(){m=!0,u=void 0,r.complete()}}),m&&(u=void 0)):T=r.subscribe(this),this.add(()=>{l--,T.unsubscribe(),T=void 0,u&&!m&&e&&0===l&&(u.unsubscribe(),u=void 0,r=void 0)})}}(i))}function Vo(n,t){return t?Hn(()=>n,t):Hn(()=>n)}var cv=U(9673),$n=U(1732),Or=U(8939);U(2329);var ye=U(8239),Ca=U(8026),Ea=U(3910),B=U(3854),_l=U(5422);const WM=new Map,vL={activated:!1,tokenObservers:[]},bL={initialized:!1,enabled:!1};function bs(n){return WM.get(n)||vL}function yl(n,t){WM.set(n,t)}function Ow(){return bL}class ZM{constructor(t,e,i,r,l){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=r,r>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,ye.Z)(function*(){e.stop();try{e.pending=new B.BH,yield(n=e.getNextRun(t),new Promise(t=>{setTimeout(t,n)})),e.pending.resolve(),yield e.pending.promise,e.pending=new B.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}var n})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const oo=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function y1(n){if(!bs(n).activated)throw oo.create("use-before-activation",{appName:n.name})}function pv(n,t){return Fw.apply(this,arguments)}function Fw(){return(Fw=(0,ye.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});r&&(i["X-Firebase-Client"]=r.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(t),headers:i};let u,f;try{u=yield fetch(n,l)}catch(T){throw oo.create("fetch-network-error",{originalErrorMessage:T.message})}if(200!==u.status)throw oo.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(T){throw oo.create("fetch-parse-error",{originalErrorMessage:T.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw oo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(m[1]),D=Date.now();return{token:f.attestationToken,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function YM(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const lm="firebase-app-check-store";let mc=null;function gv(){return mc||(mc=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(oo.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{const r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(lm,{keyPath:"compositeKey"})}}}catch(e){t(oo.create("storage-open",{originalErrorMessage:e.message}))}}),mc)}function mv(){return(mv=(0,ye.Z)(function*(n,t){const i=(yield gv()).transaction(lm,"readwrite"),l=i.objectStore(lm).put({compositeKey:n,value:t});return new Promise((u,f)=>{l.onsuccess=m=>{u()},i.onerror=m=>{var w;f(oo.create("storage-set",{originalErrorMessage:null===(w=m.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const sh=new _l.Yd("@firebase/app-check");function XM(n,t){return(0,B.hl)()?function(n,t){return function(n,t){return mv.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{sh.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function w1(){return Ow().enabled}function Uw(){return Hw.apply(this,arguments)}function Hw(){return(Hw=(0,ye.Z)(function*(){const n=Ow();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ao={error:"UNKNOWN_ERROR"};function tR(n){return B.US.encodeString(JSON.stringify(n),!1)}function bv(n){return C1.apply(this,arguments)}function C1(){return(C1=(0,ye.Z)(function*(n,t=!1){const e=n.app;y1(e);const i=bs(e);let l,u,r=i.token;if(!r){const f=yield i.cachedTokenPromise;f&&oh(f)&&(r=f,yl(e,Object.assign(Object.assign({},i),{token:r})),E1(e,{token:r.token}))}if(!t&&r&&oh(r))return{token:r.token};if(w1()){const f=yield pv(YM(e,yield Uw()),n.platformLoggerProvider);return yield XM(e,f),yl(e,Object.assign(Object.assign({},i),{token:f})),{token:f.token}}try{r=yield i.provider.getToken()}catch(f){sh.error(f),l=f}return r?(u={token:r.token},yl(e,Object.assign(Object.assign({},i),{token:r})),yield XM(e,r)):u=D1(l),E1(e,u),u})).apply(this,arguments)}function wv(n,t){const e=bs(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),yl(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function E1(n,t){const e=bs(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function oh(n){return n.expireTimeMillis-Date.now()>0}function D1(n){return{token:tR(ao),error:n}}class iR{constructor(t,e){this.app=t,this.platformLoggerProvider=e}_delete(){const{tokenObservers:t}=bs(this.app);for(const e of t)wv(this.app,e.next);return Promise.resolve()}}const Cv="app-check-internal";(0,Ca._registerComponent)(new Ea.wA("app-check",n=>function(n,t){return new iR(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Cv).initialize()})),(0,Ca._registerComponent)(new Ea.wA(Cv,n=>function(n){return{getToken:t=>bv(n,t),addTokenListener:t=>function(n,t,e,i){const{app:r}=n,l=bs(r),u={next:e,error:i,type:t},f=Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,u]});if(!f.tokenRefresher){const m=function(n){const{app:t}=n;return new ZM((0,ye.Z)(function*(){let i;if(i=bs(t).token?yield bv(n,!0):yield bv(n),i.error)throw i.error}),()=>!0,()=>{const e=bs(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n);f.tokenRefresher=m}if(!f.tokenRefresher.isRunning()&&l.isTokenAutoRefreshEnabled&&f.tokenRefresher.start(),l.token&&oh(l.token)){const m=l.token;Promise.resolve().then(()=>e({token:m.token})).catch(()=>{})}else null==l.token&&l.cachedTokenPromise.then(m=>{m&&oh(m)&&e({token:m.token})}).catch(()=>{});yl(r,f)}(n,"INTERNAL",t),removeTokenListener:t=>wv(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ca.registerVersion)("@firebase/app-check","0.5.1");class Ev{constructor(){return(0,$n.vb)("app-check")}}"undefined"!=typeof window&&window;var ip=U(7841);const Ww=new a.OlP("angularfire2.auth.use-emulator"),gm=new a.OlP("angularfire2.auth.settings"),Tv=new a.OlP("angularfire2.auth.tenant-id"),Zw=new a.OlP("angularfire2.auth.langugage-code"),Sv=new a.OlP("angularfire2.auth.use-device-language"),Yw=new a.OlP("angularfire.auth.persistence"),mm=(n,t,e,i,r,l,u,f)=>(0,Or.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=t.runOutsideAngular(()=>n.auth());if(e&&m.useEmulator(...e),i&&(m.tenantId=i),m.languageCode=r,l&&m.useDeviceLanguage(),u)for(const[w,D]of Object.entries(u))m.settings[w]=D;return f&&m.setPersistence(f),m},[e,i,r,l,u,f]);let _m=(()=>{class n{constructor(e,i,r,l,u,f,m,w,D,T,k,F){const j=new nt.xQ,te=(0,He.of)(void 0).pipe((0,am.QV)(u.outsideAngular),Hn(()=>l.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,7683)))),(0,et.U)(()=>(0,Or.on)(e,l,i)),(0,et.U)(de=>mm(de,l,f,w,D,T,m,k)),av({bufferSize:1,refCount:!1}));if(qc(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,He.of)(null);else{te.pipe(mi()).subscribe();const Pe=te.pipe(Hn(lt=>lt.getRedirectResult().then(gn=>gn,()=>null)),$n.iC,av({bufferSize:1,refCount:!1})),Ve=te.pipe(Hn(lt=>new Cn.y(gn=>({unsubscribe:l.runOutsideAngular(()=>lt.onAuthStateChanged(li=>gn.next(li),li=>gn.error(li),()=>gn.complete()))})))),pt=te.pipe(Hn(lt=>new Cn.y(gn=>({unsubscribe:l.runOutsideAngular(()=>lt.onIdTokenChanged(li=>gn.next(li),li=>gn.error(li),()=>gn.complete()))}))));this.authState=Pe.pipe(Vo(Ve),(0,cv.R)(u.outsideAngular),(0,am.QV)(u.insideAngular)),this.user=Pe.pipe(Vo(pt),(0,cv.R)(u.outsideAngular),(0,am.QV)(u.insideAngular)),this.idToken=this.user.pipe(Hn(lt=>lt?(0,fn.D)(lt.getIdToken()):(0,He.of)(null))),this.idTokenResult=this.user.pipe(Hn(lt=>lt?(0,fn.D)(lt.getIdTokenResult()):(0,He.of)(null))),this.credential=(0,rh.T)(Pe,j,this.authState.pipe(_n(lt=>!lt))).pipe((0,et.U)(lt=>(null==lt?void 0:lt.user)?lt:null),(0,cv.R)(u.outsideAngular),(0,am.QV)(u.insideAngular))}return(0,Or.pX)(this,te,l,{spy:{apply:(de,Pe,Ve)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&Ve.then(pt=>j.next(pt))}}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Or.Dh),a.LFG(Or.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG($n.HU),a.LFG(Ww,8),a.LFG(gm,8),a.LFG(Tv,8),a.LFG(Zw,8),a.LFG(Sv,8),a.LFG(Yw,8),a.LFG(Ev,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var ah=U(3637);function _c(){return n=>n.lift(new L1)}class L1{call(t,e){return e.subscribe(new gR(t))}}class gR extends an.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function lh(n,t){return e=>e.lift(new rp(n,t))}class rp{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new mR(t,this.compare,this.keySelector))}}class mR extends an.L{constructor(t,e,i){super(t),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:r}=this;e=r?r(t):t}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=e,this.destination.next(t))}}U(7683);var Ze,V1=U(3394),_R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ku={},Iv=Iv||{},qe=_R||self;function sp(){}function B1(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function lo(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var ym="closure_uid_"+(1e9*Math.random()>>>0),OL=0;function yR(n,t,e){return n.call.apply(n.bind,arguments)}function vR(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function mr(n,t,e){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yR:vR).apply(null,arguments)}function vm(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function _r(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,l){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return t.prototype[r].apply(i,u)}}function yc(){this.s=this.s,this.o=this.o}var wR={};yc.prototype.s=!1,yc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,ym)&&n[ym]||(n[ym]=++OL)}(this);delete wR[n]}},yc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const op=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},Av=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let l=0;l<i;l++)l in r&&t.call(e,r[l],l,n)};function Qw(n){return Array.prototype.concat.apply([],arguments)}function Nv(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function bm(n){return/^[\s\xa0]*$/.test(n)}var Cs,H1=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ws(n,t){return-1!=n.indexOf(t)}function Jw(n,t){return n<t?-1:n>t?1:0}e:{var Xw=qe.navigator;if(Xw){var CR=Xw.userAgent;if(CR){Cs=CR;break e}}Cs=""}function Mv(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function j1(n){const t={};for(const e in n)t[e]=n[e];return t}var $1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ER(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let l=0;l<$1.length;l++)e=$1[l],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function G1(n){return G1[" "](n),n}G1[" "]=sp;var nC,n,DR=ws(Cs,"Opera"),ch=ws(Cs,"Trident")||ws(Cs,"MSIE"),tC=ws(Cs,"Edge"),z1=tC||ch,Bo=ws(Cs,"Gecko")&&!(ws(Cs.toLowerCase(),"webkit")&&!ws(Cs,"Edge"))&&!(ws(Cs,"Trident")||ws(Cs,"MSIE"))&&!ws(Cs,"Edge"),PL=ws(Cs.toLowerCase(),"webkit")&&!ws(Cs,"Edge");function TR(){var n=qe.document;return n?n.documentMode:void 0}e:{var Rv="",kv=(n=Cs,Bo?/rv:([^\);]+)(\)|;)/.exec(n):tC?/Edge\/([\d\.]+)/.exec(n):ch?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):PL?/WebKit\/(\S+)/.exec(n):DR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(kv&&(Rv=kv?kv[1]:""),ch){var xv=TR();if(null!=xv&&xv>parseFloat(Rv)){nC=String(xv);break e}}nC=Rv}var SR={};function FL(){return t=SR,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=H1(String(nC)).split("."),e=H1("9").split("."),i=Math.max(t.length,e.length);for(let u=0;0==n&&u<i;u++){var r=t[u]||"",l=e[u]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==r[0].length&&0==l[0].length)break;n=Jw(0==r[1].length?0:parseInt(r[1],10),0==l[1].length?0:parseInt(l[1],10))||Jw(0==r[2].length,0==l[2].length)||Jw(r[2],l[2]),r=r[3],l=l[3]}while(0==n)}return 0<=n}();var t}var IR=qe.document&&ch&&(TR()||parseInt(nC,10))||void 0,iC=function(){if(!qe.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{qe.addEventListener("test",sp,t),qe.removeEventListener("test",sp,t)}catch(e){}return n}();function Xr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function wm(n,t){if(Xr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Bo){e:{try{G1(t.nodeName);var r=!0;break e}catch(l){}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:AR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&wm.Z.h.call(this)}}Xr.prototype.h=function(){this.defaultPrevented=!0},_r(wm,Xr);var AR={2:"touch",3:"pen",4:"mouse"};wm.prototype.h=function(){wm.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Cm="closure_listenable_"+(1e6*Math.random()|0),NR=0;function MR(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++NR,this.ca=this.fa=!1}function uh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function vc(n){this.src=n,this.g={},this.h=0}function Fv(n,t){var e=t.type;if(e in n.g){var l,i=n.g[e],r=op(i,t);(l=0<=r)&&Array.prototype.splice.call(i,r,1),l&&(uh(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function co(n,t,e,i){for(var r=0;r<n.length;++r){var l=n[r];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==i)return r}return-1}vc.prototype.add=function(n,t,e,i,r){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var u=co(n,t,i,r);return-1<u?(t=n[u],e||(t.fa=!1)):((t=new MR(t,this.src,l,!!i,r)).fa=e,n.push(t)),t};var dh="closure_lm_"+(1e6*Math.random()|0),rC={};function q1(n,t,e,i,r){if(i&&i.once)return ap(n,t,e,i,r);if(Array.isArray(t)){for(var l=0;l<t.length;l++)q1(n,t[l],e,i,r);return null}return e=Ou(e),n&&n[Cm]?n.N(t,e,lo(i)?!!i.capture:!!i,r):Lv(n,t,e,!1,i,r)}function Lv(n,t,e,i,r,l){if(!t)throw Error("Invalid event type");var u=lo(r)?!!r.capture:!!r,f=Dm(n);if(f||(n[dh]=f=new vc(n)),(e=f.add(t,e,i,u,l)).proxy)return e;if(i=function(){var t=Uo;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)iC||(r=u),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(Em(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function ap(n,t,e,i,r){if(Array.isArray(t)){for(var l=0;l<t.length;l++)ap(n,t[l],e,i,r);return null}return e=Ou(e),n&&n[Cm]?n.O(t,e,lo(i)?!!i.capture:!!i,r):Lv(n,t,e,!0,i,r)}function Pr(n,t,e,i,r){if(Array.isArray(t))for(var l=0;l<t.length;l++)Pr(n,t[l],e,i,r);else i=lo(i)?!!i.capture:!!i,e=Ou(e),n&&n[Cm]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=co(l=n.g[t],e,i,r))&&(uh(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete n.g[t],n.h--))):n&&(n=Dm(n))&&(t=n.g[t.toString()],n=-1,t&&(n=co(t,e,i,r)),(e=-1<n?t[n]:null)&&bc(e))}function bc(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Cm])Fv(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(Em(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=Dm(t))?(Fv(e,n),0==e.h&&(e.src=null,t[dh]=null)):uh(n)}}}function Em(n){return n in rC?rC[n]:rC[n]="on"+n}function Uo(n,t){if(n.ca)n=!0;else{t=new wm(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&bc(n),n=e.call(i,t)}return n}function Dm(n){return(n=n[dh])instanceof vc?n:null}var xu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ou(n){return"function"==typeof n?n:(n[xu]||(n[xu]=function(t){return n.handleEvent(t)}),n[xu])}function hi(){yc.call(this),this.i=new vc(this),this.P=this,this.I=null}function vi(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Xr(t,n);else if(t instanceof Xr)t.target=t.target||n;else{var r=t;ER(t=new Xr(i,n),r)}if(r=!0,e)for(var l=e.length-1;0<=l;l--){var u=t.g=e[l];r=wc(u,i,!0,t)&&r}if(r=wc(u=t.g=n,i,!0,t)&&r,r=wc(u,i,!1,t)&&r,e)for(l=0;l<e.length;l++)r=wc(u=t.g=e[l],i,!1,t)&&r}function wc(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,l=0;l<t.length;++l){var u=t[l];if(u&&!u.ca&&u.capture==e){var f=u.listener,m=u.ia||u.src;u.fa&&Fv(n.i,u),r=!1!==f.call(m,i)&&r}}return r&&!i.defaultPrevented}_r(hi,yc),hi.prototype[Cm]=!0,hi.prototype.removeEventListener=function(n,t,e,i){Pr(this,n,t,e,i)},hi.prototype.M=function(){if(hi.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)uh(e[i]);delete n.g[t],n.h--}}this.I=null},hi.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},hi.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var Pu=qe.JSON.stringify;function lp(){var n=sC;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var Bv,hh=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new W1,n=>n.reset());class W1{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Z1(n){qe.setTimeout(()=>{throw n},0)}function Vv(n,t){Bv||function(){var n=qe.Promise.resolve(void 0);Bv=function(){n.then(K1)}}(),Uv||(Bv(),Uv=!0),sC.add(n,t)}var Uv=!1,sC=new class{constructor(){this.h=this.g=null}add(t,e){const i=hh.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function K1(){for(var n;n=lp();){try{n.h.call(n.g)}catch(e){Z1(e)}var t=hh;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Uv=!1}function Tm(n,t){hi.call(this),this.h=n||1,this.g=t||qe,this.j=mr(this.kb,this),this.l=Date.now()}function oC(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Hv(n,t,e){if("function"==typeof n)e&&(n=mr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mr(n.handleEvent,n)}return 2147483647<Number(t)?-1:qe.setTimeout(n,t||0)}function Q1(n){n.g=Hv(()=>{n.g=null,n.i&&(n.i=!1,Q1(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}_r(Tm,hi),(Ze=Tm.prototype).da=!1,Ze.S=null,Ze.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vi(this,"tick"),this.da&&(oC(this),this.start()))}},Ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){Tm.Z.M.call(this),oC(this),delete this.g};class J1 extends yc{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Q1(this)}M(){super.M(),this.g&&(qe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function up(n){yc.call(this),this.h=n,this.g={}}_r(up,yc);var X1=[];function RR(n,t,e,i){Array.isArray(e)||(e&&(X1[0]=e.toString()),e=X1);for(var r=0;r<e.length;r++){var l=q1(t,e[r],i||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function eS(n){Mv(n.g,function(t,e){this.g.hasOwnProperty(e)&&bc(t)},n),n.g={}}function Sm(){this.g=!0}function dp(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var l=r[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<r.length;u++)r[u]=""}}}return Pu(e)}catch(f){return t}}(n,e)+(i?" "+i:"")})}up.prototype.M=function(){up.Z.M.call(this),eS(this)},up.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sm.prototype.Aa=function(){this.g=!1},Sm.prototype.info=function(){};var fh={},aC=null;function lC(){return aC=aC||new hi}function OR(n){Xr.call(this,fh.Ma,n)}function jv(n){const t=lC();vi(t,new OR(t,n))}function nS(n,t){Xr.call(this,fh.STAT_EVENT,n),this.stat=t}function Hs(n){const t=lC();vi(t,new nS(t,n))}function iS(n,t){Xr.call(this,fh.Na,n),this.size=t}function Im(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return qe.setTimeout(function(){n()},t)}fh.Ma="serverreachability",_r(OR,Xr),fh.STAT_EVENT="statevent",_r(nS,Xr),fh.Na="timingevent",_r(iS,Xr);var hp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$v={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function cC(){}function FR(){}cC.prototype.h=null;var rS,Gv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function uC(){Xr.call(this,"d")}function zv(){Xr.call(this,"c")}function qv(){}function bl(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new up(this),this.P=oS,this.W=new Tm(n=z1?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sS}function sS(){this.i=null,this.g="",this.h=!1}_r(uC,Xr),_r(zv,Xr),_r(qv,cC),qv.prototype.g=function(){return new XMLHttpRequest},qv.prototype.i=function(){return{}},rS=new qv;var oS=45e3,dC={},Am={};function fp(n,t,e){n.K=1,n.v=fC(Ta(t)),n.s=e,n.U=!0,aS(n,null)}function aS(n,t){n.F=Date.now(),Nm(n),n.A=Ta(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),vC(e.h,"t",i),n.C=0,e=n.l.H,n.h=new sS,n.g=Um(n.l,e?t:null,!n.s),0<n.O&&(n.L=new J1(mr(n.Ia,n,n.g),n.O)),RR(n.V,n.g,"readystatechange",n.gb),t=n.H?j1(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),jv(1),function(n,t,e,i,r,l){n.info(function(){if(n.g)if(l)for(var u="",f=l.split("&"),m=0;m<f.length;m++){var w=f[m].split("=");if(1<w.length){var D=w[0];w=w[1];var T=D.split("_");u=2<=T.length&&"type"==T[1]?u+(D+"=")+w+"&":u+(D+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function hC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function lS(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=LR(n,e),r==Am){4==t&&(n.o=4,Hs(14),i=!1),dp(n.j,n.m,null,"[Incomplete Response]");break}if(r==dC){n.o=4,Hs(15),dp(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}dp(n.j,n.m,r,null),Zv(n,r)}hC(n)&&r!=Am&&r!=dC&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Hs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),RC(t),t.L=!0,Hs(11))):(dp(n.j,n.m,e,"[Invalid Chunked Response]"),ph(n),pp(n))}function LR(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?Am:(e=Number(t.substring(e,i)),isNaN(e)?dC:(i+=1)+e>t.length?Am:(t=t.substr(i,e),n.C=i+e,t))}function Nm(n){n.Y=Date.now()+n.P,cS(n,n.P)}function cS(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Im(mr(n.eb,n),t)}function Wv(n){n.B&&(qe.clearTimeout(n.B),n.B=null)}function pp(n){0==n.l.G||n.I||Bm(n.l,n)}function ph(n){Wv(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,oC(n.W),eS(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Zv(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||tb(e.i,n)))if(e.I=n.N,!n.J&&tb(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch(w){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(e.u)e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=Im(mr(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;Vm(e),Lm(e)}cb(e),Hs(18)}if(1>=wC(e.i)&&e.ka){try{e.ka()}catch(w){}e.ka=void 0}}else Fu(e,11)}else if((n.J||e.g==n)&&Vm(e),!bm(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let w=r[t];if(e.U=w[0],w=w[1],2==e.G)if("c"==w[0]){e.J=w[1],e.la=w[2];const D=w[3];null!=D&&(e.ma=D,e.h.info("VER="+e.ma));const T=w[4];null!=T&&(e.za=T,e.h.info("SVER="+e.za));const k=w[5];null!=k&&"number"==typeof k&&0<k&&(e.K=i=1.5*k,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const F=n.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var l=i.i;!l.g&&(ws(j,"spdy")||ws(j,"quic")||ws(j,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(nb(l,l.h),l.h=null))}if(i.D){const te=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(i.sa=te,Gn(i.F,i.D,te))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var u=n;if((i=e).oa=ub(i,i.H?i.la:null,i.W),u.J){CC(i.i,u);var f=u,m=i.K;m&&f.setTimeout(m),f.B&&(Wv(f),Nm(f)),i.g=u}else bS(i);0<e.l.length&&lb(e)}else"stop"!=w[0]&&"close"!=w[0]||Fu(e,7);else 3==e.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Fu(e,7):uo(e):"noop"!=w[0]&&e.j&&e.j.wa(w),e.A=0)}jv(4)}catch(w){}}function Mm(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(B1(n)||"string"==typeof n)Av(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(B1(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;r=(i=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(B1(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n)).length;for(var l=0;l<r;l++)t.call(void 0,i[l],e&&e[l],n)}}function Rm(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Rm)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function km(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];gh(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)gh(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function gh(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(Ze=bl.prototype).setTimeout=function(n){this.P=n},Ze.gb=function(n){n=n.target;const t=this.L;t&&3==Sa(n)?t.l():this.Ia(n)},Ze.Ia=function(n){try{if(n==this.g)e:{const D=Sa(this.g);var t=this.g.Da();const T=this.g.ba();if(!(3>D)&&(3!=D||z1||this.g&&(this.h.h||this.g.ga()||Ia(this.g)))){this.I||4!=D||7==t||jv(8==t||0>=T?3:2),Wv(this);var e=this.g.ba();this.N=e;t:if(hC(this)){var i=Ia(this.g);n="";var r=i.length,l=4==Sa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ph(this),pp(this);var u="";break t}this.h.i=new qe.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:l&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==e,function(n,t,e,i,r,l,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.X,D,e),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bm(f)){var w=f;break t}}w=null}if(!(e=w)){this.i=!1,this.o=3,Hs(12),ph(this),pp(this);break e}dp(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zv(this,e)}this.U?(lS(this,D,u),z1&&this.i&&3==D&&(RR(this.V,this.W,"tick",this.fb),this.W.start())):(dp(this.j,this.m,u,null),Zv(this,u)),4==D&&ph(this),this.i&&!this.I&&(4==D?Bm(this.l,this):(this.i=!1,Nm(this)))}else 400==e&&0<u.indexOf("Unknown SID")?(this.o=3,Hs(12)):(this.o=0,Hs(13)),ph(this),pp(this)}}}catch(D){}},Ze.fb=function(){if(this.g){var n=Sa(this.g),t=this.g.ga();this.C<t.length&&(Wv(this),lS(this,n,t),this.i&&4!=n&&Nm(this))}},Ze.cancel=function(){this.I=!0,ph(this)},Ze.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(jv(3),Hs(17)),ph(this),this.o=2,pp(this)):cS(this,this.Y-n)},(Ze=Rm.prototype).R=function(){km(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},Ze.T=function(){return km(this),this.g.concat()},Ze.get=function(n,t){return gh(this.h,n)?this.h[n]:t},Ze.set=function(n,t){gh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},Ze.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],l=this.get(r);n.call(t,l,r,this)}};var VR=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mh(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof mh){this.g=void 0!==t?t:n.g,gp(this,n.j),this.s=n.s,Yv(this,n.i),mp(this,n.m),this.l=n.l,t=n.h;var e=new Om;e.i=t.i,t.g&&(e.g=new Rm(t.g),e.h=t.h),Kv(this,e),this.o=n.o}else n&&(e=String(n).match(VR))?(this.g=!!t,gp(this,e[1]||"",!0),this.s=_h(e[2]||""),Yv(this,e[3]||"",!0),mp(this,e[4]),this.l=_h(e[5]||"",!0),Kv(this,e[6]||"",!0),this.o=_h(e[7]||"")):(this.g=!!t,this.h=new Om(null,this.g))}function Ta(n){return new mh(n)}function gp(n,t,e){n.j=e?_h(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Yv(n,t,e){n.i=e?_h(t,!0):t}function mp(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function Kv(n,t,e){t instanceof Om?(n.h=t,function(n,t){t&&!n.j&&(Cc(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(yC(this,i),vC(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=_p(t,mC)),n.h=new Om(t,n.g))}function Gn(n,t,e){n.h.set(t,e)}function fC(n){return Gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _h(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function _p(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,dS),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function dS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mh.prototype.toString=function(){var n=[],t=this.j;t&&n.push(_p(t,Qv,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(_p(t,Qv,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(_p(e,"/"==e.charAt(0)?gC:hS,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",_p(e,_C)),n.join("")};var Qv=/[#\/\?@]/g,hS=/[#\?:]/g,gC=/[#\?]/g,mC=/[#\?@]/g,_C=/#/g;function Om(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Cc(n){n.g||(n.g=new Rm,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var l=n[e].substring(0,i);r=n[e].substring(i+1)}else l=n[e];t(l,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function yC(n,t){Cc(n),t=yp(n,t),gh(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,gh((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&km(n)))}function Jv(n,t){return Cc(n),t=yp(n,t),gh(n.g.h,t)}function vC(n,t,e){yC(n,t),0<e.length&&(n.i=null,n.g.set(yp(n,t),Nv(e)),n.h+=e.length)}function yp(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function Xv(n){this.l=n||eb,n=qe.PerformanceNavigationTiming?0<(n=qe.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(qe.g&&qe.g.Ea&&qe.g.Ea()&&qe.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=Om.prototype).add=function(n,t){Cc(this),this.i=null,n=yp(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Ze.forEach=function(n,t){Cc(this),this.g.forEach(function(e,i){Av(e,function(r){n.call(t,r,i,this)},this)},this)},Ze.T=function(){Cc(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],l=0;l<r.length;l++)e.push(t[i]);return e},Ze.R=function(n){Cc(this);var t=[];if("string"==typeof n)Jv(this,n)&&(t=Qw(t,this.g.get(yp(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=Qw(t,n[e])}return t},Ze.set=function(n,t){return Cc(this),this.i=null,Jv(this,n=yp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Ze.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var l=0;l<i.length;l++){var u=r;""!==i[l]&&(u+="="+encodeURIComponent(String(i[l]))),n.push(u)}}return this.i=n.join("&")};var eb=10;function bC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wC(n){return n.h?1:n.g?n.g.size:0}function tb(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function nb(n,t){n.g?n.g.add(t):n.h=t}function CC(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function EC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return Nv(n.i)}function ib(){}function gS(){this.g=new ib}function VL(n,t,e){const i=e||"";try{Mm(n,function(r,l){let u=r;lo(r)&&(u=Pu(r)),t.push(i+l+"="+encodeURIComponent(u))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function rb(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(l){}}function vp(n){this.l=n.$b||null,this.j=n.ib||!1}function sb(n,t){hi.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Ni,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xv.prototype.cancel=function(){if(this.i=EC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ib.prototype.stringify=function(n){return qe.JSON.stringify(n,void 0)},ib.prototype.parse=function(n){return qe.JSON.parse(n,void 0)},_r(vp,cC),vp.prototype.g=function(){return new sb(this.l,this.j)},vp.prototype.i=function(n){return function(){return n}}({}),_r(sb,hi);var Ni=0;function DC(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Pm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Fm(n)}function Fm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=sb.prototype).open=function(n,t){if(this.readyState!=Ni)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Fm(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||qe).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pm(this)),this.readyState=Ni},Ze.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Fm(this)),this.g&&(this.readyState=3,Fm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==qe.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DC(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ze.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Pm(this):Fm(this),3==this.readyState&&DC(this)}},Ze.Ua=function(n){this.g&&(this.response=this.responseText=n,Pm(this))},Ze.Ta=function(n){this.g&&(this.response=n,Pm(this))},Ze.ha=function(){this.g&&Pm(this)},Ze.setRequestHeader=function(n,t){this.v.append(n,t)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(sb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var mS=qe.JSON.parse;function Ui(n){hi.call(this),this.headers=new Rm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=TC,this.K=this.L=!1}_r(Ui,hi);var TC="",_S=/^https?$/i,bp=["POST","PUT"];function jR(n){return"content-type"==n.toLowerCase()}function SC(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,yS(n),AC(n)}function yS(n){n.D||(n.D=!0,vi(n,"complete"),vi(n,"error"))}function IC(n){if(n.h&&void 0!==Iv&&(!n.C[1]||4!=Sa(n)||2!=n.ba()))if(n.v&&4==Sa(n))Hv(n.Fa,0,n);else if(vi(n,"readystatechange"),4==Sa(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===f){var r=String(n.H).match(VR)[1]||null;if(!r&&qe.self&&qe.self.location){var l=qe.self.location.protocol;r=l.substr(0,l.length-1)}i=!_S.test(r?r.toLowerCase():"")}e=i}if(e)vi(n,"complete"),vi(n,"success");else{n.m=6;try{var u=2<Sa(n)?n.g.statusText:""}catch(m){u=""}n.j=u+" ["+n.ba()+"]",yS(n)}}finally{AC(n)}}}function AC(n,t){if(n.g){ob(n);const e=n.g,i=n.C[0]?sp:null;n.g=null,n.C=null,t||vi(n,"ready");try{e.onreadystatechange=i}catch(r){}}}function ob(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(qe.clearTimeout(n.A),n.A=null)}function Sa(n){return n.g?n.g.readyState:0}function Ia(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case TC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ab(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function(n){let t="";return Mv(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Gn(n,t,e))}function js(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function Ho(n){this.za=0,this.l=[],this.h=new Sm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=js("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=js("baseRetryDelayMs",5e3,n),this.$a=js("retryDelaySeedMs",1e4,n),this.Ya=js("forwardChannelMaxRetries",2,n),this.ra=js("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Xv(n&&n.concurrentRequestLimit),this.Ca=new gS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function uo(n){if(NC(n),3==n.G){var t=n.V++,e=Ta(n.F);Gn(e,"SID",n.J),Gn(e,"RID",t),Gn(e,"TYPE","terminate"),yh(n,e),(t=new bl(n,n.h,t,void 0)).K=2,t.v=fC(Ta(e)),e=!1,qe.navigator&&qe.navigator.sendBeacon&&(e=qe.navigator.sendBeacon(t.v.toString(),"")),!e&&qe.Image&&((new Image).src=t.v,e=!0),e||(t.g=Um(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Nm(t)}xC(n)}function Lm(n){n.g&&(RC(n),n.g.cancel(),n.g=null)}function NC(n){Lm(n),n.u&&(qe.clearTimeout(n.u),n.u=null),Vm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&qe.clearTimeout(n.m),n.m=null)}function MC(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&lb(n)}function lb(n){bC(n.i)||n.m||(n.m=!0,Vv(n.Ha,n),n.C=0)}function vS(n,t){var e;e=t?t.m:n.V++;const i=Ta(n.F);Gn(i,"SID",n.J),Gn(i,"RID",e),Gn(i,"AID",n.U),yh(n,i),n.o&&n.s&&ab(i,n.o,n.s),e=new bl(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=wp(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),nb(n.i,e),fp(e,i,t)}function yh(n,t){n.j&&Mm({},function(e,i){Gn(t,i,e)})}function wp(n,t,e){e=Math.min(n.l.length,e);var i=n.j?mr(n.j.Oa,n.j,n):null;e:{var r=n.l;let l=-1;for(;;){const u=["count="+e];-1==l?0<e?(l=r[0].h,u.push("ofs="+l)):l=0:u.push("ofs="+l);let f=!0;for(let m=0;m<e;m++){let w=r[m].h;const D=r[m].g;if(w-=l,0>w)l=Math.max(0,r[m].h-100),f=!1;else try{VL(D,u,"req"+w+"_")}catch(T){i&&i(D)}}if(f){i=u.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function bS(n){n.g||n.u||(n.Y=1,Vv(n.Ga,n),n.A=0)}function cb(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Im(mr(n.Ga,n),wS(n,n.A)),n.A++,0))}function RC(n){null!=n.B&&(qe.clearTimeout(n.B),n.B=null)}function kC(n){n.g=new bl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Ta(n.oa);Gn(t,"RID","rpc"),Gn(t,"SID",n.J),Gn(t,"CI",n.N?"0":"1"),Gn(t,"AID",n.U),yh(n,t),Gn(t,"TYPE","xmlhttp"),n.o&&n.s&&ab(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=fC(Ta(t)),e.s=null,e.U=!0,aS(e,n)}function Vm(n){null!=n.v&&(qe.clearTimeout(n.v),n.v=null)}function Bm(n,t){var e=null;if(n.g==t){Vm(n),RC(n),n.g=null;var i=2}else{if(!tb(n.i,t))return;e=t.D,CC(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;vi(i=lC(),new iS(i,e,t,r)),lb(n)}else bS(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function(n,t){return!(wC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Im(mr(n.Ha,n,t),wS(n,n.C)),n.C++,0)))}(n,t)||2==i&&cb(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:Fu(n,5);break;case 4:Fu(n,10);break;case 3:Fu(n,6);break;default:Fu(n,2)}}function wS(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function Fu(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=mr(n.jb,n);e||(e=new mh("//www.google.com/images/cleardot.gif"),qe.location&&"http"==qe.location.protocol||gp(e,"https"),fC(e)),function(n,t){const e=new Sm;if(qe.Image){const i=new Image;i.onload=vm(rb,e,i,"TestLoadImage: loaded",!0,t),i.onerror=vm(rb,e,i,"TestLoadImage: error",!1,t),i.onabort=vm(rb,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=vm(rb,e,i,"TestLoadImage: timeout",!1,t),qe.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Hs(2);n.G=0,n.j&&n.j.va(t),xC(n),NC(n)}function xC(n){n.G=0,n.I=-1,n.j&&((0!=EC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Nv(n.l),n.l.length=0),n.j.ua())}function ub(n,t,e){let i=function(n){return n instanceof mh?Ta(n):new mh(n,void 0)}(e);if(""!=i.i)t&&Yv(i,t+"."+i.i),mp(i,i.m);else{const r=qe.location;i=function(n,t,e,i){var r=new mh(null,void 0);return n&&gp(r,n),t&&Yv(r,t),e&&mp(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&Mv(n.aa,function(r,l){Gn(i,l,r)}),e=n.sa,(t=n.D)&&e&&Gn(i,t,e),Gn(i,"VER",n.ma),yh(n,i),i}function Um(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ui(e&&n.Ba&&!n.qa?new vp({ib:!0}):n.qa)).L=n.H,t}function OC(){}function Hm(){if(ch&&!(10<=Number(IR)))throw Error("Environmental error: no available transport.")}function $s(n,t){hi.call(this),this.g=new Ho(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!bm(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bm(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new vh(this)}function PC(n){uC.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function FC(){zv.call(this),this.status=1}function vh(n){this.g=n}(Ze=Ui.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rS.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:rS),this.g.onreadystatechange=mr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(l){return void SC(this,l)}n=e||"";const r=new Rm(this.headers);i&&Mm(i,function(l,u){r.set(u,l)}),i=function(n){e:{var t=jR;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=qe.FormData&&n instanceof qe.FormData,!(0<=op(bp,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(l,u){this.g.setRequestHeader(u,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ob(this),0<this.B&&((this.K=function(n){return ch&&FL()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.pa,this)):this.A=Hv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){SC(this,l)}},Ze.pa=function(){void 0!==Iv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vi(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vi(this,"complete"),vi(this,"abort"),AC(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),AC(this,!0)),Ui.Z.M.call(this)},Ze.Fa=function(){this.s||(this.F||this.v||this.l?IC(this):this.cb())},Ze.cb=function(){IC(this)},Ze.ba=function(){try{return 2<Sa(this)?this.g.status:-1}catch(n){return-1}},Ze.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ze.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),mS(t)}},Ze.Da=function(){return this.m},Ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=Ho.prototype).ma=8,Ze.G=1,Ze.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},Ze.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new bl(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=j1(l),ER(l,this.P)):l=this.P),null===this.o&&(r.H=l),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=wp(this,r,t),Gn(e=Ta(this.F),"RID",n),Gn(e,"CVER",22),this.D&&Gn(e,"X-HTTP-Session-Id",this.D),yh(this,e),this.o&&l&&ab(e,this.o,l),nb(this.i,r),this.Ra&&Gn(e,"TYPE","init"),this.ja?(Gn(e,"$req",t),Gn(e,"SID","null"),r.$=!0,fp(r,e,null)):fp(r,e,t),this.G=2}}else 3==this.G&&(n?vS(this,n):0==this.l.length||bC(this.i)||vS(this))},Ze.Ga=function(){if(this.u=null,kC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Im(mr(this.bb,this),n)}},Ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hs(10),Lm(this),kC(this))},Ze.ab=function(){null!=this.v&&(this.v=null,Lm(this),cb(this),Hs(19))},Ze.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Hs(2)):(this.h.info("Failed to ping google.com"),Hs(1))},(Ze=OC.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Oa=function(){},Hm.prototype.g=function(n,t){return new $s(n,t)},_r($s,hi),$s.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Vv(mr(n.hb,n,t))),Hs(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=ub(n,null,n.W),lb(n)},$s.prototype.close=function(){uo(this.g)},$s.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,MC(this.g,t)}else this.v?((t={}).__data__=Pu(n),MC(this.g,t)):MC(this.g,n)},$s.prototype.M=function(){this.g.j=null,delete this.j,uo(this.g),delete this.g,$s.Z.M.call(this)},_r(PC,uC),_r(FC,zv),_r(vh,OC),vh.prototype.xa=function(){vi(this.g,"a")},vh.prototype.wa=function(n){vi(this.g,new PC(n))},vh.prototype.va=function(n){vi(this.g,new FC(n))},vh.prototype.ua=function(){vi(this.g,"b")},Hm.prototype.createWebChannel=Hm.prototype.g,$s.prototype.send=$s.prototype.u,$s.prototype.open=$s.prototype.m,$s.prototype.close=$s.prototype.close,hp.NO_ERROR=0,hp.TIMEOUT=8,hp.HTTP_ERROR=6,$v.COMPLETE="complete",FR.EventType=Gv,Gv.OPEN="a",Gv.CLOSE="b",Gv.ERROR="c",Gv.MESSAGE="d",hi.prototype.listen=hi.prototype.N,Ui.prototype.listenOnce=Ui.prototype.O,Ui.prototype.getLastError=Ui.prototype.La,Ui.prototype.getLastErrorCode=Ui.prototype.Da,Ui.prototype.getStatus=Ui.prototype.ba,Ui.prototype.getResponseJson=Ui.prototype.Qa,Ui.prototype.getResponseText=Ui.prototype.ga,Ui.prototype.send=Ui.prototype.ea;var CS=ku.createWebChannelTransport=function(){return new Hm},ES=ku.getStatEventTarget=function(){return lC()},LC=ku.ErrorCode=hp,zR=ku.EventType=$v,qR=ku.Event=fh,VC=ku.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},WR=ku.FetchXmlHttpFactory=vp,db=ku.WebChannel=FR,ZR=ku.XhrIo=Ui;const DS="@firebase/firestore";class Fr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let Cp="9.4.0";const Lu=new _l.Yd("@firebase/firestore");function BC(){return Lu.logLevel}function Oe(n,...t){if(Lu.logLevel<=_l.in.DEBUG){const e=t.map(UC);Lu.debug(`Firestore (${Cp}): ${n}`,...e)}}function Hi(n,...t){if(Lu.logLevel<=_l.in.ERROR){const e=t.map(UC);Lu.error(`Firestore (${Cp}): ${n}`,...e)}}function jm(n,...t){if(Lu.logLevel<=_l.in.WARN){const e=t.map(UC);Lu.warn(`Firestore (${Cp}): ${n}`,...e)}}function UC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function ot(n="Unexpected state"){const t=`FIRESTORE (${Cp}) INTERNAL ASSERTION FAILED: `+n;throw Hi(t),new Error(t)}function yt(n,t){n||ot()}function Be(n,t){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class HC{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${t}`}}class SS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Fr.UNAUTHENTICATED))}shutdown(){}}class IS{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class jC{constructor(t){this.t=t,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const l=w=>this.i!==r?(r=this.i,e(w)):Promise.resolve();let u=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new tr,t.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const w=u;t.enqueueRetryable((0,ye.Z)(function*(){yield w.promise,yield l(i.currentUser)}))},m=w=>{Oe("FirebaseCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>m(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?m(w):(Oe("FirebaseCredentialsProvider","Auth not yet detected"),u.resolve(),u=new tr)}},0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Oe("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt("string"==typeof i.accessToken),new HC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return yt(null===t||"string"==typeof t),new Fr(t)}}class $C{constructor(t,e,i){this.h=t,this.l=e,this.m=i,this.type="FirstParty",this.user=Fr.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.l},e=this.h.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.m&&(t["X-Goog-Iam-Authorization-Token"]=this.m),t}}class bh{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new $C(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ho{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.g(i),this.p=i=>e.writeSequenceNumber(i))}g(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.p&&this.p(t),t}}function KR(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}ho.T=-1;class wh{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=KR(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<e&&(i+=t.charAt(r[l]%t.length))}return i}}function rn(n,t){return n<t?-1:n>t?1:0}function Vu(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function QR(n){return n+"\0"}class nr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Me(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Me(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Me(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Me(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return nr.fromMillis(Date.now())}static fromDate(t){return nr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new nr(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?rn(this.nanoseconds,t.nanoseconds):rn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Rt(t)}static min(){return new Rt(new nr(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function JR(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function at(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function AS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class $m{constructor(t,e,i){void 0===e?e=0:e>t.length&&ot(),void 0===i?i=t.length-e:i>t.length-e&&ot(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===$m.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof $m?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const l=t.get(r),u=e.get(r);if(l<u)return-1;if(l>u)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class yn extends $m{construct(t,e,i){return new yn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Me(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new yn(e)}static emptyPath(){return new yn([])}}const hb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends $m{construct(t,e,i){return new Lr(t,e,i)}static isValidIdentifier(t){return hb.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Lr(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const l=()=>{if(0===i.length)throw new Me(me.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let u=!1;for(;r<t.length;){const f=t[r];if("\\"===f){if(r+1===t.length)throw new Me(me.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[r+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Me(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,r+=2}else"`"===f?(u=!u,r++):"."!==f||u?(i+=f,r++):(l(),r++)}if(l(),u)throw new Me(me.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Lr(e)}static emptyPath(){return new Lr([])}}class Ec{constructor(t){this.fields=t,t.sort(Lr.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Vu(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Bt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Bt(e)}static fromUint8Array(t){const e=function(i){let r="";for(let l=0;l<i.length;++l)r+=String.fromCharCode(i[l]);return r}(t);return new Bt(e)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const BL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dc(n){if(yt(!!n),"string"==typeof n){let t=0;const e=BL.exec(n);if(yt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:bi(n.seconds),nanos:bi(n.nanos)}}function bi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ep(n){return"string"==typeof n?Bt.fromBase64String(n):Bt.fromUint8Array(n)}function pb(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function GC(n){const t=n.mapValue.fields.__previous_value__;return pb(t)?GC(t):t}function Dp(n){const t=Dc(n.mapValue.fields.__local_write_time__.timestampValue);return new nr(t.seconds,t.nanos)}function Bu(n){return null==n}function gb(n){return 0===n&&1/n==-1/0}function NS(n){return"number"==typeof n&&Number.isInteger(n)&&!gb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class it{constructor(t){this.path=t}static fromPath(t){return new it(yn.fromString(t))}static fromName(t){return new it(yn.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===yn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return yn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new it(new yn(t.slice()))}}function Aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pb(n)?4:10:ot()}function wl(n,t){const e=Aa(n);if(e!==Aa(t))return!1;switch(e){case 0:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Dp(n).isEqual(Dp(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const l=Dc(i.timestampValue),u=Dc(r.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Ep(n.bytesValue).isEqual(Ep(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return bi(i.geoPointValue.latitude)===bi(r.geoPointValue.latitude)&&bi(i.geoPointValue.longitude)===bi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return bi(i.integerValue)===bi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const l=bi(i.doubleValue),u=bi(r.doubleValue);return l===u?gb(l)===gb(u):isNaN(l)&&isNaN(u)}return!1}(n,t);case 9:return Vu(n.arrayValue.values||[],t.arrayValue.values||[],wl);case 10:return function(i,r){const l=i.mapValue.fields||{},u=r.mapValue.fields||{};if(JR(l)!==JR(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===u[f]||!wl(l[f],u[f])))return!1;return!0}(n,t);default:return ot()}var r}function Gm(n,t){return void 0!==(n.values||[]).find(e=>wl(e,t))}function Tp(n,t){const e=Aa(n),i=Aa(t);if(e!==i)return rn(e,i);switch(e){case 0:return 0;case 1:return rn(n.booleanValue,t.booleanValue);case 2:return function(r,l){const u=bi(r.integerValue||r.doubleValue),f=bi(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,t);case 3:return zm(n.timestampValue,t.timestampValue);case 4:return zm(Dp(n),Dp(t));case 5:return rn(n.stringValue,t.stringValue);case 6:return function(r,l){const u=Ep(r),f=Ep(l);return u.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(r,l){const u=r.split("/"),f=l.split("/");for(let m=0;m<u.length&&m<f.length;m++){const w=rn(u[m],f[m]);if(0!==w)return w}return rn(u.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,l){const u=rn(bi(r.latitude),bi(l.latitude));return 0!==u?u:rn(bi(r.longitude),bi(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,l){const u=r.values||[],f=l.values||[];for(let m=0;m<u.length&&m<f.length;++m){const w=Tp(u[m],f[m]);if(w)return w}return rn(u.length,f.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,l){const u=r.fields||{},f=Object.keys(u),m=l.fields||{},w=Object.keys(m);f.sort(),w.sort();for(let D=0;D<f.length&&D<w.length;++D){const T=rn(f[D],w[D]);if(0!==T)return T;const k=Tp(u[f[D]],m[w[D]]);if(0!==k)return k}return rn(f.length,w.length)}(n.mapValue,t.mapValue);default:throw ot()}}function zm(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return rn(n,t);const e=Dc(n),i=Dc(t),r=rn(e.seconds,i.seconds);return 0!==r?r:rn(e.nanos,i.nanos)}function mb(n){return _b(n)}function _b(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Dc(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ep(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",l=!0;for(const u of i.values||[])l?l=!1:r+=",",r+=_b(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${_b(i.fields[f])}`;return l+"}"}(n.mapValue):ot();var t}function qm(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function zC(n){return!!n&&"integerValue"in n}function Ch(n){return!!n&&"arrayValue"in n}function Sp(n){return!!n&&"nullValue"in n}function MS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yb(n){return!!n&&"mapValue"in n}function Wm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return at(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Wm(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Wm(n.arrayValue.values[e]);return t}return Object.assign({},n)}class Vr{constructor(t){this.value=t}static empty(){return new Vr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!yb(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Wm(e)}setAll(t){let e=Lr.emptyPath(),i={},r=[];t.forEach((u,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,r),i={},r=[],e=f.popLast()}u?i[f.lastSegment()]=Wm(u):r.push(f.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,i,r)}delete(t){const e=this.field(t.popLast());yb(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return wl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];yb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){at(e,(r,l)=>t[r]=l);for(const r of i)delete t[r]}clone(){return new Vr(Wm(this.value))}}function qC(n){const t=[];return at(n.fields,(e,i)=>{const r=new Lr([e]);if(yb(i)){const l=qC(i.mapValue).fields;if(0===l.length)t.push(r);else for(const u of l)t.push(r.child(u))}else t.push(r)}),new Ec(t)}class zn{constructor(t,e,i,r,l){this.key=t,this.documentType=e,this.version=i,this.data=r,this.documentState=l}static newInvalidDocument(t){return new zn(t,0,Rt.min(),Vr.empty(),0)}static newFoundDocument(t,e,i){return new zn(t,1,e,i,0)}static newNoDocument(t,e){return new zn(t,2,e,Vr.empty(),0)}static newUnknownDocument(t,e){return new zn(t,3,e,Vr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof zn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new zn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class XR{constructor(t,e=null,i=[],r=[],l=null,u=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=u,this.endAt=f,this.A=null}}function WC(n,t=null,e=[],i=[],r=null,l=null,u=null){return new XR(n,t,e,i,r,l,u)}function Zm(n){const t=Be(n);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>function(n){return n.field.canonicalString()+n.op.toString()+mb(n.value)}(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Bu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=bb(t.startAt)),t.endAt&&(e+="|ub:",e+=bb(t.endAt)),t.A=e}return t.A}function ZC(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!OS(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!wl(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!FS(n.startAt,t.startAt)&&FS(n.endAt,t.endAt)}function YC(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Gs extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.R(t,e,i):new RS(t,e,i):"array-contains"===e?new xS(t,i):"in"===e?new Ym(t,i):"not-in"===e?new nk(t,i):"array-contains-any"===e?new ik(t,i):new Gs(t,e,i)}static R(t,e,i){return"in"===e?new vb(t,i):new tk(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.P(Tp(e,this.value)):null!==e&&Aa(this.value)===Aa(e)&&this.P(Tp(e,this.value))}P(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ot()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class RS extends Gs{constructor(t,e,i){super(t,e,i),this.key=it.fromName(i.referenceValue)}matches(t){const e=it.comparator(t.key,this.key);return this.P(e)}}class vb extends Gs{constructor(t,e){super(t,"in",e),this.keys=kS(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class tk extends Gs{constructor(t,e){super(t,"not-in",e),this.keys=kS(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function kS(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>it.fromName(i.referenceValue))}class xS extends Gs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ch(e)&&Gm(e.arrayValue,this.value)}}class Ym extends Gs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Gm(this.value.arrayValue,e)}}class nk extends Gs{constructor(t,e){super(t,"not-in",e)}matches(t){if(Gm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Gm(this.value.arrayValue,e)}}class ik extends Gs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ch(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Gm(this.value.arrayValue,i))}}class Km{constructor(t,e){this.position=t,this.before=e}}function bb(n){return`${n.before?"b":"a"}:${n.position.map(t=>mb(t)).join(",")}`}class Ip{constructor(t,e="asc"){this.field=t,this.dir=e}}function OS(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function PS(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const l=t[r],u=n.position[r];if(i=l.field.isKeyField()?it.comparator(it.fromName(u.referenceValue),e.key):Tp(u,e.data.field(l.field)),"desc"===l.dir&&(i*=-1),0!==i)break}return n.before?i<=0:i<0}function FS(n,t){if(null===n)return null===t;if(null===t||n.before!==t.before||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!wl(n.position[e],t.position[e]))return!1;return!0}class zs{constructor(t,e=null,i=[],r=[],l=null,u="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.V=null,this.S=null}}function LS(n,t,e,i,r,l,u,f){return new zs(n,t,e,i,r,l,u,f)}function Eh(n){return new zs(n)}function wb(n){return!Bu(n.limit)&&"F"===n.limitType}function Qm(n){return!Bu(n.limit)&&"L"===n.limitType}function KC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Cb(n){for(const t of n.filters)if(t.v())return t.field;return null}function QC(n){return null!==n.collectionGroup}function Uu(n){const t=Be(n);if(null===t.V){t.V=[];const e=Cb(t),i=KC(t);if(null!==e&&null===i)e.isKeyField()||t.V.push(new Ip(e)),t.V.push(new Ip(Lr.keyField(),"asc"));else{let r=!1;for(const l of t.explicitOrderBy)t.V.push(l),l.field.isKeyField()&&(r=!0);if(!r){const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Ip(Lr.keyField(),l))}}}return t.V}function jo(n){const t=Be(n);if(!t.S)if("F"===t.limitType)t.S=WC(t.path,t.collectionGroup,Uu(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const l of Uu(t))e.push(new Ip(l.field,"desc"===l.dir?"asc":"desc"));const i=t.endAt?new Km(t.endAt.position,!t.endAt.before):null,r=t.startAt?new Km(t.startAt.position,!t.startAt.before):null;t.S=WC(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.S}function JC(n,t,e){return new zs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Ap(n,t){return ZC(jo(n),jo(t))&&n.limitType===t.limitType}function VS(n){return`${Zm(jo(n))}|lt:${n.limitType}`}function XC(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${mb(i.value)}`;var i}).join(", ")}]`),Bu(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: "+bb(n.startAt)),n.endAt&&(t+=", endAt: "+bb(n.endAt)),`Target(${t})`}(jo(n))}; limitType=${n.limitType})`}function Jm(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):it.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!PS(e.startAt,Uu(e),i)||e.endAt&&PS(e.endAt,Uu(e),i)));var e,i}function Eb(n){return(t,e)=>{let i=!1;for(const r of Uu(n)){const l=rk(r,t,e);if(0!==l)return l;i=i||r.field.isKeyField()}return 0}}function rk(n,t,e){const i=n.field.isKeyField()?it.comparator(t.key,e.key):function(r,l,u){const f=l.data.field(r),m=u.data.field(r);return null!==f&&null!==m?Tp(f,m):ot()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ot()}}function eE(n,t){if(n.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gb(t)?"-0":t}}function BS(n){return{integerValue:""+n}}function US(n,t){return NS(t)?BS(t):eE(n,t)}class Db{constructor(){this._=void 0}}function sk(n,t,e){return n instanceof Np?function(i,r){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(l.fields.__previous_value__=r),{mapValue:l}}(e,t):n instanceof Dh?tE(n,t):n instanceof Hu?nE(n,t):function(i,r){const l=HS(i,r),u=Tb(l)+Tb(i.C);return zC(l)&&zC(i.C)?BS(u):eE(i.N,u)}(n,t)}function ok(n,t,e){return n instanceof Dh?tE(n,t):n instanceof Hu?nE(n,t):e}function HS(n,t){return n instanceof Mp?zC(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Np extends Db{}class Dh extends Db{constructor(t){super(),this.elements=t}}function tE(n,t){const e=iE(t);for(const i of n.elements)e.some(r=>wl(r,i))||e.push(i);return{arrayValue:{values:e}}}class Hu extends Db{constructor(t){super(),this.elements=t}}function nE(n,t){let e=iE(t);for(const i of n.elements)e=e.filter(r=>!wl(r,i));return{arrayValue:{values:e}}}class Mp extends Db{constructor(t,e){super(),this.N=t,this.C=e}}function Tb(n){return bi(n.integerValue||n.doubleValue)}function iE(n){return Ch(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xm{constructor(t,e){this.field=t,this.transform=e}}class rE{constructor(t,e){this.version=t,this.transformResults=e}}class wi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new wi}static exists(t){return new wi(void 0,t)}static updateTime(t){return new wi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function e_(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class Rp{}function lk(n,t,e){n instanceof t_?function(i,r,l){const u=i.value.clone(),f=cE(i.fieldTransforms,r,l.transformResults);u.setAll(f),r.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,t,e):n instanceof Tc?function(i,r,l){if(!e_(i.precondition,r))return void r.convertToUnknownDocument(l.version);const u=cE(i.fieldTransforms,r,l.transformResults),f=r.data;f.setAll(lE(i)),f.setAll(u),r.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function sE(n,t,e){var r;n instanceof t_?function(i,r,l){if(!e_(i.precondition,r))return;const u=i.value.clone(),f=ck(i.fieldTransforms,l,r);u.setAll(f),r.convertToFoundDocument(aE(r),u).setHasLocalMutations()}(n,t,e):n instanceof Tc?function(i,r,l){if(!e_(i.precondition,r))return;const u=ck(i.fieldTransforms,l,r),f=r.data;f.setAll(lE(i)),f.setAll(u),r.convertToFoundDocument(aE(r),f).setHasLocalMutations()}(n,t,e):e_(n.precondition,r=t)&&r.convertToNoDocument(Rt.min())}function oE(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),l=HS(i.transform,r||null);null!=l&&(null==e&&(e=Vr.empty()),e.set(i.field,l))}return e||null}function jS(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Vu(e,i,(r,l)=>function(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Dh&&i instanceof Dh||e instanceof Hu&&i instanceof Hu?Vu(e.elements,i.elements,wl):e instanceof Mp&&i instanceof Mp?wl(e.C,i.C):e instanceof Np&&i instanceof Np);var e,i}(r,l))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}function aE(n){return n.isFoundDocument()?n.version:Rt.min()}class t_ extends Rp{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}}class Tc extends Rp{constructor(t,e,i,r,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}}function lE(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function cE(n,t,e){const i=new Map;yt(n.length===e.length);for(let r=0;r<e.length;r++){const l=n[r],u=l.transform,f=t.data.field(l.field);i.set(l.field,ok(u,f,e[r]))}return i}function ck(n,t,e){const i=new Map;for(const r of n){const l=r.transform,u=e.data.field(r.field);i.set(r.field,sk(l,u,t))}return i}class n_ extends Rp{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class ju extends Rp{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class HL{constructor(t){this.count=t}}var Ci,Wt;function $S(n){switch(n){default:return ot();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function Th(n){if(void 0===n)return Hi("GRPC error has no .code"),me.UNKNOWN;switch(n){case Ci.OK:return me.OK;case Ci.CANCELLED:return me.CANCELLED;case Ci.UNKNOWN:return me.UNKNOWN;case Ci.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Ci.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Ci.INTERNAL:return me.INTERNAL;case Ci.UNAVAILABLE:return me.UNAVAILABLE;case Ci.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Ci.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Ci.NOT_FOUND:return me.NOT_FOUND;case Ci.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Ci.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Ci.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Ci.ABORTED:return me.ABORTED;case Ci.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Ci.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Ci.DATA_LOSS:return me.DATA_LOSS;default:return ot()}}(Wt=Ci||(Ci={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class ir{constructor(t,e){this.comparator=t,this.root=e||Br.EMPTY}insert(t,e){return new ir(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(t){return new ir(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Br.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new uE(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new uE(this.root,t,this.comparator,!1)}getReverseIterator(){return new uE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new uE(this.root,t,this.comparator,!0)}}class uE{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,r&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Br{constructor(t,e,i,r,l){this.key=t,this.value=e,this.color=null!=i?i:Br.RED,this.left=null!=r?r:Br.EMPTY,this.right=null!=l?l:Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,l){return new Br(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const l=i(t,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===l?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Br.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const t=this.left.check();if(t!==this.right.check())throw ot();return t+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Br(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(t){this.comparator=t,this.data=new ir(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new dE(this.data.getIterator())}getIteratorFrom(t){return new dE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof vn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=i.getNext().key;if(0!==this.comparator(r,l))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new vn(this.comparator);return e.data=t,e}}class dE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const jL=new ir(it.comparator);function Es(){return jL}const uk=new ir(it.comparator);function hE(){return uk}const $L=new ir(it.comparator);function GS(){return $L}const dk=new vn(it.comparator);function Tn(...n){let t=dk;for(const e of n)t=t.add(e);return t}const fE=new vn(rn);function i_(){return fE}class Sh{constructor(t,e,i,r,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,kp.createSynthesizedTargetChangeForCurrentChange(t,e)),new Sh(Rt.min(),i,i_(),Es(),Tn())}}class kp{constructor(t,e,i,r,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e){return new kp(Bt.EMPTY_BYTE_STRING,e,Tn(),Tn(),Tn())}}class Sb{constructor(t,e,i,r){this.k=t,this.removedTargetIds=e,this.key=i,this.$=r}}class hk{constructor(t,e){this.targetId=t,this.O=e}}class zS{constructor(t,e,i=Bt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class qS{constructor(){this.F=0,this.M=gE(),this.L=Bt.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(t){t.approximateByteSize()>0&&(this.U=!0,this.L=t)}W(){let t=Tn(),e=Tn(),i=Tn();return this.M.forEach((r,l)=>{switch(l){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:ot()}}),new kp(this.L,this.B,t,e,i)}G(){this.U=!1,this.M=gE()}H(t,e){this.U=!0,this.M=this.M.insert(t,e)}J(t){this.U=!0,this.M=this.M.remove(t)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class fk{constructor(t){this.tt=t,this.et=new Map,this.nt=Es(),this.st=pE(),this.it=new vn(rn)}rt(t){for(const e of t.k)t.$&&t.$.isFoundDocument()?this.ot(e,t.$):this.ct(e,t.key,t.$);for(const e of t.removedTargetIds)this.ct(e,t.key,t.$)}at(t){this.forEachTarget(t,e=>{const i=this.ut(e);switch(t.state){case 0:this.ht(e)&&i.j(t.resumeToken);break;case 1:i.X(),i.q||i.G(),i.j(t.resumeToken);break;case 2:i.X(),i.q||this.removeTarget(e);break;case 3:this.ht(e)&&(i.Z(),i.j(t.resumeToken));break;case 4:this.ht(e)&&(this.lt(e),i.j(t.resumeToken));break;default:ot()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.et.forEach((i,r)=>{this.ht(r)&&e(r)})}ft(t){const e=t.targetId,i=t.O.count,r=this.dt(e);if(r){const l=r.target;if(YC(l))if(0===i){const u=new it(l.path);this.ct(e,u,zn.newNoDocument(u,Rt.min()))}else yt(1===i);else this.wt(e)!==i&&(this.lt(e),this.it=this.it.add(e))}}_t(t){const e=new Map;this.et.forEach((l,u)=>{const f=this.dt(u);if(f){if(l.current&&YC(f.target)){const m=new it(f.target.path);null!==this.nt.get(m)||this.gt(u,m)||this.ct(u,m,zn.newNoDocument(m,t))}l.K&&(e.set(u,l.W()),l.G())}});let i=Tn();this.st.forEach((l,u)=>{let f=!0;u.forEachWhile(m=>{const w=this.dt(m);return!w||2===w.purpose||(f=!1,!1)}),f&&(i=i.add(l))});const r=new Sh(t,e,this.it,this.nt,i);return this.nt=Es(),this.st=pE(),this.it=new vn(rn),r}ot(t,e){if(!this.ht(t))return;const i=this.gt(t,e.key)?2:0;this.ut(t).H(e.key,i),this.nt=this.nt.insert(e.key,e),this.st=this.st.insert(e.key,this.yt(e.key).add(t))}ct(t,e,i){if(!this.ht(t))return;const r=this.ut(t);this.gt(t,e)?r.H(e,1):r.J(e),this.st=this.st.insert(e,this.yt(e).delete(t)),i&&(this.nt=this.nt.insert(e,i))}removeTarget(t){this.et.delete(t)}wt(t){const e=this.ut(t).W();return this.tt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Y(t){this.ut(t).Y()}ut(t){let e=this.et.get(t);return e||(e=new qS,this.et.set(t,e)),e}yt(t){let e=this.st.get(t);return e||(e=new vn(rn),this.st=this.st.insert(t,e)),e}ht(t){const e=null!==this.dt(t);return e||Oe("WatchChangeAggregator","Detected inactive target",t),e}dt(t){const e=this.et.get(t);return e&&e.q?null:this.tt.Tt(t)}lt(t){this.et.set(t,new qS),this.tt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}gt(t,e){return this.tt.getRemoteKeysForTarget(t).has(e)}}function pE(){return new ir(it.comparator)}function gE(){return new ir(it.comparator)}const WS={asc:"ASCENDING",desc:"DESCENDING"},pk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class gk{constructor(t,e){this.databaseId=t,this.D=e}}function xp(n,t){return n.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function r_(n,t){return n.D?t.toBase64():t.toUint8Array()}function mk(n,t){return xp(n,t.toTimestamp())}function rr(n){return yt(!!n),Rt.fromTimestamp(function(t){const e=Dc(t);return new nr(e.seconds,e.nanos)}(n))}function Op(n,t){return(e=n,new yn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function s_(n){const t=yn.fromString(n);return yt(nI(t)),t}function Sc(n,t){return Op(n.databaseId,t.path)}function Cl(n,t){const e=s_(t);if(e.get(1)!==n.databaseId.projectId)throw new Me(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Me(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new it(ZS(e))}function mE(n,t){return Op(n.databaseId,t)}function _k(n){const t=s_(n);return 4===t.length?yn.emptyPath():ZS(t)}function o_(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZS(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function YS(n,t,e){return{name:Sc(n,t),fields:e.value.mapValue.fields}}function KS(n,t,e){const i=Cl(n,t.name),r=rr(t.updateTime),l=new Vr({mapValue:{fields:t.fields}}),u=zn.newFoundDocument(i,r,l);return e&&u.setHasCommittedMutations(),e?u.setHasCommittedMutations():u}function Ib(n,t){let e;if(t instanceof t_)e={update:YS(n,t.key,t.value)};else if(t instanceof n_)e={delete:Sc(n,t.key)};else if(t instanceof Tc)e={update:YS(n,t.key,t.data),updateMask:Dk(t.fieldMask)};else{if(!(t instanceof ju))return ot();e={verify:Sc(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,l){const u=l.transform;if(u instanceof Np)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Dh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Hu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Mp)return{fieldPath:l.field.canonicalString(),increment:u.C};throw ot()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:mk(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ot()),e;var r}function QS(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?wi.updateTime(rr(r.updateTime)):void 0!==r.exists?wi.exists(r.exists):wi.none():wi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(l,u){let f=null;"setToServerValue"in u?(yt("REQUEST_TIME"===u.setToServerValue),f=new Np):"appendMissingElements"in u?f=new Dh(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Hu(u.removeAllFromArray.values||[]):"increment"in u?f=new Mp(l,u.increment):ot();const m=Lr.fromServerFormat(u.fieldPath);return new Xm(m,f)}(n,r)):[];var r;if(t.update){const r=Cl(n,t.update.name),l=new Vr({mapValue:{fields:t.update.fields}});if(t.updateMask){const u=new Ec((t.updateMask.fieldPaths||[]).map(w=>Lr.fromServerFormat(w)));return new Tc(r,l,u,e,i)}return new t_(r,l,e,i)}if(t.delete){const r=Cl(n,t.delete);return new n_(r,e)}if(t.verify){const r=Cl(n,t.verify);return new ju(r,e)}return ot()}function wk(n,t){return{documents:[mE(n,t.path)]}}function JS(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=mE(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=mE(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0===f.length)return;const m=f.map(w=>function(D){if("=="===D.op){if(MS(D.value))return{unaryFilter:{field:Fp(D.field),op:"IS_NAN"}};if(Sp(D.value))return{unaryFilter:{field:Fp(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(MS(D.value))return{unaryFilter:{field:Fp(D.field),op:"IS_NOT_NAN"}};if(Sp(D.value))return{unaryFilter:{field:Fp(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fp(D.field),op:tI(D.op),value:D.value}}}(w));return 1===m.length?m[0]:{compositeFilter:{op:"AND",filters:m}}}(t.filters);r&&(e.structuredQuery.where=r);const l=function(f){if(0!==f.length)return f.map(m=>{return{field:Fp((w=m).field),direction:Ih(w.dir)};var w})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const u=(m=t.limit,n.D||Bu(m)?m:{value:m});var m;return null!==u&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=eI(t.startAt)),t.endAt&&(e.structuredQuery.endAt=eI(t.endAt)),e}function Pp(n){let t=_k(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){yt(1===i);const D=e.from[0];D.allDescendants?r=D.collectionId:t=t.child(D.collectionId)}let l=[];e.where&&(l=XS(e.where));let u=[];e.orderBy&&(u=e.orderBy.map(D=>{return new Ip(l_((T=D).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;e.limit&&(f=function(D){let T;return T="object"==typeof D?D.value:D,Bu(T)?null:T}(e.limit));let m=null;e.startAt&&(m=a_(e.startAt));let w=null;return e.endAt&&(w=a_(e.endAt)),LS(t,r,u,l,f,"F",m,w)}function XS(n){return n?void 0!==n.unaryFilter?[Ab(n)]:void 0!==n.fieldFilter?[Ek(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>XS(t)).reduce((t,e)=>t.concat(e)):ot():[]}function eI(n){return{before:n.before,values:n.position}}function a_(n){return new Km(n.values||[],!!n.before)}function Ih(n){return WS[n]}function tI(n){return pk[n]}function Fp(n){return{fieldPath:n.canonicalString()}}function l_(n){return Lr.fromServerFormat(n.fieldPath)}function Ek(n){return Gs.create(l_(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(n.fieldFilter.op),n.fieldFilter.value)}function Ab(n){switch(n.unaryFilter.op){case"IS_NAN":const t=l_(n.unaryFilter.field);return Gs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=l_(n.unaryFilter.field);return Gs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=l_(n.unaryFilter.field);return Gs.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=l_(n.unaryFilter.field);return Gs.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}function Dk(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function nI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function $o(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Nb(t)),t=iI(n.get(e),t);return Nb(t)}function iI(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function Nb(n){return n+"\x01\x01"}function El(n){const t=n.length;if(yt(t>=2),2===t)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const e=t-2,i=[];let r="";for(let l=0;l<t;){const u=n.indexOf("\x01",l);switch((u<0||u>e)&&ot(),n.charAt(u+1)){case"\x01":const f=n.substring(l,u);let m;0===r.length?m=f:(r+=f,m=r,r=""),i.push(m);break;case"\x10":r+=n.substring(l,u),r+="\0";break;case"\x11":r+=n.substring(l,u+1);break;default:ot()}l=u+2}return new yn(i)}class rI{constructor(t,e){this.seconds=t,this.nanoseconds=e}}class fo{constructor(t,e,i){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=i}}fo.store="owner",fo.key="owner";class $u{constructor(t,e,i){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=i}}$u.store="mutationQueues",$u.keyPath="userId";class Vn{constructor(t,e,i,r,l){this.userId=t,this.batchId=e,this.localWriteTimeMs=i,this.baseMutations=r,this.mutations=l}}Vn.store="mutations",Vn.keyPath="batchId",Vn.userMutationsIndex="userMutationsIndex",Vn.userMutationsKeyPath=["userId","batchId"];class es{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,$o(e)]}static key(t,e,i){return[t,$o(e),i]}}es.store="documentMutations",es.PLACEHOLDER=new es;class sI{constructor(t,e){this.path=t,this.readTime=e}}class Mb{constructor(t,e){this.path=t,this.version=e}}class qn{constructor(t,e,i,r,l,u){this.unknownDocument=t,this.noDocument=e,this.document=i,this.hasCommittedMutations=r,this.readTime=l,this.parentPath=u}}qn.store="remoteDocuments",qn.readTimeIndex="readTimeIndex",qn.readTimeIndexPath="readTime",qn.collectionReadTimeIndex="collectionReadTimeIndex",qn.collectionReadTimeIndexPath=["parentPath","readTime"];class Ic{constructor(t){this.byteSize=t}}Ic.store="remoteDocumentGlobal",Ic.key="remoteDocumentGlobalKey";class yr{constructor(t,e,i,r,l,u,f){this.targetId=t,this.canonicalId=e,this.readTime=i,this.resumeToken=r,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=u,this.query=f}}yr.store="targets",yr.keyPath="targetId",yr.queryTargetsIndexName="queryTargetsIndex",yr.queryTargetsKeyPath=["canonicalId","targetId"];class Et{constructor(t,e,i){this.targetId=t,this.path=e,this.sequenceNumber=i}}Et.store="targetDocuments",Et.keyPath=["targetId","path"],Et.documentTargetsIndex="documentTargetsIndex",Et.documentTargetsKeyPath=["path","targetId"];class ji{constructor(t,e,i,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=i,this.targetCount=r}}ji.key="targetGlobalKey",ji.store="targetGlobal";class Go{constructor(t,e){this.collectionId=t,this.parent=e}}Go.store="collectionParents",Go.keyPath=["collectionId","parent"];class po{constructor(t,e,i,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=i,this.inForeground=r}}po.store="clientMetadata",po.keyPath="clientId";class c_{constructor(t,e,i){this.bundleId=t,this.createTime=e,this.version=i}}c_.store="bundles",c_.keyPath="bundleId";class _t{constructor(t,e,i){this.name=t,this.readTime=e,this.bundledQuery=i}}_t.store="namedQueries",_t.keyPath="name";const zo=[$u.store,Vn.store,es.store,qn.store,yr.store,fo.store,ji.store,Et.store,po.store,Ic.store,Go.store,c_.store,_t.store],Rb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class Ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ne((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Ne?e:Ne.resolve(e)}catch(e){return Ne.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Ne.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Ne.reject(e)}static resolve(t){return new Ne((e,i)=>{e(t)})}static reject(t){return new Ne((e,i)=>{i(t)})}static waitFor(t){return new Ne((e,i)=>{let r=0,l=0,u=!1;t.forEach(f=>{++r,f.next(()=>{++l,u&&l===r&&e()},m=>i(m))}),u=!0,l===r&&e()})}static or(t){let e=Ne.resolve(!1);for(const i of t)e=e.next(r=>r?Ne.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,l)=>{i.push(e.call(this,r,l))}),this.waitFor(i)}}class u_{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.Et=new tr,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{e.error?this.Et.reject(new d_(t,e.error)):this.Et.resolve()},this.transaction.onerror=i=>{const r=kb(i.target.error);this.Et.reject(new d_(t,r))}}static open(t,e,i,r){try{return new u_(e,t.transaction(r,i))}catch(l){throw new d_(e,l)}}get It(){return this.Et.promise}abort(t){t&&this.Et.reject(t),this.aborted||(Oe("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(t){const e=this.transaction.objectStore(t);return new Wo(e)}}class qo{constructor(t,e,i){this.name=t,this.version=e,this.At=i,12.2===qo.Rt((0,B.z$)())&&Hi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Oe("SimpleDb","Removing database:",t),Sn(window.indexedDB.deleteDatabase(t)).toPromise()}static bt(){if(!(0,B.hl)())return!1;if(qo.Pt())return!0;const t=(0,B.z$)(),e=qo.Rt(t),i=0<e&&e<10,r=qo.vt(t),l=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||l)}static Pt(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Vt)}static St(t,e){return t.store(e)}static Rt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static vt(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Dt(t){var e=this;return(0,ye.Z)(function*(){return e.db||(Oe("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const l=indexedDB.open(e.name,e.version);l.onsuccess=u=>{i(u.target.result)},l.onblocked=()=>{r(new d_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const f=u.target.error;r("VersionError"===f.name?new Me(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Me(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new d_(t,f))},l.onupgradeneeded=u=>{Oe("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',u.oldVersion),e.At.Ct(u.target.result,l.transaction,u.oldVersion,e.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Nt&&(e.db.onversionchange=i=>e.Nt(i)),e.db})()}xt(t){this.Nt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var l=this;return(0,ye.Z)(function*(){const u="readonly"===e;let f=0;for(;;){++f;try{l.db=yield l.Dt(t);const m=u_.open(l.db,t,u?"readonly":"readwrite",i),w=r(m).catch(D=>(m.abort(D),Ne.reject(D))).toPromise();return w.catch(()=>{}),yield m.It,w}catch(m){const w="FirebaseError"!==m.name&&f<3;if(Oe("SimpleDb","Transaction failed with error:",m.message,"Retrying:",w),l.close(),!w)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class GL{constructor(t){this.kt=t,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(t){this.kt=t}done(){this.$t=!0}Mt(t){this.Ot=t}delete(){return Sn(this.kt.delete())}}class d_ extends Me{constructor(t,e){super(me.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ah(n){return"IndexedDbTransactionError"===n.name}class Wo{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Oe("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Sn(i)}add(t){return Oe("SimpleDb","ADD",this.store.name,t,t),Sn(this.store.add(t))}get(t){return Sn(this.store.get(t)).next(e=>(void 0===e&&(e=null),Oe("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Oe("SimpleDb","DELETE",this.store.name,t),Sn(this.store.delete(t))}count(){return Oe("SimpleDb","COUNT",this.store.name),Sn(this.store.count())}Lt(t,e){const i=this.cursor(this.options(t,e)),r=[];return this.Bt(i,(l,u)=>{r.push(u)}).next(()=>r)}Ut(t,e){Oe("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.qt=!1;const r=this.cursor(i);return this.Bt(r,(l,u,f)=>f.delete())}Kt(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.Bt(r,e)}jt(t){const e=this.cursor({});return new Ne((i,r)=>{e.onerror=l=>{const u=kb(l.target.error);r(u)},e.onsuccess=l=>{const u=l.target.result;u?t(u.primaryKey,u.value).next(f=>{f?u.continue():i()}):i()}})}Bt(t,e){const i=[];return new Ne((r,l)=>{t.onerror=u=>{l(u.target.error)},t.onsuccess=u=>{const f=u.target.result;if(!f)return void r();const m=new GL(f),w=e(f.primaryKey,f.value,m);if(w instanceof Ne){const D=w.catch(T=>(m.done(),Ne.reject(T)));i.push(D)}m.isDone?r():null===m.Ft?f.continue():f.continue(m.Ft)}}).next(()=>Ne.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.qt?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Sn(n){return new Ne((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=kb(i.target.error);e(r)}})}let Zo=!1;function kb(n){const t=qo.Rt((0,B.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zo||(Zo=!0,setTimeout(()=>{throw i},0)),i}}return n}class oI extends Gu{constructor(t,e){super(),this.Qt=t,this.currentSequenceNumber=e}}function Ds(n,t){const e=Be(n);return qo.St(e.Qt,t)}class h_{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(t.key)&&lk(l,t,i[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&sE(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&sE(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const i=t.get(e.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(Rt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Tn())}isEqual(t){return this.batchId===t.batchId&&Vu(this.mutations,t.mutations,(e,i)=>jS(e,i))&&Vu(this.baseMutations,t.baseMutations,(e,i)=>jS(e,i))}}class zu{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){yt(t.mutations.length===i.length);let r=GS();const l=t.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,i[u].version);return new zu(t,e,i,r)}}class Yo{constructor(t,e,i,r,l=Rt.min(),u=Rt.min(),f=Bt.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(t){return new Yo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class aI{constructor(t){this.Wt=t}}function Ac(n,t){if(t.document)return KS(n.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=it.fromSegments(t.noDocument.path),i=qu(t.noDocument.readTime),r=zn.newNoDocument(e,i);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=it.fromSegments(t.unknownDocument.path),i=qu(t.unknownDocument.version);return zn.newUnknownDocument(e,i)}return ot()}function lI(n,t,e){const i=xb(e),r=t.key.path.popLast().toArray();if(t.isFoundDocument()){const l={name:Sc(f=n.Wt,(m=t).key),fields:m.data.value.mapValue.fields,updateTime:xp(f,m.version.toTimestamp())};return new qn(null,null,l,t.hasCommittedMutations,i,r)}var f,m;if(t.isNoDocument()){const l=t.key.path.toArray(),u=Dl(t.version),f=t.hasCommittedMutations;return new qn(null,new sI(l,u),null,f,i,r)}if(t.isUnknownDocument()){const l=t.key.path.toArray(),u=Dl(t.version);return new qn(new Mb(l,u),null,null,!0,i,r)}return ot()}function xb(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Ob(n){const t=new nr(n[0],n[1]);return Rt.fromTimestamp(t)}function Dl(n){const t=n.toTimestamp();return new rI(t.seconds,t.nanoseconds)}function qu(n){const t=new nr(n.seconds,n.nanoseconds);return Rt.fromTimestamp(t)}function Nh(n,t){const e=(t.baseMutations||[]).map(l=>QS(n.Wt,l));for(let l=0;l<t.mutations.length-1;++l){const u=t.mutations[l];l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(u.updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l)}const i=t.mutations.map(l=>QS(n.Wt,l)),r=nr.fromMillis(t.localWriteTimeMs);return new h_(t.batchId,r,e,i)}function Tl(n){const t=qu(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?qu(n.lastLimboFreeSnapshotVersion):Rt.min();let i;var r;return void 0!==n.query.documents?(yt(1===(r=n.query).documents.length),i=jo(Eh(_k(r.documents[0])))):i=jo(Pp(n.query)),new Yo(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Bt.fromBase64String(n.resumeToken))}function cI(n,t){const e=Dl(t.snapshotVersion),i=Dl(t.lastLimboFreeSnapshotVersion);let r;r=YC(t.target)?wk(n.Wt,t.target):JS(n.Wt,t.target);const l=t.resumeToken.toBase64();return new yr(t.targetId,Zm(t.target),e,l,t.sequenceNumber,i,r)}function Lp(n){const t=Pp({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?JC(t,t.limit,"L"):t}class uI{getBundleMetadata(t,e){return _E(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:qu(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return _E(t).put({bundleId:(i=e).id,createTime:Dl(rr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return yE(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:Lp(r.bundledQuery),readTime:qu(r.readTime)};var r})}saveNamedQuery(t,e){return yE(t).put({name:(i=e).name,readTime:Dl(rr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function _E(n){return Ds(n,c_.store)}function yE(n){return Ds(n,_t.store)}class Pb{constructor(){this.Gt=new vE}addToCollectionParentIndex(t,e){return this.Gt.add(e),Ne.resolve()}getCollectionParents(t,e){return Ne.resolve(this.Gt.getEntries(e))}}class vE{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new vn(yn.comparator),l=!r.has(i);return this.index[e]=r.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new vn(yn.comparator)).toArray()}}class bE{constructor(){this.zt=new vE}addToCollectionParentIndex(t,e){if(!this.zt.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.zt.add(e)});const l={collectionId:i,parent:$o(r)};return Fb(t).put(l)}return Ne.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[QR(e),""],!1,!0);return Fb(t).Lt(r).next(l=>{for(const u of l){if(u.collectionId!==e)break;i.push(El(u.parent))}return i})}}function Fb(n){return Ds(n,Go.store)}const Tk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class go{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new go(t,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ct(n,t,e){const i=n.store(Vn.store),r=n.store(es.store),l=[],u=IDBKeyRange.only(e.batchId);let f=0;const m=i.Kt({range:u},(D,T,k)=>(f++,k.delete()));l.push(m.next(()=>{yt(1===f)}));const w=[];for(const D of e.mutations){const T=es.key(t,D.key.path,e.batchId);l.push(r.delete(T)),w.push(D.key)}return Ne.waitFor(l).next(()=>w)}function wE(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ot();t=n.noDocument}return JSON.stringify(t).length}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(41943040,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class Mh{constructor(t,e,i,r){this.userId=t,this.N=e,this.Ht=i,this.referenceDelegate=r,this.Jt={}}static Yt(t,e,i,r){yt(""!==t.uid);const l=t.isAuthenticated()?t.uid:"";return new Mh(l,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wu(t).Kt({index:Vn.userMutationsIndex,range:i},(r,l,u)=>{e=!1,u.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const l=Vp(t),u=Wu(t);return u.add({}).next(f=>{yt("number"==typeof f);const m=new h_(f,e,i,r),w=function(k,F,j){const te=j.baseMutations.map(Pe=>Ib(k.Wt,Pe)),de=j.mutations.map(Pe=>Ib(k.Wt,Pe));return new Vn(F,j.batchId,j.localWriteTime.toMillis(),te,de)}(this.N,this.userId,m),D=[];let T=new vn((k,F)=>rn(k.canonicalString(),F.canonicalString()));for(const k of r){const F=es.key(this.userId,k.key.path,f);T=T.add(k.key.path.popLast()),D.push(u.put(w)),D.push(l.put(F,es.PLACEHOLDER))}return T.forEach(k=>{D.push(this.Ht.addToCollectionParentIndex(t,k))}),t.addOnCommittedListener(()=>{this.Jt[f]=m.keys()}),Ne.waitFor(D).next(()=>m)})}lookupMutationBatch(t,e){return Wu(t).get(e).next(i=>i?(yt(i.userId===this.userId),Nh(this.N,i)):null)}Xt(t,e){return this.Jt[e]?Ne.resolve(this.Jt[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Jt[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Wu(t).Kt({index:Vn.userMutationsIndex,range:r},(u,f,m)=>{f.userId===this.userId&&(yt(f.batchId>=i),l=Nh(this.N,f)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Wu(t).Kt({index:Vn.userMutationsIndex,range:e,reverse:!0},(r,l,u)=>{i=l.batchId,u.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wu(t).Lt(Vn.userMutationsIndex,e).next(i=>i.map(r=>Nh(this.N,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=es.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(i),l=[];return Vp(t).Kt({range:r},(u,f,m)=>{const[w,D,T]=u,k=El(D);if(w===this.userId&&e.path.isEqual(k))return Wu(t).get(T).next(F=>{if(!F)throw ot();yt(F.userId===this.userId),l.push(Nh(this.N,F))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new vn(rn);const r=[];return e.forEach(l=>{const u=es.prefixForPath(this.userId,l.path),f=IDBKeyRange.lowerBound(u),m=Vp(t).Kt({range:f},(w,D,T)=>{const[k,F,j]=w,te=El(F);k===this.userId&&l.path.isEqual(te)?i=i.add(j):T.done()});r.push(m)}),Ne.waitFor(r).next(()=>this.Zt(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,l=es.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(l);let f=new vn(rn);return Vp(t).Kt({range:u},(m,w,D)=>{const[T,k,F]=m,j=El(k);T===this.userId&&i.isPrefixOf(j)?j.length===r&&(f=f.add(F)):D.done()}).next(()=>this.Zt(t,f))}Zt(t,e){const i=[],r=[];return e.forEach(l=>{r.push(Wu(t).get(l).next(u=>{if(null===u)throw ot();yt(u.userId===this.userId),i.push(Nh(this.N,u))}))}),Ne.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return Ct(t.Qt,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.te(e.batchId)}),Ne.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}te(t){delete this.Jt[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Ne.resolve();const i=IDBKeyRange.lowerBound(es.prefixForUser(this.userId)),r=[];return Vp(t).Kt({range:i},(l,u,f)=>{if(l[0]===this.userId){const m=El(l[1]);r.push(m)}else f.done()}).next(()=>{yt(0===r.length)})})}containsKey(t,e){return dI(t,this.userId,e)}ee(t){return Sk(t).get(this.userId).next(e=>e||new $u(this.userId,-1,""))}}function dI(n,t,e){const i=es.prefixForPath(t,e.path),r=i[1],l=IDBKeyRange.lowerBound(i);let u=!1;return Vp(n).Kt({range:l,qt:!0},(f,m,w)=>{const[D,T,k]=f;D===t&&T===r&&(u=!0),w.done()}).next(()=>u)}function Wu(n){return Ds(n,Vn.store)}function Vp(n){return Ds(n,es.store)}function Sk(n){return Ds(n,$u.store)}class Bp{constructor(t){this.ne=t}next(){return this.ne+=2,this.ne}static se(){return new Bp(0)}static ie(){return new Bp(-1)}}class Ik{constructor(t,e){this.referenceDelegate=t,this.N=e}allocateTargetId(t){return this.re(t).next(e=>{const i=new Bp(e.highestTargetId);return e.highestTargetId=i.next(),this.oe(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.re(t).next(e=>Rt.fromTimestamp(new nr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.re(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.re(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.oe(t,r)))}addTargetData(t,e){return this.ce(t,e).next(()=>this.re(t).next(i=>(i.targetCount+=1,this.ae(e,i),this.oe(t,i))))}updateTargetData(t,e){return this.ce(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Mi(t).delete(e.targetId)).next(()=>this.re(t)).next(i=>(yt(i.targetCount>0),i.targetCount-=1,this.oe(t,i)))}removeTargets(t,e,i){let r=0;const l=[];return Mi(t).Kt((u,f)=>{const m=Tl(f);m.sequenceNumber<=e&&null===i.get(m.targetId)&&(r++,l.push(this.removeTargetData(t,m)))}).next(()=>Ne.waitFor(l)).next(()=>r)}forEachTarget(t,e){return Mi(t).Kt((i,r)=>{const l=Tl(r);e(l)})}re(t){return hI(t).get(ji.key).next(e=>(yt(null!==e),e))}oe(t,e){return hI(t).put(ji.key,e)}ce(t,e){return Mi(t).put(cI(this.N,e))}ae(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.re(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Zm(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Mi(t).Kt({range:r,index:yr.queryTargetsIndexName},(u,f,m)=>{const w=Tl(f);ZC(e,w.target)&&(l=w,m.done())}).next(()=>l)}addMatchingKeys(t,e,i){const r=[],l=Zu(t);return e.forEach(u=>{const f=$o(u.path);r.push(l.put(new Et(i,f))),r.push(this.referenceDelegate.addReference(t,i,u))}),Ne.waitFor(r)}removeMatchingKeys(t,e,i){const r=Zu(t);return Ne.forEach(e,l=>{const u=$o(l.path);return Ne.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(t,i,l)])})}removeMatchingKeysForTargetId(t,e){const i=Zu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Zu(t);let l=Tn();return r.Kt({range:i,qt:!0},(u,f,m)=>{const w=El(u[1]),D=new it(w);l=l.add(D)}).next(()=>l)}containsKey(t,e){const i=$o(e.path),r=IDBKeyRange.bound([i],[QR(i)],!1,!0);let l=0;return Zu(t).Kt({index:Et.documentTargetsIndex,qt:!0,range:r},([u,f],m,w)=>{0!==u&&(l++,w.done())}).next(()=>l>0)}Tt(t,e){return Mi(t).get(e).next(i=>i?Tl(i):null)}}function Mi(n){return Ds(n,yr.store)}function hI(n){return Ds(n,ji.store)}function Zu(n){return Ds(n,Et.store)}function Nc(n){return CE.apply(this,arguments)}function CE(){return(CE=(0,ye.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==Rb)throw n;Oe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function fI([n,t],[e,i]){const r=rn(n,e);return 0===r?rn(t,i):r}class Ak{constructor(t){this.ue=t,this.buffer=new vn(fI),this.he=0}le(){return++this.he}fe(t){const e=[t,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();fI(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Nk{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.de=!1,this.we=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(t)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(t){var e=this;const i=this.de?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,ye.Z)(function*(){e.we=null,e.de=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(r){Ah(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Nc(r)}yield e._e(t)}))}}class Mk{constructor(t,e){this.me=t,this.params=e}calculateTargetCount(t,e){return this.me.ge(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return Ne.resolve(ho.T);const i=new Ak(e);return this.me.forEachTarget(t,r=>i.fe(r.sequenceNumber)).next(()=>this.me.ye(t,r=>i.fe(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.me.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.me.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Tk)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tk):this.pe(t,e))}getCacheSize(t){return this.me.getCacheSize(t)}pe(t,e){let i,r,l,u,f,m,w;const D=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(t,r))).next(T=>(i=T,f=Date.now(),this.removeTargets(t,i,e))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(t,i))).next(T=>(w=Date.now(),BC()<=_l.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-D}ms\n\tDetermined least recently used ${r} in `+(f-u)+`ms\n\tRemoved ${l} targets in `+(m-f)+`ms\n\tRemoved ${T} documents in `+(w-m)+`ms\nTotal Duration: ${w-D}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T})))}}class Rk{constructor(t,e){this.db=t,this.garbageCollector=new Mk(this,e)}ge(t){const e=this.Te(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Te(t){let e=0;return this.ye(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}ye(t,e){return this.Ee(t,(i,r)=>e(r))}addReference(t,e,i){return Up(t,i)}removeReference(t,e,i){return Up(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Up(t,e)}Ie(t,e){return function(i,r){let l=!1;return Sk(i).jt(u=>dI(i,u,r).next(f=>(f&&(l=!0),Ne.resolve(!f)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let l=0;return this.Ee(t,(u,f)=>{if(f<=e){const m=this.Ie(t,u).next(w=>{if(!w)return l++,i.getEntry(t,u).next(()=>(i.removeEntry(u),Zu(t).delete([0,$o(u.path)])))});r.push(m)}}).next(()=>Ne.waitFor(r)).next(()=>i.apply(t)).next(()=>l)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Up(t,e)}Ee(t,e){const i=Zu(t);let r,l=ho.T;return i.Kt({index:Et.documentTargetsIndex},([u,f],{path:m,sequenceNumber:w})=>{0===u?(l!==ho.T&&e(new it(El(r)),l),l=w,r=m):l=ho.T}).next(()=>{l!==ho.T&&e(new it(El(r)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Up(n,t){return Zu(n).put((i=n.currentSequenceNumber,new Et(0,$o(t.path),i)));var i}class Hp{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,l]of i)if(this.equalsFn(r,t))return l}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0!==r){for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return void(r[l]=[t,e]);r.push([t,e])}else this.inner[i]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),!0;return!1}forEach(t){at(this.inner,(e,i)=>{for(const[r,l]of i)t(r,l)})}isEmpty(){return AS(this.inner)}}class pI{constructor(){this.changes=new Hp(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Rt.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:zn.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?Ne.resolve(i.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class gI{constructor(t,e){this.N=t,this.Ht=e}addEntry(t,e,i){return Rh(t).put(Lb(e),i)}removeEntry(t,e){const i=Rh(t),r=Lb(e);return i.delete(r)}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Ae(t,i)))}getEntry(t,e){return Rh(t).get(Lb(e)).next(i=>this.Re(e,i))}be(t,e){return Rh(t).get(Lb(e)).next(i=>({document:this.Re(e,i),size:wE(i)}))}getEntries(t,e){let i=Es();return this.Pe(t,e,(r,l)=>{const u=this.Re(r,l);i=i.insert(r,u)}).next(()=>i)}ve(t,e){let i=Es(),r=new ir(it.comparator);return this.Pe(t,e,(l,u)=>{const f=this.Re(l,u);i=i.insert(l,f),r=r.insert(l,wE(u))}).next(()=>({documents:i,Ve:r}))}Pe(t,e,i){if(e.isEmpty())return Ne.resolve();const r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),l=e.getIterator();let u=l.getNext();return Rh(t).Kt({range:r},(f,m,w)=>{const D=it.fromSegments(f);for(;u&&it.comparator(u,D)<0;)i(u,null),u=l.getNext();u&&u.isEqual(D)&&(i(u,m),u=l.hasNext()?l.getNext():null),u?w.Mt(u.path.toArray()):w.done()}).next(()=>{for(;u;)i(u,null),u=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(t,e,i){let r=Es();const l=e.path.length+1,u={};if(i.isEqual(Rt.min())){const f=e.path.toArray();u.range=IDBKeyRange.lowerBound(f)}else{const f=e.path.toArray(),m=xb(i);u.range=IDBKeyRange.lowerBound([f,m],!0),u.index=qn.collectionReadTimeIndex}return Rh(t).Kt(u,(f,m,w)=>{if(f.length!==l)return;const D=Ac(this.N,m);e.path.isPrefixOf(D.key.path)?Jm(e,D)&&(r=r.insert(D.key,D)):w.done()}).next(()=>r)}newChangeBuffer(t){return new EE(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return mI(t).get(Ic.key).next(e=>(yt(!!e),e))}Ae(t,e){return mI(t).put(Ic.key,e)}Re(t,e){if(e){const i=Ac(this.N,e);if(!i.isNoDocument()||!i.version.isEqual(Rt.min()))return i}return zn.newInvalidDocument(t)}}class EE extends pI{constructor(t,e){super(),this.Se=t,this.trackRemovals=e,this.De=new Hp(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new vn((l,u)=>rn(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const f=this.De.get(l);if(u.document.isValidDocument()){const m=lI(this.Se.N,u.document,this.getReadTime(l));r=r.add(l.path.popLast()),i+=wE(m)-f,e.push(this.Se.addEntry(t,l,m))}else if(i-=f,this.trackRemovals){const m=lI(this.Se.N,zn.newNoDocument(l,Rt.min()),this.getReadTime(l));e.push(this.Se.addEntry(t,l,m))}else e.push(this.Se.removeEntry(t,l))}),r.forEach(l=>{e.push(this.Se.Ht.addToCollectionParentIndex(t,l))}),e.push(this.Se.updateMetadata(t,i)),Ne.waitFor(e)}getFromCache(t,e){return this.Se.be(t,e).next(i=>(this.De.set(e,i.size),i.document))}getAllFromCache(t,e){return this.Se.ve(t,e).next(({documents:i,Ve:r})=>(r.forEach((l,u)=>{this.De.set(l,u)}),i))}}function mI(n){return Ds(n,Ic.store)}function Rh(n){return Ds(n,qn.store)}function Lb(n){return n.path.toArray()}class kk{constructor(t){this.N=t}Ct(t,e,i,r){yt(i<r&&i>=0&&r<=11);const l=new u_("createOrUpgrade",e);var f;i<1&&r>=1&&(t.createObjectStore(fo.store),(f=t).createObjectStore($u.store,{keyPath:$u.keyPath}),f.createObjectStore(Vn.store,{keyPath:Vn.keyPath,autoIncrement:!0}).createIndex(Vn.userMutationsIndex,Vn.userMutationsKeyPath,{unique:!0}),f.createObjectStore(es.store),_I(t),function(f){f.createObjectStore(qn.store)}(t));let u=Ne.resolve();return i<3&&r>=3&&(0!==i&&(function(f){f.deleteObjectStore(Et.store),f.deleteObjectStore(yr.store),f.deleteObjectStore(ji.store)}(t),_I(t)),u=u.next(()=>function(f){const m=f.store(ji.store),w=new ji(0,0,Rt.min().toTimestamp(),0);return m.put(ji.key,w)}(l))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(f,m){return m.store(Vn.store).Lt().next(w=>{f.deleteObjectStore(Vn.store),f.createObjectStore(Vn.store,{keyPath:Vn.keyPath,autoIncrement:!0}).createIndex(Vn.userMutationsIndex,Vn.userMutationsKeyPath,{unique:!0});const D=m.store(Vn.store),T=w.map(k=>D.put(k));return Ne.waitFor(T)})}(t,l))),u=u.next(()=>{!function(f){f.createObjectStore(po.store,{keyPath:po.keyPath})}(t)})),i<5&&r>=5&&(u=u.next(()=>this.Ce(l))),i<6&&r>=6&&(u=u.next(()=>(function(f){f.createObjectStore(Ic.store)}(t),this.Ne(l)))),i<7&&r>=7&&(u=u.next(()=>this.xe(l))),i<8&&r>=8&&(u=u.next(()=>this.ke(t,l))),i<9&&r>=9&&(u=u.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(t),function(f){const m=f.objectStore(qn.store);m.createIndex(qn.readTimeIndex,qn.readTimeIndexPath,{unique:!1}),m.createIndex(qn.collectionReadTimeIndex,qn.collectionReadTimeIndexPath,{unique:!1})}(e)})),i<10&&r>=10&&(u=u.next(()=>this.$e(l))),i<11&&r>=11&&(u=u.next(()=>{(function(f){f.createObjectStore(c_.store,{keyPath:c_.keyPath})})(t),function(f){f.createObjectStore(_t.store,{keyPath:_t.keyPath})}(t)})),u}Ne(t){let e=0;return t.store(qn.store).Kt((i,r)=>{e+=wE(r)}).next(()=>{const i=new Ic(e);return t.store(Ic.store).put(Ic.key,i)})}Ce(t){const e=t.store($u.store),i=t.store(Vn.store);return e.Lt().next(r=>Ne.forEach(r,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.Lt(Vn.userMutationsIndex,u).next(f=>Ne.forEach(f,m=>{yt(m.userId===l.userId);const w=Nh(this.N,m);return Ct(t,l.userId,w).next(()=>{})}))}))}xe(t){const e=t.store(Et.store),i=t.store(qn.store);return t.store(ji.store).get(ji.key).next(r=>{const l=[];return i.Kt((u,f)=>{const m=new yn(u),w=[0,$o(m)];l.push(e.get(w).next(D=>D?Ne.resolve():e.put(new Et(0,$o(m),r.highestListenSequenceNumber))))}).next(()=>Ne.waitFor(l))})}ke(t,e){t.createObjectStore(Go.store,{keyPath:Go.keyPath});const i=e.store(Go.store),r=new vE,l=u=>{if(r.add(u)){const f=u.lastSegment(),m=u.popLast();return i.put({collectionId:f,parent:$o(m)})}};return e.store(qn.store).Kt({qt:!0},(u,f)=>{const m=new yn(u);return l(m.popLast())}).next(()=>e.store(es.store).Kt({qt:!0},([u,f,m],w)=>{const D=El(f);return l(D.popLast())}))}$e(t){const e=t.store(yr.store);return e.Kt((i,r)=>{const l=Tl(r),u=cI(this.N,l);return e.put(u)})}}function _I(n){n.createObjectStore(Et.store,{keyPath:Et.keyPath}).createIndex(Et.documentTargetsIndex,Et.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(yr.store,{keyPath:yr.keyPath}).createIndex(yr.queryTargetsIndexName,yr.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(ji.store)}const DE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class TE{constructor(t,e,i,r,l,u,f,m,w,D){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Oe=l,this.window=u,this.document=f,this.Fe=w,this.Me=D,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=T=>Promise.resolve(),!TE.bt())throw new Me(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rk(this,r),this.We=e+"main",this.N=new aI(m),this.Ge=new qo(this.We,11,new kk(this.N)),this.ze=new Ik(this.referenceDelegate,this.N),this.Ht=new bE,this.He=new gI(this.N,this.Ht),this.Je=new uI,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===D&&Hi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(me.FAILED_PRECONDITION,DE);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.ze.getHighestSequenceNumber(t))}).then(t=>{this.Le=new ho(t,this.Fe)}).then(()=>{this.Be=!0}).catch(t=>(this.Ge&&this.Ge.close(),Promise.reject(t)))}nn(t){var e=this;return this.Qe=function(){var i=(0,ye.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ge.xt(function(){var e=(0,ye.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Oe.enqueueAndForget((0,ye.Z)(function*(){e.started&&(yield e.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Yu(t).put(new po(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(t).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(t)).next(e=>this.isPrimary&&!e?this.on(t).next(()=>!1):!!e&&this.cn(t).next(()=>!0))).catch(t=>{if(Ah(t))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Oe.enqueueRetryable(()=>this.Qe(t)),this.isPrimary=t})}sn(t){return f_(t).get(fo.key).next(e=>Ne.resolve(this.an(e)))}un(t){return Yu(t).delete(this.clientId)}hn(){var t=this;return(0,ye.Z)(function*(){if(t.isPrimary&&!t.ln(t.je,18e5)){t.je=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Ds(i,po.store);return r.Lt().next(l=>{const u=t.fn(l,18e5),f=l.filter(m=>-1===u.indexOf(m));return Ne.forEach(f,m=>r.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(t.Ye)for(const i of e)t.Ye.removeItem(t.dn(i.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(t){return!!t&&t.ownerId===this.clientId}rn(t){return this.Me?Ne.resolve(!0):f_(t).get(fo.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)){if(this.an(e)&&this.networkEnabled)return!0;if(!this.an(e)){if(!e.allowTabSynchronization)throw new Me(me.FAILED_PRECONDITION,DE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yu(t).Lt().next(i=>void 0===this.fn(i,5e3).find(r=>{if(this.clientId!==r.clientId){const u=!this.inForeground&&r.inForeground,f=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||u&&f)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Oe("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,ye.Z)(function*(){t.Be=!1,t._n(),t.Ke&&(t.Ke.cancel(),t.Ke=null),t.mn(),t.gn(),yield t.Ge.runTransaction("shutdown","readwrite",[fo.store,po.store],e=>{const i=new oI(e,ho.T);return t.on(i).next(()=>t.un(i))}),t.Ge.close(),t.yn()})()}fn(t,e){return t.filter(i=>this.ln(i.updateTimeMs,e)&&!this.wn(i.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",t=>Yu(t).Lt().next(e=>this.fn(e,18e5).map(i=>i.clientId)))}get started(){return this.Be}getMutationQueue(t){return Mh.Yt(t,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(t,e,i){let l;return Oe("IndexedDbPersistence","Starting transaction:",t),this.Ge.runTransaction(t,"readonly"===e?"readonly":"readwrite",zo,u=>(l=new oI(u,this.Le?this.Le.next():ho.T),"readwrite-primary"===e?this.sn(l).next(f=>!!f||this.rn(l)).next(f=>{if(!f)throw Hi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Me(me.FAILED_PRECONDITION,Rb);return i(l)}).next(f=>this.cn(l).next(()=>f)):this.Tn(l).next(()=>i(l)))).then(u=>(l.raiseOnCommittedEvent(),u))}Tn(t){return f_(t).get(fo.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.an(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Me(me.FAILED_PRECONDITION,DE)})}cn(t){const e=new fo(this.clientId,this.allowTabSynchronization,Date.now());return f_(t).put(fo.key,e)}static bt(){return qo.bt()}on(t){const e=f_(t);return e.get(fo.key).next(i=>this.an(i)?(Oe("IndexedDbPersistence","Releasing primary lease."),e.delete(fo.key)):Ne.resolve())}ln(t,e){const i=Date.now();return!(t<i-e||t>i&&(Hi(`Detected an update time that is in the future: ${t} > ${i}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ue=()=>{this._n(),(0,B.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(t){var e;try{const i=null!==(null===(e=this.Ye)||void 0===e?void 0:e.getItem(this.dn(t)));return Oe("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Hi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(t){Hi("Failed to set zombie client id.",t)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(t){}}dn(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function f_(n){return Ds(n,fo.store)}function Yu(n){return Ds(n,po.store)}function SE(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class xk{constructor(t,e){this.progress=t,this.En=e}}class IE{constructor(t,e,i){this.He=t,this.In=e,this.Ht=i}An(t,e){return this.In.getAllMutationBatchesAffectingDocumentKey(t,e).next(i=>this.Rn(t,e,i))}Rn(t,e,i){return this.He.getEntry(t,e).next(r=>{for(const l of i)l.applyToLocalView(r);return r})}bn(t,e){t.forEach((i,r)=>{for(const l of e)l.applyToLocalView(r)})}Pn(t,e){return this.He.getEntries(t,e).next(i=>this.vn(t,i).next(()=>i))}vn(t,e){return this.In.getAllMutationBatchesAffectingDocumentKeys(t,e).next(i=>this.bn(e,i))}getDocumentsMatchingQuery(t,e,i){return it.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.Vn(t,e.path):QC(e)?this.Sn(t,e,i):this.Dn(t,e,i);var r}Vn(t,e){return this.An(t,new it(e)).next(i=>{let r=hE();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Sn(t,e,i){const r=e.collectionGroup;let l=hE();return this.Ht.getCollectionParents(t,r).next(u=>Ne.forEach(u,f=>{const m=(w=e,D=f.child(r),new zs(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.Dn(t,m,i).next(w=>{w.forEach((D,T)=>{l=l.insert(D,T)})})}).next(()=>l))}Dn(t,e,i){let r,l;return this.He.getDocumentsMatchingQuery(t,e,i).next(u=>(r=u,this.In.getAllMutationBatchesAffectingQuery(t,e))).next(u=>(l=u,this.Cn(t,l,r).next(f=>{r=f;for(const m of l)for(const w of m.mutations){const D=w.key;let T=r.get(D);null==T&&(T=zn.newInvalidDocument(D),r=r.insert(D,T)),sE(w,T,m.localWriteTime),T.isFoundDocument()||(r=r.remove(D))}}))).next(()=>(r.forEach((u,f)=>{Jm(e,f)||(r=r.remove(u))}),r))}Cn(t,e,i){let r=Tn();for(const u of e)for(const f of u.mutations)f instanceof Tc&&null===i.get(f.key)&&(r=r.add(f.key));let l=i;return this.He.getEntries(t,r).next(u=>(u.forEach((f,m)=>{m.isFoundDocument()&&(l=l.insert(f,m))}),l))}}class kh{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Nn=i,this.xn=r}static kn(t,e){let i=Tn(),r=Tn();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new kh(t,e.fromCache,i,r)}}class Ok{$n(t){this.On=t}getDocumentsMatchingQuery(t,e,i,r){return 0===(l=e).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||i.isEqual(Rt.min())?this.Fn(t,e):this.On.Pn(t,r).next(l=>{const u=this.Mn(e,l);return(wb(e)||Qm(e))&&this.Ln(e.limitType,u,r,i)?this.Fn(t,e):(BC()<=_l.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),XC(e)),this.On.getDocumentsMatchingQuery(t,e,i).next(f=>(u.forEach(m=>{f=f.insert(m.key,m)}),f)))});var l}Mn(t,e){let i=new vn(Eb(t));return e.forEach((r,l)=>{Jm(t,l)&&(i=i.add(l))}),i}Ln(t,e,i,r){if(i.size!==e.size)return!0;const l="F"===t?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Fn(t,e){return BC()<=_l.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",XC(e)),this.On.getDocumentsMatchingQuery(t,e,Rt.min())}}class yI{constructor(t,e,i,r){this.persistence=t,this.Bn=e,this.N=r,this.Un=new ir(rn),this.qn=new Hp(l=>Zm(l),ZC),this.Kn=Rt.min(),this.In=t.getMutationQueue(i),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new IE(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Un))}}function vI(n,t,e,i){return new yI(n,t,e,i)}function bI(n,t){return AE.apply(this,arguments)}function AE(){return(AE=(0,ye.Z)(function*(n,t){const e=Be(n);let i=e.In,r=e.Qn;const l=yield e.persistence.runTransaction("Handle user change","readonly",u=>{let f;return e.In.getAllMutationBatches(u).next(m=>(f=m,i=e.persistence.getMutationQueue(t),r=new IE(e.jn,i,e.persistence.getIndexManager()),i.getAllMutationBatches(u))).next(m=>{const w=[],D=[];let T=Tn();for(const k of f){w.push(k.batchId);for(const F of k.mutations)T=T.add(F.key)}for(const k of m){D.push(k.batchId);for(const F of k.mutations)T=T.add(F.key)}return r.Pn(u,T).next(k=>({Wn:k,removedBatchIds:w,addedBatchIds:D}))})});return e.In=i,e.Qn=r,e.Bn.$n(e.Qn),l})).apply(this,arguments)}function Pk(n,t){const e=Be(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),l=e.jn.newChangeBuffer({trackRemovals:!0});return function(u,f,m,w){const D=m.batch,T=D.keys();let k=Ne.resolve();return T.forEach(F=>{k=k.next(()=>w.getEntry(f,F)).next(j=>{const te=m.docVersions.get(F);yt(null!==te),j.version.compareTo(te)<0&&(D.applyToRemoteDocument(j,m),j.isValidDocument()&&w.addEntry(j,m.commitVersion))})}),k.next(()=>u.In.removeMutationBatch(f,D))}(e,i,t,l).next(()=>l.apply(i)).next(()=>e.In.performConsistencyCheck(i)).next(()=>e.Qn.Pn(i,r))})}function wI(n){const t=Be(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function CI(n,t){const e=Be(n),i=t.snapshotVersion;let r=e.Un;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=e.jn.newChangeBuffer({trackRemovals:!0});r=e.Un;const f=[];t.targetChanges.forEach((w,D)=>{const T=r.get(D);if(!T)return;f.push(e.ze.removeMatchingKeys(l,w.removedDocuments,D).next(()=>e.ze.addMatchingKeys(l,w.addedDocuments,D)));const k=w.resumeToken;if(k.approximateByteSize()>0){const F=T.withResumeToken(k,i).withSequenceNumber(l.currentSequenceNumber);r=r.insert(D,F),j=T,de=w,yt((te=F).resumeToken.approximateByteSize()>0),(0===j.resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0)&&f.push(e.ze.updateTargetData(l,F))}var j,te,de});let m=Es();if(t.documentUpdates.forEach((w,D)=>{t.resolvedLimboDocuments.has(w)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,w))}),f.push(EI(l,u,t.documentUpdates,i,void 0).next(w=>{m=w})),!i.isEqual(Rt.min())){const w=e.ze.getLastRemoteSnapshotVersion(l).next(D=>e.ze.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(w)}return Ne.waitFor(f).next(()=>u.apply(l)).next(()=>e.Qn.vn(l,m)).next(()=>m)}).then(l=>(e.Un=r,l))}function EI(n,t,e,i,r){let l=Tn();return e.forEach(u=>l=l.add(u)),t.getEntries(n,l).next(u=>{let f=Es();return e.forEach((m,w)=>{const D=u.get(m),T=(null==r?void 0:r.get(m))||i;w.isNoDocument()&&w.version.isEqual(Rt.min())?(t.removeEntry(m,T),f=f.insert(m,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(t.addEntry(w,T),f=f.insert(m,w)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",D.version," Watch version:",w.version)}),f})}function Fk(n,t){const e=Be(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.In.getNextMutationBatchAfterBatchId(i,t)))}function p_(n,t){const e=Be(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.ze.getTargetData(i,t).next(l=>l?(r=l,Ne.resolve(r)):e.ze.allocateTargetId(i).next(u=>(r=new Yo(t,u,0,i.currentSequenceNumber),e.ze.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Un.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Un=e.Un.insert(i.targetId,i),e.qn.set(t,i.targetId)),i})}function g_(n,t,e){return DI.apply(this,arguments)}function DI(){return(DI=(0,ye.Z)(function*(n,t,e){const i=Be(n),r=i.Un.get(t),l=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",l,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Ah(u))throw u;Oe("LocalStore",`Failed to update sequence numbers for target ${t}: ${u}`)}i.Un=i.Un.remove(t),i.qn.delete(r.target)})).apply(this,arguments)}function jp(n,t,e){const i=Be(n);let r=Rt.min(),l=Tn();return i.persistence.runTransaction("Execute query","readonly",u=>function(f,m,w){const D=Be(f),T=D.qn.get(w);return void 0!==T?Ne.resolve(D.Un.get(T)):D.ze.getTargetData(m,w)}(i,u,jo(t)).next(f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.ze.getMatchingKeysForTargetId(u,f.targetId).next(m=>{l=m})}).next(()=>i.Bn.getDocumentsMatchingQuery(u,t,e?r:Rt.min(),e?l:Tn())).next(f=>({documents:f,Gn:l})))}function TI(n,t){const e=Be(n),i=Be(e.ze),r=e.Un.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",l=>i.Tt(l,t).next(u=>u?u.target:null))}function SI(n){const t=Be(n);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(i,r,l){const u=Be(i);let f=Es(),m=xb(l);const w=Rh(r),D=IDBKeyRange.lowerBound(m,!0);return w.Kt({index:qn.readTimeIndex,range:D},(T,k)=>{const F=Ac(u.N,k);f=f.insert(F.key,F),m=k.readTime}).next(()=>({En:f,readTime:Ob(m)}))}(t.jn,e,t.Kn)).then(({En:e,readTime:i})=>(t.Kn=i,e))}function NE(){return(NE=(0,ye.Z)(function*(n){const t=Be(n);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(i){const r=Rh(i);let l=Rt.min();return r.Kt({index:qn.readTimeIndex,reverse:!0},(u,f,m)=>{f.readTime&&(l=Ob(f.readTime)),m.done()}).next(()=>l)}(e)).then(e=>{t.Kn=e})})).apply(this,arguments)}function ME(){return(ME=(0,ye.Z)(function*(n,t,e,i){const r=Be(n);let l=Tn(),u=Es(),f=GS();for(const D of e){const T=t.zn(D.metadata.name);D.document&&(l=l.add(T)),u=u.insert(T,t.Hn(D)),f=f.insert(T,t.Jn(D.metadata.readTime))}const m=r.jn.newChangeBuffer({trackRemovals:!0}),w=yield p_(r,(D=i,jo(Eh(yn.fromString(`__bundle__/docs/${D}`)))));var D;return r.persistence.runTransaction("Apply bundle documents","readwrite",D=>EI(D,m,u,Rt.min(),f).next(T=>(m.apply(D),T)).next(T=>r.ze.removeMatchingKeysForTargetId(D,w.targetId).next(()=>r.ze.addMatchingKeys(D,l,w.targetId)).next(()=>r.Qn.vn(D,T)).next(()=>T)))})).apply(this,arguments)}function II(n,t){return m_.apply(this,arguments)}function m_(){return(m_=(0,ye.Z)(function*(n,t,e=Tn()){const i=yield p_(n,jo(Lp(t.bundledQuery))),r=Be(n);return r.persistence.runTransaction("Save named query","readwrite",l=>{const u=rr(t.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r.Je.saveNamedQuery(l,t);const f=i.withResumeToken(Bt.EMPTY_BYTE_STRING,u);return r.Un=r.Un.insert(f.targetId,f),r.ze.updateTargetData(l,f).next(()=>r.ze.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>r.ze.addMatchingKeys(l,e,i.targetId)).next(()=>r.Je.saveNamedQuery(l,t))})})).apply(this,arguments)}class Bk{constructor(t){this.N=t,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return Ne.resolve(this.Yn.get(e))}saveBundleMetadata(t,e){var i;return this.Yn.set(e.id,{id:(i=e).id,version:i.version,createTime:rr(i.createTime)}),Ne.resolve()}getNamedQuery(t,e){return Ne.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,{name:(i=e).name,query:Lp(i.bundledQuery),readTime:rr(i.readTime)}),Ne.resolve();var i}}class Ku{constructor(){this.Zn=new vn(ln.ts),this.es=new vn(ln.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const i=new ln(t,e);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.rs(new ln(t,e))}os(t,e){t.forEach(i=>this.removeReference(i,e))}cs(t){const e=new it(new yn([])),i=new ln(e,t),r=new ln(e,t+1),l=[];return this.es.forEachInRange([i,r],u=>{this.rs(u),l.push(u.key)}),l}us(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new it(new yn([])),i=new ln(e,t),r=new ln(e,t+1);let l=Tn();return this.es.forEachInRange([i,r],u=>{l=l.add(u.key)}),l}containsKey(t){const e=new ln(t,0),i=this.Zn.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class ln{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return it.comparator(t.key,e.key)||rn(t.ls,e.ls)}static ns(t,e){return rn(t.ls,e.ls)||it.comparator(t.key,e.key)}}class AI{constructor(t,e){this.Ht=t,this.referenceDelegate=e,this.In=[],this.fs=1,this.ds=new vn(ln.ts)}checkEmpty(t){return Ne.resolve(0===this.In.length)}addMutationBatch(t,e,i,r){const l=this.fs;this.fs++;const u=new h_(l,e,i,r);this.In.push(u);for(const f of r)this.ds=this.ds.add(new ln(f.key,l)),this.Ht.addToCollectionParentIndex(t,f.key.path.popLast());return Ne.resolve(u)}lookupMutationBatch(t,e){return Ne.resolve(this.ws(e))}getNextMutationBatchAfterBatchId(t,e){const r=this._s(e+1),l=r<0?0:r;return Ne.resolve(this.In.length>l?this.In[l]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(t){return Ne.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new ln(e,0),r=new ln(e,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([i,r],u=>{const f=this.ws(u.ls);l.push(f)}),Ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new vn(rn);return e.forEach(r=>{const l=new ln(r,0),u=new ln(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,u],f=>{i=i.add(f.ls)})}),Ne.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let l=i;it.isDocumentKey(l)||(l=l.child(""));const u=new ln(new it(l),0);let f=new vn(rn);return this.ds.forEachWhile(m=>{const w=m.key.path;return!!i.isPrefixOf(w)&&(w.length===r&&(f=f.add(m.ls)),!0)},u),Ne.resolve(this.gs(f))}gs(t){const e=[];return t.forEach(i=>{const r=this.ws(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){yt(0===this.ys(e.batchId,"removed")),this.In.shift();let i=this.ds;return Ne.forEach(e.mutations,r=>{const l=new ln(r.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ds=i})}te(t){}containsKey(t,e){const i=new ln(e,0),r=this.ds.firstAfterOrEqual(i);return Ne.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return Ne.resolve()}ys(t,e){return this._s(t)}_s(t){return 0===this.In.length?0:t-this.In[0].batchId}ws(t){const e=this._s(t);return e<0||e>=this.In.length?null:this.In[e]}}class Na{constructor(t,e){this.Ht=t,this.ps=e,this.docs=new ir(it.comparator),this.size=0}addEntry(t,e,i){const r=e.key,l=this.docs.get(r),u=l?l.size:0,f=this.ps(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:f,readTime:i}),this.size+=f-u,this.Ht.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return Ne.resolve(i?i.document.clone():zn.newInvalidDocument(e))}getEntries(t,e){let i=Es();return e.forEach(r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.clone():zn.newInvalidDocument(r))}),Ne.resolve(i)}getDocumentsMatchingQuery(t,e,i){let r=Es();const l=new it(e.path.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:m,readTime:w}}=u.getNext();if(!e.path.isPrefixOf(f.path))break;w.compareTo(i)<=0||Jm(e,m)&&(r=r.insert(m.key,m.clone()))}return Ne.resolve(r)}Ts(t,e){return Ne.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new RE(this)}getSize(t){return Ne.resolve(this.size)}}class RE extends pI{constructor(t){super(),this.Se=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.document.isValidDocument()?e.push(this.Se.addEntry(t,r.document,this.getReadTime(i))):this.Se.removeEntry(i)}),Ne.waitFor(e)}getFromCache(t,e){return this.Se.getEntry(t,e)}getAllFromCache(t,e){return this.Se.getEntries(t,e)}}class Uk{constructor(t){this.persistence=t,this.Es=new Hp(e=>Zm(e),ZC),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Is=0,this.As=new Ku,this.targetCount=0,this.Rs=Bp.se()}forEachTarget(t,e){return this.Es.forEach((i,r)=>e(r)),Ne.resolve()}getLastRemoteSnapshotVersion(t){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ne.resolve(this.Is)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Is&&(this.Is=e),Ne.resolve()}ce(t){this.Es.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new Bp(e),this.highestTargetId=e),t.sequenceNumber>this.Is&&(this.Is=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,Ne.resolve()}updateTargetData(t,e){return this.ce(e),Ne.resolve()}removeTargetData(t,e){return this.Es.delete(e.target),this.As.cs(e.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(t,e,i){let r=0;const l=[];return this.Es.forEach((u,f)=>{f.sequenceNumber<=e&&null===i.get(f.targetId)&&(this.Es.delete(u),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),r++)}),Ne.waitFor(l).next(()=>r)}getTargetCount(t){return Ne.resolve(this.targetCount)}getTargetData(t,e){const i=this.Es.get(e)||null;return Ne.resolve(i)}addMatchingKeys(t,e,i){return this.As.ss(e,i),Ne.resolve()}removeMatchingKeys(t,e,i){this.As.os(e,i);const r=this.persistence.referenceDelegate,l=[];return r&&e.forEach(u=>{l.push(r.markPotentiallyOrphaned(t,u))}),Ne.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.As.cs(e),Ne.resolve()}getMatchingKeysForTargetId(t,e){const i=this.As.hs(e);return Ne.resolve(i)}containsKey(t,e){return Ne.resolve(this.As.containsKey(e))}}class NI{constructor(t,e){this.bs={},this.Le=new ho(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new Uk(this),this.Ht=new Pb,this.He=new Na(this.Ht,i=>this.referenceDelegate.Ps(i)),this.N=new aI(e),this.Je=new Bk(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new AI(this.Ht,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(t,e,i){Oe("MemoryPersistence","Starting transaction:",t);const r=new MI(this.Le.next());return this.referenceDelegate.vs(),i(r).next(l=>this.referenceDelegate.Vs(r).next(()=>l)).toPromise().then(l=>(r.raiseOnCommittedEvent(),l))}Ss(t,e){return Ne.or(Object.values(this.bs).map(i=>()=>i.containsKey(t,e)))}}class MI extends Gu{constructor(t){super(),this.currentSequenceNumber=t}}class Vb{constructor(t){this.persistence=t,this.Ds=new Ku,this.Cs=null}static Ns(t){return new Vb(t)}get xs(){if(this.Cs)return this.Cs;throw ot()}addReference(t,e,i){return this.Ds.addReference(i,e),this.xs.delete(i.toString()),Ne.resolve()}removeReference(t,e,i){return this.Ds.removeReference(i,e),this.xs.add(i.toString()),Ne.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Ne.resolve()}removeTarget(t,e){this.Ds.cs(e.targetId).forEach(r=>this.xs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(l=>this.xs.add(l.toString()))}).next(()=>i.removeTargetData(t,e))}vs(){this.Cs=new Set}Vs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.xs,i=>{const r=it.fromPath(i);return this.ks(t,r).next(l=>{l||e.removeEntry(r)})}).next(()=>(this.Cs=null,e.apply(t)))}updateLimboDocument(t,e){return this.ks(t,e).next(i=>{i?this.xs.delete(e.toString()):this.xs.add(e.toString())})}Ps(t){return 0}ks(t,e){return Ne.or([()=>Ne.resolve(this.Ds.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ss(t,e)])}}function RI(n,t){return`firestore_clients_${n}_${t}`}function kI(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function kE(n,t){return`firestore_targets_${n}_${t}`}class __{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static $s(t,e,i){const r=JSON.parse(i);let l,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(l=new Me(r.error.code,r.error.message))),u?new __(t,e,r.state,l):(Hi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class y_{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static $s(t,e){const i=JSON.parse(e);let r,l="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(r=new Me(i.error.code,i.error.message))),l?new y_(t,i.state,r):(Hi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class xE{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,l=i_();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=NS(i.activeTargetIds[u]),l=l.add(i.activeTargetIds[u]);return r?new xE(t,l):(Hi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class OE{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new OE(e.clientId,e.onlineState):(Hi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class PE{constructor(){this.activeTargetIds=i_()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ms(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qu{constructor(t,e,i,r,l){this.window=t,this.Oe=e,this.persistenceKey=i,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new ir(rn),this.started=!1,this.Ks=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.js=RI(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new PE),this.Ws=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(f){return`firestore_bundle_loaded_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ye.Z)(function*(){const e=yield t.syncEngine.pn();for(const r of e){if(r===t.Ls)continue;const l=t.getItem(RI(t.persistenceKey,r));if(l){const u=xE.$s(r,l);u&&(t.qs=t.qs.insert(u.clientId,u))}}t.Ys();const i=t.storage.getItem(t.Hs);if(i){const r=t.Xs(i);r&&t.Zs(r)}for(const r of t.Ks)t.Us(r);t.Ks=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Qs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(t){let e=!1;return this.qs.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ei(t,"pending")}updateMutationState(t,e,i){this.ei(t,e,i),this.ni(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(kE(this.persistenceKey,t));if(i){const r=y_.$s(t,i);r&&(e=r.state)}}return this.si.Fs(t),this.Ys(),e}removeLocalQueryTarget(t){this.si.Ms(t),this.Ys()}isLocalQueryTarget(t){return this.si.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(kE(this.persistenceKey,t))}updateQueryState(t,e,i){this.ii(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.ni(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.ri(t)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Oe("SharedClientState","READ",t,e),e}setItem(t,e){Oe("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Oe("SharedClientState","REMOVE",t),this.storage.removeItem(t)}Us(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Oe("SharedClientState","EVENT",i.key,i.newValue),i.key===this.js)return void Hi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ye.Z)(function*(){if(e.started){if(null!==i.key)if(e.Ws.test(i.key)){if(null==i.newValue){const r=e.ci(i.key);return e.ai(r,null)}{const r=e.ui(i.key,i.newValue);if(r)return e.ai(r.clientId,r)}}else if(e.Gs.test(i.key)){if(null!==i.newValue){const r=e.hi(i.key,i.newValue);if(r)return e.li(r)}}else if(e.zs.test(i.key)){if(null!==i.newValue){const r=e.fi(i.key,i.newValue);if(r)return e.di(r)}}else if(i.key===e.Hs){if(null!==i.newValue){const r=e.Xs(i.newValue);if(r)return e.Zs(r)}}else if(i.key===e.Qs){const r=function(l){let u=ho.T;if(null!=l)try{const f=JSON.parse(l);yt("number"==typeof f),u=f}catch(f){Hi("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(i.newValue);r!==ho.T&&e.sequenceNumberHandler(r)}else if(i.key===e.Js)return e.syncEngine.wi()}else e.Ks.push(i)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(t,e,i){const r=new __(this.currentUser,t,e,i),l=kI(this.persistenceKey,this.currentUser,t);this.setItem(l,r.Os())}ni(t){const e=kI(this.persistenceKey,this.currentUser,t);this.removeItem(e)}ri(t){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:t}))}ii(t,e,i){const r=kE(this.persistenceKey,t),l=new y_(t,e,i);this.setItem(r,l.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(t){const e=this.Ws.exec(t);return e?e[1]:null}ui(t,e){const i=this.ci(t);return xE.$s(i,e)}hi(t,e){const i=this.Gs.exec(t),r=Number(i[1]);return __.$s(new Fr(void 0!==i[2]?i[2]:null),r,e)}fi(t,e){const i=this.zs.exec(t),r=Number(i[1]);return y_.$s(r,e)}Xs(t){return OE.$s(t)}li(t){var e=this;return(0,ye.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine._i(t.batchId,t.state,t.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}di(t){return this.syncEngine.mi(t.targetId,t.state,t.error)}ai(t,e){const i=e?this.qs.insert(t,e):this.qs.remove(t),r=this.ti(this.qs),l=this.ti(i),u=[],f=[];return l.forEach(m=>{r.has(m)||u.push(m)}),r.forEach(m=>{l.has(m)||f.push(m)}),this.syncEngine.gi(u,f).then(()=>{this.qs=i})}Zs(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ti(t){let e=i_();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class Hk{constructor(){this.yi=new PE,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.yi.Fs(t),this.pi[t]||"not-current"}updateQueryState(t,e,i){this.pi[t]=e}removeLocalQueryTarget(t){this.yi.Ms(t)}isLocalQueryTarget(t){return this.yi.activeTargetIds.has(t)}clearQueryState(t){delete this.pi[t]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(t){return this.yi.activeTargetIds.has(t)}start(){return this.yi=new PE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class xI{Ti(t){}shutdown(){}}class OI{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Ri(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const zL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class PI{constructor(t){this.vi=t.vi,this.Vi=t.Vi}Si(t){this.Di=t}Ci(t){this.Ni=t}onMessage(t){this.xi=t}close(){this.Vi()}send(t){this.vi(t)}ki(){this.Di()}$i(t){this.Ni(t)}Oi(t){this.xi(t)}}class jk extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Fi=(t.ssl?"https":"http")+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(t,e,i,r){const l=this.Bi(t,e);Oe("RestConnection","Sending: ",l,i);const u={};return this.Ui(u,r),this.qi(t,l,u,i).then(f=>(Oe("RestConnection","Received: ",f),f),f=>{throw jm("RestConnection",`${t} failed with error: `,f,"url: ",l,"request:",i),f})}Ki(t,e,i,r){return this.Li(t,e,i,r)}Ui(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/"+Cp,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(const i in e.authHeaders)e.authHeaders.hasOwnProperty(i)&&(t[i]=e.authHeaders[i])}Bi(t,e){return`${this.Fi}/v1/${e}:${zL[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}qi(t,e,i,r){return new Promise((l,u)=>{const f=new ZR;f.listenOnce(zR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case LC.NO_ERROR:const w=f.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(w)),l(w);break;case LC.TIMEOUT:Oe("Connection",'RPC "'+t+'" timed out'),u(new Me(me.DEADLINE_EXCEEDED,"Request time out"));break;case LC.HTTP_ERROR:const D=f.getStatus();if(Oe("Connection",'RPC "'+t+'" failed with status:',D,"response text:",f.getResponseText()),D>0){const T=f.getResponseJson().error;if(T&&T.status&&T.message){const k=function(F){const j=F.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(j)>=0?j:me.UNKNOWN}(T.status);u(new Me(k,T.message))}else u(new Me(me.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Me(me.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Oe("Connection",'RPC "'+t+'" completed.')}});const m=JSON.stringify(r);f.send(e,"POST",m,i,15)})}ji(t,e){const i=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=CS(),l=ES(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new WR({})),this.Ui(u.initMessageHeaders,e),(0,B.uI)()||(0,B.b$)()||(0,B.d)()||(0,B.w1)()||(0,B.Mn)()||(0,B.ru)()||(u.httpHeadersOverwriteParam="$httpHeaders");const f=i.join("");Oe("Connection","Creating WebChannel: "+f,u);const m=r.createWebChannel(f,u);let w=!1,D=!1;const T=new PI({vi:F=>{D?Oe("Connection","Not sending because WebChannel is closed:",F):(w||(Oe("Connection","Opening WebChannel transport."),m.open(),w=!0),Oe("Connection","WebChannel sending:",F),m.send(F))},Vi:()=>m.close()}),k=(F,j,te)=>{F.listen(j,de=>{try{te(de)}catch(Pe){setTimeout(()=>{throw Pe},0)}})};return k(m,db.EventType.OPEN,()=>{D||Oe("Connection","WebChannel transport opened.")}),k(m,db.EventType.CLOSE,()=>{D||(D=!0,Oe("Connection","WebChannel transport closed"),T.$i())}),k(m,db.EventType.ERROR,F=>{D||(D=!0,jm("Connection","WebChannel transport errored:",F),T.$i(new Me(me.UNAVAILABLE,"The operation could not be completed")))}),k(m,db.EventType.MESSAGE,F=>{var j;if(!D){const te=F.data[0];yt(!!te);const de=te,Pe=de.error||(null===(j=de[0])||void 0===j?void 0:j.error);if(Pe){Oe("Connection","WebChannel received error:",Pe);const Ve=Pe.status;let pt=function(gn){const li=Ci[gn];if(void 0!==li)return Th(li)}(Ve),lt=Pe.message;void 0===pt&&(pt=me.INTERNAL,lt="Unknown error status: "+Ve+" with message "+Pe.message),D=!0,T.$i(new Me(pt,lt)),m.close()}else Oe("Connection","WebChannel received:",te),T.Oi(te)}}),k(l,qR.STAT_EVENT,F=>{F.stat===VC.PROXY?Oe("Connection","Detected buffering proxy"):F.stat===VC.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{T.ki()},0),T}}function Bb(){return"undefined"!=typeof window?window:null}function Ub(){return"undefined"!=typeof document?document:null}function $p(n){return new gk(n,!0)}class Hb{constructor(t,e,i=1e3,r=1.5,l=6e4){this.Oe=t,this.timerId=e,this.Qi=i,this.Wi=r,this.Gi=l,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(t){this.cancel();const e=Math.floor(this.zi+this.Zi()),i=Math.max(0,Date.now()-this.Ji),r=Math.max(0,e-i);r>0&&Oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),t())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class FE{constructor(t,e,i,r,l,u,f){this.Oe=t,this.er=i,this.nr=r,this.sr=l,this.credentialsProvider=u,this.listener=f,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Hb(t,e)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}stop(){var t=this;return(0,ye.Z)(function*(){t.ur()&&(yield t.close(0))})()}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(t){this.gr(),this.stream.send(t)}_r(){var t=this;return(0,ye.Z)(function*(){if(t.hr())return t.close(0)})()}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(t,e){var i=this;return(0,ye.Z)(function*(){i.gr(),i.yr(),i.ar.cancel(),i.ir++,4!==t?i.ar.reset():e&&e.code===me.RESOURCE_EXHAUSTED?(Hi(e.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),i.ar.Yi()):e&&e.code===me.UNAUTHENTICATED&&3!==i.state&&i.credentialsProvider.invalidateToken(),null!==i.stream&&(i.pr(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Ci(e)})()}pr(){}auth(){this.state=1;const t=this.Tr(this.ir),e=this.ir;this.credentialsProvider.getToken().then(i=>{this.ir===e&&this.Er(i)},i=>{t(()=>{const r=new Me(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Ir(r)})})}Er(t){const e=this.Tr(this.ir);this.stream=this.Ar(t),this.stream.Si(()=>{e(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(i=>{e(()=>this.Ir(i))}),this.stream.onMessage(i=>{e(()=>this.onMessage(i))})}lr(){var t=this;this.state=5,this.ar.Xi((0,ye.Z)(function*(){t.state=0,t.start()}))}Ir(t){return Oe("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Tr(t){return e=>{this.Oe.enqueueAndForget(()=>this.ir===t?e():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $k extends FE{constructor(t,e,i,r,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,l),this.N=r}Ar(t){return this.sr.ji("Listen",t)}onMessage(t){this.ar.reset();const e=function(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(m=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ot(),r=t.targetChange.targetIds||[],l=function(m,w){return m.D?(yt(void 0===w||"string"==typeof w),Bt.fromBase64String(w||"")):(yt(void 0===w||w instanceof Uint8Array),Bt.fromUint8Array(w||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,f=u&&function(m){const w=void 0===m.code?me.UNKNOWN:Th(m.code);return new Me(w,m.message||"")}(u);e=new zS(i,r,l,f||null)}else if("documentChange"in t){const i=t.documentChange,r=Cl(n,i.document.name),l=rr(i.document.updateTime),u=new Vr({mapValue:{fields:i.document.fields}}),f=zn.newFoundDocument(r,l,u);e=new Sb(i.targetIds||[],i.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const i=t.documentDelete,r=Cl(n,i.document),l=i.readTime?rr(i.readTime):Rt.min(),u=zn.newNoDocument(r,l);e=new Sb([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in t){const i=t.documentRemove,r=Cl(n,i.document);e=new Sb([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return ot();{const i=t.filter,l=new HL(i.count||0);e=new hk(i.targetId,l)}}var m;return e}(this.N,t),i=function(r){if(!("targetChange"in r))return Rt.min();const l=r.targetChange;return l.targetIds&&l.targetIds.length?Rt.min():l.readTime?rr(l.readTime):Rt.min()}(t);return this.listener.Rr(e,i)}br(t){const e={};e.database=o_(this.N),e.addTarget=function(r,l){let u;const f=l.target;return u=YC(f)?{documents:wk(r,f)}:{query:JS(r,f)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?u.resumeToken=r_(r,l.resumeToken):l.snapshotVersion.compareTo(Rt.min())>0&&(u.readTime=xp(r,l.snapshotVersion.toTimestamp())),u}(this.N,t);const i=function(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.mr(e)}Pr(t){const e={};e.database=o_(this.N),e.removeTarget=t,this.mr(e)}}class Gk extends FE{constructor(t,e,i,r,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,l),this.N=r,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(t){return this.sr.ji("Write",t)}onMessage(t){if(yt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.vr){this.ar.reset();const e=function(n,t){return n&&n.length>0?(yt(void 0!==t),n.map(e=>function(i,r){let l=rr(i.updateTime?i.updateTime:r);return l.isEqual(Rt.min())&&(l=rr(r)),new rE(l,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=rr(t.commitTime);return this.listener.Dr(i,e)}return yt(!t.writeResults||0===t.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const t={};t.database=o_(this.N),this.mr(t)}Sr(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Ib(this.N,i))};this.mr(e)}}class zk extends class{}{constructor(t,e,i){super(),this.credentials=t,this.sr=e,this.N=i,this.kr=!1}$r(){if(this.kr)throw new Me(me.FAILED_PRECONDITION,"The client has already been terminated.")}Li(t,e,i){return this.$r(),this.credentials.getToken().then(r=>this.sr.Li(t,e,i,r)).catch(r=>{throw"FirebaseError"===r.name?(r.code===me.UNAUTHENTICATED&&this.credentials.invalidateToken(),r):new Me(me.UNKNOWN,r.toString())})}Ki(t,e,i){return this.$r(),this.credentials.getToken().then(r=>this.sr.Ki(t,e,i,r)).catch(r=>{throw"FirebaseError"===r.name?(r.code===me.UNAUTHENTICATED&&this.credentials.invalidateToken(),r):new Me(me.UNKNOWN,r.toString())})}terminate(){this.kr=!0}}class qk{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(t){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Br("Offline")))}set(t){this.Kr(),this.Or=0,"Online"===t&&(this.Mr=!1),this.Br(t)}Br(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Ur(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Hi(e),this.Mr=!1):Oe("OnlineStateTracker",e)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class Wk{constructor(t,e,i,r,l){var u=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=l,this.zr.Ti(f=>{i.enqueueAndForget((0,ye.Z)(function*(){var m;Ju(u)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ye.Z)(function*(w){const D=Be(w);D.Wr.add(4),yield Oh(D),D.Hr.set("Unknown"),D.Wr.delete(4),yield v_(D)}),function(w){return m.apply(this,arguments)})(u))}))}),this.Hr=new qk(i,r)}}function v_(n){return xh.apply(this,arguments)}function xh(){return(xh=(0,ye.Z)(function*(n){if(Ju(n))for(const t of n.Gr)yield t(!0)})).apply(this,arguments)}function Oh(n){return jb.apply(this,arguments)}function jb(){return(jb=(0,ye.Z)(function*(n){for(const t of n.Gr)yield t(!1)})).apply(this,arguments)}function b_(n,t){const e=Be(n);e.Qr.has(t.targetId)||(e.Qr.set(t.targetId,t),Gb(e)?VE(e):Fh(e).hr()&&$b(e,t))}function Gp(n,t){const e=Be(n),i=Fh(e);e.Qr.delete(t),i.hr()&&LE(e,t),0===e.Qr.size&&(i.hr()?i.wr():Ju(e)&&e.Hr.set("Unknown"))}function $b(n,t){n.Jr.Y(t.targetId),Fh(n).br(t)}function LE(n,t){n.Jr.Y(t),Fh(n).Pr(t)}function VE(n){n.Jr=new fk({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Tt:t=>n.Qr.get(t)||null}),Fh(n).start(),n.Hr.Lr()}function Gb(n){return Ju(n)&&!Fh(n).ur()&&n.Qr.size>0}function Ju(n){return 0===Be(n).Wr.size}function FI(n){n.Jr=void 0}function Zk(n){return BE.apply(this,arguments)}function BE(){return(BE=(0,ye.Z)(function*(n){n.Qr.forEach((t,e)=>{$b(n,t)})})).apply(this,arguments)}function w_(n,t){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,ye.Z)(function*(n,t){FI(n),Gb(n)?(n.Hr.qr(t),VE(n)):n.Hr.set("Unknown")})).apply(this,arguments)}function Yk(n,t,e){return C_.apply(this,arguments)}function C_(){return(C_=(0,ye.Z)(function*(n,t,e){if(n.Hr.set("Online"),t instanceof zS&&2===t.state&&t.cause)try{yield(i=(0,ye.Z)(function*(r,l){const u=l.cause;for(const f of l.targetIds)r.Qr.has(f)&&(yield r.remoteSyncer.rejectListen(f,u),r.Qr.delete(f),r.Jr.removeTarget(f))}),function(r,l){return i.apply(this,arguments)})(n,t)}catch(i){Oe("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield mo(n,i)}else if(t instanceof Sb?n.Jr.rt(t):t instanceof hk?n.Jr.ft(t):n.Jr.at(t),!e.isEqual(Rt.min()))try{const i=yield wI(n.localStore);e.compareTo(i)>=0&&(yield function(r,l){const u=r.Jr._t(l);return u.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const w=r.Qr.get(m);w&&r.Qr.set(m,w.withResumeToken(f.resumeToken,l))}}),u.targetMismatches.forEach(f=>{const m=r.Qr.get(f);if(!m)return;r.Qr.set(f,m.withResumeToken(Bt.EMPTY_BYTE_STRING,m.snapshotVersion)),LE(r,f);const w=new Yo(m.target,f,1,m.sequenceNumber);$b(r,w)}),r.remoteSyncer.applyRemoteEvent(u)}(n,e))}catch(i){Oe("RemoteStore","Failed to raise snapshot:",i),yield mo(n,i)}var i})).apply(this,arguments)}function mo(n,t,e){return UE.apply(this,arguments)}function UE(){return(UE=(0,ye.Z)(function*(n,t,e){if(!Ah(t))throw t;n.Wr.add(1),yield Oh(n),n.Hr.set("Offline"),e||(e=()=>wI(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield e(),n.Wr.delete(1),yield v_(n)}))})).apply(this,arguments)}function E_(n,t){return t().catch(e=>mo(n,e,t))}function zp(n){return HE.apply(this,arguments)}function HE(){return(HE=(0,ye.Z)(function*(n){const t=Be(n),e=Mc(t);let i=t.jr.length>0?t.jr[t.jr.length-1].batchId:-1;for(;qL(t);)try{const r=yield Fk(t.localStore,i);if(null===r){0===t.jr.length&&e.wr();break}i=r.batchId,jE(t,r)}catch(r){yield mo(t,r)}zb(t)&&$E(t)})).apply(this,arguments)}function qL(n){return Ju(n)&&n.jr.length<10}function jE(n,t){n.jr.push(t);const e=Mc(n);e.hr()&&e.Vr&&e.Sr(t.mutations)}function zb(n){return Ju(n)&&!Mc(n).ur()&&n.jr.length>0}function $E(n){Mc(n).start()}function GE(n){return D_.apply(this,arguments)}function D_(){return(D_=(0,ye.Z)(function*(n){Mc(n).Nr()})).apply(this,arguments)}function Kk(n){return zE.apply(this,arguments)}function zE(){return(zE=(0,ye.Z)(function*(n){const t=Mc(n);for(const e of n.jr)t.Sr(e.mutations)})).apply(this,arguments)}function Qk(n,t,e){return qE.apply(this,arguments)}function qE(){return(qE=(0,ye.Z)(function*(n,t,e){const i=n.jr.shift(),r=zu.from(i,t,e);yield E_(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield zp(n)})).apply(this,arguments)}function LI(n,t){return T_.apply(this,arguments)}function T_(){return(T_=(0,ye.Z)(function*(n,t){var e;t&&Mc(n).Vr&&(yield(e=(0,ye.Z)(function*(i,r){if($S(l=r.code)&&l!==me.ABORTED){const u=i.jr.shift();Mc(i).dr(),yield E_(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield zp(i)}var l}),function(i,r){return e.apply(this,arguments)})(n,t)),zb(n)&&$E(n)})).apply(this,arguments)}function qb(n,t){return Wb.apply(this,arguments)}function Wb(){return(Wb=(0,ye.Z)(function*(n,t){const e=Be(n);t?(e.Wr.delete(2),yield v_(e)):t||(e.Wr.add(2),yield Oh(e),e.Hr.set("Unknown"))})).apply(this,arguments)}function Fh(n){return n.Yr||(n.Yr=function(t,e,i){const r=Be(t);return r.$r(),new $k(e,r.sr,r.credentials,r.N,i)}(n.datastore,n.asyncQueue,{Si:Zk.bind(null,n),Ci:w_.bind(null,n),Rr:Yk.bind(null,n)}),n.Gr.push(function(){var t=(0,ye.Z)(function*(e){e?(n.Yr.dr(),Gb(n)?VE(n):n.Hr.set("Unknown")):(yield n.Yr.stop(),FI(n))});return function(e){return t.apply(this,arguments)}}())),n.Yr}function Mc(n){return n.Xr||(n.Xr=function(t,e,i){const r=Be(t);return r.$r(),new Gk(e,r.sr,r.credentials,r.N,i)}(n.datastore,n.asyncQueue,{Si:GE.bind(null,n),Ci:LI.bind(null,n),Cr:Kk.bind(null,n),Dr:Qk.bind(null,n)}),n.Gr.push(function(){var t=(0,ye.Z)(function*(e){e?(n.Xr.dr(),yield zp(n)):(yield n.Xr.stop(),n.jr.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.jr.length} pending writes`),n.jr=[]))});return function(e){return t.apply(this,arguments)}}())),n.Xr}class WE{constructor(t,e,i,r,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(t,e,i,r,l){const u=Date.now()+i,f=new WE(t,e,u,r,l);return f.start(i),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(me.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lh(n,t){if(Hi("AsyncQueue",`${t}: ${n}`),Ah(n))return new Me(me.UNAVAILABLE,`${t}: ${n}`);throw n}class Vh{constructor(t){this.comparator=t?(e,i)=>t(e,i)||it.comparator(e.key,i.key):(e,i)=>it.comparator(e.key,i.key),this.keyedMap=hE(),this.sortedSet=new ir(this.comparator)}static emptySet(t){return new Vh(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Vh)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Vh;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class VI{constructor(){this.Zr=new ir(it.comparator)}track(t){const e=t.doc.key,i=this.Zr.get(e);i?0!==t.type&&3===i.type?this.Zr=this.Zr.insert(e,t):3===t.type&&1!==i.type?this.Zr=this.Zr.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Zr=this.Zr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Zr=this.Zr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Zr=this.Zr.remove(e):1===t.type&&2===i.type?this.Zr=this.Zr.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Zr=this.Zr.insert(e,{type:2,doc:t.doc}):ot():this.Zr=this.Zr.insert(e,t)}eo(){const t=[];return this.Zr.inorderTraversal((e,i)=>{t.push(i)}),t}}class Bh{constructor(t,e,i,r,l,u,f,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(t,e,i,r){const l=[];return e.forEach(u=>{l.push({type:0,doc:u})}),new Bh(t,e,Vh.emptySet(e),l,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ap(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class BI{constructor(){this.no=void 0,this.listeners=[]}}class WL{constructor(){this.queries=new Hp(t=>VS(t),Ap),this.onlineState="Unknown",this.so=new Set}}function Ur(n,t){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,ye.Z)(function*(n,t){const e=Be(n),i=t.query;let r=!1,l=e.queries.get(i);if(l||(r=!0,l=new BI),r)try{l.no=yield e.onListen(i)}catch(u){const f=Lh(u,`Initialization of query '${XC(t.query)}' failed`);return void t.onError(f)}e.queries.set(i,l),l.listeners.push(t),t.io(e.onlineState),l.no&&t.ro(l.no)&&KE(e)})).apply(this,arguments)}function ZE(n,t){return YE.apply(this,arguments)}function YE(){return(YE=(0,ye.Z)(function*(n,t){const e=Be(n),i=t.query;let r=!1;const l=e.queries.get(i);if(l){const u=l.listeners.indexOf(t);u>=0&&(l.listeners.splice(u,1),r=0===l.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)})).apply(this,arguments)}function ZL(n,t){const e=Be(n);let i=!1;for(const r of t){const u=e.queries.get(r.query);if(u){for(const f of u.listeners)f.ro(r)&&(i=!0);u.no=r}}i&&KE(e)}function S_(n,t,e){const i=Be(n),r=i.queries.get(t);if(r)for(const l of r.listeners)l.onError(e);i.queries.delete(t)}function KE(n){n.so.forEach(t=>{t.next()})}class I_{constructor(t,e,i){this.query=t,this.oo=e,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=i||{}}ro(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Bh(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.uo(t)&&(this.oo.next(t),e=!0):this.ho(t,this.onlineState)&&(this.lo(t),e=!0),this.ao=t,e}onError(t){this.oo.error(t)}io(t){this.onlineState=t;let e=!1;return this.ao&&!this.co&&this.ho(this.ao,t)&&(this.lo(this.ao),e=!0),e}ho(t,e){return!t.fromCache||!(this.options.fo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}uo(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(t){t=Bh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.oo.next(t)}}class Jk{constructor(t,e){this.payload=t,this.byteLength=e}wo(){return"metadata"in this.payload}}class QE{constructor(t){this.N=t}zn(t){return Cl(this.N,t)}Hn(t){return t.metadata.exists?KS(this.N,t.document,!1):zn.newNoDocument(this.zn(t.metadata.name),this.Jn(t.metadata.readTime))}Jn(t){return rr(t)}}class Xk{constructor(t,e,i){this._o=t,this.localStore=e,this.N=i,this.queries=[],this.documents=[],this.progress=UI(t)}mo(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}yo(t){const e=new Map,i=new QE(this.N);for(const r of t)if(r.metadata.queries){const l=i.zn(r.metadata.name);for(const u of r.metadata.queries){const f=(e.get(u)||Tn()).add(l);e.set(u,f)}}return e}complete(){var t=this;return(0,ye.Z)(function*(){const e=yield function(n,t,e,i){return ME.apply(this,arguments)}(t.localStore,new QE(t.N),t.documents,t._o.id),i=t.yo(t.documents);for(const r of t.queries)yield II(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",new xk(Object.assign({},t.progress),e)})()}}function UI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Zb{constructor(t){this.key=t}}class JE{constructor(t){this.key=t}}class XE{constructor(t,e){this.query=t,this.po=e,this.To=null,this.current=!1,this.Eo=Tn(),this.mutatedKeys=Tn(),this.Io=Eb(t),this.Ao=new Vh(this.Io)}get Ro(){return this.po}bo(t,e){const i=e?e.Po:new VI,r=e?e.Ao:this.Ao;let l=e?e.mutatedKeys:this.mutatedKeys,u=r,f=!1;const m=wb(this.query)&&r.size===this.query.limit?r.last():null,w=Qm(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((D,T)=>{const k=r.get(D),F=Jm(this.query,T)?T:null,j=!!k&&this.mutatedKeys.has(k.key),te=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let de=!1;k&&F?k.data.isEqual(F.data)?j!==te&&(i.track({type:3,doc:F}),de=!0):this.vo(k,F)||(i.track({type:2,doc:F}),de=!0,(m&&this.Io(F,m)>0||w&&this.Io(F,w)<0)&&(f=!0)):!k&&F?(i.track({type:0,doc:F}),de=!0):k&&!F&&(i.track({type:1,doc:k}),de=!0,(m||w)&&(f=!0)),de&&(F?(u=u.add(F),l=te?l.add(D):l.delete(D)):(u=u.delete(D),l=l.delete(D)))}),wb(this.query)||Qm(this.query))for(;u.size>this.query.limit;){const D=wb(this.query)?u.last():u.first();u=u.delete(D.key),l=l.delete(D.key),i.track({type:1,doc:D})}return{Ao:u,Po:i,Ln:f,mutatedKeys:l}}vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Ao;this.Ao=t.Ao,this.mutatedKeys=t.mutatedKeys;const l=t.Po.eo();l.sort((w,D)=>function(T,k){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return F(T)-F(k)}(w.type,D.type)||this.Io(w.doc,D.doc)),this.Vo(i);const u=e?this.So():[],f=0===this.Eo.size&&this.current?1:0,m=f!==this.To;return this.To=f,0!==l.length||m?{snapshot:new Bh(this.query,t.Ao,r,l,t.mutatedKeys,0===f,m,!1),Do:u}:{Do:u}}io(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new VI,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(t){return!this.po.has(t)&&!!this.Ao.has(t)&&!this.Ao.get(t).hasLocalMutations}Vo(t){t&&(t.addedDocuments.forEach(e=>this.po=this.po.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.po=this.po.delete(e)),this.current=t.current)}So(){if(!this.current)return[];const t=this.Eo;this.Eo=Tn(),this.Ao.forEach(i=>{this.Co(i.key)&&(this.Eo=this.Eo.add(i.key))});const e=[];return t.forEach(i=>{this.Eo.has(i)||e.push(new JE(i))}),this.Eo.forEach(i=>{t.has(i)||e.push(new Zb(i))}),e}No(t){this.po=t.Gn,this.Eo=Tn();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return Bh.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class Yb{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class eD{constructor(t){this.key=t,this.ko=!1}}class YL{constructor(t,e,i,r,l,u){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.$o={},this.Oo=new Hp(f=>VS(f),Ap),this.Fo=new Map,this.Mo=new Set,this.Lo=new ir(it.comparator),this.Bo=new Map,this.Uo=new Ku,this.qo={},this.Ko=new Map,this.jo=Bp.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}function HI(n,t){return tD.apply(this,arguments)}function tD(){return(tD=(0,ye.Z)(function*(n,t){const e=dD(n);let i,r;const l=e.Oo.get(t);if(l)i=l.targetId,e.sharedClientState.addLocalQueryTarget(i),r=l.view.xo();else{const u=yield p_(e.localStore,jo(t)),f=e.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield Kb(e,t,i,"current"===f),e.isPrimaryClient&&b_(e.remoteStore,u)}return r})).apply(this,arguments)}function Kb(n,t,e,i){return qp.apply(this,arguments)}function qp(){return(qp=(0,ye.Z)(function*(n,t,e,i){n.Wo=(D,T,k)=>{return(F=(0,ye.Z)(function*(j,te,de,Pe){let Ve=te.view.bo(de);Ve.Ln&&(Ve=yield jp(j.localStore,te.query,!1).then(({documents:gn})=>te.view.bo(gn,Ve)));const pt=Pe&&Pe.targetChanges.get(te.targetId),lt=te.view.applyChanges(Ve,j.isPrimaryClient,pt);return t0(j,te.targetId,lt.Do),lt.snapshot}),function(j,te,de,Pe){return F.apply(this,arguments)})(n,D,T,k);var F};const r=yield jp(n.localStore,t,!0),l=new XE(t,r.Gn),u=l.bo(r.documents),f=kp.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),m=l.applyChanges(u,n.isPrimaryClient,f);t0(n,e,m.Do);const w=new Yb(t,e,l);return n.Oo.set(t,w),n.Fo.has(e)?n.Fo.get(e).push(t):n.Fo.set(e,[t]),m.snapshot})).apply(this,arguments)}function jI(n,t){return nD.apply(this,arguments)}function nD(){return(nD=(0,ye.Z)(function*(n,t){const e=Be(n),i=e.Oo.get(t),r=e.Fo.get(i.targetId);if(r.length>1)return e.Fo.set(i.targetId,r.filter(l=>!Ap(l,t))),void e.Oo.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield g_(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),Gp(e.remoteStore,i.targetId),Uh(e,i.targetId)}).catch(Nc))):(Uh(e,i.targetId),yield g_(e.localStore,i.targetId,!0))})).apply(this,arguments)}function A_(){return(A_=(0,ye.Z)(function*(n,t,e){const i=XI(n);try{const r=yield function(l,u){const f=Be(l),m=nr.now(),w=u.reduce((T,k)=>T.add(k.key),Tn());let D;return f.persistence.runTransaction("Locally write mutations","readwrite",T=>f.Qn.Pn(T,w).next(k=>{D=k;const F=[];for(const j of u){const te=oE(j,D.get(j.key));null!=te&&F.push(new Tc(j.key,te,qC(te.value.mapValue),wi.exists(!0)))}return f.In.addMutationBatch(T,m,F,u)})).then(T=>(T.applyToLocalDocumentSet(D),{batchId:T.batchId,changes:D}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(l,u,f){let m=l.qo[l.currentUser.toKey()];m||(m=new ir(rn)),m=m.insert(u,f),l.qo[l.currentUser.toKey()]=m}(i,r.batchId,e),yield Rc(i,r.changes),yield zp(i.remoteStore)}catch(r){const l=Lh(r,"Failed to persist write");e.reject(l)}})).apply(this,arguments)}function $I(n,t){return rD.apply(this,arguments)}function rD(){return(rD=(0,ye.Z)(function*(n,t){const e=Be(n);try{const i=yield CI(e.localStore,t);t.targetChanges.forEach((r,l)=>{const u=e.Bo.get(l);u&&(yt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.ko=!0:r.modifiedDocuments.size>0?yt(u.ko):r.removedDocuments.size>0&&(yt(u.ko),u.ko=!1))}),yield Rc(e,i,t)}catch(i){yield Nc(i)}})).apply(this,arguments)}function sD(n,t,e){const i=Be(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.Oo.forEach((l,u)=>{const f=u.view.io(t);f.snapshot&&r.push(f.snapshot)}),function(l,u){const f=Be(l);f.onlineState=u;let m=!1;f.queries.forEach((w,D)=>{for(const T of D.listeners)T.io(u)&&(m=!0)}),m&&KE(f)}(i.eventManager,t),r.length&&i.$o.Rr(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function GI(n,t,e){return Qb.apply(this,arguments)}function Qb(){return(Qb=(0,ye.Z)(function*(n,t,e){const i=Be(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Bo.get(t),l=r&&r.key;if(l){let u=new ir(it.comparator);u=u.insert(l,zn.newNoDocument(l,Rt.min()));const f=Tn().add(l),m=new Sh(Rt.min(),new Map,new vn(rn),u,f);yield $I(i,m),i.Lo=i.Lo.remove(l),i.Bo.delete(t),cD(i)}else yield g_(i.localStore,t,!1).then(()=>Uh(i,t,e)).catch(Nc)})).apply(this,arguments)}function ex(n,t){return Jb.apply(this,arguments)}function Jb(){return(Jb=(0,ye.Z)(function*(n,t){const e=Be(n),i=t.batch.batchId;try{const r=yield Pk(e.localStore,t);e0(e,i,null),aD(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Rc(e,r)}catch(r){yield Nc(r)}})).apply(this,arguments)}function zI(n,t,e){return oD.apply(this,arguments)}function oD(){return(oD=(0,ye.Z)(function*(n,t,e){const i=Be(n);try{const r=yield function(l,u){const f=Be(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return f.In.lookupMutationBatch(m,u).next(D=>(yt(null!==D),w=D.keys(),f.In.removeMutationBatch(m,D))).next(()=>f.In.performConsistencyCheck(m)).next(()=>f.Qn.Pn(m,w))})}(i.localStore,t);e0(i,t,e),aD(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Rc(i,r)}catch(r){yield Nc(r)}})).apply(this,arguments)}function Xb(){return(Xb=(0,ye.Z)(function*(n,t){const e=Be(n);Ju(e.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(l){const u=Be(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.In.getHighestUnacknowledgedBatchId(f))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Ko.get(i)||[];r.push(t),e.Ko.set(i,r)}catch(i){const r=Lh(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})).apply(this,arguments)}function aD(n,t){(n.Ko.get(t)||[]).forEach(e=>{e.resolve()}),n.Ko.delete(t)}function e0(n,t,e){const i=Be(n);let r=i.qo[i.currentUser.toKey()];if(r){const l=r.get(t);l&&(e?l.reject(e):l.resolve(),r=r.remove(t)),i.qo[i.currentUser.toKey()]=r}}function Uh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Fo.get(t))n.Oo.delete(i),e&&n.$o.Go(i,e);n.Fo.delete(t),n.isPrimaryClient&&n.Uo.cs(t).forEach(i=>{n.Uo.containsKey(i)||lD(n,i)})}function lD(n,t){n.Mo.delete(t.path.canonicalString());const e=n.Lo.get(t);null!==e&&(Gp(n.remoteStore,e),n.Lo=n.Lo.remove(t),n.Bo.delete(e),cD(n))}function t0(n,t,e){for(const i of e)i instanceof Zb?(n.Uo.addReference(i.key,t),nx(n,i)):i instanceof JE?(Oe("SyncEngine","Document no longer in limbo: "+i.key),n.Uo.removeReference(i.key,t),n.Uo.containsKey(i.key)||lD(n,i.key)):ot()}function nx(n,t){const e=t.key,i=e.path.canonicalString();n.Lo.get(e)||n.Mo.has(i)||(Oe("SyncEngine","New document in limbo: "+e),n.Mo.add(i),cD(n))}function cD(n){for(;n.Mo.size>0&&n.Lo.size<n.maxConcurrentLimboResolutions;){const t=n.Mo.values().next().value;n.Mo.delete(t);const e=new it(yn.fromString(t)),i=n.jo.next();n.Bo.set(i,new eD(e)),n.Lo=n.Lo.insert(e,i),b_(n.remoteStore,new Yo(jo(Eh(e.path)),i,2,ho.T))}}function Rc(n,t,e){return n0.apply(this,arguments)}function n0(){return(n0=(0,ye.Z)(function*(n,t,e){const i=Be(n),r=[],l=[],u=[];var f;i.Oo.isEmpty()||(i.Oo.forEach((f,m)=>{u.push(i.Wo(m,t,e).then(w=>{if(w){i.isPrimaryClient&&i.sharedClientState.updateQueryState(m.targetId,w.fromCache?"not-current":"current"),r.push(w);const D=kh.kn(m.targetId,w);l.push(D)}}))}),yield Promise.all(u),i.$o.Rr(r),yield(f=(0,ye.Z)(function*(m,w){const D=Be(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>Ne.forEach(w,k=>Ne.forEach(k.Nn,F=>D.persistence.referenceDelegate.addReference(T,k.targetId,F)).next(()=>Ne.forEach(k.xn,F=>D.persistence.referenceDelegate.removeReference(T,k.targetId,F)))))}catch(T){if(!Ah(T))throw T;Oe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of w){const k=T.targetId;if(!T.fromCache){const F=D.Un.get(k),te=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);D.Un=D.Un.insert(k,te)}}}),function(m,w){return f.apply(this,arguments)})(i.localStore,l))})).apply(this,arguments)}function KL(n,t){return qI.apply(this,arguments)}function qI(){return(qI=(0,ye.Z)(function*(n,t){const e=Be(n);if(!e.currentUser.isEqual(t)){Oe("SyncEngine","User change. New user:",t.toKey());const i=yield bI(e.localStore,t);e.currentUser=t,(r=e).Ko.forEach(u=>{u.forEach(f=>{f.reject(new Me(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ko.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Rc(e,i.Wn)}var r})).apply(this,arguments)}function QL(n,t){const e=Be(n),i=e.Bo.get(t);if(i&&i.ko)return Tn().add(i.key);{let r=Tn();const l=e.Fo.get(t);if(!l)return r;for(const u of l){const f=e.Oo.get(u);r=r.unionWith(f.view.Ro)}return r}}function JL(n,t){return WI.apply(this,arguments)}function WI(){return(WI=(0,ye.Z)(function*(n,t){const e=Be(n),i=yield jp(e.localStore,t.query,!0),r=t.view.No(i);return e.isPrimaryClient&&t0(e,t.targetId,r.Do),r})).apply(this,arguments)}function XL(n){return ZI.apply(this,arguments)}function ZI(){return(ZI=(0,ye.Z)(function*(n){const t=Be(n);return SI(t.localStore).then(e=>Rc(t,e))})).apply(this,arguments)}function e2(n,t,e,i){return YI.apply(this,arguments)}function YI(){return(YI=(0,ye.Z)(function*(n,t,e,i){const r=Be(n),l=yield function(u,f){const m=Be(u),w=Be(m.In);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Xt(D,f).next(T=>T?m.Qn.Pn(D,T):Ne.resolve(null)))}(r.localStore,t);var f;null!==l?("pending"===e?yield zp(r.remoteStore):"acknowledged"===e||"rejected"===e?(e0(r,t,i||null),aD(r,t),f=t,Be(Be(r.localStore).In).te(f)):ot(),yield Rc(r,l)):Oe("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function KI(){return(KI=(0,ye.Z)(function*(n,t){const e=Be(n);if(dD(e),XI(e),!0===t&&!0!==e.Qo){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield ix(e,i.toArray());e.Qo=!0,yield qb(e.remoteStore,!0);for(const l of r)b_(e.remoteStore,l)}else if(!1===t&&!1!==e.Qo){const i=[];let r=Promise.resolve();e.Fo.forEach((l,u)=>{e.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(Uh(e,u),g_(e.localStore,u,!0))),Gp(e.remoteStore,u)}),yield r,yield ix(e,i),function(l){const u=Be(l);u.Bo.forEach((f,m)=>{Gp(u.remoteStore,m)}),u.Uo.us(),u.Bo=new Map,u.Lo=new ir(it.comparator)}(e),e.Qo=!1,yield qb(e.remoteStore,!1)}})).apply(this,arguments)}function ix(n,t,e){return QI.apply(this,arguments)}function QI(){return(QI=(0,ye.Z)(function*(n,t,e){const i=Be(n),r=[],l=[];for(const u of t){let f;const m=i.Fo.get(u);if(m&&0!==m.length){f=yield p_(i.localStore,jo(m[0]));for(const w of m){const D=i.Oo.get(w),T=yield JL(i,D);T.snapshot&&l.push(T.snapshot)}}else{const w=yield TI(i.localStore,u);f=yield p_(i.localStore,w),yield Kb(i,rx(w),u,!1)}r.push(f)}return i.$o.Rr(l),r})).apply(this,arguments)}function rx(n){return LS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function n2(n){const t=Be(n);return Be(Be(t.localStore).persistence).pn()}function r2(n,t,e,i){return JI.apply(this,arguments)}function JI(){return(JI=(0,ye.Z)(function*(n,t,e,i){const r=Be(n);if(r.Qo)Oe("SyncEngine","Ignoring unexpected query state notification.");else if(r.Fo.has(t))switch(e){case"current":case"not-current":{const l=yield SI(r.localStore),u=Sh.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield Rc(r,l,u);break}case"rejected":yield g_(r.localStore,t,!0),Uh(r,t,i);break;default:ot()}})).apply(this,arguments)}function sx(n,t,e){return uD.apply(this,arguments)}function uD(){return(uD=(0,ye.Z)(function*(n,t,e){const i=dD(n);if(i.Qo){for(const r of t){if(i.Fo.has(r)){Oe("SyncEngine","Adding an already active target "+r);continue}const l=yield TI(i.localStore,r),u=yield p_(i.localStore,l);yield Kb(i,rx(l),u.targetId,!1),b_(i.remoteStore,u)}for(const r of e)i.Fo.has(r)&&(yield g_(i.localStore,r,!1).then(()=>{Gp(i.remoteStore,r),Uh(i,r)}).catch(Nc))}})).apply(this,arguments)}function dD(n){const t=Be(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=$I.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GI.bind(null,t),t.$o.Rr=ZL.bind(null,t.eventManager),t.$o.Go=S_.bind(null,t.eventManager),t}function XI(n){const t=Be(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ex.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zI.bind(null,t),t}class ox{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ye.Z)(function*(){e.N=$p(t.databaseInfo.databaseId),e.sharedClientState=e.Ho(t),e.persistence=e.Jo(t),yield e.persistence.start(),e.gcScheduler=e.Yo(t),e.localStore=e.Xo(t)})()}Yo(t){return null}Xo(t){return vI(this.persistence,new Ok,t.initialUser,this.N)}Jo(t){return new NI(Vb.Ns,this.N)}Ho(t){return new Hk}terminate(){var t=this;return(0,ye.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class eA extends ox{constructor(t,e,i){super(),this.Zo=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,ye.Z)(function*(){yield e().call(i,t),yield function(n){return NE.apply(this,arguments)}(i.localStore),yield i.Zo.initialize(i,t),yield XI(i.Zo.syncEngine),yield zp(i.Zo.remoteStore),yield i.persistence.nn(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Xo(t){return vI(this.persistence,new Ok,t.initialUser,this.N)}Yo(t){return new Nk(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}Jo(t){const e=SE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new TE(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,Bb(),Ub(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(t){return new Hk}}class ax extends eA{constructor(t,e){super(t,e,!1),this.Zo=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,ye.Z)(function*(){yield e().call(i,t);const r=i.Zo.syncEngine;i.sharedClientState instanceof Qu&&(i.sharedClientState.syncEngine={_i:e2.bind(null,r),mi:r2.bind(null,r),gi:sx.bind(null,r),pn:n2.bind(null,r),wi:XL.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.nn(function(){var l=(0,ye.Z)(function*(u){yield function(n,t){return KI.apply(this,arguments)}(i.Zo.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):u||i.gcScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}Ho(t){const e=Bb();if(!Qu.bt(e))throw new Me(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=SE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Qu(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class hD{initialize(t,e){var i=this;return(0,ye.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>sD(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=KL.bind(null,i.syncEngine),yield qb(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new WL}createDatastore(t){const e=$p(t.databaseInfo.databaseId),i=new jk(t.databaseInfo);return new zk(t.credentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,l=f=>sD(this.syncEngine,f,0),u=OI.bt()?new OI:new xI,new Wk(e,i,r,l,u);var e,i,r,l,u}createSyncEngine(t,e){return function(i,r,l,u,f,m,w){const D=new YL(i,r,l,u,f,m);return w&&(D.Qo=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,ye.Z)(function*(e){const i=Be(e);Oe("RemoteStore","RemoteStore shutting down."),i.Wr.add(5),yield Oh(i),i.zr.shutdown(),i.Hr.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function lx(n,t=10240){let e=0;return{read:()=>(0,ye.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fD{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.tc(this.observer.next,t)}error(t){this.observer.error?this.tc(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}ec(){this.muted=!0}tc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class o2{constructor(t,e){this.nc=t,this.N=e,this.metadata=new tr,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(i=>{i&&i.wo()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.nc.cancel()}getMetadata(){var t=this;return(0,ye.Z)(function*(){return t.metadata.promise})()}zo(){var t=this;return(0,ye.Z)(function*(){return yield t.getMetadata(),t.ic()})()}ic(){var t=this;return(0,ye.Z)(function*(){const e=yield t.rc();if(null===e)return null;const i=t.sc.decode(e),r=Number(i);isNaN(r)&&t.oc(`length string (${i}) is not valid number`);const l=yield t.cc(r);return new Jk(JSON.parse(l),e.length+r)})()}ac(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}rc(){var t=this;return(0,ye.Z)(function*(){for(;t.ac()<0&&!(yield t.uc()););if(0===t.buffer.length)return null;const e=t.ac();e<0&&t.oc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}cc(t){var e=this;return(0,ye.Z)(function*(){for(;e.buffer.length<t;)(yield e.uc())&&e.oc("Reached the end of bundle when more is expected.");const i=e.sc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}oc(t){throw this.nc.cancel(),new Error(`Invalid bundle format: ${t}`)}uc(){var t=this;return(0,ye.Z)(function*(){const e=yield t.nc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class a2{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Me(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ye.Z)(function*(l,u){const f=Be(l),m=o_(f.N)+"/documents",w={documents:u.map(F=>Sc(f.N,F))},D=yield f.Ki("BatchGetDocuments",m,w),T=new Map;D.forEach(F=>{const j=function(n,t){return"found"in t?function(e,i){yt(!!i.found);const r=Cl(e,i.found.name),l=rr(i.found.updateTime),u=new Vr({mapValue:{fields:i.found.fields}});return zn.newFoundDocument(r,l,u)}(n,t):"missing"in t?function(e,i){yt(!!i.missing),yt(!!i.readTime);const r=Cl(e,i.missing),l=rr(i.readTime);return zn.newNoDocument(r,l)}(n,t):ot()}(f.N,F);T.set(j.key.toString(),j)});const k=[];return u.forEach(F=>{const j=T.get(F.toString());yt(!!j),k.push(j)}),k}),function(l,u){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new n_(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const l=it.fromPath(r);t.mutations.push(new ju(l,t.precondition(l)))}),yield(i=(0,ye.Z)(function*(r,l){const u=Be(r),f=o_(u.N)+"/documents",m={writes:l.map(w=>Ib(u.N,w))};yield u.Li("Commit",f,m)}),function(r,l){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ot();e=Rt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Me(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?wi.updateTime(e):wi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Rt.min()))throw new Me(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wi.updateTime(e)}return wi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class cx{constructor(t,e,i,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=i,this.deferred=r,this.hc=5,this.ar=new Hb(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){var t=this;this.ar.Xi((0,ye.Z)(function*(){const e=new a2(t.datastore),i=t.fc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(l=>{t.dc(l)}))}).catch(r=>{t.dc(r)})}))}fc(t){try{const e=this.updateFunction(t);return!Bu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}dc(t){this.hc>0&&this.wc(t)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(t)}wc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!$S(e)}return!1}}class l2{constructor(t,e,i){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=i,this.user=Fr.UNAUTHENTICATED,this.clientId=wh.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(e,function(){var l=(0,ye.Z)(function*(u){Oe("FirestoreClient","Received user=",u.uid),yield r.credentialListener(u),r.user=u});return function(u){return l.apply(this,arguments)}}())}getConfiguration(){var t=this;return(0,ye.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,credentials:t.credentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.credentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.credentials.shutdown(),e.resolve()}catch(i){const r=Lh(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function tA(n,t){return N_.apply(this,arguments)}function N_(){return(N_=(0,ye.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,ye.Z)(function*(l){i.isEqual(l)||(yield bI(t.localStore,l),i=l)});return function(l){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function Hh(n,t){return r0.apply(this,arguments)}function r0(){return(r0=(0,ye.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield pD(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>{return(l=(0,ye.Z)(function*(u,f){const m=Be(u);m.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const w=Ju(m);m.Wr.add(3),yield Oh(m),w&&m.Hr.set("Unknown"),yield m.remoteSyncer.handleCredentialChange(f),m.Wr.delete(3),yield v_(m)}),function(u,f){return l.apply(this,arguments)})(t.remoteStore,r);var l}),n.onlineComponents=t})).apply(this,arguments)}function pD(n){return gD.apply(this,arguments)}function gD(){return(gD=(0,ye.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield tA(n,new ox)),n.offlineComponents})).apply(this,arguments)}function Wp(n){return s0.apply(this,arguments)}function s0(){return(s0=(0,ye.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield Hh(n,new hD)),n.onlineComponents})).apply(this,arguments)}function mD(n){return pD(n).then(t=>t.persistence)}function o0(n){return pD(n).then(t=>t.localStore)}function ux(n){return Wp(n).then(t=>t.remoteStore)}function a0(n){return Wp(n).then(t=>t.syncEngine)}function kc(n){return l0.apply(this,arguments)}function l0(){return(l0=(0,ye.Z)(function*(n){const t=yield Wp(n),e=t.eventManager;return e.onListen=HI.bind(null,t.syncEngine),e.onUnlisten=jI.bind(null,t.syncEngine),e})).apply(this,arguments)}function nA(n,t,e={}){const i=new tr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(r,l,u,f,m){const w=new fD({next:T=>{l.enqueueAndForget(()=>ZE(r,D));const k=T.docs.has(u);!k&&T.fromCache?m.reject(new Me(me.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&f&&"server"===f.source?m.reject(new Me(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),D=new I_(Eh(u.path),w,{includeMetadataChanges:!0,fo:!0});return Ur(r,D)}(yield kc(n),n.asyncQueue,t,e,i)})),i.promise}function M_(n,t,e={}){const i=new tr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(r,l,u,f,m){const w=new fD({next:T=>{l.enqueueAndForget(()=>ZE(r,D)),T.fromCache&&"server"===f.source?m.reject(new Me(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),D=new I_(u,w,{includeMetadataChanges:!0,fo:!0});return Ur(r,D)}(yield kc(n),n.asyncQueue,t,e,i)})),i.promise}class hx{constructor(t,e,i,r,l,u,f,m){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class R_{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof R_&&t.projectId===this.projectId&&t.database===this.database}}const fx=new Map;function yD(n,t,e){if(!e)throw new Me(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function px(n,t,e,i){if(!0===t&&!0===i)throw new Me(me.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function vD(n){if(!it.isDocumentKey(n))throw new Me(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iA(n){if(it.isDocumentKey(n))throw new Me(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":ot()}function cn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Me(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=bD(n);throw new Me(me.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function rA(n,t){if(t<=0)throw new Me(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class Zp{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Me(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Me(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,px("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class k_{constructor(t,e){this._credentials=e,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zp({}),this._settingsFrozen=!1,t instanceof R_?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new R_(i.options.projectId)}(t))}get app(){if(!this._app)throw new Me(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Me(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zp(t),void 0!==t.credentials&&(this._credentials=function(e){if(!e)return new SS;switch(e.type){case"gapi":const i=e.client;return yt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new bh(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Me(me.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=fx.get(t);e&&(Oe("ComponentProvider","Removing Datastore"),fx.delete(t),e.terminate())}(this),Promise.resolve()}}class Wn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wn(this.firestore,t,this._key)}}class vr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new vr(this.firestore,t,this._query)}}class Sl extends vr{constructor(t,e,i){super(t,e,Eh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wn(this.firestore,null,new it(t))}withConverter(t){return new Sl(this.firestore,t,this._path)}}function qs(n,t,...e){if(n=(0,B.m9)(n),yD("collection","path",t),n instanceof k_){const i=yn.fromString(t,...e);return iA(i),new Sl(n,null,i)}{if(!(n instanceof Wn||n instanceof Sl))throw new Me(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yn.fromString(t,...e));return iA(i),new Sl(n.firestore,null,i)}}function Yp(n,t,...e){if(n=(0,B.m9)(n),1===arguments.length&&(t=wh.I()),yD("doc","path",t),n instanceof k_){const i=yn.fromString(t,...e);return vD(i),new Wn(n,null,new it(i))}{if(!(n instanceof Wn||n instanceof Sl))throw new Me(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yn.fromString(t,...e));return vD(i),new Wn(n.firestore,n instanceof Sl?n.converter:null,new it(i))}}function sA(n,t){return n=(0,B.m9)(n),t=(0,B.m9)(t),(n instanceof Wn||n instanceof Sl)&&(t instanceof Wn||t instanceof Sl)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function oA(n,t){return n=(0,B.m9)(n),t=(0,B.m9)(t),n instanceof vr&&t instanceof vr&&n.firestore===t.firestore&&Ap(n._query,t._query)&&n.converter===t.converter}class wD{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Hb(this,"async_queue_retry"),this.Rc=()=>{const e=Ub();e&&Oe("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ar.tr()};const t=Ub();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.bc(),this.Pc(t)}enterRestrictedMode(t){if(!this.gc){this.gc=!0,this.Ic=t||!1;const e=Ub();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Rc)}}enqueue(t){if(this.bc(),this.gc)return new Promise(()=>{});const e=new tr;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.mc.push(t),this.vc()))}vc(){var t=this;return(0,ye.Z)(function*(){if(0!==t.mc.length){try{yield t.mc[0](),t.mc.shift(),t.ar.reset()}catch(e){if(!Ah(e))throw e;Oe("AsyncQueue","Operation failed with retryable error: "+e)}t.mc.length>0&&t.ar.Xi(()=>t.vc())}})()}Pc(t){const e=this._c.then(()=>(this.Ec=!0,t().catch(i=>{throw this.Tc=i,this.Ec=!1,Hi("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(i)),i}).then(i=>(this.Ec=!1,i))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.bc(),this.Ac.indexOf(t)>-1&&(e=0);const r=WE.createAndSchedule(this,t,e,i,l=>this.Vc(l));return this.yc.push(r),r}bc(){this.Tc&&ot()}verifyOperationInProgress(){}Sc(){var t=this;return(0,ye.Z)(function*(){let e;do{e=t._c,yield e}while(e!==t._c)})()}Dc(t){for(const e of this.yc)if(e.timerId===t)return!0;return!1}Cc(t){return this.Sc().then(()=>{this.yc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.yc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sc()})}Nc(t){this.Ac.push(t)}Vc(t){const e=this.yc.indexOf(t);this.yc.splice(e,1)}}function c0(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class aA{constructor(){this._progressObserver={},this._taskCompletionResolver=new tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class si extends k_{constructor(t,e){super(t,e),this.type="firestore",this._queue=new wD,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||u0(this),this._firestoreClient.terminate()}}function sr(n){return n._firestoreClient||u0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function u0(n){var t;const e=n._freezeSettings(),i=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new hx(n._databaseId,l,n._persistenceKey,(f=e).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new l2(n._credentials,n._queue,i)}function d0(n,t,e){const i=new tr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield tA(n,e),yield Hh(n,t),i.resolve()}catch(r){if(!("FirebaseError"===(l=r).name?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var l})).then(()=>i.promise)}function uA(n){if(n._initialized||n._terminated)throw new Me(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Me(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Il{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Il(Bt.fromBase64String(t))}catch(e){throw new Me(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Il(Bt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ed{constructor(t){this._methodName=t}}class h0{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Me(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Me(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rn(this._lat,t._lat)||rn(this._long,t._long)}}const Cx=/^__.*__$/;class dA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Tc(t,this.data,this.fieldMask,e,this.fieldTransforms):new t_(t,this.data,e,this.fieldTransforms)}}class hA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Tc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ex(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class x_{constructor(t,e,i,r,l,u){this.settings=t,this.databaseId=e,this.N=i,this.ignoreUndefinedProperties=r,void 0===l&&this.xc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(t){return new x_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$c({path:i,Fc:!1});return r.Mc(t),r}Lc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$c({path:i,Fc:!1});return r.xc(),r}Bc(t){return this.$c({path:void 0,Fc:!0})}Uc(t){return TD(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.Mc(this.path.get(t))}Mc(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(Ex(this.kc)&&Cx.test(t))throw this.Uc('Document fields cannot begin and end with "__"')}}class fA{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.N=i||$p(t)}jc(t,e,i,r=!1){return new x_({kc:t,methodName:e,Kc:i,path:Lr.emptyPath(),Fc:!1,qc:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function jh(n){const t=n._freezeSettings(),e=$p(n._databaseId);return new fA(n._databaseId,!!t.ignoreUndefinedProperties,e)}function f0(n,t,e,i,r,l={}){const u=n.jc(l.merge||l.mergeFields?2:0,t,e,r);ED("Data must be an object, but it was:",u,i);const f=CD(i,u);let m,w;if(l.merge)m=new Ec(u.fieldMask),w=u.fieldTransforms;else if(l.mergeFields){const D=[];for(const T of l.mergeFields){const k=DD(t,T,e);if(!u.contains(k))throw new Me(me.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);Ax(D,k)||D.push(k)}m=new Ec(D),w=u.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,w=u.fieldTransforms;return new dA(new Vr(f),m,w)}class Kp extends ed{_toFieldTransform(t){if(2!==t.kc)throw t.Uc(1===t.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Kp}}function Qp(n,t,e){return new x_({kc:3,Kc:t.settings.Kc,methodName:n._methodName,Fc:e},t.databaseId,t.N,t.ignoreUndefinedProperties)}class O_ extends ed{_toFieldTransform(t){return new Xm(t.path,new Np)}isEqual(t){return t instanceof O_}}class pA extends ed{constructor(t,e){super(t),this.Qc=e}_toFieldTransform(t){const e=Qp(this,t,!0),i=this.Qc.map(l=>td(l,e)),r=new Dh(i);return new Xm(t.path,r)}isEqual(t){return this===t}}class Dx extends ed{constructor(t,e){super(t),this.Qc=e}_toFieldTransform(t){const e=Qp(this,t,!0),i=this.Qc.map(l=>td(l,e)),r=new Hu(i);return new Xm(t.path,r)}isEqual(t){return this===t}}class Tx extends ed{constructor(t,e){super(t),this.Wc=e}_toFieldTransform(t){const e=new Mp(t.N,US(t.N,this.Wc));return new Xm(t.path,e)}isEqual(t){return this===t}}function gA(n,t,e,i){const r=n.jc(1,t,e);ED("Data must be an object, but it was:",r,i);const l=[],u=Vr.empty();at(i,(m,w)=>{const D=p0(t,m,e);w=(0,B.m9)(w);const T=r.Lc(D);if(w instanceof Kp)l.push(D);else{const k=td(w,T);null!=k&&(l.push(D),u.set(D,k))}});const f=new Ec(l);return new hA(u,f,r.fieldTransforms)}function mA(n,t,e,i,r,l){const u=n.jc(1,t,e),f=[DD(t,i,e)],m=[r];if(l.length%2!=0)throw new Me(me.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)f.push(DD(t,l[k])),m.push(l[k+1]);const w=[],D=Vr.empty();for(let k=f.length-1;k>=0;--k)if(!Ax(w,f[k])){const F=f[k];let j=m[k];j=(0,B.m9)(j);const te=u.Lc(F);if(j instanceof Kp)w.push(F);else{const de=td(j,te);null!=de&&(w.push(F),D.set(F,de))}}const T=new Ec(w);return new hA(D,T,u.fieldTransforms)}function Sx(n,t,e,i=!1){return td(e,n.jc(i?4:3,t))}function td(n,t){if(_A(n=(0,B.m9)(n)))return ED("Unsupported field value:",t,n),CD(n,t);if(n instanceof ed)return function(e,i){if(!Ex(i.kc))throw i.Uc(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Uc(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Fc&&4!==t.kc)throw t.Uc("Nested arrays are not supported");return function(e,i){const r=[];let l=0;for(const u of e){let f=td(u,i.Bc(l));null==f&&(f={nullValue:"NULL_VALUE"}),r.push(f),l++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,B.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return US(i.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=nr.fromDate(e);return{timestampValue:xp(i.N,r)}}if(e instanceof nr){const r=new nr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xp(i.N,r)}}if(e instanceof h0)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Il)return{bytesValue:r_(i.N,e._byteString)};if(e instanceof Wn){const r=i.databaseId,l=e.firestore._databaseId;if(!l.isEqual(r))throw i.Uc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Op(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.Uc(`Unsupported field value: ${bD(e)}`)}(n,t)}function CD(n,t){const e={};return AS(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):at(n,(i,r)=>{const l=td(r,t.Oc(i));null!=l&&(e[i]=l)}),{mapValue:{fields:e}}}function _A(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof h0||n instanceof Il||n instanceof Wn||n instanceof ed)}function ED(n,t,e){if(!_A(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=bD(e);throw t.Uc("an object"===i?n+" a custom object":n+" "+i)}var i}function DD(n,t,e){if((t=(0,B.m9)(t))instanceof xc)return t._internalPath;if("string"==typeof t)return p0(n,t);throw TD("Field path arguments must be of type string or FieldPath.",n,!1,void 0,e)}const Ix=new RegExp("[~\\*/\\[\\]]");function p0(n,t,e){if(t.search(Ix)>=0)throw TD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new xc(...t.split("."))._internalPath}catch(i){throw TD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function TD(n,t,e,i,r){const l=i&&!i.isEmpty(),u=void 0!==r;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${r}`),m+=")"),new Me(me.INVALID_ARGUMENT,f+n+m)}function Ax(n,t){return n.some(e=>e.isEqual(t))}class P_{constructor(t,e,i,r,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new SD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ri("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class SD extends P_{data(){return super.data()}}function Ri(n,t){return"string"==typeof t?p0(n,t):t instanceof xc?t._internalPath:t._delegate._internalPath}class Jp{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Al extends P_{constructor(t,e,i,r,l,u){super(t,e,i,r,u),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Xp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Ri("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Xp extends Al{data(t={}){return super.data(t)}}class nd{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Jp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Xp(this._firestore,this._userDataWriter,i.key,i,new Jp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Me(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new Xp(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Jp(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:l++}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const f=new Xp(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Jp(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,w=-1;return 0!==u.type&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),w=l.indexOf(u.doc.key)),{type:g0(u.type),doc:f,oldIndex:m,newIndex:w}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function g0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function yA(n,t){return n instanceof Al&&t instanceof Al?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof nd&&t instanceof nd&&n._firestore===t._firestore&&oA(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function vA(n){if(Qm(n)&&0===n.explicitOrderBy.length)throw new Me(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eg{}function Ws(n,...t){for(const e of t)n=e._apply(n);return n}class bA extends eg{constructor(t,e,i){super(),this.Gc=t,this.zc=e,this.Hc=i,this.type="where"}_apply(t){const e=jh(t.firestore),i=function(r,l,u,f,m,w,D){let T;if(m.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on FieldPath.documentId().`);if("in"===w||"not-in"===w){kx(D,w);const F=[];for(const j of D)F.push(CA(f,r,j));T={arrayValue:{values:F}}}else T=CA(f,r,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||kx(D,w),T=Sx(u,"where",D,"in"===w||"not-in"===w);const k=Gs.create(m,w,T);return function(F,j){if(j.v()){const de=Cb(F);if(null!==de&&!de.isEqual(j.field))throw new Me(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${de.toString()}' and '${j.field.toString()}'`);const Pe=KC(F);null!==Pe&&xx(0,j.field,Pe)}const te=function(de,Pe){for(const Ve of de.filters)if(Pe.indexOf(Ve.op)>=0)return Ve.op;return null}(F,function(de){switch(de){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==te)throw new Me(me.INVALID_ARGUMENT,te===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${te.toString()}' filters.`)}(r,k),k}(t._query,0,e,t.firestore._databaseId,this.Gc,this.zc,this.Hc);return new vr(t.firestore,t.converter,function(r,l){const u=r.filters.concat([l]);return new zs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),u,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class AD extends eg{constructor(t,e){super(),this.Gc=t,this.Jc=e,this.type="orderBy"}_apply(t){const e=function(i,r,l){if(null!==i.startAt)throw new Me(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Me(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Ip(r,l);return function(f,m){if(null===KC(f)){const w=Cb(f);null!==w&&xx(0,w,m.field)}}(i,u),u}(t._query,this.Gc,this.Jc);return new vr(t.firestore,t.converter,function(i,r){const l=i.explicitOrderBy.concat([r]);return new zs(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class F_ extends eg{constructor(t,e,i){super(),this.type=t,this.Yc=e,this.Xc=i}_apply(t){return new vr(t.firestore,t.converter,JC(t._query,this.Yc,this.Xc))}}class MD extends eg{constructor(t,e,i){super(),this.type=t,this.Zc=e,this.ta=i}_apply(t){const e=L_(t,this.type,this.Zc,this.ta);return new vr(t.firestore,t.converter,(r=e,new zs((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class wA extends eg{constructor(t,e,i){super(),this.type=t,this.Zc=e,this.ta=i}_apply(t){const e=L_(t,this.type,this.Zc,this.ta);return new vr(t.firestore,t.converter,(r=e,new zs((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function L_(n,t,e,i){if(e[0]=(0,B.m9)(e[0]),e[0]instanceof P_)return function(r,l,u,f,m){if(!f)throw new Me(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const w=[];for(const D of Uu(r))if(D.field.isKeyField())w.push(qm(l,f.key));else{const T=f.data.field(D.field);if(pb(T))throw new Me(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const k=D.field.canonicalString();throw new Me(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}w.push(T)}return new Km(w,m)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=jh(n.firestore);return function(l,u,f,m,w,D){const T=l.explicitOrderBy;if(w.length>T.length)throw new Me(me.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let F=0;F<w.length;F++){const j=w[F];if(T[F].field.isKeyField()){if("string"!=typeof j)throw new Me(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof j}`);if(!QC(l)&&-1!==j.indexOf("/"))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${m}() must be a plain document ID, but '${j}' contains a slash.`);const te=l.path.child(yn.fromString(j));if(!it.isDocumentKey(te))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${m}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const de=new it(te);k.push(qm(u,de))}else{const te=Sx(f,m,j);k.push(te)}}return new Km(k,D)}(n._query,n.firestore._databaseId,r,t,e,i)}}function CA(n,t,e){if("string"==typeof(e=(0,B.m9)(e))){if(""===e)throw new Me(me.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!QC(t)&&-1!==e.indexOf("/"))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(yn.fromString(e));if(!it.isDocumentKey(i))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qm(n,new it(i))}if(e instanceof Wn)return qm(n,e._key);throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${bD(e)}.`)}function kx(n,t){if(!Array.isArray(n)||0===n.length)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function xx(n,t,e){if(!e.isEqual(t))throw new Me(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class EA{convertValue(t,e="none"){switch(Aa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ep(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ot()}}convertObject(t,e){const i={};return at(t.fields,(r,l)=>{i[r]=this.convertValue(l,e)}),i}convertGeoPoint(t){return new h0(bi(t.latitude),bi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=GC(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Dp(t));default:return null}}convertTimestamp(t){const e=Dc(t);return new nr(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=yn.fromString(t);yt(nI(i));const r=new R_(i.get(1),i.get(3)),l=new it(i.popFirst(5));return r.isEqual(e)||Hi(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function m0(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class Ox extends EA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Il(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wn(this.firestore,null,e)}}class DA{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=jh(t)}set(t,e,i){this._verifyNotCommitted();const r=id(t,this._firestore),l=m0(r.converter,e,i),u=f0(this._dataReader,"WriteBatch.set",r._key,l,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,wi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const l=id(t,this._firestore);let u;return u="string"==typeof(e=(0,B.m9)(e))||e instanceof xc?mA(this._dataReader,"WriteBatch.update",l._key,e,i,r):gA(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(u.toMutation(l._key,wi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=id(t,this._firestore);return this._mutations=this._mutations.concat(new n_(e._key,wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function id(n,t){if((n=(0,B.m9)(n)).firestore!==t)throw new Me(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class tg extends EA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Il(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wn(this.firestore,null,e)}}function TA(n,t,e){n=cn(n,Wn);const i=cn(n.firestore,si),r=m0(n.converter,t,e);return ng(i,[f0(jh(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,wi.none())])}function SA(n,t,e,...i){n=cn(n,Wn);const r=cn(n.firestore,si),l=jh(r);let u;return u="string"==typeof(t=(0,B.m9)(t))||t instanceof xc?mA(l,"updateDoc",n._key,t,e,i):gA(l,"updateDoc",n._key,t),ng(r,[u.toMutation(n._key,wi.exists(!0))])}function IA(n,...t){var e,i,r;n=(0,B.m9)(n);let l={includeMetadataChanges:!1},u=0;"object"!=typeof t[u]||c0(t[u])||(l=t[u],u++);const f={includeMetadataChanges:l.includeMetadataChanges};if(c0(t[u])){const T=t[u];t[u]=null===(e=T.next)||void 0===e?void 0:e.bind(T),t[u+1]=null===(i=T.error)||void 0===i?void 0:i.bind(T),t[u+2]=null===(r=T.complete)||void 0===r?void 0:r.bind(T)}let m,w,D;if(n instanceof Wn)w=cn(n.firestore,si),D=Eh(n._key.path),m={next:T=>{t[u]&&t[u](RD(w,n,T))},error:t[u+1],complete:t[u+2]};else{const T=cn(n,vr);w=cn(T.firestore,si),D=T._query;const k=new tg(w);m={next:F=>{t[u]&&t[u](new nd(w,k,T,F))},error:t[u+1],complete:t[u+2]},vA(n._query)}return function(T,k,F,j){const te=new fD(j),de=new I_(k,te,F);return T.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return Ur(yield kc(T),de)})),()=>{te.ec(),T.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return ZE(yield kc(T),de)}))}}(sr(w),D,f,m)}function ng(n,t){return function(e,i){const r=new tr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(n,t,e){return A_.apply(this,arguments)}(yield a0(e),i,r)})),r.promise}(sr(n),t)}function RD(n,t,e){const i=e.docs.get(t._key),r=new tg(n);return new Al(n,r,t._key,i,new Jp(e.hasPendingWrites,e.fromCache),t.converter)}class Hx extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=jh(t)}get(t){const e=id(t,this._firestore),i=new Ox(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return ot();const l=r[0];if(l.isFoundDocument())return new P_(this._firestore,i,l.key,l,e.converter);if(l.isNoDocument())return new P_(this._firestore,i,e._key,null,e.converter);throw ot()})}set(t,e,i){const r=id(t,this._firestore),l=m0(r.converter,e,i),u=f0(this._dataReader,"Transaction.set",r._key,l,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(t,e,i,...r){const l=id(t,this._firestore);let u;return u="string"==typeof(e=(0,B.m9)(e))||e instanceof xc?mA(this._dataReader,"Transaction.update",l._key,e,i,r):gA(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,u),this}delete(t){const e=id(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=id(t,this._firestore),i=new tg(this._firestore);return super.get(t).then(r=>new Al(this._firestore,i,e._key,r._document,new Jp(!1,!1),e.converter))}}function AA(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function Zx(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function Yx(){if("undefined"==typeof atob)throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Cp=Ca.SDK_VERSION,(0,Ca._registerComponent)(new Ea.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),l=new si(r,new jC(e.getProvider("auth-internal")));return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC")),(0,Ca.registerVersion)(DS,"3.3.0",n),(0,Ca.registerVersion)(DS,"3.3.0","esm2017")}();class $h{constructor(t){this._delegate=t}static fromBase64String(t){return Yx(),new $h(Il.fromBase64String(t))}static fromUint8Array(t){return Zx(),new $h(Il.fromUint8Array(t))}toBase64(){return Yx(),this._delegate.toBase64()}toUint8Array(){return Zx(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kD(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of["next","error","complete"])if(i in e&&"function"==typeof e[i])return!0;return!1}(n)}class Qx{enableIndexedDbPersistence(t,e){return function(n,t){uA(n=cn(n,si));const e=sr(n),i=n._freezeSettings(),r=new hD;return d0(e,r,new eA(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){uA(n=cn(n,si));const t=sr(n),e=n._freezeSettings(),i=new hD;return d0(t,i,new ax(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new Me(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new tr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(e=(0,ye.Z)(function*(i){if(!qo.bt())return Promise.resolve();const r=i+"main";yield qo.delete(r)}),function(i){return e.apply(this,arguments)})(SE(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class Jx{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof R_||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&jm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function(n,t,e,i={}){var r;const l=(n=cn(n,k_))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==t&&jm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let u,f;if("string"==typeof i.mockUserToken)u=i.mockUserToken,f=Fr.MOCK_USER;else{u=(0,B.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Me(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Fr(m)}n._credentials=new IS(new HC(u,f))}}(this._delegate,t,e,i)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const t=yield mD(n),e=yield ux(n);return t.setNetworkEnabled(!0),function(i){const r=Be(i);return r.Wr.delete(0),v_(r)}(e)}))}(sr(n=cn(n,si)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const t=yield mD(n),e=yield ux(n);return t.setNetworkEnabled(!1),(i=(0,ye.Z)(function*(r){const l=Be(r);l.Wr.add(0),yield Oh(l),l.Hr.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(sr(n=cn(n,si)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,px("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new tr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(n,t){return Xb.apply(this,arguments)}(yield a0(t),e)})),e.promise}(sr(n=cn(n,si)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new fD(t);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return i=yield kc(n),r=e,Be(i).so.add(r),void r.next();var i,r})),()=>{e.ec(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return i=yield kc(n),r=e,void Be(i).so.delete(r);var i,r}))}}(sr(n=cn(n,si)),c0(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Oc(this,qs(this._delegate,t))}catch(e){throw Ts(e,"collection()","Firestore.collection()")}}doc(t){try{return new _o(this,Yp(this._delegate,t))}catch(e){throw Ts(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Hr(this,function(n,t){if(n=cn(n,k_),yD("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Me(me.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vr(n,null,(e=t,new zs(yn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Ts(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new tr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const i=yield(r=n,Wp(r).then(l=>l.datastore));var r;new cx(n.asyncQueue,i,t,e).run()})),e.promise}(sr(n=cn(n,si)),e=>t(new Hx(n,e)))}(this._delegate,e=>t(new NA(this,e)))}batch(){return sr(this._delegate),new Ko(new DA(this._delegate,t=>ng(this._delegate,t)))}loadBundle(t){return function(n,t){const e=sr(n=cn(n,si)),i=new aA;return function(n,t,e,i){const r=function(l,u){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,m=function(m,w){if(m instanceof Uint8Array)return lx(m,w);if(m instanceof ArrayBuffer)return lx(new Uint8Array(m),w);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new o2(m,u);var m}(e,$p(t));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function(n,t,e){const i=Be(n);var r;(r=(0,ye.Z)(function*(l,u,f){try{const m=yield u.getMetadata();if(yield function(k,F){const j=Be(k),te=rr(F.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",de=>j.Je.getBundleMetadata(de,F.id)).then(de=>!!de&&de.createTime.compareTo(te)>=0)}(l.localStore,m))return yield u.close(),void f._completeWith((k=m,{taskState:"Success",documentsLoaded:k.totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}));f._updateProgress(UI(m));const w=new Xk(m,l.localStore,u.N);let D=yield u.zo();for(;D;){const k=yield w.mo(D);k&&f._updateProgress(k),D=yield u.zo()}const T=yield w.complete();yield Rc(l,T.En,void 0),yield function(k,F){const j=Be(k);return j.persistence.runTransaction("Save bundle","readwrite",te=>j.Je.saveBundleMetadata(te,F))}(l.localStore,m),f._completeWith(T.progress)}catch(m){jm("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m)}var k}),function(l,u,f){return r.apply(this,arguments)})(i,t,e).then(()=>{i.sharedClientState.notifyBundleLoaded()})}(yield a0(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(e,i){const r=Be(e);return r.persistence.runTransaction("Get named query","readonly",l=>r.Je.getNamedQuery(l,i))}(yield o0(n),t)}))}(sr(n=cn(n,si)),t).then(e=>e?new vr(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Hr(this,e):null)}}class _0 extends EA{constructor(t){super(),this.firestore=t}convertBytes(t){return new $h(new Il(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return _o.forKey(e,this.firestore,null)}}class NA{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new _0(t)}get(t){const e=rd(t);return this._delegate.get(e).then(i=>new rg(this._firestore,new Al(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=rd(t);return i?(AA("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const l=rd(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,i,...r),this}delete(t){const e=rd(t);return this._delegate.delete(e),this}}class Ko{constructor(t){this._delegate=t}set(t,e,i){const r=rd(t);return i?(AA("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const l=rd(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,i,...r),this}delete(t){const e=rd(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class ig{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new Xp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Gh(this._firestore,i),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=ig.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let l=r.get(e);return l||(l=new ig(t,new _0(t),e),r.set(e,l)),l}}ig.INSTANCES=new WeakMap;class _o{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _0(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new _o(e,new Wn(e._delegate,i,new it(t)))}static forKey(t,e,i){return new _o(e,new Wn(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Oc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Oc(this.firestore,qs(this._delegate,t))}catch(e){throw Ts(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,B.m9)(t))instanceof Wn&&sA(this._delegate,t)}set(t,e){e=AA("DocumentReference.set",e);try{return e?TA(this._delegate,t,e):TA(this._delegate,t)}catch(i){throw Ts(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?SA(this._delegate,t):SA(this._delegate,t,e,...i)}catch(r){throw Ts(r,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return ng(cn(n.firestore,si),[new n_(n._key,wi.none())])}(this._delegate)}onSnapshot(...t){const e=xD(t),i=OD(t,r=>new rg(this.firestore,new Al(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return IA(this._delegate,e,i)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=cn(n,Wn);const t=cn(n.firestore,si),e=sr(t),i=new tg(t);return function(n,t){const e=new tr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(i=(0,ye.Z)(function*(r,l,u){try{const f=yield function(m,w){const D=Be(m);return D.persistence.runTransaction("read document","readonly",T=>D.Qn.An(T,w))}(r,l);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Me(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Lh(f,`Failed to get document '${l} from cache`);u.reject(m)}}),function(r,l,u){return i.apply(this,arguments)})(yield o0(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Al(t,i,n._key,r,new Jp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=cn(n,Wn);const t=cn(n.firestore,si);return nA(sr(t),n._key,{source:"server"}).then(e=>RD(t,n,e))}(this._delegate):function(n){n=cn(n,Wn);const t=cn(n.firestore,si);return nA(sr(t),n._key).then(e=>RD(t,n,e))}(this._delegate),e.then(i=>new rg(this.firestore,new Al(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new _o(this.firestore,this._delegate.withConverter(t?ig.getInstance(this.firestore,t):null))}}function Ts(n,t,e){return n.message=n.message.replace(t,e),n}function xD(n){for(const t of n)if("object"==typeof t&&!kD(t))return t;return{}}function OD(n,t){var e,i;let r;return r=kD(n[0])?n[0]:kD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{r.next&&r.next(t(l))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class rg{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new _o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return yA(this._delegate,t._delegate)}}class Gh extends rg{data(t){const e=this._delegate.data(t);return function(n,t){n||ot()}(void 0!==e),e}}class Hr{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _0(t)}where(t,e,i){try{return new Hr(this.firestore,Ws(this._delegate,function(n,t,e){const i=t,r=Ri("where",n);return new bA(r,i,e)}(t,e,i)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Hr(this.firestore,Ws(this._delegate,function(n,t="asc"){const e=t,i=Ri("orderBy",n);return new AD(i,e)}(t,e)))}catch(i){throw Ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Hr(this.firestore,Ws(this._delegate,function(n){return rA("limit",n),new F_("limit",n,"F")}(t)))}catch(e){throw Ts(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Hr(this.firestore,Ws(this._delegate,function(n){return rA("limitToLast",n),new F_("limitToLast",n,"L")}(t)))}catch(e){throw Ts(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Hr(this.firestore,Ws(this._delegate,function(...n){return new MD("startAt",n,!0)}(...t)))}catch(e){throw Ts(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Hr(this.firestore,Ws(this._delegate,function(...n){return new MD("startAfter",n,!1)}(...t)))}catch(e){throw Ts(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Hr(this.firestore,Ws(this._delegate,function(...n){return new wA("endBefore",n,!0)}(...t)))}catch(e){throw Ts(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Hr(this.firestore,Ws(this._delegate,function(...n){return new wA("endAt",n,!1)}(...t)))}catch(e){throw Ts(e,"endAt()","Query.endAt()")}}isEqual(t){return oA(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=cn(n,vr);const t=cn(n.firestore,si),e=sr(t),i=new tg(t);return function(n,t){const e=new tr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(i=(0,ye.Z)(function*(r,l,u){try{const f=yield jp(r,l,!0),m=new XE(l,f.Gn),w=m.bo(f.documents),D=m.applyChanges(w,!1);u.resolve(D.snapshot)}catch(f){const m=Lh(f,`Failed to execute query '${l} against cache`);u.reject(m)}}),function(r,l,u){return i.apply(this,arguments)})(yield o0(n),t,e);var i})),e.promise}(e,n._query).then(r=>new nd(t,i,n,r))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=cn(n,vr);const t=cn(n.firestore,si),e=sr(t),i=new tg(t);return M_(e,n._query,{source:"server"}).then(r=>new nd(t,i,n,r))}(this._delegate):function(n){n=cn(n,vr);const t=cn(n.firestore,si),e=sr(t),i=new tg(t);return vA(n._query),M_(e,n._query).then(r=>new nd(t,i,n,r))}(this._delegate),e.then(i=>new sg(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=xD(t),i=OD(t,r=>new sg(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return IA(this._delegate,e,i)}withConverter(t){return new Hr(this.firestore,this._delegate.withConverter(t?ig.getInstance(this.firestore,t):null))}}class PD{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Gh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sg{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Hr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Gh(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new PD(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new Gh(this._firestore,i))})}isEqual(t){return yA(this._delegate,t._delegate)}}class Oc extends Hr{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new _o(this.firestore,t):null}doc(t){try{return new _o(this.firestore,void 0===t?Yp(this._delegate):Yp(this._delegate,t))}catch(e){throw Ts(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=cn(n.firestore,si),i=Yp(n),r=m0(n.converter,t);return ng(e,[f0(jh(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,wi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new _o(this.firestore,e))}isEqual(t){return sA(this._delegate,t._delegate)}withConverter(t){return new Oc(this.firestore,this._delegate.withConverter(t?ig.getInstance(this.firestore,t):null))}}function rd(n){return cn(n,Wn)}class y0{constructor(...t){this._delegate=new xc(...t)}static documentId(){return new y0(Lr.keyField().canonicalString())}isEqual(t){return(t=(0,B.m9)(t))instanceof xc&&this._delegate._internalPath.isEqual(t._internalPath)}}class zh{constructor(t){this._delegate=t}static serverTimestamp(){const t=new O_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new zh(t)}static delete(){const t=new Kp("deleteField");return t._methodName="FieldValue.delete",new zh(t)}static arrayUnion(...t){const e=function(...n){return new pA("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new zh(e)}static arrayRemove(...t){const e=function(...n){return new Dx("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new zh(e)}static increment(t){const e=function(n){return new Tx("increment",n)}(t);return e._methodName="FieldValue.increment",new zh(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const eO={Firestore:Jx,GeoPoint:h0,Timestamp:nr,Blob:$h,Transaction:NA,WriteBatch:Ko,DocumentReference:_o,DocumentSnapshot:rg,Query:Hr,QueryDocumentSnapshot:Gh,QuerySnapshot:sg,CollectionReference:Oc,FieldPath:y0,FieldValue:zh,setLogLevel:function(n){!function(n){Lu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function RA(n,t){return function(n,t=ah.z){return new Cn.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=i&&i()}})}(n,t)}function LD(n,t){return RA(n,t).pipe((0,et.U)(e=>({payload:e,type:"query"})))}function wr(n,t){return LD(n,t).pipe(io(void 0),_c(),(0,et.U)(([e,i])=>{const r=i.payload.docChanges(),l=r.map(u=>({type:u.type,payload:u}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,f)=>{const m=r.find(D=>D.doc.ref.isEqual(u.ref)),w=null==e?void 0:e.payload.docs.find(D=>D.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&w&&JSON.stringify(w.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),l}))}function og(n,t,e){return wr(n,e).pipe(ol((i,r)=>function(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return b0(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return b0(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return b0(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(l=>l.payload),t),[]),lh(),(0,et.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function b0(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function C0(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,t){n.INTERNAL.registerComponent(new Ea.wA("firestore-compat",e=>((t,e)=>new Jx(t,e,new Qx))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},eO)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.7")}(V1.Z);class VD{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=wr(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,et.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(io(void 0),_c(),_n(([i,r])=>r.length>0||!i),(0,et.U)(([i,r])=>r),$n.iC)}auditTrail(t){return this.stateChanges(t).pipe(ol((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=C0(t);return og(this.query,e,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(t={}){return LD(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),$n.iC)}get(t){return(0,fn.D)(this.query.get(t)).pipe($n.iC)}add(t){return this.ref.add(t)}doc(t){return new B_(this.ref.doc(t),this.afs)}}class B_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:l}=PA(i,e);return new VD(r,l,this.afs)}snapshotChanges(){return function(n,t){return RA(n,t).pipe(io(void 0),_c(),(0,et.U)(([e,i])=>i.exists?(null==e?void 0:e.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,et.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,fn.D)(this.ref.get(t)).pipe($n.iC)}}class iO{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?wr(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),_n(e=>e.length>0),$n.iC):wr(this.query,this.afs.schedulers.outsideAngular).pipe($n.iC)}auditTrail(t){return this.stateChanges(t).pipe(ol((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=C0(t);return og(this.query,e,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(t={}){return LD(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),$n.iC)}get(t){return(0,fn.D)(this.query.get(t)).pipe($n.iC)}}const kA=new a.OlP("angularfire2.enableFirestorePersistence"),xA=new a.OlP("angularfire2.firestore.persistenceSettings"),rO=new a.OlP("angularfire2.firestore.settings"),OA=new a.OlP("angularfire2.firestore.use-emulator");function PA(n,t=(e=>e)){return{query:t(n),ref:n}}let ag=(()=>{class n{constructor(e,i,r,l,u,f,m,w,D,T,k,F,j,te,de,Pe,Ve){this.schedulers=m;const pt=(0,Or.on)(e,f,i),lt=D;T&&mm(pt,f,k,j,te,de,F,Pe),[this.firestore,this.persistenceEnabled$]=(0,Or.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const gn=f.runOutsideAngular(()=>pt.firestore());if(l&&gn.settings(l),lt&&gn.useEmulator(...lt),r&&!qc(u)){const li=()=>{try{return(0,fn.D)(gn.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Er){return"undefined"!=typeof console&&console.warn(Er),(0,He.of)(!1)}};return[gn,f.runOutsideAngular(li)]}return[gn,(0,He.of)(!1)]},[l,lt,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:u}=PA(r,i),f=this.schedulers.ngZone.run(()=>l);return new VD(f,u,this)}collectionGroup(e,i){const r=i||(u=>u),l=this.firestore.collectionGroup(e);return new iO(r(l),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new B_(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Or.Dh),a.LFG(Or.xv,8),a.LFG(kA,8),a.LFG(rO,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG($n.HU),a.LFG(xA,8),a.LFG(OA,8),a.LFG(_m,8),a.LFG(Ww,8),a.LFG(gm,8),a.LFG(Tv,8),a.LFG(Zw,8),a.LFG(Sv,8),a.LFG(Yw,8),a.LFG(Ev,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sO=(()=>{class n{constructor(){ip.Z.registerVersion("angularfire",$n.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:kA,useValue:!0},{provide:xA,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[ag]}),n})(),Nl=(()=>{class n{constructor(e,i){this.firebaseAuth=e,this.afs=i}getData(){var e=JSON.parse(localStorage.getItem("user")||"{}").uid;return this.afs.collection("Users").doc(e).ref.get().then(i=>{if(i.exists)return i.data();console.log("Nu exista")})}updateData(e){var i=JSON.parse(localStorage.getItem("user")||"{}");console.log(i),this.afs.collection("Users").doc(i.uid).update({Nume:e.Nume,Prenume:e.Prenume,Adresa:e.Adresa,Judet:e.Judet,Oras:e.Oras,Varsta:e.Varsta,Abonament:e.Abonament})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(_m),a.LFG(ag))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U_=U(1555);function E0(n,t){return new Cn.y(e=>{const i=n.length;if(0===i)return void e.complete();const r=new Array(i);let l=0,u=0;for(let f=0;f<i;f++){const m=(0,fn.D)(n[f]);let w=!1;e.add(m.subscribe({next:D=>{w||(w=!0,u++),r[f]=D},error:D=>e.error(D),complete:()=>{l++,(l===i||!w)&&(u===i&&e.next(t?t.reduce((D,T,k)=>(D[T]=r[k],D),{}):r),e.complete())}}))}})}let FA=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),qh=(()=>{class n extends FA{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const or=new a.OlP("NgValueAccessor"),LA={provide:or,useExisting:(0,a.Gpc)(()=>D0),multi:!0},lO=new a.OlP("CompositionEventMode");let D0=(()=>{class n extends FA{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=H()?H().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(lO,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&a.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[a._Bn([LA]),a.qOj]}),n})();const Ei=new a.OlP("NgValidators"),ka=new a.OlP("NgAsyncValidators");function zD(n){return null!=n}function od(n){const t=(0,a.QGY)(n)?(0,fn.D)(n):n;return(0,a.CqO)(t),t}function S0(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function HA(n,t){return t.map(e=>e(n))}function uO(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function jA(n){return null!=n?function(n){if(!n)return null;const t=n.filter(zD);return 0==t.length?null:function(e){return S0(HA(e,t))}}(uO(n)):null}function qD(n){return null!=n?function(n){if(!n)return null;const t=n.filter(zD);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,la.k)(t))return E0(t,null);if((0,U_.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return E0(e.map(i=>t[i]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return E0(n=1===n.length&&(0,la.k)(n[0])?n[0]:n,null).pipe((0,et.U)(e=>t(...e)))}return E0(n,null)}(HA(e,t).map(od)).pipe((0,et.U)(S0))}}(uO(n)):null}function $A(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function fO(n){return n._rawValidators}function pO(n){return n._rawAsyncValidators}function GA(n){return n?Array.isArray(n)?n:[n]:[]}function WD(n,t){return Array.isArray(n)?n.includes(t):n===t}function zA(n,t){const e=GA(t);return GA(n).forEach(r=>{WD(e,r)||e.push(r)}),e}function gO(n,t){return GA(t).filter(e=>!WD(n,e))}let mO=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,i){return!!this.control&&this.control.hasError(e,i)}getError(e,i){return this.control?this.control.getError(e,i):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n}),n})(),Zs=(()=>{class n extends mO{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();class Wh extends mO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class s{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}let d=(()=>{class n extends s{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Wh,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&a.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[a.qOj]}),n})(),h=(()=>{class n extends s{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Zs,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&a.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[a.qOj]}),n})();function be(n,t){ki(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Zh(n,t)})}(n,t),function(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Zh(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Xe(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Ss(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ht(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ki(n,t){const e=fO(n);null!==t.validator?n.setValidators($A(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=pO(n);null!==t.asyncValidator?n.setAsyncValidators($A(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();ht(t._rawValidators,r),ht(t._rawAsyncValidators,r)}function Ss(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=fO(n);if(Array.isArray(r)&&r.length>0){const l=r.filter(u=>u!==t.validator);l.length!==r.length&&(e=!0,n.setValidators(l))}}if(null!==t.asyncValidator){const r=pO(n);if(Array.isArray(r)&&r.length>0){const l=r.filter(u=>u!==t.asyncValidator);l.length!==r.length&&(e=!0,n.setAsyncValidators(l))}}}const i=()=>{};return ht(t._rawValidators,i),ht(t._rawAsyncValidators,i),e}function Zh(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function I0(n,t){ki(n,t)}function S2(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function WA(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const KD="VALID",ZA="INVALID",A0="PENDING",QD="DISABLED";function yO(n){return(bO(n)?n.validators:n)||null}function I2(n){return Array.isArray(n)?jA(n):n||null}function vO(n,t){return(bO(t)?t.asyncValidators:n)||null}function A2(n){return Array.isArray(n)?qD(n):n||null}function bO(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class wO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=I2(this._rawValidators),this._composedAsyncValidatorFn=A2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===KD}get invalid(){return this.status===ZA}get pending(){return this.status==A0}get disabled(){return this.status===QD}get enabled(){return this.status!==QD}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=I2(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=A2(t)}addValidators(t){this.setValidators(zA(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(zA(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gO(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gO(t,this._rawAsyncValidators))}hasValidator(t){return WD(this._rawValidators,t)}hasAsyncValidator(t){return WD(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=A0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=QD,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=KD,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===KD||this.status===A0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?QD:KD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=A0,this._hasOwnPendingAsyncValidator=!0;const e=od(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=i instanceof JD?i.controls.hasOwnProperty(r)?i.controls[r]:null:i instanceof CO&&i.at(r)||null}),i}(this,t)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?QD:this.errors?ZA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(A0)?A0:this._anyControlsHaveStatus(ZA)?ZA:KD}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){bO(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class N0 extends wO{constructor(t=null,e,i){super(yO(e),vO(i,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){WA(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){WA(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class JD extends wO{constructor(t,e,i){super(yO(e),vO(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e instanceof N0?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,l)=>{i=e(i,r,l)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class CO extends wO{constructor(t,e,i){super(yO(e),vO(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((i,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof N0?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const a$={provide:Zs,useExisting:(0,a.Gpc)(()=>M0)},XD=(()=>Promise.resolve(null))();let M0=(()=>{class n extends Zs{constructor(e,i){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new a.vpe,this.form=new JD({},jA(e),qD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){XD.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),be(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){XD.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),WA(this._directives,e)})}addFormGroup(e){XD.then(()=>{const i=this._findContainer(e.path),r=new JD({});I0(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){XD.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){XD.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,S2(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Ei,10),a.Y36(ka,10))},n.\u0275dir=a.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&a.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([a$]),a.qOj]}),n})(),YA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),O2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const EO=new a.OlP("NgModelWithFormControlWarning"),g$={provide:Zs,useExisting:(0,a.Gpc)(()=>KA)};let KA=(()=>{class n extends Zs{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new a.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ss(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return be(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Xe(e.control||null,e,!1),WA(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,S2(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Xe(i||null,e),r instanceof N0&&(be(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);I0(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function(n,t){return Ss(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ki(this.form,this),this._oldForm&&Ss(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Ei,10),a.Y36(ka,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&a.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([g$]),a.qOj,a.TTD]}),n})();const y$={provide:Wh,useExisting:(0,a.Gpc)(()=>SO)};let SO=(()=>{class n extends Wh{constructor(e,i,r,l,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new a.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(l=>{l.constructor===D0?e=l:function(n){return Object.getPrototypeOf(n.constructor)===qh}(l)?i=l:r=l}),r||i||e||null}(0,l)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Zs,13),a.Y36(Ei,10),a.Y36(ka,10),a.Y36(or,10),a.Y36(EO,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[a._Bn([y$]),a.qOj,a.TTD]}),n._ngModelWarningSentOnce=!1,n})();const v$={provide:or,useExisting:(0,a.Gpc)(()=>IO),multi:!0};function B2(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let IO=(()=>{class n extends qh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const i=this._getOptionId(e);null==i&&this.setProperty("selectedIndex",-1);const r=B2(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&a.NdJ("change",function(l){return i.onChange(l.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([v$]),a.qOj]}),n})(),AO=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(B2(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(IO,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const w$={provide:or,useExisting:(0,a.Gpc)(()=>NO),multi:!0};function U2(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let NO=(()=>{class n extends qh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(l=>this._getOptionId(l));i=(l,u)=>{l._setSelected(r.indexOf(u.toString())>-1)}}else i=(r,l)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[];if(void 0!==i.selectedOptions){const l=i.selectedOptions;for(let u=0;u<l.length;u++){const f=l.item(u),m=this._getOptionValue(f.value);r.push(m)}}else{const l=i.options;for(let u=0;u<l.length;u++){const f=l.item(u);if(f.selected){const m=this._getOptionValue(f.value);r.push(m)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&a.NdJ("change",function(l){return i.onChange(l.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([w$]),a.qOj]}),n})(),MO=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(U2(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(U2(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(NO,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),K2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[O2]]}),n})(),Q2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[K2]}),n})(),J2=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:EO,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[K2]}),n})(),k$=(()=>{class n{group(e,i=null){const r=this._reduceControls(e);let f,l=null,u=null;return null!=i&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(i)?(l=null!=i.validators?i.validators:null,u=null!=i.asyncValidators?i.asyncValidators:null,f=null!=i.updateOn?i.updateOn:void 0):(l=null!=i.validator?i.validator:null,u=null!=i.asyncValidator?i.asyncValidator:null)),new JD(r,{asyncValidators:u,updateOn:f,validators:l})}control(e,i,r){return new N0(e,i,r)}array(e,i,r){const l=e.map(u=>this._createControl(u));return new CO(l,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof N0||e instanceof JD||e instanceof CO?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:function(){return new n},token:n,providedIn:J2}),n})(),x$=(()=>{class n{constructor(e,i){this.router=e,this.data=i}ngOnInit(){let e=localStorage.getItem("user");console.log(e),console.log(history.state.da),this.pret(),this.getCurrentData()}updateData(){1==history.state.da&&(this.getCurrentData(),this.merge.Abonament=history.state.da,console.log(this.merge),this.data.updateData(this.merge)),2==history.state.da&&(this.getCurrentData(),this.merge.Abonament=history.state.da,console.log(this.merge),this.data.updateData(this.merge)),this.router.navigate(["app-home"])}getCurrentData(){(0,fn.D)(this.data.getData()).subscribe(i=>{this.merge=i})}pret(){1==history.state.da?this.nr=50:2==history.state.da&&(this.nr=250)}verificareActiv(){history.state.da||this.router.navigate(["app-home"])}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(xr),a.Y36(Nl))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-bank"]],decls:113,vars:1,consts:[[1,"cutie"],[1,"row"],[1,"col-2"],[1,"col-8"],[2,"background-color","#606060","padding","25px","margin","0","text-align","left","color","white"],[1,"plata"],[1,"form-floating","mb-3"],["type","text","id","floatingInput","placeholder","name@example.com",1,"form-control"],["for","floatingInput"],[1,"luna-an-card"],[1,"luna-an-card-cutie1"],[1,"input-group","mb-3"],["id","inputGroupSelect01",1,"form-select"],["selected",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],[1,"luna-an-card-cutie2"],["value","2021"],["value","2022"],["value","2023"],["value","2024"],["value","2025"],["value","2026"],["value","2027"],["value","2028"],["value","2029"],["value","2030"],["value","2031"],[1,"form-floating","mb-3","cvv"],["type","text","id","floatingInput","placeholder","___",1,"form-control"],[2,"color","green"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-lock-fill"],["d","M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"],["name","submit",1,"btn","btn-success","buttonbanca",3,"click"],["type","button",1,"btn","btn-danger","buttonexit"],["src","img//Untitled-1.2.png","width","150px","height","50px",2,"float","right"]],template:function(e,i){1&e&&(a.TgZ(0,"p"),a._uU(1,"bank works!"),a.qZA(),a.TgZ(2,"div",0),a.TgZ(3,"div",1),a._UZ(4,"div",2),a.TgZ(5,"div",3),a.TgZ(6,"div",4),a.TgZ(7,"h1"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"div",5),a.TgZ(10,"h4"),a._uU(11,"Order Number: 2974521"),a.qZA(),a.TgZ(12,"h4"),a._uU(13,"Fara descriere"),a.qZA(),a._UZ(14,"br"),a.TgZ(15,"h2"),a._uU(16,"Te rugam sa introduci datele cardului cu care vrei sa platesti"),a.qZA(),a._UZ(17,"br"),a.TgZ(18,"h4"),a._uU(19,"Numar card"),a.qZA(),a.TgZ(20,"div",6),a._UZ(21,"input",7),a.TgZ(22,"label",8),a._uU(23,"Introdu numarul de card"),a.qZA(),a.qZA(),a.TgZ(24,"h4"),a._uU(25,"Nume titular card"),a.qZA(),a.TgZ(26,"div",6),a._UZ(27,"input",7),a.TgZ(28,"label",8),a._uU(29,"Introdu nume titular card"),a.qZA(),a.qZA(),a.TgZ(30,"div",9),a.TgZ(31,"div",10),a.TgZ(32,"h4"),a._uU(33,"Luna expirare card"),a.qZA(),a.TgZ(34,"div",11),a.TgZ(35,"select",12),a._UZ(36,"option",13),a.TgZ(37,"option",14),a._uU(38,"1"),a.qZA(),a.TgZ(39,"option",15),a._uU(40,"2"),a.qZA(),a.TgZ(41,"option",16),a._uU(42,"3"),a.qZA(),a.TgZ(43,"option",17),a._uU(44,"4"),a.qZA(),a.TgZ(45,"option",18),a._uU(46,"5"),a.qZA(),a.TgZ(47,"option",19),a._uU(48,"6"),a.qZA(),a.TgZ(49,"option",20),a._uU(50,"7"),a.qZA(),a.TgZ(51,"option",21),a._uU(52,"8"),a.qZA(),a.TgZ(53,"option",22),a._uU(54,"9"),a.qZA(),a.TgZ(55,"option",23),a._uU(56,"10"),a.qZA(),a.TgZ(57,"option",24),a._uU(58,"11"),a.qZA(),a.TgZ(59,"option",25),a._uU(60,"12"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(61,"div",26),a.TgZ(62,"h4"),a._uU(63,"An expirare card"),a.qZA(),a.TgZ(64,"div",11),a.TgZ(65,"select",12),a._UZ(66,"option",13),a.TgZ(67,"option",27),a._uU(68,"2021"),a.qZA(),a.TgZ(69,"option",28),a._uU(70,"2022"),a.qZA(),a.TgZ(71,"option",29),a._uU(72,"2023"),a.qZA(),a.TgZ(73,"option",30),a._uU(74,"2024"),a.qZA(),a.TgZ(75,"option",31),a._uU(76,"2025"),a.qZA(),a.TgZ(77,"option",32),a._uU(78,"2026"),a.qZA(),a.TgZ(79,"option",33),a._uU(80,"2027"),a.qZA(),a.TgZ(81,"option",34),a._uU(82,"2028"),a.qZA(),a.TgZ(83,"option",35),a._uU(84,"2029"),a.qZA(),a.TgZ(85,"option",36),a._uU(86,"2030"),a.qZA(),a.TgZ(87,"option",37),a._uU(88,"2031"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(89,"br"),a._UZ(90,"br"),a._UZ(91,"br"),a._UZ(92,"br"),a.TgZ(93,"h4"),a._uU(94,"CVC/CVV2"),a.qZA(),a.TgZ(95,"div",38),a._UZ(96,"input",39),a.TgZ(97,"label",8),a._uU(98,"_ _ _"),a.qZA(),a.qZA(),a.TgZ(99,"h4",40),a.O4$(),a.TgZ(100,"svg",41),a._UZ(101,"path",42),a.qZA(),a._uU(102," Plata securizata"),a.qZA(),a.kcU(),a.TgZ(103,"button",43),a.NdJ("click",function(){return i.updateData()}),a._uU(104,"Plateste"),a.qZA(),a._UZ(105,"br"),a.TgZ(106,"button",44),a._uU(107,"Anulare"),a.qZA(),a._UZ(108,"br"),a._UZ(109,"br"),a._UZ(110,"br"),a._UZ(111,"img",45),a.qZA(),a.qZA(),a._UZ(112,"div",2),a.qZA(),a.qZA()),2&e&&(a.xp6(8),a.hij("Plata: ",i.nr," RON"))},directives:[AO,MO],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.5fr}.cutie[_ngcontent-%COMP%]{width:80%;margin:auto}.card-body[_ngcontent-%COMP%]{background-color:#002533!important;color:#fff!important}.luna-an-card[_ngcontent-%COMP%]{background-color:red;text-align:left}.luna-an-card-cutie1[_ngcontent-%COMP%]{float:left;width:45%}.luna-an-card-cutie2[_ngcontent-%COMP%]{float:right;width:45%}.plata[_ngcontent-%COMP%]{text-align:left;padding:25px 25px 75px;margin-top:-10px;border:grey;border-style:solid;border-width:thin;background-color:#fff}.cvv[_ngcontent-%COMP%]{text-align:left}.buttonbanca[_ngcontent-%COMP%]{width:100%}.buttonexit[_ngcontent-%COMP%]{width:40%;margin-top:20px;margin-left:30%}"]}),n})();function X2(n){return Array.isArray(n)?n:[n]}function Cr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function $_(n){return n instanceof a.SBq?n.nativeElement:n}var P$=U(9105);function jr(n,t,e,i){return(0,P$.m)(e)&&(i=e,e=void 0),i?jr(n,t,e).pipe((0,et.U)(r=>(0,la.k)(r)?i(...r):i(r))):new Cn.y(r=>{eV(n,t,function(u){r.next(arguments.length>1?Array.prototype.slice.call(arguments):u)},r,e)})}function eV(n,t,e,i,r){let l;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const u=n;n.addEventListener(t,e,r),l=()=>u.removeEventListener(t,e,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const u=n;n.on(t,e),l=()=>u.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const u=n;n.addListener(t,e),l=()=>u.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let u=0,f=n.length;u<f;u++)eV(n[u],t,e,i,r)}i.add(l)}var B$=U(6465),H$=U(6102);new class extends H$.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,r=-1,l=e.length;t=t||e.shift();do{if(i=t.execute(t.state,t.delay))break}while(++r<l&&(t=e.shift()));if(this.active=!1,i){for(;++r<l&&(t=e.shift());)t.unsubscribe();throw i}}}(class extends B$.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(t,e,i);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});U(4581);class q${constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new W$(t,this.durationSelector))}}class W$ extends Ji.Ds{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:r}=this;e=r(t)}catch(r){return this.destination.error(r)}const i=(0,Ji.ft)(e,new Ji.IY(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var tV=U(6561);function xO(n=0,t,e){let i=-1;return(0,tV.k)(t)?i=Number(t)<1?1:Number(t):(0,to.K)(t)&&(e=t),(0,to.K)(e)||(e=ah.P),new Cn.y(r=>{const l=(0,tV.k)(n)?n:+n-e.now();return e.schedule(Z$,l,{index:0,period:i,subscriber:r})})}function Z$(n){const{index:t,period:e,subscriber:i}=n;if(i.next(t),!i.closed){if(-1===e)return i.complete();n.index=t+1,this.schedule(n,e)}}function OO(n,t=ah.P){return function(n){return function(e){return e.lift(new q$(n))}}(()=>xO(n,t))}function In(n){return t=>t.lift(new Y$(n))}class Y${constructor(t){this.notifier=t}call(t,e){const i=new K$(t),r=(0,Ji.ft)(this.notifier,new Ji.IY(i));return r&&!i.seenValue?(i.add(r),e.subscribe(i)):i}}class K$ extends Ji.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let PO;try{PO="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){PO=!1}let tT,G_,LO,Pc,ar=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(n){return"browser"===n}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!PO)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.Lbi))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.Lbi))},token:n,providedIn:"root"}),n})(),QA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function FO(n){return function(){if(null==tT&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>tT=!0}))}finally{tT=tT||!1}return tT}()?n:!!n.capture}function iV(){if(null==G_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return G_=!1,G_;if("scrollBehavior"in document.documentElement.style)G_=!0;else{const n=Element.prototype.scrollTo;G_=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return G_}function XA(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function z_(n){return n.composedPath?n.composedPath()[0]:n.target}function VO(){return void 0!==Pc.__karma__&&!!Pc.__karma__||void 0!==Pc.jasmine&&!!Pc.jasmine||void 0!==Pc.jest&&!!Pc.jest||void 0!==Pc.Mocha&&!!Pc.Mocha}Pc="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};const rV=new a.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,a.f3M)(ne)}});let hg=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new a.vpe,e){const r=e.documentElement?e.documentElement.dir:null,l=(e.body?e.body.dir:null)||r;this.value="ltr"===l||"rtl"===l?l:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(rV,8))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(rV,8))},token:n,providedIn:"root"}),n})(),iT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),tN=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new nt.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Cn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(OO(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,He.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(_n(l=>!l||r.indexOf(l)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,l)=>{this._scrollableContainsElement(l,e)&&i.push(l)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=$_(i),l=e.getElementRef().nativeElement;do{if(r==l)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>jr(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.R0b),a.LFG(ar),a.LFG(ne,8))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.R0b),a.LFG(ar),a.LFG(ne,8))},token:n,providedIn:"root"}),n})(),k0=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new nt.xQ,this._changeListener=l=>{this._change.next(l)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,l=r.getBoundingClientRect();return{top:-l.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-l.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(OO(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ar),a.LFG(a.R0b),a.LFG(ne,8))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ar),a.LFG(a.R0b),a.LFG(ne,8))},token:n,providedIn:"root"}),n})(),cV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),UO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[iT,QA,cV],iT,cV]}),n})();class HO{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class jO extends HO{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class nN extends HO{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class hG extends HO{constructor(t){super(),this.element=t instanceof a.SBq?t.nativeElement:t}}class $O{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof jO?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof nN?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof hG?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class fG extends $O{constructor(t,e,i,r,l){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=u=>{const f=u.element,m=this._document.createComment("dom-portal");f.parentNode.insertBefore(m,f),this.outletElement.appendChild(f),this._attachedPortal=u,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(f,m)})},this._document=l}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let iN=(()=>{class n extends $O{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new a.vpe,this.attachDomPortal=l=>{const u=l.element,f=this._document.createComment("dom-portal");l.setAttachedHost(this),u.parentNode.insertBefore(f,u),this._getRootNode().appendChild(u),this._attachedPortal=l,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(u,f)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,l=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),u=i.createComponent(l,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=e,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a._Vd),a.Y36(a.s_b),a.Y36(ne))},n.\u0275dir=a.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[a.qOj]}),n})(),dV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const fV=iV();class DG{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Cr(-this._previousScrollPosition.left),t.style.top=Cr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,l=i.scrollBehavior||"",u=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),fV&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),fV&&(i.scrollBehavior=l,r.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class TG{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class pV{enable(){}disable(){}attach(){}}function zO(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function gV(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class SG{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();zO(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let IG=(()=>{class n{constructor(e,i,r,l){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new pV,this.close=u=>new TG(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new DG(this._viewportRuler,this._document),this.reposition=u=>new SG(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=l}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(tN),a.LFG(k0),a.LFG(a.R0b),a.LFG(ne))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(tN),a.LFG(k0),a.LFG(a.R0b),a.LFG(ne))},token:n,providedIn:"root"}),n})();class qO{constructor(t){if(this.scrollStrategy=new pV,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class AG{constructor(t,e,i,r,l){this.offsetX=i,this.offsetY=r,this.panelClass=l,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class NG{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let mV=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ne))},token:n,providedIn:"root"}),n})(),MG=(()=>{class n extends mV{constructor(e){super(e),this._keydownListener=i=>{const r=this._attachedOverlays;for(let l=r.length-1;l>-1;l--)if(r[l]._keydownEvents.observers.length>0){r[l]._keydownEvents.next(i);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ne))},token:n,providedIn:"root"}),n})(),RG=(()=>{class n extends mV{constructor(e,i){super(e),this._platform=i,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=z_(r)},this._clickListener=r=>{const l=z_(r),u="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let m=f.length-1;m>-1;m--){const w=f[m];if(!(w._outsidePointerEvents.observers.length<1)&&w.hasAttached()){if(w.overlayElement.contains(l)||w.overlayElement.contains(u))break;w._outsidePointerEvents.next(r)}}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne),a.LFG(ar))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ne),a.LFG(ar))},token:n,providedIn:"root"}),n})(),rT=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||VO()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let l=0;l<r.length;l++)r[l].parentNode.removeChild(r[l])}const i=this._document.createElement("div");i.classList.add(e),VO()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne),a.LFG(ar))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ne),a.LFG(ar))},token:n,providedIn:"root"}),n})();class kG{constructor(t,e,i,r,l,u,f,m,w){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=l,this._keyboardDispatcher=u,this._document=f,this._location=m,this._outsideClickDispatcher=w,this._backdropElement=null,this._backdropClick=new nt.xQ,this._attachments=new nt.xQ,this._detachments=new nt.xQ,this._locationChanges=Vs.w.EMPTY,this._backdropClickHandler=D=>this._backdropClick.next(D),this._keydownEvents=new nt.xQ,this._outsidePointerEvents=new nt.xQ,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ti(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Cr(this._config.width),t.height=Cr(this._config.height),t.minWidth=Cr(this._config.minWidth),t.minHeight=Cr(this._config.minHeight),t.maxWidth=Cr(this._config.maxWidth),t.maxHeight=Cr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const i=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",i),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",i)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(t,e,i){const r=t.classList;X2(e).forEach(l=>{l&&(i?r.add(l):r.remove(l))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(In((0,rh.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.parentNode&&t.parentNode.removeChild(t),this._backdropElement===t&&(this._backdropElement=null))}}const _V="cdk-overlay-connected-position-bounding-box",xG=/([A-Za-z%]+)$/;class yV{constructor(t,e,i,r,l){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=l,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new nt.xQ,this._resizeSubscription=Vs.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(_V),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=[];let l;for(let u of this._preferredPositions){let f=this._getOriginPoint(t,u),m=this._getOverlayPoint(f,e,u),w=this._getOverlayFit(m,e,i,u);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,f);this._canFitWithFlexibleDimensions(w,m,i)?r.push({position:u,origin:f,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(f,u)}):(!l||l.overlayFit.visibleArea<w.visibleArea)&&(l={overlayFit:w,overlayPoint:m,originPoint:f,position:u,overlayRect:e})}if(r.length){let u=null,f=-1;for(const m of r){const w=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);w>f&&(f=w,u=m)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&W_(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(_V),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let i,r;if("center"==e.originX)i=t.left+t.width/2;else{const l=this._isRtl()?t.right:t.left,u=this._isRtl()?t.left:t.right;i="start"==e.originX?l:u}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:i,y:r}}_getOverlayPoint(t,e,i){let r,l;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,l="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+l}}_getOverlayFit(t,e,i,r){const l=bV(e);let{x:u,y:f}=t,m=this._getOffset(r,"x"),w=this._getOffset(r,"y");m&&(u+=m),w&&(f+=w);let k=0-f,F=f+l.height-i.height,j=this._subtractOverflows(l.width,0-u,u+l.width-i.width),te=this._subtractOverflows(l.height,k,F),de=j*te;return{visibleArea:de,isCompletelyWithinViewport:l.width*l.height===de,fitsInViewportVertically:te===l.height,fitsInViewportHorizontally:j==l.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,l=i.right-e.x,u=vV(this._overlayRef.getConfig().minHeight),f=vV(this._overlayRef.getConfig().minWidth),w=t.fitsInViewportHorizontally||null!=f&&f<=l;return(t.fitsInViewportVertically||null!=u&&u<=r)&&w}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=bV(e),l=this._viewportRect,u=Math.max(t.x+r.width-l.width,0),f=Math.max(t.y+r.height-l.height,0),m=Math.max(l.top-i.top-t.y,0),w=Math.max(l.left-i.left-t.x,0);let D=0,T=0;return D=r.width<=l.width?w||-u:t.x<this._viewportMargin?l.left-i.left-t.x:0,T=r.height<=l.height?m||-f:t.y<this._viewportMargin?l.top-i.top-t.y:0,this._previousPushAmount={x:D,y:T},{x:t.x+D,y:t.y+T}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new NG(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let l=0;l<e.length;l++)e[l].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let l,u,f,D,T,k;if("top"===e.overlayY)u=t.y,l=i.height-u+this._viewportMargin;else if("bottom"===e.overlayY)f=i.height-t.y+2*this._viewportMargin,l=i.height-f+this._viewportMargin;else{const F=Math.min(i.bottom-t.y+i.top,t.y),j=this._lastBoundingBoxSize.height;l=2*F,u=t.y-F,l>j&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.y-j/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)k=i.width-t.x+this._viewportMargin,D=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)T=t.x,D=i.right-t.x;else{const F=Math.min(i.right-t.x+i.left,t.x),j=this._lastBoundingBoxSize.width;D=2*F,T=t.x-F,D>j&&!this._isInitialRender&&!this._growAfterOpen&&(T=t.x-j/2)}return{top:u,left:T,bottom:f,right:k,width:D,height:l}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const l=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;r.height=Cr(i.height),r.top=Cr(i.top),r.bottom=Cr(i.bottom),r.width=Cr(i.width),r.left=Cr(i.left),r.right=Cr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",l&&(r.maxHeight=Cr(l)),u&&(r.maxWidth=Cr(u))}this._lastBoundingBoxSize=i,W_(this._boundingBox.style,r)}_resetBoundingBoxStyles(){W_(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){W_(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),l=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(r){const D=this._viewportRuler.getViewportScrollPosition();W_(i,this._getExactOverlayY(e,t,D)),W_(i,this._getExactOverlayX(e,t,D))}else i.position="static";let f="",m=this._getOffset(e,"x"),w=this._getOffset(e,"y");m&&(f+=`translateX(${m}px) `),w&&(f+=`translateY(${w}px)`),i.transform=f.trim(),u.maxHeight&&(r?i.maxHeight=Cr(u.maxHeight):l&&(i.maxHeight="")),u.maxWidth&&(r?i.maxWidth=Cr(u.maxWidth):l&&(i.maxWidth="")),W_(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},l=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,i));let u=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return l.y-=u,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(l.y+this._overlayRect.height)+"px":r.top=Cr(l.y),r}_getExactOverlayX(t,e,i){let u,r={left:"",right:""},l=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,i)),u=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===u?r.right=this._document.documentElement.clientWidth-(l.x+this._overlayRect.width)+"px":r.left=Cr(l.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:gV(t,i),isOriginOutsideView:zO(t,i),isOverlayClipped:gV(e,i),isOverlayOutsideView:zO(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&X2(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof a.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function W_(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function vV(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(xG);return e&&"px"!==e?null:parseFloat(t)}return n||null}function bV(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class OG{constructor(t,e,i,r,l,u,f){this._preferredPositions=[],this._positionStrategy=new yV(i,r,l,u,f).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,i,r){const l=new AG(t,e,i,r);return this._preferredPositions.push(l),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const wV="cdk-global-overlay-wrapper";class PG{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(wV),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:l,maxWidth:u,maxHeight:f}=i,m=!("100%"!==r&&"100vw"!==r||u&&"100%"!==u&&"100vw"!==u),w=!("100%"!==l&&"100vh"!==l||f&&"100%"!==f&&"100vh"!==f);t.position=this._cssPosition,t.marginLeft=m?"0":this._leftOffset,t.marginTop=w?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,m?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=w?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(wV),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let FG=(()=>{class n{constructor(e,i,r,l){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=l}global(){return new PG}connectedTo(e,i,r){return new OG(i,r,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new yV(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(k0),a.LFG(ne),a.LFG(ar),a.LFG(rT))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(k0),a.LFG(ne),a.LFG(ar),a.LFG(rT))},token:n,providedIn:"root"}),n})(),LG=0,x0=(()=>{class n{constructor(e,i,r,l,u,f,m,w,D,T,k){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=l,this._keyboardDispatcher=u,this._injector=f,this._ngZone=m,this._document=w,this._directionality=D,this._location=T,this._outsideClickDispatcher=k}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),l=this._createPortalOutlet(r),u=new qO(e);return u.direction=u.direction||this._directionality.value,new kG(l,i,r,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+LG++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(a.z2F)),new fG(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(IG),a.LFG(rT),a.LFG(a._Vd),a.LFG(FG),a.LFG(MG),a.LFG(a.zs3),a.LFG(a.R0b),a.LFG(ne),a.LFG(hg),a.LFG(Lt),a.LFG(RG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const UG={provide:new a.OlP("cdk-connected-overlay-scroll-strategy"),deps:[x0],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let HG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[x0,UG],imports:[[iT,dV,UO],UO]}),n})();class jG{constructor(t){this.total=t}call(t,e){return e.subscribe(new $G(t,this.total))}}class $G extends an.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}let IV=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function(n){try{return n.frameElement}catch(t){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===NV(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),l=NV(e);return e.hasAttribute("contenteditable")?-1!==l:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==l:"video"===r?-1!==l&&(null!==l||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||AV(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ar))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ar))},token:n,providedIn:"root"}),n})();function AV(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function NV(n){if(!AV(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class a6{constructor(t,e,i,r,l=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,l||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let i=0;i<e.length;i++)e[i].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]):e[i].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ti(1)).subscribe(t)}}let MV=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new a6(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(IV),a.LFG(a.R0b),a.LFG(ne))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(IV),a.LFG(a.R0b),a.LFG(ne))},token:n,providedIn:"root"}),n})();"undefined"!=typeof Element&&Element;const xV=new a.OlP("cdk-input-modality-detector-options"),h6={ignoreKeys:[18,17,224,91,16]},O0=FO({passive:!0,capture:!0});let PV=(()=>{class n{constructor(e,i,r,l){this._platform=e,this._mostRecentTarget=null,this._modality=new Nn(null),this._lastTouchMs=0,this._onKeydown=u=>{var f,m;(null===(m=null===(f=this._options)||void 0===f?void 0:f.ignoreKeys)||void 0===m?void 0:m.some(w=>w===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=z_(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function(n){return 0===n.offsetX&&0===n.offsetY}(u)?"keyboard":"mouse"),this._mostRecentTarget=z_(u))},this._onTouchstart=u=>{!function(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(u)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=z_(u)):this._modality.next("keyboard")},this._options=Object.assign(Object.assign({},h6),l),this.modalityDetected=this._modality.pipe(function(n){return t=>t.lift(new jG(n))}(1)),this.modalityChanged=this.modalityDetected.pipe(lh()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,O0),r.addEventListener("mousedown",this._onMousedown,O0),r.addEventListener("touchstart",this._onTouchstart,O0)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,O0),document.removeEventListener("mousedown",this._onMousedown,O0),document.removeEventListener("touchstart",this._onTouchstart,O0))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ar),a.LFG(a.R0b),a.LFG(ne),a.LFG(xV,8))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ar),a.LFG(a.R0b),a.LFG(ne),a.LFG(xV,8))},token:n,providedIn:"root"}),n})();const VV=new a.OlP("cdk-focus-monitor-default-options"),rN=FO({passive:!0,capture:!0});let BV=(()=>{class n{constructor(e,i,r,l,u){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new nt.xQ,this._rootNodeFocusAndBlurListener=f=>{const m=z_(f),w="focus"===f.type?this._onFocus:this._onBlur;for(let D=m;D;D=D.parentElement)w.call(this,f,D)},this._document=l,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(e,i=!1){const r=$_(e);if(!this._platform.isBrowser||1!==r.nodeType)return(0,He.of)(null);const l=function(n){if(function(){if(null==LO){const n="undefined"!=typeof document?document.head:null;LO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return LO}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),u=this._elementInfo.get(r);if(u)return i&&(u.checkChildren=!0),u.subject;const f={checkChildren:i,subject:new nt.xQ,rootNode:l};return this._elementInfo.set(r,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(e){const i=$_(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const l=$_(e);l===this._getDocument().activeElement?this._getClosestElementsInfo(l).forEach(([f,m])=>this._originChanged(f,i,m)):(this._setOrigin(i),"function"==typeof l.focus&&l.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,i,r){r?e.classList.add(i):e.classList.remove(i)}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){this._toggleClass(e,"cdk-focused",!!i),this._toggleClass(e,"cdk-touch-focused","touch"===i),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(e,"cdk-mouse-focused","mouse"===i),this._toggleClass(e,"cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),l=z_(e);!r||!r.checkChildren&&i!==l||this._originChanged(i,this._getFocusOrigin(l),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,rN),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,rN)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(In(this._stopInputModalityDetector)).subscribe(l=>{this._setOrigin(l,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rN),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rN),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,l)=>{(l===e||r.checkChildren&&l.contains(e))&&i.push([l,r])}),i}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.R0b),a.LFG(ar),a.LFG(PV),a.LFG(ne,8),a.LFG(VV,8))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.R0b),a.LFG(ar),a.LFG(PV),a.LFG(ne,8),a.LFG(VV,8))},token:n,providedIn:"root"}),n})();const UV="cdk-high-contrast-black-on-white",HV="cdk-high-contrast-white-on-black",ZO="cdk-high-contrast-active";let jV=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,l=(r&&r.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),l){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(ZO),e.remove(UV),e.remove(HV),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(ZO),e.add(UV)):2===i&&(e.add(ZO),e.add(HV))}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ar),a.LFG(ne))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ar),a.LFG(ne))},token:n,providedIn:"root"}),n})();const $V=new a.GfV("12.2.12");class GV{}const Yh="*";function m6(n,t){return{type:7,name:n,definitions:t,options:{}}}function zV(n,t=null){return{type:4,styles:t,timings:n}}function qV(n,t=null){return{type:2,steps:n,options:t}}function P0(n){return{type:6,styles:n,offset:null}}function WV(n,t,e){return{type:0,name:n,styles:t,options:e}}function ZV(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function YV(n){Promise.resolve(null).then(n)}class F0{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){YV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class KV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const l=this.players.length;0==l?YV(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==l&&this._onFinish()}),u.onDestroy(()=>{++i==l&&this._onDestroy()}),u.onStart(()=>{++r==l&&this._onStart()})}),this.totalTime=this.players.reduce((u,f)=>Math.max(u,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function QV(){return"undefined"!=typeof window&&void 0!==window.document}function KO(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function fg(n){switch(n.length){case 0:return new F0;case 1:return n[0];default:return new KV(n)}}function JV(n,t,e,i,r={},l={}){const u=[],f=[];let m=-1,w=null;if(i.forEach(D=>{const T=D.offset,k=T==m,F=k&&w||{};Object.keys(D).forEach(j=>{let te=j,de=D[j];if("offset"!==j)switch(te=t.normalizePropertyName(te,u),de){case"!":de=r[j];break;case Yh:de=l[j];break;default:de=t.normalizeStyleValue(j,te,de,u)}F[te]=de}),k||f.push(F),w=F,m=T}),u.length){const D="\n - ";throw new Error(`Unable to animate due to the following errors:${D}${u.join(D)}`)}return f}function QO(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&JO(e,"start",n)));break;case"done":n.onDone(()=>i(e&&JO(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&JO(e,"destroy",n)))}}function JO(n,t,e){const i=e.totalTime,l=XO(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),u=n._data;return null!=u&&(l._data=u),l}function XO(n,t,e,i,r="",l=0,u){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:l,disabled:!!u}}function xa(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function XV(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let eP=(n,t)=>!1,tP=(n,t)=>!1,eB=(n,t,e)=>[];const tB=KO();(tB||"undefined"!=typeof Element)&&(eP=QV()?(n,t)=>{for(;t&&t!==document.documentElement;){if(t===n)return!0;t=t.parentNode||t.host}return!1}:(n,t)=>n.contains(t),tP=(()=>{if(tB||Element.prototype.matches)return(n,t)=>n.matches(t);{const n=Element.prototype,t=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return t?(e,i)=>t.apply(e,[i]):tP}})(),eB=(n,t,e)=>{let i=[];if(e){const r=n.querySelectorAll(t);for(let l=0;l<r.length;l++)i.push(r[l])}else{const r=n.querySelector(t);r&&i.push(r)}return i});let Z_=null,nB=!1;function nP(n){Z_||(Z_=("undefined"!=typeof document?document.body:null)||{},nB=!!Z_.style&&"WebkitAppearance"in Z_.style);let t=!0;return Z_.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Z_.style,!t&&nB&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Z_.style)),t}const iP=tP,rP=eP,sP=eB;function iB(n){const t={};return Object.keys(n).forEach(e=>{const i=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=n[e]}),t}let rB=(()=>{class n{validateStyleProperty(e){return nP(e)}matchesElement(e,i){return iP(e,i)}containsElement(e,i){return rP(e,i)}query(e,i,r){return sP(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,l,u,f=[],m){return new F0(r,l)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),oP=(()=>{class n{}return n.NOOP=new rB,n})();const aP="ng-enter",sN="ng-leave",oN="ng-trigger",aN=".ng-trigger",oB="ng-animating",lP=".ng-animating";function Y_(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:cP(parseFloat(t[1]),t[2])}function cP(n,t){switch(t){case"s":return 1e3*n;default:return n}}function lN(n,t,e){return n.hasOwnProperty("duration")?n:function(n,t,e){let r,l=0,u="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return t.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};r=cP(parseFloat(f[1]),f[2]);const m=f[3];null!=m&&(l=cP(parseFloat(m),f[4]));const w=f[5];w&&(u=w)}else r=n;if(!e){let f=!1,m=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),f=!0),l<0&&(t.push("Delay values below 0 are not allowed for this animation step."),f=!0),f&&t.splice(m,0,`The provided timing value "${n}" is invalid.`)}return{duration:r,delay:l,easing:u}}(n,t,e)}function L0(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function pg(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else L0(n,e);return e}function lB(n,t,e){return e?t+":"+e+";":""}function cB(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=lB(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=lB(0,D6(e),n.style[e]));n.setAttribute("style",t)}function ad(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=dP(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),KO()&&cB(n))}function K_(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=dP(e);n.style[i]=""}),KO()&&cB(n))}function sT(n){return Array.isArray(n)?1==n.length?n[0]:qV(n):n}const uP=new RegExp("{{\\s*(.+?)\\s*}}","g");function uB(n){let t=[];if("string"==typeof n){let e;for(;e=uP.exec(n);)t.push(e[1]);uP.lastIndex=0}return t}function cN(n,t,e){const i=n.toString(),r=i.replace(uP,(l,u)=>{let f=t[u];return t.hasOwnProperty(u)||(e.push(`Please provide a value for the animation param ${u}`),f=""),f.toString()});return r==i?n:r}function uN(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const E6=/-+([a-z0-9])/g;function dP(n){return n.replace(E6,(...t)=>t[1].toUpperCase())}function D6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function dB(n,t){return 0===n||0===t}function hB(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let l=t[0],u=[];if(i.forEach(f=>{l.hasOwnProperty(f)||u.push(f),l[f]=e[f]}),u.length)for(var r=1;r<t.length;r++){let f=t[r];u.forEach(function(m){f[m]=hP(n,m)})}}return t}function Oa(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function hP(n,t){return window.getComputedStyle(n)[t]}function T6(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function(n,t,e){if(":"==n[0]){const m=function(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,e);if("function"==typeof m)return void t.push(m);n=m}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(`The provided transition expression "${n}" is not supported`),t;const r=i[1],l=i[2],u=i[3];t.push(fB(r,u));"<"==l[0]&&!("*"==r&&"*"==u)&&t.push(fB(u,r))}(i,e,t)):e.push(n),e}const hN=new Set(["true","1"]),fN=new Set(["false","0"]);function fB(n,t){const e=hN.has(n)||fN.has(n),i=hN.has(t)||fN.has(t);return(r,l)=>{let u="*"==n||n==r,f="*"==t||t==l;return!u&&e&&"boolean"==typeof r&&(u=r?hN.has(n):fN.has(n)),!f&&i&&"boolean"==typeof l&&(f=l?hN.has(t):fN.has(t)),u&&f}}const A6=new RegExp("s*:selfs*,?","g");function fP(n,t,e){return new N6(n).build(t,e)}class N6{constructor(t){this._driver=t}build(t,e){const i=new k6(e);return this._resetContextStyleTimingState(i),Oa(this,sT(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const l=[],u=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(f=>{if(this._resetContextStyleTimingState(e),0==f.type){const m=f,w=m.name;w.toString().split(/\s*,\s*/).forEach(D=>{m.name=D,l.push(this.visitState(m,e))}),m.name=w}else if(1==f.type){const m=this.visitTransition(f,e);i+=m.queryCount,r+=m.depCount,u.push(m)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:l,transitions:u,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const l=new Set,u=r||{};if(i.styles.forEach(f=>{if(pN(f)){const m=f;Object.keys(m).forEach(w=>{uB(m[w]).forEach(D=>{u.hasOwnProperty(D)||l.add(D)})})}}),l.size){const f=uN(l.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${f.join(", ")}`)}}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Oa(this,sT(t.animation),e);return{type:1,matchers:T6(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Q_(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Oa(this,i,e)),options:Q_(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const l=t.steps.map(u=>{e.currentTime=i;const f=Oa(this,u,e);return r=Math.max(r,e.currentTime),f});return e.currentTime=r,{type:3,steps:l,options:Q_(t.options)}}visitAnimate(t,e){const i=function(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return pP(lN(n,t).duration,0,"");const i=n;if(i.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=pP(0,0,"");return l.dynamic=!0,l.strValue=i,l}return e=e||lN(i,t),pP(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,l=t.styles?t.styles:P0({});if(5==l.type)r=this.visitKeyframes(l,e);else{let u=t.styles,f=!1;if(!u){f=!0;const w={};i.easing&&(w.easing=i.easing),u=P0(w)}e.currentTime+=i.duration+i.delay;const m=this.visitStyle(u,e);m.isEmptyStep=f,r=m}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(u=>{"string"==typeof u?u==Yh?i.push(u):e.errors.push(`The provided style string value ${u} is not allowed.`):i.push(u)}):i.push(t.styles);let r=!1,l=null;return i.forEach(u=>{if(pN(u)){const f=u,m=f.easing;if(m&&(l=m,delete f.easing),!r)for(let w in f)if(f[w].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:l,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,l=e.currentTime;i&&l>0&&(l-=i.duration+i.delay),t.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(f=>{if(!this._driver.validateStyleProperty(f))return void e.errors.push(`The provided animation property "${f}" is not a supported CSS property for animations`);const m=e.collectedStyles[e.currentQuerySelector],w=m[f];let D=!0;w&&(l!=r&&l>=w.startTime&&r<=w.endTime&&(e.errors.push(`The CSS property "${f}" that exists between the times of "${w.startTime}ms" and "${w.endTime}ms" is also being animated in a parallel animation between the times of "${l}ms" and "${r}ms"`),D=!1),l=w.startTime),D&&(m[f]={startTime:l,endTime:r}),e.options&&function(n,t,e){const i=t.params||{},r=uB(n);r.length&&r.forEach(l=>{i.hasOwnProperty(l)||e.push(`Unable to resolve the local animation param ${l} in the given list of values`)})}(u[f],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),i;let l=0;const u=[];let f=!1,m=!1,w=0;const D=t.steps.map(Pe=>{const Ve=this._makeStyleAst(Pe,e);let pt=null!=Ve.offset?Ve.offset:function(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(pN(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(pN(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(Ve.styles),lt=0;return null!=pt&&(l++,lt=Ve.offset=pt),m=m||lt<0||lt>1,f=f||lt<w,w=lt,u.push(lt),Ve});m&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),f&&e.errors.push("Please ensure that all keyframe offsets are in order");const T=t.steps.length;let k=0;l>0&&l<T?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==l&&(k=1/(T-1));const F=T-1,j=e.currentTime,te=e.currentAnimateTimings,de=te.duration;return D.forEach((Pe,Ve)=>{const pt=k>0?Ve==F?1:k*Ve:u[Ve],lt=pt*de;e.currentTime=j+te.delay+lt,te.duration=lt,this._validateStyleAst(Pe,e),Pe.offset=pt,i.styles.push(Pe)}),i}visitReference(t,e){return{type:8,animation:Oa(this,sT(t.animation),e),options:Q_(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Q_(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Q_(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[l,u]=function(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(A6,"")),[n=n.replace(/@\*/g,aN).replace(/@\w+/g,e=>aN+"-"+e.substr(1)).replace(/:animating/g,lP),t]}(t.selector);e.currentQuerySelector=i.length?i+" "+l:l,xa(e.collectedStyles,e.currentQuerySelector,{});const f=Oa(this,sT(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:l,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:f,originalSelector:t.selector,options:Q_(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:lN(t.timings,e.errors,!0);return{type:12,animation:Oa(this,sT(t.animation),e),timings:i,options:null}}}class k6{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function pN(n){return!Array.isArray(n)&&"object"==typeof n}function Q_(n){return n?(n=L0(n)).params&&(n.params=function(n){return n?L0(n):null}(n.params)):n={},n}function pP(n,t,e){return{duration:n,delay:t,easing:e}}function gP(n,t,e,i,r,l,u=null,f=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:l,totalTime:r+l,easing:u,subTimeline:f}}class gN{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const L6=new RegExp(":enter","g"),B6=new RegExp(":leave","g");function mP(n,t,e,i,r,l={},u={},f,m,w=[]){return(new U6).buildKeyframes(n,t,e,i,r,l,u,f,m,w)}class U6{buildKeyframes(t,e,i,r,l,u,f,m,w,D=[]){w=w||new gN;const T=new _P(t,e,w,r,l,D,[]);T.options=m,T.currentTimeline.setStyles([u],null,T.errors,m),Oa(this,i,T);const k=T.timelines.filter(F=>F.containsAnimation());if(k.length&&Object.keys(f).length){const F=k[k.length-1];F.allowOnlyTimelineStyles()||F.setStyles([f],null,T.errors,m)}return k.length?k.map(F=>F.buildKeyframes()):[gP(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.consume(e.element);if(i){const r=e.createSubContext(t.options),l=e.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);l!=u&&e.transformIntoNewTimeline(u)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let l=e.currentTimeline.currentTime;const u=null!=i.duration?Y_(i.duration):null,f=null!=i.delay?Y_(i.delay):null;return 0!==u&&t.forEach(m=>{const w=e.appendInstructionToTimeline(m,u,f);l=Math.max(l,w.duration+w.delay)}),l}visitReference(t,e){e.updateOptions(t.options,!0),Oa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const l=t.options;if(l&&(l.params||l.delay)&&(r=e.createSubContext(l),r.transformIntoNewTimeline(),null!=l.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=mN);const u=Y_(l.delay);r.delayNextStep(u)}t.steps.length&&(t.steps.forEach(u=>Oa(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const l=t.options&&t.options.delay?Y_(t.options.delay):0;t.steps.forEach(u=>{const f=e.createSubContext(t.options);l&&f.delayNextStep(l),Oa(this,u,f),r=Math.max(r,f.currentTimeline.currentTime),i.push(f.currentTimeline)}),i.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return lN(e.params?cN(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const l=t.style;5==l.type?this.visitKeyframes(l,e):(e.incrementTime(i.duration),this.visitStyle(l,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const l=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(l):i.setStyles(t.styles,l,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,l=i.duration,f=e.createSubContext().currentTimeline;f.easing=i.easing,t.styles.forEach(m=>{f.forwardTime((m.offset||0)*l),f.setStyles(m.styles,m.easing,e.errors,e.options),f.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(f),e.transformIntoNewTimeline(r+l),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},l=r.delay?Y_(r.delay):0;l&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=mN);let u=i;const f=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=f.length;let m=null;f.forEach((w,D)=>{e.currentQueryIndex=D;const T=e.createSubContext(t.options,w);l&&T.delayNextStep(l),w===e.element&&(m=T.currentTimeline),Oa(this,t.animation,T),T.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,T.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),m&&(e.currentTimeline.mergeTimelineCollectedStyles(m),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,l=t.timings,u=Math.abs(l.duration),f=u*(e.currentQueryTotal-1);let m=u*e.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":m=f-m;break;case"full":m=i.currentStaggerTime}const D=e.currentTimeline;m&&D.delayNextStep(m);const T=D.currentTime;Oa(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-T+(r.startTime-i.currentTimeline.startTime)}}const mN={};class _P{constructor(t,e,i,r,l,u,f,m){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=l,this.errors=u,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mN,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new _N(this._driver,e,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Y_(i.duration)),null!=i.delay&&(r.delay=Y_(i.delay));const l=i.params;if(l){let u=r.params;u||(u=this.options.params={}),Object.keys(l).forEach(f=>{(!e||!u.hasOwnProperty(f))&&(u[f]=cN(l[f],u,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,l=new _P(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(t),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(t){return this.previousNode=mN,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},l=new H6(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(l),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,l,u){let f=[];if(r&&f.push(this.element),t.length>0){t=(t=t.replace(L6,"."+this._enterClassName)).replace(B6,"."+this._leaveClassName);let w=this._driver.query(this.element,t,1!=i);0!==i&&(w=i<0?w.slice(w.length+i,w.length):w.slice(0,i)),f.push(...w)}return!l&&0==f.length&&u.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),f}}class _N{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new _N(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Yh,this._currentKeyframe[e]=Yh}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const l=r&&r.params||{},u=function(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(l=>{e[l]=Yh})):pg(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(u).forEach(f=>{const m=cN(u[f],l,i);this._pendingStyles[f]=m,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:Yh),this._updateStyle(f,m)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((f,m)=>{const w=pg(f,!0);Object.keys(w).forEach(D=>{const T=w[D];"!"==T?t.add(D):T==Yh&&e.add(D)}),i||(w.offset=m/this.duration),r.push(w)});const l=t.size?uN(t.values()):[],u=e.size?uN(e.values()):[];if(i){const f=r[0],m=L0(f);f.offset=0,m.offset=1,r=[f,m]}return gP(this.element,r,l,u,this.duration,this.startTime,this.easing,!1)}}class H6 extends _N{constructor(t,e,i,r,l,u,f=!1){super(t,e,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=l,this._stretchStartingKeyframe=f,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const l=[],u=i+e,f=e/u,m=pg(t[0],!1);m.offset=0,l.push(m);const w=pg(t[0],!1);w.offset=mB(f),l.push(w);const D=t.length-1;for(let T=1;T<=D;T++){let k=pg(t[T],!1);k.offset=mB((e+k.offset*i)/u),l.push(k)}i=u,e=0,r="",t=l}return gP(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function mB(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class yP{}class $6 extends yP{normalizePropertyName(t,e){return dP(t)}normalizeStyleValue(t,e,i,r){let l="";const u=i.toString().trim();if(G6[e]&&0!==i&&"0"!==i)if("number"==typeof i)l="px";else{const f=i.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&r.push(`Please provide a CSS unit value for ${t}:${i}`)}return u+l}}const G6=(()=>function(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function _B(n,t,e,i,r,l,u,f,m,w,D,T,k){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:l,toState:i,toStyles:u,timelines:f,queriedElements:m,preStyleProps:w,postStyleProps:D,totalTime:T,errors:k}}const vP={};class yB{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function(n,t,e,i,r){return n.some(l=>l(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],l=this._stateStyles[t],u=r?r.buildStyles(e,i):{};return l?l.buildStyles(e,i):u}build(t,e,i,r,l,u,f,m,w,D){const T=[],k=this.ast.options&&this.ast.options.params||vP,j=this.buildStyles(i,f&&f.params||vP,T),te=m&&m.params||vP,de=this.buildStyles(r,te,T),Pe=new Set,Ve=new Map,pt=new Map,lt="void"===r,gn={params:Object.assign(Object.assign({},k),te)},li=D?[]:mP(t,e,this.ast.animation,l,u,j,de,gn,w,T);let Er=0;if(li.forEach(ef=>{Er=Math.max(ef.duration+ef.delay,Er)}),T.length)return _B(e,this._triggerName,i,r,lt,j,de,[],[],Ve,pt,Er,T);li.forEach(ef=>{const tf=ef.element,Kj=xa(Ve,tf,{});ef.preStyleProps.forEach(gy=>Kj[gy]=!0);const ZT=xa(pt,tf,{});ef.postStyleProps.forEach(gy=>ZT[gy]=!0),tf!==e&&Pe.add(tf)});const ss=uN(Pe.values());return _B(e,this._triggerName,i,r,lt,j,de,li,ss,Ve,pt,Er)}}class W6{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=L0(this.defaultParams);return Object.keys(t).forEach(l=>{const u=t[l];null!=u&&(r[l]=u)}),this.styles.styles.forEach(l=>{if("string"!=typeof l){const u=l;Object.keys(u).forEach(f=>{let m=u[f];m.length>1&&(m=cN(m,r,e));const w=this.normalizer.normalizePropertyName(f,e);m=this.normalizer.normalizeStyleValue(f,w,m,e),i[w]=m})}}),i}}class Y6{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new W6(r.style,r.options&&r.options.params||{},i)}),vB(this.states,"true","1"),vB(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new yB(t,r,this.states))}),this.fallbackTransition=function(n,t,e){return new yB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,f)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(u=>u.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function vB(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const Q6=new gN;class J6{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],r=fP(this._driver,e,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,i){const r=t.element,l=JV(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,l,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],l=this._animations[t];let u;const f=new Map;if(l?(u=mP(this._driver,e,l,aP,sN,{},{},i,Q6,r),u.forEach(D=>{const T=xa(f,D.element,{});D.postStyleProps.forEach(k=>T[k]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),u=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);f.forEach((D,T)=>{Object.keys(D).forEach(k=>{D[k]=this._driver.computeStyle(T,k,Yh)})});const w=fg(u.map(D=>{const T=f.get(D.element);return this._buildPlayer(D,{},T)}));return this._playersById[t]=w,w.onDestroy(()=>this.destroy(t)),this.players.push(w),w}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,i,r){const l=XO(e,"","","");return QO(this._getPlayer(t),i,l,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const l=this._getPlayer(t);switch(i){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const bB="ng-animate-queued",wB="ng-animate-disabled",CB=".ng-animate-disabled",n4=[],EB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},i4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ml="__ng_removed";class bP{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(i?t.value:t),i){const l=L0(t);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const oT="void",wP=new bP(oT);class r4{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Rl(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${e}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${e}" is not supported!`);const l=xa(this._elementListeners,t,[]),u={name:e,phase:i,callback:r};l.push(u);const f=xa(this._engine.statesByElement,t,{});return f.hasOwnProperty(e)||(Rl(t,oN),Rl(t,oN+"-"+e),f[e]=wP),()=>{this._engine.afterFlush(()=>{const m=l.indexOf(u);m>=0&&l.splice(m,1),this._triggers[e]||delete f[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,i,r=!0){const l=this._getTrigger(e),u=new CP(this.id,e,t);let f=this._engine.statesByElement.get(t);f||(Rl(t,oN),Rl(t,oN+"-"+e),this._engine.statesByElement.set(t,f={}));let m=f[e];const w=new bP(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&m&&w.absorbOptions(m.options),f[e]=w,m||(m=wP),w.value!==oT&&m.value===w.value){if(!function(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const l=e[r];if(!t.hasOwnProperty(l)||n[l]!==t[l])return!1}return!0}(m.params,w.params)){const te=[],de=l.matchStyles(m.value,m.params,te),Pe=l.matchStyles(w.value,w.params,te);te.length?this._engine.reportError(te):this._engine.afterFlush(()=>{K_(t,de),ad(t,Pe)})}return}const k=xa(this._engine.playersByElement,t,[]);k.forEach(te=>{te.namespaceId==this.id&&te.triggerName==e&&te.queued&&te.destroy()});let F=l.matchTransition(m.value,w.value,t,w.params),j=!1;if(!F){if(!r)return;F=l.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:F,fromState:m,toState:w,player:u,isFallbackTransition:j}),j||(Rl(t,bB),u.onStart(()=>{V0(t,bB)})),u.onDone(()=>{let te=this.players.indexOf(u);te>=0&&this.players.splice(te,1);const de=this._engine.playersByElement.get(t);if(de){let Pe=de.indexOf(u);Pe>=0&&de.splice(Pe,1)}}),this.players.push(u),k.push(u),u}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,aN,!0);i.forEach(r=>{if(r[Ml])return;const l=this._engine.fetchNamespacesByElement(r);l.size?l.forEach(u=>u.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const l=this._engine.statesByElement.get(t);if(l){const u=[];if(Object.keys(l).forEach(f=>{if(this._triggers[f]){const m=this.trigger(t,f,oT,r);m&&u.push(m)}}),u.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),i&&fg(u).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(l=>{const u=l.name;if(r.has(u))return;r.add(u);const m=this._triggers[u].fallbackTransition,w=i[u]||wP,D=new bP(oT),T=new CP(this.id,u,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:u,transition:m,fromState:w,toState:D,player:T,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const l=i.players.length?i.playersByQueriedElement.get(t):[];if(l&&l.length)r=!0;else{let u=t;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const l=t[Ml];(!l||l===EB)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Rl(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const l=i.element,u=this._elementListeners.get(l);u&&u.forEach(f=>{if(f.name==i.triggerName){const m=XO(l,i.triggerName,i.fromState.value,i.toState.value);m._data=t,QO(i.player,f.phase,m,f.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const l=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==l||0==u?l-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class s4{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,l)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new r4(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let l=i;l>=0;l--)if(this.driver.containsElement(this._namespaceList[l].hostElement,e)){this._namespaceList.splice(l+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let l=0;l<r.length;l++){const u=i[r[l]].namespaceId;if(u){const f=this._fetchNamespace(u);f&&e.add(f)}}}return e}trigger(t,e,i,r){if(yN(e)){const l=this._fetchNamespace(t);if(l)return l.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!yN(e))return;const l=e[Ml];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(t){const u=this._fetchNamespace(t);u&&u.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Rl(t,wB)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),V0(t,wB))}removeNode(t,e,i,r){if(yN(e)){const l=t?this._fetchNamespace(t):null;if(l?l.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const u=this.namespacesByHostElement.get(e);u&&u.id!==t&&u.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r){this.collectedLeaveElements.push(e),e[Ml]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1}}listen(t,e,i,r,l){return yN(e)?this._fetchNamespace(t).listen(e,i,r,l):()=>{}}_buildInstruction(t,e,i,r,l){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,l)}destroyInnerAnimations(t){let e=this.driver.query(t,aN,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,lP,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return fg(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Ml];if(e&&e.setForRemoval){if(t[Ml]=EB,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,CB)&&this.markElementAsDisabled(t,!1),this.driver.query(t,CB,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Rl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?fg(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const i=new gN,r=[],l=new Map,u=[],f=new Map,m=new Map,w=new Map,D=new Set;this.disabledNodes.forEach(tt=>{D.add(tt);const gt=this.driver.query(tt,".ng-animate-queued",!0);for(let kt=0;kt<gt.length;kt++)D.add(gt[kt])});const T=this.bodyNode,k=Array.from(this.statesByElement.keys()),F=SB(k,this.collectedEnterElements),j=new Map;let te=0;F.forEach((tt,gt)=>{const kt=aP+te++;j.set(gt,kt),tt.forEach(bn=>Rl(bn,kt))});const de=[],Pe=new Set,Ve=new Set;for(let tt=0;tt<this.collectedLeaveElements.length;tt++){const gt=this.collectedLeaveElements[tt],kt=gt[Ml];kt&&kt.setForRemoval&&(de.push(gt),Pe.add(gt),kt.hasAnimation?this.driver.query(gt,".ng-star-inserted",!0).forEach(bn=>Pe.add(bn)):Ve.add(gt))}const pt=new Map,lt=SB(k,Array.from(Pe));lt.forEach((tt,gt)=>{const kt=sN+te++;pt.set(gt,kt),tt.forEach(bn=>Rl(bn,kt))}),t.push(()=>{F.forEach((tt,gt)=>{const kt=j.get(gt);tt.forEach(bn=>V0(bn,kt))}),lt.forEach((tt,gt)=>{const kt=pt.get(gt);tt.forEach(bn=>V0(bn,kt))}),de.forEach(tt=>{this.processLeaveNode(tt)})});const gn=[],li=[];for(let tt=this._namespaceList.length-1;tt>=0;tt--)this._namespaceList[tt].drainQueuedTransitions(e).forEach(kt=>{const bn=kt.player,os=kt.element;if(gn.push(bn),this.collectedEnterElements.length){const pd=os[Ml];if(pd&&pd.setForMove)return void bn.destroy()}const fd=!T||!this.driver.containsElement(T,os),Fa=pt.get(os),Sg=j.get(os),Gi=this._buildInstruction(kt,i,Sg,Fa,fd);if(Gi.errors&&Gi.errors.length)li.push(Gi);else{if(fd)return bn.onStart(()=>K_(os,Gi.fromStyles)),bn.onDestroy(()=>ad(os,Gi.toStyles)),void r.push(bn);if(kt.isFallbackTransition)return bn.onStart(()=>K_(os,Gi.fromStyles)),bn.onDestroy(()=>ad(os,Gi.toStyles)),void r.push(bn);Gi.timelines.forEach(pd=>pd.stretchStartingKeyframe=!0),i.append(os,Gi.timelines),u.push({instruction:Gi,player:bn,element:os}),Gi.queriedElements.forEach(pd=>xa(f,pd,[]).push(bn)),Gi.preStyleProps.forEach((pd,YT)=>{const OM=Object.keys(pd);if(OM.length){let my=m.get(YT);my||m.set(YT,my=new Set),OM.forEach(hL=>my.add(hL))}}),Gi.postStyleProps.forEach((pd,YT)=>{const OM=Object.keys(pd);let my=w.get(YT);my||w.set(YT,my=new Set),OM.forEach(hL=>my.add(hL))})}});if(li.length){const tt=[];li.forEach(gt=>{tt.push(`@${gt.triggerName} has failed due to:\n`),gt.errors.forEach(kt=>tt.push(`- ${kt}\n`))}),gn.forEach(gt=>gt.destroy()),this.reportError(tt)}const Er=new Map,ss=new Map;u.forEach(tt=>{const gt=tt.element;i.has(gt)&&(ss.set(gt,gt),this._beforeAnimationBuild(tt.player.namespaceId,tt.instruction,Er))}),r.forEach(tt=>{const gt=tt.element;this._getPreviousPlayers(gt,!1,tt.namespaceId,tt.triggerName,null).forEach(bn=>{xa(Er,gt,[]).push(bn),bn.destroy()})});const ef=de.filter(tt=>AB(tt,m,w)),tf=new Map;TB(tf,this.driver,Ve,w,Yh).forEach(tt=>{AB(tt,m,w)&&ef.push(tt)});const ZT=new Map;F.forEach((tt,gt)=>{TB(ZT,this.driver,new Set(tt),m,"!")}),ef.forEach(tt=>{const gt=tf.get(tt),kt=ZT.get(tt);tf.set(tt,Object.assign(Object.assign({},gt),kt))});const gy=[],Qj=[],Jj={};u.forEach(tt=>{const{element:gt,player:kt,instruction:bn}=tt;if(i.has(gt)){if(D.has(gt))return kt.onDestroy(()=>ad(gt,bn.toStyles)),kt.disabled=!0,kt.overrideTotalTime(bn.totalTime),void r.push(kt);let os=Jj;if(ss.size>1){let Fa=gt;const Sg=[];for(;Fa=Fa.parentNode;){const Gi=ss.get(Fa);if(Gi){os=Gi;break}Sg.push(Fa)}Sg.forEach(Gi=>ss.set(Gi,os))}const fd=this._buildAnimation(kt.namespaceId,bn,Er,l,ZT,tf);if(kt.setRealPlayer(fd),os===Jj)gy.push(kt);else{const Fa=this.playersByElement.get(os);Fa&&Fa.length&&(kt.parentPlayer=fg(Fa)),r.push(kt)}}else K_(gt,bn.fromStyles),kt.onDestroy(()=>ad(gt,bn.toStyles)),Qj.push(kt),D.has(gt)&&r.push(kt)}),Qj.forEach(tt=>{const gt=l.get(tt.element);if(gt&&gt.length){const kt=fg(gt);tt.setRealPlayer(kt)}}),r.forEach(tt=>{tt.parentPlayer?tt.syncPlayerEvents(tt.parentPlayer):tt.destroy()});for(let tt=0;tt<de.length;tt++){const gt=de[tt],kt=gt[Ml];if(V0(gt,sN),kt&&kt.hasAnimation)continue;let bn=[];if(f.size){let fd=f.get(gt);fd&&fd.length&&bn.push(...fd);let Fa=this.driver.query(gt,lP,!0);for(let Sg=0;Sg<Fa.length;Sg++){let Gi=f.get(Fa[Sg]);Gi&&Gi.length&&bn.push(...Gi)}}const os=bn.filter(fd=>!fd.destroyed);os.length?c4(this,gt,os):this.processLeaveNode(gt)}return de.length=0,gy.forEach(tt=>{this.players.push(tt),tt.onDone(()=>{tt.destroy();const gt=this.players.indexOf(tt);this.players.splice(gt,1)}),tt.play()}),gy}elementContainsData(t,e){let i=!1;const r=e[Ml];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,l){let u=[];if(e){const f=this.playersByQueriedElement.get(t);f&&(u=f)}else{const f=this.playersByElement.get(t);if(f){const m=!l||l==oT;f.forEach(w=>{w.queued||!m&&w.triggerName!=r||u.push(w)})}}return(i||r)&&(u=u.filter(f=>!(i&&i!=f.namespaceId||r&&r!=f.triggerName))),u}_beforeAnimationBuild(t,e,i){const l=e.element,u=e.isRemovalTransition?void 0:t,f=e.isRemovalTransition?void 0:e.triggerName;for(const m of e.timelines){const w=m.element,D=w!==l,T=xa(i,w,[]);this._getPreviousPlayers(w,D,u,f,e.toState).forEach(F=>{const j=F.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),F.destroy(),T.push(F)})}K_(l,e.fromStyles)}_buildAnimation(t,e,i,r,l,u){const f=e.triggerName,m=e.element,w=[],D=new Set,T=new Set,k=e.timelines.map(j=>{const te=j.element;D.add(te);const de=te[Ml];if(de&&de.removedBeforeQueried)return new F0(j.duration,j.delay);const Pe=te!==m,Ve=function(n){const t=[];return IB(n,t),t}((i.get(te)||n4).map(Er=>Er.getRealPlayer())).filter(Er=>!!Er.element&&Er.element===te),pt=l.get(te),lt=u.get(te),gn=JV(0,this._normalizer,0,j.keyframes,pt,lt),li=this._buildPlayer(j,gn,Ve);if(j.subTimeline&&r&&T.add(te),Pe){const Er=new CP(t,f,te);Er.setRealPlayer(li),w.push(Er)}return li});w.forEach(j=>{xa(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,j.element,j))}),D.forEach(j=>Rl(j,oB));const F=fg(k);return F.onDestroy(()=>{D.forEach(j=>V0(j,oB)),ad(m,e.toStyles)}),T.forEach(j=>{xa(r,j,[]).push(F)}),F}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new F0(t.duration,t.delay)}}class CP{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new F0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>QO(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){xa(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function yN(n){return n&&1===n.nodeType}function DB(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function TB(n,t,e,i,r){const l=[];e.forEach(m=>l.push(DB(m)));const u=[];i.forEach((m,w)=>{const D={};m.forEach(T=>{const k=D[T]=t.computeStyle(w,T,r);(!k||0==k.length)&&(w[Ml]=i4,u.push(w))}),n.set(w,D)});let f=0;return e.forEach(m=>DB(m,l[f++])),u}function SB(n,t){const e=new Map;if(n.forEach(f=>e.set(f,[])),0==t.length)return e;const r=new Set(t),l=new Map;function u(f){if(!f)return 1;let m=l.get(f);if(m)return m;const w=f.parentNode;return m=e.has(w)?w:r.has(w)?1:u(w),l.set(f,m),m}return t.forEach(f=>{const m=u(f);1!==m&&e.get(m).push(f)}),e}const vN="$$classes";function Rl(n,t){if(n.classList)n.classList.add(t);else{let e=n[vN];e||(e=n[vN]={}),e[t]=!0}}function V0(n,t){if(n.classList)n.classList.remove(t);else{let e=n[vN];e&&delete e[t]}}function c4(n,t,e){fg(e).onDone(()=>n.processLeaveNode(t))}function IB(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof KV?IB(i.players,t):t.push(i)}}function AB(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(l=>r.add(l)):t.set(n,i),e.delete(n),!0}class bN{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,l)=>{},this._transitionEngine=new s4(t,e,i),this._timelineEngine=new J6(t,e,i),this._transitionEngine.onRemovalComplete=(r,l)=>this.onRemovalComplete(r,l)}registerTrigger(t,e,i,r,l){const u=t+"-"+r;let f=this._triggerCache[u];if(!f){const m=[],w=fP(this._driver,l,m);if(m.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${m.join("\n - ")}`);f=function(n,t,e){return new Y6(n,t,e)}(r,w,this._normalizer),this._triggerCache[u]=f}this._transitionEngine.registerTrigger(e,r,f)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[l,u]=XV(i);this._timelineEngine.command(l,e,u,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,l){if("@"==i.charAt(0)){const[u,f]=XV(i);return this._timelineEngine.listen(u,e,f,l)}return this._transitionEngine.listen(t,e,i,r,l)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function NB(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=EP(t[0]),t.length>1&&(i=EP(t[t.length-1]))):t&&(e=EP(t)),e||i?new h4(n,e,i):null}let h4=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let l=n.initialStylesByElement.get(e);l||n.initialStylesByElement.set(e,l={}),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&ad(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ad(this._element,this._initialStyles),this._endStyles&&(ad(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(K_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(K_(this._element,this._endStyles),this._endStyles=null),ad(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function EP(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];f4(r)&&(t=t||{},t[r]=n[r])}return t}function f4(n){return"display"===n||"position"===n}const MB="animation",RB="animationend";class m4{constructor(t,e,i,r,l,u,f){this._element=t,this._name=e,this._duration=i,this._delay=r,this._easing=l,this._fillMode=u,this._onDoneFn=f,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=m=>this._handleCallback(m)}apply(){(function(n,t){const e=TP(n,"").trim();let i=0;e.length&&(function(n,t){let e=0;for(let i=0;i<n.length;i++)","===n.charAt(i)&&e++;return e}(e)+1,t=`${e}, ${t}`),wN(n,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),OB(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){kB(this._element,this._name,"paused")}resume(){kB(this._element,this._name,"running")}setPosition(t){const e=xB(this._element,this._name);this._position=t*this._duration,wN(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),OB(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,t){const i=TP(n,"").split(","),r=DP(i,t);r>=0&&(i.splice(r,1),wN(n,"",i.join(",")))}(this._element,this._name))}}function kB(n,t,e){wN(n,"PlayState",e,xB(n,t))}function xB(n,t){const e=TP(n,"");return e.indexOf(",")>0?DP(e.split(","),t):DP([e],t)}function DP(n,t){for(let e=0;e<n.length;e++)if(n[e].indexOf(t)>=0)return e;return-1}function OB(n,t,e){e?n.removeEventListener(RB,t):n.addEventListener(RB,t)}function wN(n,t,e,i){const r=MB+t;if(null!=i){const l=n.style[r];if(l.length){const u=l.split(",");u[i]=e,e=u.join(",")}}n.style[r]=e}function TP(n,t){return n.style[MB+t]||""}class PB{constructor(t,e,i,r,l,u,f,m){this.element=t,this.keyframes=e,this.animationName=i,this._duration=r,this._delay=l,this._finalStyles=f,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=r+l,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new m4(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(t[i]=e?this._finalStyles[i]:hP(this.element,i))})}this.currentSnapshot=t}}class C4 extends F0{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=iB(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class LB{constructor(){this._count=0}validateStyleProperty(t){return nP(t)}matchesElement(t,e){return iP(t,e)}containsElement(t,e){return rP(t,e)}query(t,e,i){return sP(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,i){i=i.map(f=>iB(f));let r=`@keyframes ${e} {\n`,l="";i.forEach(f=>{l=" ";const m=parseFloat(f.offset);r+=`${l}${100*m}% {\n`,l+=" ",Object.keys(f).forEach(w=>{const D=f[w];switch(w){case"offset":return;case"easing":return void(D&&(r+=`${l}animation-timing-function: ${D};\n`));default:return void(r+=`${l}${w}: ${D};\n`)}}),r+=`${l}}\n`}),r+="}\n";const u=document.createElement("style");return u.textContent=r,u}animate(t,e,i,r,l,u=[],f){const m=u.filter(de=>de instanceof PB),w={};dB(i,r)&&m.forEach(de=>{let Pe=de.currentSnapshot;Object.keys(Pe).forEach(Ve=>w[Ve]=Pe[Ve])});const D=function(n){let t={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(t[r]=i[r])})}),t}(e=hB(t,e,w));if(0==i)return new C4(t,D);const T="gen_css_kf_"+this._count++,k=this.buildKeyframeElement(t,T,e);(function(n){var t;const e=null===(t=n.getRootNode)||void 0===t?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(k);const j=NB(t,e),te=new PB(t,e,T,i,r,l,D,j);return te.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(k)),te}}class BB{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:hP(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class I4{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(UB().toString()),this._cssKeyframesDriver=new LB}validateStyleProperty(t){return nP(t)}matchesElement(t,e){return iP(t,e)}containsElement(t,e){return rP(t,e)}query(t,e,i){return sP(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,i,r,l,u=[],f){if(!f&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,i,r,l,u);const D={duration:i,delay:r,fill:0==r?"both":"forwards"};l&&(D.easing=l);const T={},k=u.filter(j=>j instanceof BB);dB(i,r)&&k.forEach(j=>{let te=j.currentSnapshot;Object.keys(te).forEach(de=>T[de]=te[de])});const F=NB(t,e=hB(t,e=e.map(j=>pg(j,!1)),T));return new BB(t,e,D,F)}}function UB(){return QV()&&Element.prototype.animate||{}}let N4=(()=>{class n extends GV{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:a.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?qV(e):e;return HB(this._renderer,null,i,"register",[r]),new M4(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.FYo),a.LFG(ne))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class M4 extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new R4(this._id,t,e||{},this._renderer)}}class R4{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return HB(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function HB(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const jB="@.disabled";let k4=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(l,u)=>{u&&u.parentNode(l)&&u.removeChild(l.parentNode,l)}}createRenderer(e,i){const l=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let D=this._rendererCache.get(l);return D||(D=new $B("",l,this.engine),this._rendererCache.set(l,D)),D}const u=i.id,f=i.id+"-"+this._currentId;this._currentId++,this.engine.register(f,e);const m=D=>{Array.isArray(D)?D.forEach(m):this.engine.registerTrigger(u,f,e,D.name,D)};return i.data.animation.forEach(m),new x4(this,f,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[u,f]=l;u(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.FYo),a.LFG(bN),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class $B{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==jB?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class x4 extends $B{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==jB?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let l=e.substr(1),u="";return"@"!=l.charAt(0)&&([l,u]=function(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(l)),this.engine.listen(this.namespaceId,r,l,u,f=>{this.factory.scheduleListenerCallback(f._data||-1,i,f)})}return this.delegate.listen(t,e,i)}}let F4=(()=>{class n extends bN{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne),a.LFG(oP),a.LFG(yP))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const EN=new a.OlP("AnimationModuleType"),GB=[{provide:GV,useClass:N4},{provide:yP,useFactory:function(){return new $6}},{provide:bN,useClass:F4},{provide:a.FYo,useFactory:function(n,t,e){return new k4(n,t,e)},deps:[Yr,bN,a.R0b]}],zB=[{provide:oP,useFactory:function(){return"function"==typeof UB()?new I4:new LB}},{provide:EN,useValue:"BrowserAnimations"},...GB],qB=[{provide:oP,useClass:rB},{provide:EN,useValue:"NoopAnimations"},...GB];let U4=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?qB:zB}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:zB,imports:[Rd]}),n})();const WB=new a.GfV("12.2.12"),W4=new a.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let J_,ld=(()=>{class n{constructor(e,i,r){this._hasDoneGlobalChecks=!1,this._document=r,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!(0,a.X6Q)()||VO())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const i=getComputedStyle(e);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&WB.full!==$V.full&&console.warn("The Angular Material version ("+WB.full+") does not match the Angular CDK version ("+$V.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(jV),a.LFG(W4,8),a.LFG(ne))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[iT],iT]}),n})();try{J_="undefined"!=typeof Intl}catch(n){J_=!1}function w8(n,t){}class TN{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const C8={dialogContainer:m6("dialogContainer",[WV("void, exit",P0({opacity:0,transform:"scale(0.7)"})),WV("enter",P0({transform:"none"})),ZV("* => enter",zV("150ms cubic-bezier(0, 0, 0.2, 1)",P0({transform:"none",opacity:1}))),ZV("* => void, * => exit",zV("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",P0({opacity:0})))])};let E8=(()=>{class n extends $O{constructor(e,i,r,l,u,f){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=u,this._focusMonitor=f,this._animationStateChanged=new a.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=m=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(m)),this._ariaLabelledBy=u.ariaLabelledBy||null,this._document=l}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=XA(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=XA())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=XA();return e===i||e.contains(i)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(MV),a.Y36(a.sBO),a.Y36(ne,8),a.Y36(TN),a.Y36(BV))},n.\u0275dir=a.lG2({type:n,viewQuery:function(e,i){if(1&e&&a.Gf(iN,7),2&e){let r;a.iGM(r=a.CRH())&&(i._portalOutlet=r.first)}},features:[a.qOj]}),n})(),D8=(()=>{class n extends E8{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}(),n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&a.WFA("@dialogContainer.start",function(l){return i._onAnimationStart(l)})("@dialogContainer.done",function(l){return i._onAnimationDone(l)}),2&e&&(a.Ikx("id",i._id),a.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),a.d8E("@dialogContainer",i._state))},features:[a.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&a.YNc(0,w8,0,0,"ng-template",0)},directives:[iN],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[C8.dialogContainer]}}),n})(),T8=0;class SN{constructor(t,e,i="mat-dialog-"+T8++){this._overlayRef=t,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new nt.xQ,this._afterClosed=new nt.xQ,this._beforeClosed=new nt.xQ,this._state=0,e._id=i,e._animationStateChanged.pipe(_n(r=>"opened"===r.state),ti(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(_n(r=>"closed"===r.state),ti(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(_n(r=>27===r.keyCode&&!this.disableClose&&!function(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(r))).subscribe(r=>{r.preventDefault(),IP(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():IP(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(_n(e=>"closing"===e.state),ti(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function IP(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const tU=new a.OlP("MatDialogData"),S8=new a.OlP("mat-dialog-default-options"),nU=new a.OlP("mat-dialog-scroll-strategy"),A8={provide:nU,deps:[x0],useFactory:function(n){return()=>n.scrollStrategies.block()}};let N8=(()=>{class n{constructor(e,i,r,l,u,f,m,w,D){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=l,this._overlayContainer=u,this._dialogRefConstructor=m,this._dialogContainerType=w,this._dialogDataToken=D,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new nt.xQ,this._afterOpenedAtThisLevel=new nt.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=Qr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(io(void 0))),this._scrollStrategy=f}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){(i=function(n,t){return Object.assign(Object.assign({},t),n)}(i,this._defaultOptions||new TN)).id&&this.getDialogById(i.id);const r=this._createOverlay(i),l=this._attachDialogContainer(r,i),u=this._attachDialogContent(e,l,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(u),u.afterClosed().subscribe(()=>this._removeOpenDialog(u)),this.afterOpened.next(u),l._initializeWithAttachedContent(),u}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new qO({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const l=a.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:TN,useValue:i}]}),u=new jO(this._dialogContainerType,i.viewContainerRef,l,i.componentFactoryResolver);return e.attach(u).instance}_attachDialogContent(e,i,r,l){const u=new this._dialogRefConstructor(r,i,l.id);if(e instanceof a.Rgc)i.attachTemplatePortal(new nN(e,null,{$implicit:l.data,dialogRef:u}));else{const f=this._createInjector(l,u,i),m=i.attachComponentPortal(new jO(e,l.viewContainerRef,f));u.componentInstance=m.instance}return u.updateSize(l.width,l.height).updatePosition(l.position),u}_createInjector(e,i,r){const l=e&&e.viewContainerRef&&e.viewContainerRef.injector,u=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!l||!l.get(hg,null,a.XFs.Optional))&&u.push({provide:hg,useValue:{value:e.direction,change:(0,He.of)()}}),a.zs3.create({parent:l||this._injector,providers:u})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,l)=>{r?l.setAttribute("aria-hidden",r):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let l=i[r];l!==e&&"SCRIPT"!==l.nodeName&&"STYLE"!==l.nodeName&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(x0),a.Y36(a.zs3),a.Y36(void 0),a.Y36(void 0),a.Y36(rT),a.Y36(void 0),a.Y36(a.DyG),a.Y36(a.DyG),a.Y36(a.OlP))},n.\u0275dir=a.lG2({type:n}),n})(),lT=(()=>{class n extends N8{constructor(e,i,r,l,u,f,m){super(e,i,l,f,m,u,SN,D8,tU)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(x0),a.LFG(a.zs3),a.LFG(Lt,8),a.LFG(S8,8),a.LFG(nU),a.LFG(n,12),a.LFG(rT))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),k8=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=function(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){IP(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(SN,8),a.Y36(a.SBq),a.Y36(lT))},n.\u0275dir=a.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,i){1&e&&a.NdJ("click",function(l){return i._onButtonClick(l)}),2&e&&a.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{type:"type",dialogResult:["mat-dialog-close","dialogResult"],ariaLabel:["aria-label","ariaLabel"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[a.TTD]}),n})();let x8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[lT,A8],imports:[[HG,dV,ld],ld]}),n})();class rU{}let O8=(()=>{class n{constructor(e,i,r,l,u){this.dialog=e,this.dialogRef=i,this.formBuilder=r,this.dataservice=l,this.data=u,this.Userobj=new rU}ngOnInit(){console.log("open modal"),console.log(this.data),console.log(this.data.Email),this.generateForm()}generateForm(){this.modal=this.formBuilder.group({Nume:this.data.Nume,Prenume:this.data.Prenume,Email:this.data.Email,Judet:this.data.Judet,Oras:this.data.Oras,Adresa:this.data.Adresa,Varsta:this.data.Varsta,Abonament:this.data.Abonament})}getData(){this.Userobj.Nume=this.modal.value.Nume,this.Userobj.Prenume=this.modal.value.Prenume,this.Userobj.Email=this.modal.value.Email,this.Userobj.Judet=this.modal.value.Judet,this.Userobj.Oras=this.modal.value.Oras,this.Userobj.Adresa=this.modal.value.Adresa,this.Userobj.Varsta=this.modal.value.Varsta,this.Userobj.Abonament=this.modal.value.Abonament,console.log(this.Userobj),this.dataservice.updateData(this.Userobj),this.dialogRef.close()}updateData(){console.log(this.data),this.dataservice.updateData(this.modal.value),console.log(this.data)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(lT),a.Y36(SN),a.Y36(k$),a.Y36(Nl),a.Y36(tU))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-modal"]],decls:52,vars:8,consts:[["charset","UTF-8"],[1,"modal1",3,"formGroup"],[1,"form-floating","mb-3"],["type","text","formControlName","Nume","name","nume","placeholder","Nume","value","",1,"form-control",3,"value"],["for","floatingInput"],["type","text","formControlName","Prenume","name","prenume","placeholder","Prenume","value","",1,"form-control",3,"value"],["type","text","formControlName","Email","name","prenume","placeholder","Prenume","value","",1,"form-control",3,"value"],["type","text","formControlName","Judet","name","judet","placeholder","Judet","value","",1,"form-control",3,"value"],["type","text","formControlName","Oras","name","oras","placeholder","Oras","value","",1,"form-control",3,"value"],["type","text","formControlName","Adresa","name","adresa","placeholder","Adresa","value","",1,"form-control",3,"value"],["type","text","formControlName","Varsta","name","varsta","placeholder","Varsta","value","",1,"form-control",3,"value"],["type","text","formControlName","Abonament","name","Abonament","placeholder","Varsta","value","","hidden","",1,"form-control"],["type","text","name","nrinmatriculare","placeholder","Nr. Inmatriculare","value","",1,"form-control"],["type","text","name","codmotor","placeholder","Cod Motor","value","",1,"form-control"],["name","myform","method","post","action",""],[1,"form-group"],["id","add_renter_footer",1,"modal-footer"],["type","button","mat-dialog-close","","mat-button","",1,"btn","btn-secondary","button"],["type","submit",1,"btn","btn-primary","button",3,"click"]],template:function(e,i){1&e&&(a.TgZ(0,"html"),a.TgZ(1,"head"),a._UZ(2,"meta",0),a.qZA(),a.TgZ(3,"body"),a.TgZ(4,"form",1),a.TgZ(5,"div",2),a._UZ(6,"input",3),a.TgZ(7,"label",4),a._uU(8,"Nume"),a.qZA(),a.qZA(),a.TgZ(9,"div",2),a._UZ(10,"input",5),a.TgZ(11,"label",4),a._uU(12,"Prenume"),a.qZA(),a.qZA(),a.TgZ(13,"div",2),a._UZ(14,"input",6),a.TgZ(15,"label",4),a._uU(16,"Email"),a.qZA(),a.qZA(),a.TgZ(17,"div",2),a._UZ(18,"input",7),a.TgZ(19,"label",4),a._uU(20,"Judet"),a.qZA(),a.qZA(),a.TgZ(21,"div",2),a._UZ(22,"input",8),a.TgZ(23,"label",4),a._uU(24,"Oras"),a.qZA(),a.qZA(),a.TgZ(25,"div",2),a._UZ(26,"input",9),a.TgZ(27,"label",4),a._uU(28,"Adresa"),a.qZA(),a.qZA(),a.TgZ(29,"div",2),a._UZ(30,"input",10),a.TgZ(31,"label",4),a._uU(32,"Varsta"),a.qZA(),a.qZA(),a.TgZ(33,"div",2),a._UZ(34,"input",11),a.TgZ(35,"label",4),a._uU(36,"Varsta"),a.qZA(),a.qZA(),a.TgZ(37,"div",2),a._UZ(38,"input",12),a.TgZ(39,"label",4),a._uU(40,"Nr. Inmatriculare"),a.qZA(),a.qZA(),a.TgZ(41,"div",2),a._UZ(42,"input",13),a.TgZ(43,"label",4),a._uU(44,"Cod Motor"),a.qZA(),a.qZA(),a.TgZ(45,"form",14),a.TgZ(46,"div",15),a.TgZ(47,"div",16),a.TgZ(48,"button",17),a._uU(49,"Iesire"),a.qZA(),a.TgZ(50,"button",18),a.NdJ("click",function(){return i.getData()}),a._uU(51,"Salvare"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Q6J("formGroup",i.modal),a.xp6(2),a.s9C("value",i.data.Nume),a.xp6(4),a.s9C("value",i.data.Prenume),a.xp6(4),a.s9C("value",i.data.Email),a.xp6(4),a.s9C("value",i.data.Judet),a.xp6(4),a.s9C("value",i.data.Oras),a.xp6(4),a.s9C("value",i.data.Adresa),a.xp6(4),a.s9C("value",i.data.Varsta))},directives:[YA,h,KA,D0,d,SO,M0,k8],styles:["*{margin:0;padding:0}.modal1{background-color:#002533}.cdk-overlay-pane{width:40%!important}.mat-dialog-container{background-color:#002533}.modal-footer{height:50px}\n"],encapsulation:2}),n})(),IN=(()=>{class n{constructor(e,i){this.fireservices=e,this.firebaseAuth=i,this.isLoggedIn=!1}singin(e,i){var r=this;return(0,ye.Z)(function*(){yield r.firebaseAuth.signInWithEmailAndPassword(e,i).then(l=>{r.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(l.user))})})()}singup(e,i){var r=this;return(0,ye.Z)(function*(){yield r.firebaseAuth.createUserWithEmailAndPassword(e,i).then(l=>{var u,f;r.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(l.user)),console.log(null===(u=l.user)||void 0===u?void 0:u.uid),r.fireservices.collection("Users").doc(null===(f=l.user)||void 0===f?void 0:f.uid).set({Email:e,Nume:"",Prenume:"",Varsta:"",Adresa:"",Judet:"",Oras:"",Abonament:"0"})})})()}logout(){this.firebaseAuth.signOut(),localStorage.removeItem("user")}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ag),a.LFG(_m))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P8=(()=>{class n{constructor(e,i,r,l,u){this.firebaseService=e,this.router=i,this.firestore=r,this.data=l,this.dialog=u,this.isCollapsed=!1,this.isLogout=new a.vpe}ngOnInit(){null!==localStorage.getItem("user")?console.log("merge"):console.log("nu merge");let e=localStorage.getItem("user");console.log(e),this.getCurrentData()}getCurrentData(){(0,fn.D)(this.data.getData()).subscribe(i=>{var r;this.merge=i,console.log(this.merge),console.log(null===(r=this.merge)||void 0===r?void 0:r.Email),this.verificareAbonament()})}logout(){this.firebaseService.logout(),this.isLogout.emit(),this.router.navigate([""])}openModal1(){const e=new TN;e.disableClose=!1,e.data=this.merge,this.dialog.open(O8,e)}standard(){this.router.navigate(["app-bank"],{state:{da:1}})}premium(){this.router.navigate(["app-bank"],{state:{da:2}})}verificareAbonament(){var e,i,r;console.log(null===(e=this.merge)||void 0===e?void 0:e.Abonament),this.abonament="1"==(null===(i=this.merge)||void 0===i?void 0:i.Abonament)?"Abonament Standard":"2"==(null===(r=this.merge)||void 0===r?void 0:r.Abonament)?"Abonament Premium":"Nu exista abonament"}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(IN),a.Y36(xr),a.Y36(ag),a.Y36(Nl),a.Y36(lT))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-home"]],inputs:{item:"item"},outputs:{isLogout:"isLogout"},decls:84,vars:1,consts:[["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css","integrity","sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn","crossorigin","anonymous"],[1,"btn","btn-outline-danger","meniu",3,"click"],[1,"btn","btn-primary","meniu",3,"click"],["type","button","data-toggle","collapse","data-target","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1",1,"btn","btn-primary","meniu2"],["type","button","data-toggle","collapse","data-target","#multiCollapseExample2","aria-expanded","false","aria-controls"," multiCollapseExample2",1,"btn","btn-primary","meniu2"],[1,"row"],[1,"col"],["id","multiCollapseExample1",1,"collapse","multi-collapse","collapse1"],[1,"card","card-body"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-lg"],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-lg"],["fill-rule","evenodd","d","M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"],["fill-rule","evenodd","d","M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"],[1,"btn","btn-outline-danger",3,"click"],[2,"text-align","center"],["id","multiCollapseExample2",1,"collapse","multi-collapse","collapse2"],["type","button",1,"btn","btn-outline-danger",3,"click"],[2,"color","white"]],template:function(e,i){1&e&&(a._UZ(0,"link",0),a.TgZ(1,"h2"),a._uU(2,"Logare reusita"),a.qZA(),a.TgZ(3,"button",1),a.NdJ("click",function(){return i.logout()}),a._uU(4,"Logout"),a.qZA(),a.TgZ(5,"button",2),a.NdJ("click",function(){return i.openModal1()}),a._uU(6," Adaugare date personale\n"),a.qZA(),a.TgZ(7,"p"),a.TgZ(8,"button",3),a._uU(9,"Abonament Standard"),a.qZA(),a.TgZ(10,"button",4),a._uU(11,"Abonament Premium"),a.qZA(),a.qZA(),a.TgZ(12,"div",5),a.TgZ(13,"div",6),a.TgZ(14,"div",7),a.TgZ(15,"div",8),a.TgZ(16,"h2"),a._uU(17,"Pachet Standard"),a.qZA(),a.TgZ(18,"h4"),a.O4$(),a.TgZ(19,"svg",9),a._UZ(20,"path",10),a.qZA(),a._uU(21,"Sfaturi utile"),a.qZA(),a.kcU(),a.TgZ(22,"h4"),a.O4$(),a.TgZ(23,"svg",9),a._UZ(24,"path",10),a.qZA(),a._uU(25,"Accesare date in caz de accident"),a.qZA(),a.kcU(),a.TgZ(26,"h4"),a.O4$(),a.TgZ(27,"svg",9),a._UZ(28,"path",10),a.qZA(),a._uU(29,"Monitorizare masina 24/7"),a.qZA(),a.kcU(),a.TgZ(30,"h4"),a.O4$(),a.TgZ(31,"svg",11),a._UZ(32,"path",12),a._UZ(33,"path",13),a.qZA(),a._uU(34,"Asistenta in caz de accident"),a.qZA(),a.kcU(),a.TgZ(35,"h4"),a.O4$(),a.TgZ(36,"svg",11),a._UZ(37,"path",12),a._UZ(38,"path",13),a.qZA(),a._uU(39,"Apel automat la 112 cu locatia actuala"),a.qZA(),a.kcU(),a.TgZ(40,"h4"),a.O4$(),a.TgZ(41,"svg",11),a._UZ(42,"path",12),a._UZ(43,"path",13),a.qZA(),a._uU(44,"Conducere defensiva"),a.qZA(),a.kcU(),a.TgZ(45,"button",14),a.NdJ("click",function(){return i.standard()}),a._uU(46,"10\u20ac"),a.qZA(),a.TgZ(47,"p",15),a._uU(48,"Pretul este lunar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(49,"div",6),a.TgZ(50,"div",16),a.TgZ(51,"div",8),a.TgZ(52,"h2"),a._uU(53,"Pachet Premium"),a.qZA(),a.TgZ(54,"h4"),a.O4$(),a.TgZ(55,"svg",9),a._UZ(56,"path",10),a.qZA(),a._uU(57,"Sfaturi utile"),a.qZA(),a.kcU(),a.TgZ(58,"h4"),a.O4$(),a.TgZ(59,"svg",9),a._UZ(60,"path",10),a.qZA(),a._uU(61,"Accesare date in caz de accident"),a.qZA(),a.kcU(),a.TgZ(62,"h4"),a.O4$(),a.TgZ(63,"svg",9),a._UZ(64,"path",10),a.qZA(),a._uU(65,"Monitorizare masina 24/7"),a.qZA(),a.kcU(),a.TgZ(66,"h4"),a.O4$(),a.TgZ(67,"svg",9),a._UZ(68,"path",10),a.qZA(),a._uU(69,"Asistenta in caz de accident"),a.qZA(),a.kcU(),a.TgZ(70,"h4"),a.O4$(),a.TgZ(71,"svg",9),a._UZ(72,"path",10),a.qZA(),a._uU(73,"Apel automat la 112 cu locatia actuala"),a.qZA(),a.kcU(),a.TgZ(74,"h4"),a.O4$(),a.TgZ(75,"svg",9),a._UZ(76,"path",10),a.qZA(),a._uU(77,"Conducere defensiva"),a.qZA(),a.kcU(),a.TgZ(78,"button",17),a.NdJ("click",function(){return i.premium()}),a._uU(79,"25\u20ac"),a.qZA(),a.TgZ(80,"p",15),a._uU(81,"Pretul este lunar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(82,"h1",18),a._uU(83),a.qZA()),2&e&&(a.xp6(83),a.Oqu(i.abonament))},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.5fr}h1[_ngcontent-%COMP%]{padding-top:50px;padding-bottom:25px}.meniu[_ngcontent-%COMP%]{margin:10px}.meniu2[_ngcontent-%COMP%]{margin:25px 5px 5px}body[_ngcontent-%COMP%]{background-color:#15151e;text-align:center;margin:auto;padding-top:50px;padding-bottom:100%}nav[_ngcontent-%COMP%]{margin-top:50px}.collapse1[_ngcontent-%COMP%]{text-align:left;margin-left:50px;margin-bottom:25px}.collapse2[_ngcontent-%COMP%]{text-align:left;margin-bottom:25px;margin-right:50px}.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{text-align:left!important}.card-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:10px;width:50%;margin-left:25%}.card-body[_ngcontent-%COMP%]{background-color:#002533!important;color:#fff!important}"]}),n})(),F8=(()=>{class n{constructor(e,i){this.firebaseService=e,this.router=i,this.isSignedIn=!1}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user")}onSingin(e,i){var r=this;return(0,ye.Z)(function*(){yield r.firebaseService.singin(e,i),console.log(e),console.log(i),r.firebaseService.isLoggedIn&&(r.isSignedIn=!0,r.router.navigate(["app-home"]))})()}handleLogout(){this.isSignedIn=!1}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(IN),a.Y36(xr))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-login"]],decls:25,vars:0,consts:[[1,"action"],["routerLink","/app-sing-up",1,"first"],[1,"container"],[1,"row"],[1,"col-4"],[1,"form-floating","mb-3"],["type","text","id","exampleInputEmail1","placeholder","name@example.com",1,"form-control"],["mail",""],["for","exampleInputEmail1"],["type","password","id","exampleInputPassword1","placeholder","Password",1,"form-control"],["password",""],["for","exampleInputPassword1"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,i){if(1&e){const r=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"div",0),a.TgZ(2,"nav"),a.TgZ(3,"a",1),a._uU(4,"Creaza cont"),a.qZA(),a.qZA(),a.TgZ(5,"h1"),a._uU(6,"Log In:"),a.qZA(),a.TgZ(7,"div",2),a.TgZ(8,"div",3),a._UZ(9,"div",4),a.TgZ(10,"div",4),a.TgZ(11,"form"),a.TgZ(12,"div",5),a._UZ(13,"input",6,7),a.TgZ(15,"label",8),a._uU(16,"Email address:"),a.qZA(),a.qZA(),a.TgZ(17,"div",5),a._UZ(18,"input",9,10),a.TgZ(20,"label",11),a._uU(21,"Password:"),a.qZA(),a.qZA(),a.TgZ(22,"button",12),a.NdJ("click",function(){a.CHM(r);const u=a.MAs(14),f=a.MAs(19);return i.onSingin(u.value,f.value)}),a._uU(23,"Submit"),a.qZA(),a.qZA(),a.qZA(),a._UZ(24,"div",4),a.qZA(),a.qZA(),a.qZA(),a.qZA()}},directives:[Yf,YA,h,M0],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}h1[_ngcontent-%COMP%]{color:#fff;margin-top:25px;margin-bottom:25px}body[_ngcontent-%COMP%]{background-color:#15151e;text-align:center;margin:auto;padding-top:50px;padding-bottom:100%}nav[_ngcontent-%COMP%]{margin-top:50px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;background-color:#e8e8e8;color:#3d3d3d;border-radius:4px;font-size:1.2rem;padding:1rem;margin-right:1rem;margin-bottom:1rem;margin-top:1rem}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background-color:#396b81}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#000}"]}),n})(),L8=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-members"]],decls:2,vars:0,template:function(e,i){1&e&&(a.TgZ(0,"p"),a._uU(1,"members works!"),a.qZA())},styles:[""]}),n})(),sU=(()=>{class n{constructor(e){this.fireservices=e}create_user(e){return this.fireservices.collection("Users").add(Object.assign({},e))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ag))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const V8=[{path:"",component:F8},{path:"app-sing-up",component:(()=>{class n{constructor(e,i,r){this.firebaseService=e,this.usersservice=i,this.firestore=r,this.isSignedIn=!1}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user")}onSignup(e,i){var r=this;return(0,ye.Z)(function*(){yield r.firebaseService.singup(e,i),console.log(e),console.log(i),r.firebaseService.isLoggedIn&&(r.isSignedIn=!0)})()}onSingin(e,i){var r=this;return(0,ye.Z)(function*(){yield r.firebaseService.singup(e,i),console.log(e),console.log(i),r.firebaseService.isLoggedIn&&(r.isSignedIn=!0)})()}handleLogout(){this.isSignedIn=!1}resetForm(e){null!=e&&e.resetForm(),this.usersservice.formData={id:"",Email:"",Nume:"",Prenume:"",Varsta:"",Adresa:"",Judet:"",Oras:"",Abonament:"0"}}onSubmit(e){let i=Object.assign({},e.value);delete i.id,null==e.value.id?this.firestore.collection("employees").add(i):this.firestore.doc("employees/"+e.value.id).update(i),this.resetForm(e)}CreateRecord(){let e=new rU;e.Nume=this.Nume,e.Prenume=this.Prenume,this.usersservice.create_user(e).then(i=>{this.Nume="",this.Prenume="",console.log(i)}).catch(i=>{console.log(i)})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(IN),a.Y36(sU),a.Y36(ag))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-sing-up"]],decls:23,vars:0,consts:[["routerLink","",1,"first"],[1,"container"],[1,"row"],[1,"col-4"],[1,"form-floating","mb-3"],["type","text","id","emailSingup","placeholder","name@example.com",1,"form-control"],["emailSingup",""],["for","exampleInputEmail1"],["type","password","id","exampleInputPassword1","placeholder","Password",1,"form-control"],["passwordSingup",""],["for","exampleInputPassword1"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,i){if(1&e){const r=a.EpF();a.TgZ(0,"nav"),a.TgZ(1,"a",0),a._uU(2,"Login"),a.qZA(),a.qZA(),a.TgZ(3,"h1"),a._uU(4,"Creaza cont:"),a.qZA(),a.TgZ(5,"div",1),a.TgZ(6,"div",2),a._UZ(7,"div",3),a.TgZ(8,"div",3),a.TgZ(9,"form"),a.TgZ(10,"div",4),a._UZ(11,"input",5,6),a.TgZ(13,"label",7),a._uU(14,"Email address:"),a.qZA(),a.qZA(),a.TgZ(15,"div",4),a._UZ(16,"input",8,9),a.TgZ(18,"label",10),a._uU(19,"Password:"),a.qZA(),a.qZA(),a.TgZ(20,"button",11),a.NdJ("click",function(){a.CHM(r);const u=a.MAs(12),f=a.MAs(17);return i.onSignup(u.value,f.value)}),a._uU(21,"Submit"),a.qZA(),a.qZA(),a.qZA(),a._UZ(22,"div",3),a.qZA(),a.qZA()}},directives:[Yf,YA,h,M0],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}h1[_ngcontent-%COMP%]{color:#fff;padding-top:50px;padding-bottom:25px}body[_ngcontent-%COMP%]{background-color:#15151e;text-align:center;margin:auto;padding-top:50px;padding-bottom:100%}nav[_ngcontent-%COMP%]{margin-top:50px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;background-color:#e8e8e8;color:#3d3d3d;border-radius:4px;font-size:1.2rem;padding:1rem;margin-right:1rem;margin-bottom:1rem;margin-top:1rem}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background-color:#42545c}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#000}"]}),n})()},{path:"app-member",component:L8},{path:"app-home",component:P8},{path:"app-bank",component:x$}];let B8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[Rw.forRoot(V8)],Rw]}),n})(),U8=(()=>{class n{constructor(){this.title="SUCD"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[["href","https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC","crossorigin","anonymous"],["id","logo","src","assets/SUCD1.png","width","150px","height","50px","margin","10px"]],template:function(e,i){1&e&&(a._UZ(0,"link",0),a.TgZ(1,"body"),a._UZ(2,"img",1),a._UZ(3,"router-outlet"),a.qZA())},directives:[Kf],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.5fr}h1[_ngcontent-%COMP%]{padding-left:50px;padding-top:50px;padding-bottom:25px}body[_ngcontent-%COMP%]{background-color:#15151e;text-align:center;margin:auto;padding-top:50px;padding-bottom:100%}nav[_ngcontent-%COMP%]{margin-top:50px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;background-color:#e8e8e8;color:#3d3d3d;border-radius:4px;font-size:1.2rem;padding:1rem;margin-right:1rem;margin-bottom:1rem;margin-top:1rem}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background-color:#42545c}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#000}"]}),n})();var oU=U(8819);function AN(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new H8(n,e))}}class H8{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new j8(t,this.observables,this.project))}}class j8 extends ic{constructor(t,e,i){super(t),this.observables=e,this.project=i,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let l=0;l<r;l++)this.toRespond.push(l);for(let l=0;l<r;l++)this.add(Un(this,e[l],void 0,l))}notifyNext(t,e,i){this.values[i]=e;const r=this.toRespond;if(r.length>0){const l=r.indexOf(i);-1!==l&&r.splice(l,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}class G8{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new z8(t,this.predicate))}}class z8 extends an.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}const aU="@firebase/database";let AP="";function cU(n){AP=n}class q8{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,B.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,B.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class W8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,B.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const uU=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new q8(t)}}catch(t){}return new W8},X_=uU("localStorage"),NP=uU("sessionStorage"),B0=new _l.Yd("@firebase/database"),dU=function(){let n=1;return function(){return n++}}(),hU=function(n){const t=(0,B.dS)(n),e=new B.gQ;e.update(t);const i=e.digest();return B.US.encodeByteArray(i)},cT=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=cT.apply(null,i):t+="object"==typeof i?(0,B.Pz)(i):i,t+=" "}return t};let ey=null,fU=!0;const pU=function(n,t){(0,B.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(B0.logLevel=_l.in.VERBOSE,ey=B0.log.bind(B0),t&&NP.set("logging_enabled",!0)):"function"==typeof n?ey=n:(ey=null,NP.remove("logging_enabled"))},ns=function(...n){if(!0===fU&&(fU=!1,null===ey&&!0===NP.get("logging_enabled")&&pU(!0)),ey){const t=cT.apply(null,n);ey(t)}},uT=function(n){return function(...t){ns(n,...t)}},MP=function(...n){const t="FIREBASE INTERNAL ERROR: "+cT(...n);B0.error(t)},cd=function(...n){const t=`FIREBASE FATAL ERROR: ${cT(...n)}`;throw B0.error(t),new Error(t)},vo=function(...n){const t="FIREBASE WARNING: "+cT(...n);B0.warn(t)},NN=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Kh="[MIN_NAME]",ud="[MAX_NAME]",ty=function(n,t){if(n===t)return 0;if(n===Kh||t===ud)return-1;if(t===Kh||n===ud)return 1;{const e=MN(n),i=MN(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},K8=function(n,t){return n===t?0:n<t?-1:1},dT=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Pz)(t))},RP=function(n){if("object"!=typeof n||null===n)return(0,B.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,B.Pz)(t[i]),e+=":",e+=RP(n[t[i]]);return e+="}",e},gU=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function is(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const mU=function(n){(0,B.hu)(!NN(n),"Invalid JSON number");const i=1023;let r,l,u,f,m;0===n?(l=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=f+i,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,u=Math.round(n/Math.pow(2,-1074))));const w=[];for(m=52;m;m-=1)w.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)w.push(l%2?1:0),l=Math.floor(l/2);w.push(r?1:0),w.reverse();const D=w.join("");let T="";for(m=0;m<64;m+=8){let k=parseInt(D.substr(m,8),2).toString(16);1===k.length&&(k="0"+k),T+=k}return T.toLowerCase()},ez=new RegExp("^-?(0*)\\d{1,10}$"),_U=-2147483648,kP=2147483647,MN=function(n){if(ez.test(n)){const t=Number(n);if(t>=_U&&t<=kP)return t}return null},U0=function(n){try{n()}catch(t){setTimeout(()=>{throw vo("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},hT=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class nz{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){vo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class iz{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(ns("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vo(t)}}let fT=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const CU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,DU="websocket",TU="long_polling";class OP{constructor(t,e,i,r,l=!1,u="",f=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=X_.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&X_.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function SU(n,t,e){let i;if((0,B.hu)("string"==typeof t,"typeof type must == string"),(0,B.hu)("object"==typeof e,"typeof params must == object"),t===DU)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==TU)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return is(e,(l,u)=>{r.push(l+"="+u)}),i+r.join("&")}class oz{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,B.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,B.p$)(this.counters_)}}const PP={},FP={};function LP(n){const t=n.toString();return PP[t]||(PP[t]=new oz),PP[t]}class lz{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&U0(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class H0{constructor(t,e,i,r,l,u,f){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=l,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uT(t),this.stats_=LP(e),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),SU(e,TU,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new lz(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new VP((...l)=>{const[u,f,m,w,D]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[u,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&CU.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){H0.forceAllow_=!0}static forceDisallow(){H0.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!H0.forceAllow_&&(H0.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,B.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,B.h$)(e),r=gU(i,1840);for(let l=0;l<r.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,B.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class VP{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=dU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=VP.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){ns("frame writing exception"),f.stack&&ns(f.stack),ns(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||ns("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,B.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{ns("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let pT=null;"undefined"!=typeof MozWebSocket?pT=MozWebSocket:"undefined"!=typeof WebSocket&&(pT=WebSocket);let gT=(()=>{class n{constructor(e,i,r,l,u,f,m){this.connId=e,this.applicationId=r,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uT(this.connId),this.stats_=LP(i),this.connURL=n.connectionURL_(i,f,m,l),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,l){const u={v:"5"};return!(0,B.Yr)()&&"undefined"!=typeof location&&location.hostname&&CU.test(location.hostname)&&(u.r="f"),i&&(u.s=i),r&&(u.ls=r),l&&(u.ac=l),SU(e,DU,u)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,X_.set("previous_websocket_failure",!0);try{if((0,B.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${AP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(l.proxy={origin:f}),this.mySock=new pT(this.connURL,[],l)}else this.mySock=new pT(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(r){this.log_("Error instantiating WebSocket.");const l=r.message||r.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==pT&&!n.forceDisallow_}static previouslyFailed(){return X_.isInMemoryStorage||!0===X_.get("previous_websocket_failure")}markConnectionHealthy(){X_.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,B.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,B.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=gU(i,16384);r.length>1&&this.sendString_(String(r.length));for(let l=0;l<r.length;l++)this.sendString_(r[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class BP{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[H0,gT]}initTransports_(t){const e=gT&&gT.isAvailable();let i=e&&!gT.previouslyFailed();if(t.webSocketOnly&&(e||vo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gT];else{const r=this.transports_=[];for(const l of BP.ALL_TRANSPORTS)l&&l.isAvailable()&&r.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class BU{constructor(t,e,i,r,l,u,f,m,w,D){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=l,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=m,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uT("c:"+this.id+":"),this.transportManager_=new BP(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=hT(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=dT("t",t),i=dT("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=dT("t",t),i=dT("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=dT("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?MP("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):MP("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&vo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),hT(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hT(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(X_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class UU{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class HU{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,B.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let l=0;l<r.length;l++)if(r[l].callback===e&&(!i||i===r[l].context))return void r.splice(l,1)}validateEventType_(t){(0,B.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class kN extends HU{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kN}getInitialEvent(t){return(0,B.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class kn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function En(){return new kn("")}function Yt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gg(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new kn(n.pieces_,t)}function HP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function mT(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function GU(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new kn(t,0)}function Di(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof kn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new kn(e,0)}function Kt(n){return n.pieceNum_>=n.pieces_.length}function bo(n,t){const e=Yt(n),i=Yt(t);if(null===e)return t;if(e===i)return bo(Zn(n),Zn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Mz(n,t){const e=mT(n,0),i=mT(t,0);for(let r=0;r<e.length&&r<i.length;r++){const l=ty(e[r],i[r]);if(0!==l)return l}return e.length===i.length?0:e.length<i.length?-1:1}function jP(n,t){if(gg(n)!==gg(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function kl(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(gg(n)>gg(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Rz{constructor(t,e){this.errorPrefix_=e,this.parts_=mT(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,B.ug)(this.parts_[i]);zU(this)}}function zU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ny(n))}function ny(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class $P extends HU{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new $P}getInitialEvent(t){return(0,B.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const _T=1e3;let ON,iy=(()=>{class n extends UU{constructor(e,i,r,l,u,f,m,w){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=uT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_T,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$P.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&kN.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const l=++this.requestNumber_,u={r:l,a:e,b:i};this.log_((0,B.Pz)(u)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[l]=r)}get(e){this.initConnection_();const i=new B.BH,r={p:e._path.toString(),q:e._queryObject},l={action:"g",request:r,onComplete:f=>{const m=f.d;"ok"===f.s?(this.onDataUpdate_(r.p,m,!1,null),i.resolve(m)):i.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[u];void 0===f||l!==f||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),i.promise}listen(e,i,r,l){this.initConnection_();const u=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,B.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:i,query:e,tag:r};this.listens.get(f).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),l=i._queryIdentifier;this.log_("Listen on "+r+" for "+l);const u={p:r};e.tag&&(u.q=i._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest("q",u,m=>{const w=m.d,D=m.s;n.warnOnListenWarnings_(w,i),(this.listens.get(r)&&this.listens.get(r).get(l))===e&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(r,l),e.onComplete&&e.onComplete(D,w))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,B.r3)(e,"w")){const r=(0,B.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const l='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();vo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,B.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,B.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,l=>{const u=l.s,f=l.d||"error";this.authToken_===e&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+l),(0,B.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,l)&&this.connected_&&this.sendUnlisten_(r,l,e._queryObject,i)}sendUnlisten_(e,i,r,l){this.log_("Unlisten on "+e+" for "+i);const u={p:e};l&&(u.q=r,u.t=l),this.sendRequest("n",u)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,l){const u={p:i,d:r};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(e,i,r,l){this.putInternal("p",e,i,r,l)}merge(e,i,r,l){this.putInternal("m",e,i,r,l)}putInternal(e,i,r,l,u){this.initConnection_();const f={p:i,d:r};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:e,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,B.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):MP("Unrecognized action received from server: "+(0,B.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_T,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_T,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_T),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,ye.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),l=e.onRealtimeDisconnect_.bind(e),u=e.id+":"+n.nextConnectionId_++,f=e.lastSessionId;let m=!1,w=null;const D=function(){w?w.close():(m=!0,l())};e.realtime_={close:D,sendRequest:function(F){(0,B.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(F)}};const k=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[F,j]=yield Promise.all([e.authTokenProvider_.getToken(k),e.appCheckTokenProvider_.getToken(k)]);m?ns("getToken() completed but was canceled"):(ns("getToken() completed. Creating connection."),e.authToken_=F&&F.accessToken,e.appCheckToken_=j&&j.token,w=new BU(u,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,l,te=>{vo(te+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},f))}catch(F){e.log_("Failed to get token: "+F),m||(e.repoInfo_.nodeAdmin&&vo(F),D())}}})()}interrupt(e){ns("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ns("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_T,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(u=>RP(u)).join("$"):"default";const l=this.removeListen_(e,r);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,i){const r=new kn(e).toString();let l;if(this.listens.has(r)){const u=this.listens.get(r);l=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else l=void 0;return l}onAuthRevoked_(e,i){ns("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){ns("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,B.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+AP.replace(/\./g,"-")]=1,(0,B.uI)()?e["framework.cordova"]=1:(0,B.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=kN.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new en(t,e)}}class xN{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new en(Kh,t),r=new en(Kh,e);return 0!==this.compare(i,r)}minPost(){return en.MIN}}class ZU extends xN{static get __EMPTY_NODE(){return ON}static set __EMPTY_NODE(t){ON=t}compare(t,e){return ty(t.name,e.name)}isDefinedOn(t){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return en.MIN}maxPost(){return new en(ud,ON)}makePost(t,e){return(0,B.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new en(t,ON)}toString(){return".key"}}const dd=new ZU;class PN{constructor(t,e,i,r,l=null){this.isReverse_=r,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!t.isEmpty();)if(t=t,u=e?i(t.key,e):1,r&&(u*=-1),u<0)t=this.isReverse_?t.left:t.right;else{if(0===u){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let zP,Fc=(()=>{class n{constructor(e,i,r,l,u){this.key=e,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=l?l:Qo.EMPTY_NODE,this.right=null!=u?u:Qo.EMPTY_NODE}copy(e,i,r,l,u){return new n(null!=e?e:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=l?l:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,i,r),null):0===u?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,r)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,l;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Qo.EMPTY_NODE;l=r.right.min_(),r=r.copy(l.key,l.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Qo{constructor(t,e=Qo.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Qo(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Fc.BLACK,null,null))}remove(t){return new Qo(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Fc.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new PN(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new PN(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new PN(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new PN(this.root_,null,this.comparator_,!0,t)}}function Uz(n,t){return ty(n.name,t.name)}function GP(n,t){return ty(n,t)}Qo.EMPTY_NODE=new class{copy(t,e,i,r,l){return this}insert(t,e,i){return new Fc(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const YU=function(n){return"number"==typeof n?"number:"+mU(n):"string:"+n},KU=function(n){if(n.isLeafNode()){const t=n.val();(0,B.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,B.r3)(t,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===zP||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===zP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let QU,JU,XU,j0=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),KU(this.priorityNode_)}static set __childrenNodeConstructor(e){QU=e}static get __childrenNodeConstructor(){return QU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Kt(e)?this:".priority"===Yt(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=Yt(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,B.hu)(".priority"!==r||1===gg(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+YU(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?mU(this.value_):this.value_,this.lazyHash_=hU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,B.hu)(l>=0,"Unknown leaf type: "+i),(0,B.hu)(u>=0,"Unknown leaf type: "+r),l===u?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const oi=new class extends xN{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),l=i.compareTo(r);return 0===l?ty(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return en.MIN}maxPost(){return new en(ud,new j0("[PRIORITY-POST]",XU))}makePost(t,e){const i=JU(t);return new en(e,new j0("[PRIORITY-POST]",i))}toString(){return".priority"}},zz=Math.log(2);class qz{constructor(t){this.count=parseInt(Math.log(t+1)/zz,10),this.current_=this.count-1;const r=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const FN=function(n,t,e,i){n.sort(t);const r=function(m,w){const D=w-m;let T,k;if(0===D)return null;if(1===D)return T=n[m],k=e?e(T):T,new Fc(k,T.node,Fc.BLACK,null,null);{const F=parseInt(D/2,10)+m,j=r(m,F),te=r(F+1,w);return T=n[F],k=e?e(T):T,new Fc(k,T.node,Fc.BLACK,j,te)}},f=function(m){let w=null,D=null,T=n.length;const k=function(j,te){const de=T-j,Pe=T;T-=j;const Ve=r(de+1,Pe),pt=n[de],lt=e?e(pt):pt;F(new Fc(lt,pt.node,te,null,Ve))},F=function(j){w?(w.left=j,w=j):(D=j,w=j)};for(let j=0;j<m.count;++j){const te=m.nextBitIsOne(),de=Math.pow(2,m.count-(j+1));te?k(de,Fc.BLACK):(k(de,Fc.BLACK),k(de,Fc.RED))}return D}(new qz(n.length));return new Qo(i||t,f)};let qP;const $0={};class Qh{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,B.hu)($0&&oi,"ChildrenNode.ts has not been loaded"),qP=qP||new Qh({".priority":$0},{".priority":oi}),qP}get(t){const e=(0,B.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Qo?e:null}hasIndex(t){return(0,B.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,B.hu)(t!==dd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const l=e.getIterator(en.Wrap);let f,u=l.getNext();for(;u;)r=r||t.isDefinedOn(u.node),i.push(u),u=l.getNext();f=r?FN(i,t.getCompare()):$0;const m=t.toString(),w=Object.assign({},this.indexSet_);w[m]=t;const D=Object.assign({},this.indexes_);return D[m]=f,new Qh(D,w)}addToIndexes(t,e){const i=(0,B.UI)(this.indexes_,(r,l)=>{const u=(0,B.DV)(this.indexSet_,l);if((0,B.hu)(u,"Missing index implementation for "+l),r===$0){if(u.isDefinedOn(t.node)){const f=[],m=e.getIterator(en.Wrap);let w=m.getNext();for(;w;)w.name!==t.name&&f.push(w),w=m.getNext();return f.push(t),FN(f,u.getCompare())}return $0}{const f=e.get(t.name);let m=r;return f&&(m=m.remove(new en(t.name,f))),m.insert(t,t.node)}});return new Qh(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,B.UI)(this.indexes_,r=>{if(r===$0)return r;{const l=e.get(t.name);return l?r.remove(new en(t.name,l)):r}});return new Qh(i,this.indexSet_)}}let yT,Ft=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&KU(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yT||(yT=new n(new Qo(GP),null,Qh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yT}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?yT:i}}getChild(e){const i=Yt(e);return null===i?this:this.getImmediateChild(i).getChild(Zn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,B.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new en(e,i);let l,u;i.isEmpty()?(l=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(r,this.children_)):(l=this.children_.insert(e,i),u=this.indexMap_.addToIndexes(r,this.children_));const f=l.isEmpty()?yT:this.priorityNode_;return new n(l,f,u)}}updateChild(e,i){const r=Yt(e);if(null===r)return i;{(0,B.hu)(".priority"!==Yt(e)||1===gg(e),".priority must be the last token in a path");const l=this.getImmediateChild(r).updateChild(Zn(e),i);return this.updateImmediateChild(r,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,l=0,u=!0;if(this.forEachChild(oi,(f,m)=>{i[f]=m.val(e),r++,u&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):u=!1}),!e&&u&&l<2*r){const f=[];for(const m in i)f[m]=i[m];return f}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+YU(this.getPriority().val())+":"),this.forEachChild(oi,(i,r)=>{const l=r.hash();""!==l&&(e+=":"+i+":"+l)}),this.lazyHash_=""===e?"":hU(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const l=this.resolveIndex_(r);if(l){const u=l.getPredecessorKey(new en(e,i));return u?u.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new en(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new en(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(l=>i(l.name,l.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,en.Wrap);let u=l.peek();for(;null!=u&&i.compare(u,e)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,en.Wrap);let u=l.peek();for(;null!=u&&i.compare(u,e)>0;)l.getNext(),u=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===vT?-1:0}withIndex(e){if(e===dd||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===dd||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(oi),l=i.getIterator(oi);let u=r.getNext(),f=l.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=r.getNext(),f=l.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(e){return e===dd?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const vT=new class extends Ft{constructor(){super(new Qo(GP),Ft.EMPTY_NODE,Qh.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ft.EMPTY_NODE}isEmpty(){return!1}};function xi(n,t=null){if(null===n)return Ft.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,B.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new j0(n,xi(t));if(n instanceof Array){let e=Ft.EMPTY_NODE;return is(n,(i,r)=>{if((0,B.r3)(n,i)&&"."!==i.substring(0,1)){const l=xi(r);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(i,l))}}),e.updatePriority(xi(t))}{const e=[];let i=!1;if(is(n,(u,f)=>{if("."!==u.substring(0,1)){const m=xi(f);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),e.push(new en(u,m)))}}),0===e.length)return Ft.EMPTY_NODE;const l=FN(e,Uz,u=>u.name,GP);if(i){const u=FN(e,oi.getCompare());return new Ft(l,xi(t),new Qh({".priority":u},{".priority":oi}))}return new Ft(l,xi(t),Qh.Default)}}Object.defineProperties(en,{MIN:{value:new en(Kh,Ft.EMPTY_NODE)},MAX:{value:new en(ud,vT)}}),ZU.__EMPTY_NODE=Ft.EMPTY_NODE,j0.__childrenNodeConstructor=Ft,function(n){zP=n}(vT),function(n){XU=n}(vT),function(n){JU=n}(xi);class WP extends xN{constructor(t){super(),this.indexPath_=t,(0,B.hu)(!Kt(t)&&".priority"!==Yt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),l=i.compareTo(r);return 0===l?ty(t.name,e.name):l}makePost(t,e){const i=xi(t),r=Ft.EMPTY_NODE.updateChild(this.indexPath_,i);return new en(e,r)}maxPost(){const t=Ft.EMPTY_NODE.updateChild(this.indexPath_,vT);return new en(ud,t)}toString(){return mT(this.indexPath_,0).join("/")}}const ZP=new class extends xN{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?ty(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(t,e){const i=xi(t);return new en(e,i)}toString(){return".value"}},G0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Kz=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const l=new Array(8);for(r=7;r>=0;r--)l[r]=G0.charAt(e%64),e=Math.floor(e/64);(0,B.hu)(0===e,"Cannot push at time == 0");let u=l.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=G0.charAt(t[r]);return(0,B.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),n3=function(n){if(n===""+kP)return"-";const t=MN(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let u=0;u<e.length;u++)e[u]=n.charAt(u);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return ud;const l=G0.charAt(G0.indexOf(e[i])+1);return e[i]=l,e.slice(0,i+1).join("")},i3=function(n){if(n===""+_U)return Kh;const t=MN(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+kP:(delete e[e.length-1],e.join("")):(e[e.length-1]=G0.charAt(G0.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function r3(n){return{type:"value",snapshotNode:n}}function z0(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function bT(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function wT(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class KP{constructor(t){this.index_=t}updateChild(t,e,i,r,l,u){(0,B.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(r).equals(i.getChild(r))&&f.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?t.hasChild(e)?u.trackChildChange(bT(e,f)):(0,B.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(z0(e,i)):u.trackChildChange(wT(e,i,f))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(oi,(r,l)=>{e.hasChild(r)||i.trackChildChange(bT(r,l))}),e.isLeafNode()||e.forEachChild(oi,(r,l)=>{if(t.hasChild(r)){const u=t.getImmediateChild(r);u.equals(l)||i.trackChildChange(wT(r,l,u))}else i.trackChildChange(z0(r,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Ft.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class CT{constructor(t){this.indexedFilter_=new KP(t.getIndex()),this.index_=t.getIndex(),this.startPost_=CT.getStartPost_(t),this.endPost_=CT.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,l,u){return this.matches(new en(e,i))||(i=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,l,u)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Ft.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Ft.EMPTY_NODE);const l=this;return e.forEachChild(oi,(u,f)=>{l.matches(new en(u,f))||(r=r.updateImmediateChild(u,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Jz{constructor(t){this.rangedFilter_=new CT(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,l,u){return this.rangedFilter_.matches(new en(e,i))||(i=Ft.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,l,u):this.fullLimitUpdateChild_(t,e,i,l,u)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let l;r=Ft.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const f=l.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;r=r.updateImmediateChild(f.name,f.node),u++}}else{let l,u,f,m;if(r=e.withIndex(this.index_),r=r.updatePriority(Ft.EMPTY_NODE),this.reverse_){m=r.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();f=(k,F)=>T(F,k)}else m=r.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let w=0,D=!1;for(;m.hasNext();){const T=m.getNext();!D&&f(l,T)<=0&&(D=!0),D&&w<this.limit_&&f(T,u)<=0?w++:r=r.updateImmediateChild(T.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,l){let u;if(this.reverse_){const T=this.index_.getCompare();u=(k,F)=>T(F,k)}else u=this.index_.getCompare();const f=t;(0,B.hu)(f.numChildren()===this.limit_,"");const m=new en(e,i),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(f.hasChild(e)){const T=f.getImmediateChild(e);let k=r.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=k&&(k.name===e||f.hasChild(k.name));)k=r.getChildAfterChild(this.index_,k,this.reverse_);const F=null==k?1:u(k,m);if(D&&!i.isEmpty()&&F>=0)return null!=l&&l.trackChildChange(wT(e,i,T)),f.updateImmediateChild(e,i);{null!=l&&l.trackChildChange(bT(e,T));const te=f.updateImmediateChild(e,Ft.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=l&&l.trackChildChange(z0(k.name,k.node)),te.updateImmediateChild(k.name,k.node)):te}}return i.isEmpty()?t:D&&u(w,m)>=0?(null!=l&&(l.trackChildChange(bT(w.name,w.node)),l.trackChildChange(z0(e,i))),f.updateImmediateChild(e,i).updateImmediateChild(w.name,Ft.EMPTY_NODE)):t}}class LN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ud}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oi}copy(){const t=new LN;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function QP(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function JP(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function VN(n,t){const e=n.copy();return e.index_=t,e}function s3(n){const t={};if(n.isDefault())return t;let e;return n.index_===oi?e="$priority":n.index_===ZP?e="$value":n.index_===dd?e="$key":((0,B.hu)(n.index_ instanceof WP,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,B.Pz)(e),n.startSet_&&(t.startAt=(0,B.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,B.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,B.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,B.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function o3(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==oi&&(t.i=n.index_.toString()),t}class BN extends UU{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=uT("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,B.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const u=BN.getListenId_(t,i),f={};this.listens_[u]=f;const m=s3(t._queryParams);this.restRequest_(l+".json",m,(w,D)=>{let T=D;if(404===w&&(T=null,w=null),null===w&&this.onDataUpdate_(l,T,!1,i),(0,B.DV)(this.listens_,u)===f){let k;k=w?401===w?"permission_denied":"rest_error:"+w:"ok",r(k,null)}})}unlisten(t,e){const i=BN.getListenId_(t,e);delete this.listens_[i]}get(t){const e=s3(t._queryParams),i=t._path.toString(),r=new B.BH;return this.restRequest_(i+".json",e,(l,u)=>{let f=u;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(i,f,!1,null),r.resolve(f)):r.reject(new Error(f))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,l])=>{r&&r.accessToken&&(e.auth=r.accessToken),l&&l.token&&(e.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,B.xO)(e);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,B.cI)(f.responseText)}catch(w){vo("Failed to parse JSON response for "+u+": "+f.responseText)}i(null,m)}else 401!==f.status&&404!==f.status&&vo("Got unsuccessful REST response for "+u+" Status: "+f.status),i(f.status);i=null}},f.open("GET",u,!0),f.send()})}}class rq{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function UN(){return{value:null,children:new Map}}function q0(n,t,e){if(Kt(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=Yt(t);n.children.has(i)||n.children.set(i,UN()),q0(n.children.get(i),t=Zn(t),e)}}function XP(n,t){if(Kt(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(oi,(i,r)=>{q0(n,new kn(i),r)}),XP(n,t)}}if(n.children.size>0){const e=Yt(t);return t=Zn(t),n.children.has(e)&&XP(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function eF(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{eF(r,new kn(t.toString()+"/"+i),e)})}class oq{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&is(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class cq{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new oq(t);const i=1e4+2e4*Math.random();hT(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;is(t,(r,l)=>{l>0&&(0,B.r3)(this.statsToReport_,r)&&(e[r]=l,i=!0)}),i&&this.server_.reportStats(e),hT(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var xl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(xl||(xl={})),xl))();function iF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class HN{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=xl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Kt(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new kn(t));return new HN(En(),e,this.revert)}}return(0,B.hu)(Yt(this.path)===t,"operationForChild called for unrelated child."),new HN(Zn(this.path),this.affectedTree,this.revert)}}class ET{constructor(t,e){this.source=t,this.path=e,this.type=xl.LISTEN_COMPLETE}operationForChild(t){return Kt(this.path)?new ET(this.source,En()):new ET(this.source,Zn(this.path))}}class ry{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=xl.OVERWRITE}operationForChild(t){return Kt(this.path)?new ry(this.source,En(),this.snap.getImmediateChild(t)):new ry(this.source,Zn(this.path),this.snap)}}class W0{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=xl.MERGE}operationForChild(t){if(Kt(this.path)){const e=this.children.subtree(new kn(t));return e.isEmpty()?null:e.value?new ry(this.source,En(),e.value):new W0(this.source,En(),e)}return(0,B.hu)(Yt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new W0(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mg{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Kt(t))return this.isFullyInitialized()&&!this.filtered_;const e=Yt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class uq{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function DT(n,t,e,i,r,l){const u=i.filter(f=>f.type===e);u.sort((f,m)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,B.g5)("Should only compare child_ events.");const i=new en(t.childName,t.snapshotNode),r=new en(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,f,m)),u.forEach(f=>{const m=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,f,l);r.forEach(w=>{w.respondsTo(f.type)&&t.push(w.createEvent(m,n.query_))})})}function jN(n,t){return{eventCache:n,serverCache:t}}function TT(n,t,e,i){return jN(new mg(t,e,i),n.serverCache)}function l3(n,t,e,i){return jN(n.eventCache,new mg(t,e,i))}function $N(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sy(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let rF;class ai{constructor(t,e=(()=>(rF||(rF=new Qo(K8)),rF))()){this.value=t,this.children=e}static fromObject(t){let e=new ai(null);return is(t,(i,r)=>{e=e.set(new kn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:En(),value:this.value};if(Kt(t))return null;{const i=Yt(t),r=this.children.get(i);if(null!==r){const l=r.findRootMostMatchingPathAndValue(Zn(t),e);return null!=l?{path:Di(new kn(i),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Kt(t))return this;{const e=Yt(t),i=this.children.get(e);return null!==i?i.subtree(Zn(t)):new ai(null)}}set(t,e){if(Kt(t))return new ai(e,this.children);{const i=Yt(t),l=(this.children.get(i)||new ai(null)).set(Zn(t),e),u=this.children.insert(i,l);return new ai(this.value,u)}}remove(t){if(Kt(t))return this.children.isEmpty()?new ai(null):new ai(null,this.children);{const e=Yt(t),i=this.children.get(e);if(i){const r=i.remove(Zn(t));let l;return l=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&l.isEmpty()?new ai(null):new ai(this.value,l)}return this}}get(t){if(Kt(t))return this.value;{const e=Yt(t),i=this.children.get(e);return i?i.get(Zn(t)):null}}setTree(t,e){if(Kt(t))return e;{const i=Yt(t),l=(this.children.get(i)||new ai(null)).setTree(Zn(t),e);let u;return u=l.isEmpty()?this.children.remove(i):this.children.insert(i,l),new ai(this.value,u)}}fold(t){return this.fold_(En(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,l)=>{i[r]=l.fold_(Di(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,En(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(Kt(t))return null;{const l=Yt(t),u=this.children.get(l);return u?u.findOnPath_(Zn(t),Di(e,l),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,En(),e)}foreachOnPath_(t,e,i){if(Kt(t))return this;{this.value&&i(e,this.value);const r=Yt(t),l=this.children.get(r);return l?l.foreachOnPath_(Zn(t),Di(e,r),i):new ai(null)}}foreach(t){this.foreach_(En(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Di(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Lc{constructor(t){this.writeTree_=t}static empty(){return new Lc(new ai(null))}}function ST(n,t,e){if(Kt(t))return new Lc(new ai(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let l=i.value;const u=bo(r,t);return l=l.updateChild(u,e),new Lc(n.writeTree_.set(r,l))}{const r=new ai(e),l=n.writeTree_.setTree(t,r);return new Lc(l)}}}function sF(n,t,e){let i=n;return is(e,(r,l)=>{i=ST(i,Di(t,r),l)}),i}function c3(n,t){if(Kt(t))return Lc.empty();{const e=n.writeTree_.setTree(t,new ai(null));return new Lc(e)}}function oF(n,t){return null!=oy(n,t)}function oy(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(bo(e.path,t)):null}function u3(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(oi,(i,r)=>{t.push(new en(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new en(i,r.value))}),t}function _g(n,t){if(Kt(t))return n;{const e=oy(n,t);return new Lc(null!=e?new ai(e):n.writeTree_.subtree(t))}}function aF(n){return n.writeTree_.isEmpty()}function Z0(n,t){return d3(En(),n.writeTree_,t)}function d3(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,l)=>{".priority"===r?((0,B.hu)(null!==l.value,"Priority writes must always be leaf nodes"),i=l.value):e=d3(Di(n,r),l,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Di(n,".priority"),i)),e}}function GN(n,t){return m3(t,n)}function vq(n,t){if(n.snap)return kl(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&kl(Di(n.path,e),t))return!0;return!1}function wq(n){return n.visible}function h3(n,t,e){let i=Lc.empty();for(let r=0;r<n.length;++r){const l=n[r];if(t(l)){const u=l.path;let f;if(l.snap)kl(e,u)?(f=bo(e,u),i=ST(i,f,l.snap)):kl(u,e)&&(f=bo(u,e),i=ST(i,En(),l.snap.getChild(f)));else{if(!l.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(kl(e,u))f=bo(e,u),i=sF(i,f,l.children);else if(kl(u,e))if(f=bo(u,e),Kt(f))i=sF(i,En(),l.children);else{const m=(0,B.DV)(l.children,Yt(f));if(m){const w=m.getChild(Zn(f));i=ST(i,En(),w)}}}}}return i}function f3(n,t,e,i,r){if(i||r){const l=_g(n.visibleWrites,t);return!r&&aF(l)?e:r||null!=e||oF(l,En())?Z0(h3(n.allWrites,function(w){return(w.visible||r)&&(!i||!~i.indexOf(w.writeId))&&(kl(w.path,t)||kl(t,w.path))},t),e||Ft.EMPTY_NODE):null}{const l=oy(n.visibleWrites,t);if(null!=l)return l;{const u=_g(n.visibleWrites,t);return aF(u)?e:null!=e||oF(u,En())?Z0(u,e||Ft.EMPTY_NODE):null}}}function zN(n,t,e,i){return f3(n.writeTree,n.treePath,t,e,i)}function lF(n,t){return function(n,t,e){let i=Ft.EMPTY_NODE;const r=oy(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(oi,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(e){const l=_g(n.visibleWrites,t);return e.forEachChild(oi,(u,f)=>{const m=Z0(_g(l,new kn(u)),f);i=i.updateImmediateChild(u,m)}),u3(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return u3(_g(n.visibleWrites,t)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,t)}function p3(n,t,e,i){return function(n,t,e,i,r){(0,B.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const l=Di(t,e);if(oF(n.visibleWrites,l))return null;{const u=_g(n.visibleWrites,l);return aF(u)?r.getChild(e):Z0(u,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function qN(n,t){return function(n,t){return oy(n.visibleWrites,t)}(n.writeTree,Di(n.treePath,t))}function cF(n,t,e){return function(n,t,e,i){const r=Di(t,e),l=oy(n.visibleWrites,r);return null!=l?l:i.isCompleteForChild(e)?Z0(_g(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function g3(n,t){return m3(Di(n.treePath,t),n.writeTree)}function m3(n,t){return{treePath:n,writeTree:t}}class Nq{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,B.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const l=r.type;if("child_added"===e&&"child_removed"===l)this.changeMap.set(i,wT(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===l)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===l)this.changeMap.set(i,bT(i,r.oldSnap));else if("child_changed"===e&&"child_added"===l)this.changeMap.set(i,z0(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==l)throw(0,B.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,wT(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const _3=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class uF{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new mg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cF(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sy(this.viewCache_),l=function(n,t,e,i,r,l){return function(n,t,e,i,r,l,u){let f;const m=_g(n.visibleWrites,t),w=oy(m,En());if(null!=w)f=w;else{if(null==e)return[];f=Z0(m,e)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const D=[],T=u.getCompare(),k=l?f.getReverseIteratorFrom(i,u):f.getIteratorFrom(i,u);let F=k.getNext();for(;F&&D.length<r;)0!==T(F,i)&&D.push(F),F=k.getNext();return D}}(n.writeTree,n.treePath,t,e,i,r,l)}(this.writes_,r,e,1,i,t);return 0===l.length?null:l[0]}}function y3(n,t,e,i,r,l){const u=t.eventCache;if(null!=qN(i,e))return t;{let f,m;if(Kt(e))if((0,B.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const w=sy(t),T=lF(i,w instanceof Ft?w:Ft.EMPTY_NODE);f=n.filter.updateFullNode(t.eventCache.getNode(),T,l)}else{const w=zN(i,sy(t));f=n.filter.updateFullNode(t.eventCache.getNode(),w,l)}else{const w=Yt(e);if(".priority"===w){(0,B.hu)(1===gg(e),"Can't have a priority with additional path components");const D=u.getNode();m=t.serverCache.getNode();const T=p3(i,e,D,m);f=null!=T?n.filter.updatePriority(D,T):u.getNode()}else{const D=Zn(e);let T;if(u.isCompleteForChild(w)){m=t.serverCache.getNode();const k=p3(i,e,u.getNode(),m);T=null!=k?u.getNode().getImmediateChild(w).updateChild(D,k):u.getNode().getImmediateChild(w)}else T=cF(i,w,t.serverCache);f=null!=T?n.filter.updateChild(u.getNode(),w,T,D,r,l):u.getNode()}}return TT(t,f,u.isFullyInitialized()||Kt(e),n.filter.filtersNodes())}}function WN(n,t,e,i,r,l,u,f){const m=t.serverCache;let w;const D=u?n.filter:n.filter.getIndexedFilter();if(Kt(e))w=D.updateFullNode(m.getNode(),i,null);else if(D.filtersNodes()&&!m.isFiltered()){const F=m.getNode().updateChild(e,i);w=D.updateFullNode(m.getNode(),F,null)}else{const F=Yt(e);if(!m.isCompleteForPath(e)&&gg(e)>1)return t;const j=Zn(e),de=m.getNode().getImmediateChild(F).updateChild(j,i);w=".priority"===F?D.updatePriority(m.getNode(),de):D.updateChild(m.getNode(),F,de,j,_3,null)}const T=l3(t,w,m.isFullyInitialized()||Kt(e),D.filtersNodes());return y3(n,T,e,r,new uF(r,T,l),f)}function dF(n,t,e,i,r,l,u){const f=t.eventCache;let m,w;const D=new uF(r,t,l);if(Kt(e))w=n.filter.updateFullNode(t.eventCache.getNode(),i,u),m=TT(t,w,!0,n.filter.filtersNodes());else{const T=Yt(e);if(".priority"===T)w=n.filter.updatePriority(t.eventCache.getNode(),i),m=TT(t,w,f.isFullyInitialized(),f.isFiltered());else{const k=Zn(e),F=f.getNode().getImmediateChild(T);let j;if(Kt(k))j=i;else{const te=D.getCompleteChild(T);j=null!=te?".priority"===HP(k)&&te.getChild(GU(k)).isEmpty()?te:te.updateChild(k,i):Ft.EMPTY_NODE}m=F.equals(j)?t:TT(t,n.filter.updateChild(f.getNode(),T,j,k,D,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function v3(n,t){return n.eventCache.isCompleteForChild(t)}function b3(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function hF(n,t,e,i,r,l,u,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let w,m=t;w=Kt(e)?i:new ai(null).setTree(e,i);const D=t.serverCache.getNode();return w.children.inorderTraversal((T,k)=>{if(D.hasChild(T)){const j=b3(0,t.serverCache.getNode().getImmediateChild(T),k);m=WN(n,m,new kn(T),j,r,l,u,f)}}),w.children.inorderTraversal((T,k)=>{const F=!t.serverCache.isCompleteForChild(T)&&void 0===k.value;if(!D.hasChild(T)&&!F){const te=b3(0,t.serverCache.getNode().getImmediateChild(T),k);m=WN(n,m,new kn(T),te,r,l,u,f)}}),m}class Bq{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new KP(i.getIndex()),l=function(n){return n.loadsAllData()?new KP(n.getIndex()):n.hasLimit()?new Jz(n):new CT(n)}(i);this.processor_=function(n){return{filter:n}}(l);const u=e.serverCache,f=e.eventCache,m=r.updateFullNode(Ft.EMPTY_NODE,u.getNode(),null),w=l.updateFullNode(Ft.EMPTY_NODE,f.getNode(),null),D=new mg(m,u.isFullyInitialized(),r.filtersNodes()),T=new mg(w,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=jN(T,D),this.eventGenerator_=new uq(this.query_)}get query(){return this.query_}}function jq(n,t){const e=sy(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Kt(t)&&!e.getImmediateChild(Yt(t)).isEmpty())?e.getChild(t):null}function w3(n){return 0===n.eventRegistrations_.length}function C3(n,t,e){const i=[];if(e){(0,B.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(e,r);u&&i.push(u)})}if(t){let r=[];for(let l=0;l<n.eventRegistrations_.length;++l){const u=n.eventRegistrations_[l];if(u.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(l+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function E3(n,t,e,i){t.type===xl.MERGE&&null!==t.source.queryId&&((0,B.hu)(sy(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)($N(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,l=function(n,t,e,i,r){const l=new Nq;let u,f;if(e.type===xl.OVERWRITE){const w=e;w.source.fromUser?u=dF(n,t,w.path,w.snap,i,r,l):((0,B.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||t.serverCache.isFiltered()&&!Kt(w.path),u=WN(n,t,w.path,w.snap,i,r,f,l))}else if(e.type===xl.MERGE){const w=e;w.source.fromUser?u=function(n,t,e,i,r,l,u){let f=t;return i.foreach((m,w)=>{const D=Di(e,m);v3(t,Yt(D))&&(f=dF(n,f,D,w,r,l,u))}),i.foreach((m,w)=>{const D=Di(e,m);v3(t,Yt(D))||(f=dF(n,f,D,w,r,l,u))}),f}(n,t,w.path,w.children,i,r,l):((0,B.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||t.serverCache.isFiltered(),u=hF(n,t,w.path,w.children,i,r,f,l))}else if(e.type===xl.ACK_USER_WRITE){const w=e;u=w.revert?function(n,t,e,i,r,l){let u;if(null!=qN(i,e))return t;{const f=new uF(i,t,r),m=t.eventCache.getNode();let w;if(Kt(e)||".priority"===Yt(e)){let D;if(t.serverCache.isFullyInitialized())D=zN(i,sy(t));else{const T=t.serverCache.getNode();(0,B.hu)(T instanceof Ft,"serverChildren would be complete if leaf node"),D=lF(i,T)}D=D,w=n.filter.updateFullNode(m,D,l)}else{const D=Yt(e);let T=cF(i,D,t.serverCache);null==T&&t.serverCache.isCompleteForChild(D)&&(T=m.getImmediateChild(D)),w=null!=T?n.filter.updateChild(m,D,T,Zn(e),f,l):t.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,Ft.EMPTY_NODE,Zn(e),f,l):m,w.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=zN(i,sy(t)),u.isLeafNode()&&(w=n.filter.updateFullNode(w,u,l)))}return u=t.serverCache.isFullyInitialized()||null!=qN(i,En()),TT(t,w,u,n.filter.filtersNodes())}}(n,t,w.path,i,r,l):function(n,t,e,i,r,l,u){if(null!=qN(r,e))return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(null!=i.value){if(Kt(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return WN(n,t,e,m.getNode().getChild(e),r,l,f,u);if(Kt(e)){let w=new ai(null);return m.getNode().forEachChild(dd,(D,T)=>{w=w.set(new kn(D),T)}),hF(n,t,e,w,r,l,f,u)}return t}{let w=new ai(null);return i.foreach((D,T)=>{const k=Di(e,D);m.isCompleteForPath(k)&&(w=w.set(D,m.getNode().getChild(k)))}),hF(n,t,e,w,r,l,f,u)}}(n,t,w.path,w.affectedTree,i,r,l)}else{if(e.type!==xl.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+e.type);u=function(n,t,e,i,r){const l=t.serverCache;return y3(n,l3(t,l.getNode(),l.isFullyInitialized()||Kt(e),l.isFiltered()),e,i,_3,r)}(n,t,e.path,i,l)}const m=l.getChanges();return function(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=$N(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&e.push(r3($N(t)))}}(t,u,m),{viewCache:u,changes:m}}(n.processor_,r,t,e,i);return function(n,t){(0,B.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,B.hu)(l.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,D3(n,l.changes,l.viewCache.eventCache.getNode(),null)}function D3(n,t,e,i){return function(n,t,e,i){const r=[],l=[];return t.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(u.childName,u.snapshotNode))}),DT(n,r,"child_removed",t,i,e),DT(n,r,"child_added",t,i,e),DT(n,r,"child_moved",l,i,e),DT(n,r,"child_changed",t,i,e),DT(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let ZN,KN;class T3{constructor(){this.views=new Map}}function fF(n,t,e,i){const r=t.source.queryId;if(null!==r){const l=n.views.get(r);return(0,B.hu)(null!=l,"SyncTree gave us an op for an invalid query."),E3(l,t,e,i)}{let l=[];for(const u of n.views.values())l=l.concat(E3(u,t,e,i));return l}}function S3(n,t,e,i,r){const u=n.views.get(t._queryIdentifier);if(!u){let f=zN(e,r?i:null),m=!1;f?m=!0:i instanceof Ft?(f=lF(e,i),m=!1):(f=Ft.EMPTY_NODE,m=!1);const w=jN(new mg(f,m,!1),new mg(i,r,!1));return new Bq(t,w)}return u}function I3(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function yg(n,t){let e=null;for(const i of n.views.values())e=e||jq(i,t);return e}function A3(n,t){return t._queryParams.loadsAllData()?YN(n):n.views.get(t._queryIdentifier)}function N3(n,t){return null!=A3(n,t)}function vg(n){return null!=YN(n)}function YN(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Jq=1;class M3{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ai(null),this.pendingWriteTree_={visibleWrites:Lc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pF(n,t,e,i,r){return function(n,t,e,i,r){(0,B.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=ST(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Y0(n,new ry({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function bg(n,t,e=!1){const i=function(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);(0,B.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,l=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=e&&vq(f,i.path)?r=!1:kl(i.path,f.path)&&(l=!0)),u--}return!!r&&(l?(function(n){n.visibleWrites=h3(n.allWrites,wq,En()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=c3(n.visibleWrites,i.path):is(i.children,m=>{n.visibleWrites=c3(n.visibleWrites,Di(i.path,m))}),!0))}(n.pendingWriteTree_,t)){let l=new ai(null);return null!=i.snap?l=l.set(En(),!0):is(i.children,u=>{l=l.set(new kn(u),!0)}),Y0(n,new HN(i.path,l,e))}return[]}function IT(n,t,e){return Y0(n,new ry({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function gF(n,t,e,i){const r=t._path,l=n.syncPointTree_.get(r);let u=[];if(l&&("default"===t._queryIdentifier||N3(l,t))){const f=function(n,t,e,i){const r=t._queryIdentifier,l=[];let u=[];const f=vg(n);if("default"===r)for(const[m,w]of n.views.entries())u=u.concat(C3(w,e,i)),w3(w)&&(n.views.delete(m),w.query._queryParams.loadsAllData()||l.push(w.query));else{const m=n.views.get(r);m&&(u=u.concat(C3(m,e,i)),w3(m)&&(n.views.delete(r),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!vg(n)&&l.push(new((0,B.hu)(ZN,"Reference.ts has not been loaded"),ZN)(t._repo,t._path)),{removed:l,events:u}}(l,t,e,i);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const m=f.removed;u=f.events;const w=-1!==m.findIndex(T=>T._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(r,(T,k)=>vg(k));if(w&&!D){const T=n.syncPointTree_.subtree(r);if(!T.isEmpty()){const k=function(n){return n.fold((t,e,i)=>{if(e&&vg(e))return[YN(e)];{let r=[];return e&&(r=I3(e)),is(i,(l,u)=>{r=r.concat(u)}),r}})}(T);for(let F=0;F<k.length;++F){const j=k[F],te=j.query,de=O3(n,j);n.listenProvider_.startListening(AT(te),JN(n,te),de.hashFn,de.onComplete)}}}if(!D&&m.length>0&&!i)if(w){const T=null;n.listenProvider_.stopListening(AT(t),T)}else m.forEach(T=>{const k=n.queryToTagMap.get(XN(T));n.listenProvider_.stopListening(AT(T),k)});!function(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=XN(i),l=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(l)}}}(n,m)}return u}function R3(n,t,e){const i=t._path;let r=null,l=!1;n.syncPointTree_.foreachOnPath(i,(T,k)=>{const F=bo(T,i);r=r||yg(k,F),l=l||vg(k)});let f,u=n.syncPointTree_.get(i);u?(l=l||vg(u),r=r||yg(u,En())):(u=new T3,n.syncPointTree_=n.syncPointTree_.set(i,u)),null!=r?f=!0:(f=!1,r=Ft.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,F)=>{const j=yg(F,En());j&&(r=r.updateImmediateChild(k,j))}));const m=N3(u,t);if(!m&&!t._queryParams.loadsAllData()){const T=XN(t);(0,B.hu)(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const k=Jq++;n.queryToTagMap.set(T,k),n.tagToQueryMap.set(k,T)}let D=function(n,t,e,i,r,l){const u=S3(n,t,i,r,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,u),function(n,t){n.eventRegistrations_.push(t)}(u,e),function(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(oi,(l,u)=>{i.push(z0(l,u))}),e.isFullyInitialized()&&i.push(r3(e.getNode())),D3(n,i,e.getNode(),t)}(u,e)}(u,t,e,GN(n.pendingWriteTree_,i),r,f);if(!m&&!l){const T=A3(u,t);D=D.concat(function(n,t,e){const i=t._path,r=JN(n,t),l=O3(n,e),u=n.listenProvider_.startListening(AT(t),r,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(i);if(r)(0,B.hu)(!vg(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((w,D,T)=>{if(!Kt(w)&&D&&vg(D))return[YN(D).query];{let k=[];return D&&(k=k.concat(I3(D).map(F=>F.query))),is(T,(F,j)=>{k=k.concat(j)}),k}});for(let w=0;w<m.length;++w){const D=m[w];n.listenProvider_.stopListening(AT(D),JN(n,D))}}return u}(n,t,T))}return D}function QN(n,t,e){const r=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(u,f)=>{const w=yg(f,bo(u,t));if(w)return w});return f3(r,t,l,e,!0)}function Y0(n,t){return k3(t,n.syncPointTree_,null,GN(n.pendingWriteTree_,En()))}function k3(n,t,e,i){if(Kt(n.path))return x3(n,t,e,i);{const r=t.get(En());null==e&&null!=r&&(e=yg(r,En()));let l=[];const u=Yt(n.path),f=n.operationForChild(u),m=t.children.get(u);if(m&&f){const w=e?e.getImmediateChild(u):null,D=g3(i,u);l=l.concat(k3(f,m,w,D))}return r&&(l=l.concat(fF(r,n,i,e))),l}}function x3(n,t,e,i){const r=t.get(En());null==e&&null!=r&&(e=yg(r,En()));let l=[];return t.children.inorderTraversal((u,f)=>{const m=e?e.getImmediateChild(u):null,w=g3(i,u),D=n.operationForChild(u);D&&(l=l.concat(x3(D,f,m,w)))}),r&&(l=l.concat(fF(r,n,i,e))),l}function O3(n,t){const e=t.query,i=JN(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||Ft.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function(n,t,e){const i=mF(n,e);if(i){const r=_F(i),l=r.path,u=r.queryId,f=bo(l,t);return yF(n,l,new ET(iF(u),f))}return[]}(n,e._path,i):function(n,t){return Y0(n,new ET({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const l=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return gF(n,e,null,l)}}}}function JN(n,t){const e=XN(t);return n.queryToTagMap.get(e)}function XN(n){return n._path.toString()+"$"+n._queryIdentifier}function mF(n,t){return n.tagToQueryMap.get(t)}function _F(n){const t=n.indexOf("$");return(0,B.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new kn(n.substr(0,t))}}function yF(n,t,e){const i=n.syncPointTree_.get(t);return(0,B.hu)(i,"Missing sync point for query tag that we're tracking"),fF(i,e,GN(n.pendingWriteTree_,t),null)}function AT(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,B.hu)(KN,"Reference.ts has not been loaded"),KN)(n._repo,n._path):n}class vF{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new vF(e)}node(){return this.node_}}class bF{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Di(this.path_,t);return new bF(this.syncTree_,e)}node(){return QN(this.syncTree_,this.path_)}}const P3=function(n,t,e){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?dW(n[".sv"],t,e):"object"==typeof n[".sv"]?hW(n[".sv"],t):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},dW=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,B.hu)(!1,"Unexpected server value: "+n)}},hW=function(n,t,e){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,B.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,B.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},F3=function(n,t,e,i){return CF(t,new bF(e,n),i)},wF=function(n,t,e){return CF(n,new vF(t),e)};function CF(n,t,e){const i=n.getPriority().val(),r=P3(i,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const u=n,f=P3(u.getValue(),t,e);return f!==u.getValue()||r!==u.getPriority().val()?new j0(f,xi(r)):n}{const u=n;return l=u,r!==u.getPriority().val()&&(l=l.updatePriority(new j0(r))),u.forEachChild(oi,(f,m)=>{const w=CF(m,t.getImmediateChild(f),e);w!==m&&(l=l.updateImmediateChild(f,w))}),l}}class EF{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function eM(n,t){let e=t instanceof kn?t:new kn(t),i=n,r=Yt(e);for(;null!==r;){const l=(0,B.DV)(i.node.children,r)||{children:{},childCount:0};i=new EF(r,i,l),e=Zn(e),r=Yt(e)}return i}function ay(n){return n.node.value}function DF(n,t){n.node.value=t,TF(n)}function L3(n){return n.node.childCount>0}function tM(n,t){is(n.node.children,(e,i)=>{t(new EF(e,n,i))})}function V3(n,t,e,i){e&&!i&&t(n),tM(n,r=>{V3(r,t,!0,i)}),e&&i&&t(n)}function NT(n){return new kn(null===n.parent?n.name:NT(n.parent)+"/"+n.name)}function TF(n){null!==n.parent&&function(n,t,e){const i=function(n){return void 0===ay(n)&&!L3(n)}(e),r=(0,B.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,TF(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,TF(n))}(n.parent,n.name,n)}const mW=/[\[\].#$\/\u0000-\u001F\u007F]/,_W=/[\[\].#$\u0000-\u001F\u007F]/,SF=10485760,nM=function(n){return"string"==typeof n&&0!==n.length&&!mW.test(n)},B3=function(n){return"string"==typeof n&&0!==n.length&&!_W.test(n)},MT=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!NN(n)||n&&"object"==typeof n&&(0,B.r3)(n,".sv")},hd=function(n,t,e,i){i&&void 0===t||RT((0,B.gK)(n,"value"),t,e)},RT=function(n,t,e){const i=e instanceof kn?new Rz(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+ny(i));if("function"==typeof t)throw new Error(n+"contains a function "+ny(i)+" with contents = "+t.toString());if(NN(t))throw new Error(n+"contains "+t.toString()+" "+ny(i));if("string"==typeof t&&t.length>SF/3&&(0,B.ug)(t)>SF)throw new Error(n+"contains a string greater than "+SF+" utf8 bytes "+ny(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,l=!1;if(is(t,(u,f)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(l=!0,!nM(u)))throw new Error(n+" contains an invalid key ("+u+") "+ny(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,B.ug)(t),zU(n)})(i,u),RT(n,f,i),function(n){const t=n.parts_.pop();n.byteLength_-=(0,B.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&l)throw new Error(n+' contains ".value" child '+ny(i)+" in addition to actual children.")}},U3=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,B.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const l=[];is(t,(u,f)=>{const m=new kn(u);if(RT(r,f,Di(e,m)),".priority"===HP(m)&&!MT(f))throw new Error(r+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const l=mT(i);for(let u=0;u<l.length;u++)if((".priority"!==l[u]||u!==l.length-1)&&!nM(l[u]))throw new Error(n+"contains an invalid key ("+l[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Mz);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&kl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,l)},IF=function(n,t,e){if(!e||void 0!==t){if(NN(t))throw new Error((0,B.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!MT(t))throw new Error((0,B.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},kT=function(n,t,e,i){if(!(i&&void 0===e||nM(e)))throw new Error((0,B.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xT=function(n,t,e,i){if(!(i&&void 0===e||B3(e)))throw new Error((0,B.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ol=function(n,t){if(".info"===Yt(t))throw new Error(n+" failed = Can't modify data under /.info/")},H3=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!nM(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),B3(n)}(e))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function iM(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],l=r.getPath();null!==e&&!jP(l,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:l}),e.events.push(r)}e&&n.eventLists_.push(e)}function AF(n,t,e){iM(n,e),j3(n,i=>jP(i,t))}function Pl(n,t,e){iM(n,e),j3(n,i=>kl(i,t)||kl(t,i))}function j3(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(CW(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function CW(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();ey&&ns("event: "+e.toString()),U0(i)}}}const $3="repo_interrupt";class DW{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=UN(),this.transactionQueueTree_=new EF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function G3(n){const e=n.infoData_.getNode(new kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function OT(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:G3(n)})}function z3(n,t,e,i,r){n.dataUpdateCount++;const l=new kn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let u=[];if(r)if(i){const m=(0,B.UI)(e,w=>xi(w));u=function(n,t,e,i){const r=mF(n,i);if(r){const l=_F(r),u=l.path,f=l.queryId,m=bo(u,t),w=ai.fromObject(e);return yF(n,u,new W0(iF(f),m,w))}return[]}(n.serverSyncTree_,l,m,r)}else{const m=xi(e);u=function(n,t,e,i){const r=mF(n,i);if(null!=r){const l=_F(r),u=l.path,f=l.queryId,m=bo(u,t);return yF(n,u,new ry(iF(f),m,e))}return[]}(n.serverSyncTree_,l,m,r)}else if(i){const m=(0,B.UI)(e,w=>xi(w));u=function(n,t,e){const i=ai.fromObject(e);return Y0(n,new W0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,l,m)}else{const m=xi(e);u=IT(n.serverSyncTree_,l,m)}let f=l;u.length>0&&(f=Q0(n,l)),Pl(n.eventQueue_,f,u)}function q3(n,t){NF(n,"connected",t),!1===t&&function(n){K0(n,"onDisconnectEvents");const t=OT(n),e=UN();eF(n.onDisconnect_,En(),(r,l)=>{const u=F3(r,l,n.serverSyncTree_,t);q0(e,r,u)});let i=[];eF(e,En(),(r,l)=>{i=i.concat(IT(n.serverSyncTree_,r,l));const u=xF(n,r);Q0(n,u)}),n.onDisconnect_=UN(),Pl(n.eventQueue_,En(),i)}(n)}function NF(n,t,e){const i=new kn("/.info/"+t),r=xi(e);n.infoData_.updateSnapshot(i,r);const l=IT(n.infoSyncTree_,i,r);Pl(n.eventQueue_,i,l)}function rM(n){return n.nextWriteId_++}function MF(n,t,e,i,r){K0(n,"set",{path:t.toString(),value:e,priority:i});const l=OT(n),u=xi(e,i),f=QN(n.serverSyncTree_,t),m=wF(u,f,l),w=rM(n),D=pF(n.serverSyncTree_,t,m,w,!0);iM(n.eventQueue_,D),n.server_.put(t.toString(),u.val(!0),(k,F)=>{const j="ok"===k;j||vo("set at "+t+" failed: "+k);const te=bg(n.serverSyncTree_,w,!j);Pl(n.eventQueue_,t,te),wg(0,r,k,F)});const T=xF(n,t);Q0(n,T),Pl(n.eventQueue_,T,[])}function MW(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&XP(n.onDisconnect_,t),wg(0,e,i,r)})}function W3(n,t,e,i){const r=xi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(l,u)=>{"ok"===l&&q0(n.onDisconnect_,t,r),wg(0,i,l,u)})}function RF(n,t,e){let i;i=".info"===Yt(t._path)?gF(n.infoSyncTree_,t,e):gF(n.serverSyncTree_,t,e),AF(n.eventQueue_,t._path,i)}function Z3(n){n.persistentConnection_&&n.persistentConnection_.interrupt($3)}function K0(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),ns(e,...t)}function wg(n,t,e,i){t&&U0(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let l=r;i&&(l+=": "+i);const u=new Error(l);u.code=r,t(u)}})}function kF(n,t,e){return QN(n.serverSyncTree_,t,e)||Ft.EMPTY_NODE}function sM(n,t=n.transactionQueueTree_){if(t||oM(n,t),ay(t)){const e=K3(n,t);(0,B.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function(n,t,e){const i=e.map(w=>w.currentWriteId),r=kF(n,t,i);let l=r;const u=r.hash();for(let w=0;w<e.length;w++){const D=e[w];(0,B.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const T=bo(t,D.path);l=l.updateChild(T,D.currentOutputSnapshotRaw)}const f=l.val(!0),m=t;n.server_.put(m.toString(),f,w=>{K0(n,"transaction put response",{path:m.toString(),status:w});let D=[];if("ok"===w){const T=[];for(let k=0;k<e.length;k++)e[k].status=2,D=D.concat(bg(n.serverSyncTree_,e[k].currentWriteId)),e[k].onComplete&&T.push(()=>e[k].onComplete(null,!0,e[k].currentOutputSnapshotResolved)),e[k].unwatcher();oM(n,eM(n.transactionQueueTree_,t)),sM(n,n.transactionQueueTree_),Pl(n.eventQueue_,t,D);for(let k=0;k<T.length;k++)U0(T[k])}else{if("datastale"===w)for(let T=0;T<e.length;T++)e[T].status=3===e[T].status?4:0;else{vo("transaction at "+m.toString()+" failed: "+w);for(let T=0;T<e.length;T++)e[T].status=4,e[T].abortReason=w}Q0(n,t)}},u)}(n,NT(t),e)}else L3(t)&&tM(t,e=>{sM(n,e)})}function Q0(n,t){const e=Y3(n,t),i=NT(e);return function(n,t,e){if(0===t.length)return;const i=[];let r=[];const u=t.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],w=bo(e,m.path);let T,D=!1;if((0,B.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,T=m.abortReason,r=r.concat(bg(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)D=!0,T="maxretry",r=r.concat(bg(n.serverSyncTree_,m.currentWriteId,!0));else{const k=kF(n,m.path,u);m.currentInputSnapshot=k;const F=t[f].update(k.val());if(void 0!==F){RT("transaction failed: Data returned ",F,m.path);let j=xi(F);"object"==typeof F&&null!=F&&(0,B.r3)(F,".priority")||(j=j.updatePriority(k.getPriority()));const de=m.currentWriteId,Pe=OT(n),Ve=wF(j,k,Pe);m.currentOutputSnapshotRaw=j,m.currentOutputSnapshotResolved=Ve,m.currentWriteId=rM(n),u.splice(u.indexOf(de),1),r=r.concat(pF(n.serverSyncTree_,m.path,Ve,m.currentWriteId,m.applyLocally)),r=r.concat(bg(n.serverSyncTree_,de,!0))}else D=!0,T="nodata",r=r.concat(bg(n.serverSyncTree_,m.currentWriteId,!0))}Pl(n.eventQueue_,e,r),r=[],D&&(t[f].status=2,setTimeout(t[f].unwatcher,Math.floor(0)),t[f].onComplete&&i.push("nodata"===T?()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot):()=>t[f].onComplete(new Error(T),!1,null)))}oM(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)U0(i[f]);sM(n,n.transactionQueueTree_)}(n,K3(n,e),i),i}function Y3(n,t){let e,i=n.transactionQueueTree_;for(e=Yt(t);null!==e&&void 0===ay(i);)i=eM(i,e),e=Yt(t=Zn(t));return i}function K3(n,t){const e=[];return Q3(n,t,e),e.sort((i,r)=>i.order-r.order),e}function Q3(n,t,e){const i=ay(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);tM(t,r=>{Q3(n,r,e)})}function oM(n,t){const e=ay(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,DF(t,e.length>0?e:void 0)}tM(t,i=>{oM(n,i)})}function xF(n,t){const e=NT(Y3(n,t)),i=eM(n.transactionQueueTree_,t);return function(n,t,e){let i=n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{OF(n,r)}),OF(n,i),V3(i,r=>{OF(n,r)}),e}function OF(n,t){const e=ay(t);if(e){const i=[];let r=[],l=-1;for(let u=0;u<e.length;u++)3===e[u].status||(1===e[u].status?((0,B.hu)(l===u-1,"All SENT items should be at beginning of queue."),l=u,e[u].status=3,e[u].abortReason="set"):((0,B.hu)(0===e[u].status,"Unexpected transaction status in abort"),e[u].unwatcher(),r=r.concat(bg(n.serverSyncTree_,e[u].currentWriteId,!0)),e[u].onComplete&&i.push(e[u].onComplete.bind(null,new Error("set"),!1,null))));-1===l?DF(t,void 0):e.length=l+1,Pl(n.eventQueue_,NT(t),r);for(let u=0;u<i.length;u++)U0(i[u])}}const PF=function(n,t){const e=UW(n),i=e.namespace;return"firebase.com"===e.domain&&cd(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&cd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new OP(e.host,e.secure,i,t,"ws"===e.scheme||"wss"===e.scheme,"",i!==e.subdomain),path:new kn(e.pathString)}},UW=function(n){let t="",e="",i="",r="",l="",u=!0,f="https",m=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),t=n.substring(0,Math.min(D,T)),D<T&&(r=function(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(l){}t+="/"+r}return t}(n.substring(D,T)));const k=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):vo(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,T)));w=t.indexOf(":"),w>=0?(u="https"===f||"wss"===f,m=parseInt(t.substring(w+1),10)):w=t.length;const F=t.slice(0,w);if("localhost"===F.toLowerCase())e="localhost";else if(F.split(".").length<=2)e=F;else{const j=t.indexOf(".");i=t.substring(0,j).toLowerCase(),e=t.substring(j+1),l=i}"ns"in k&&(l=k.ns)}return{host:t,port:m,domain:e,subdomain:i,secure:u,scheme:f,pathString:r,namespace:l}};class J3{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Pz)(this.snapshot.exportVal())}}class X3{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eH{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class tH{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new B.BH;return MW(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Ol("OnDisconnect.remove",this._path);const t=new B.BH;return W3(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Ol("OnDisconnect.set",this._path),hd("OnDisconnect.set",t,this._path,!1);const e=new B.BH;return W3(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Ol("OnDisconnect.setWithPriority",this._path),hd("OnDisconnect.setWithPriority",t,this._path,!1),IF("OnDisconnect.setWithPriority",e,!1);const i=new B.BH;return function(n,t,e,i,r){const l=xi(e,i);n.server_.onDisconnectPut(t.toString(),l.val(!0),(u,f)=>{"ok"===u&&q0(n.onDisconnect_,t,l),wg(0,r,u,f)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Ol("OnDisconnect.update",this._path),U3("OnDisconnect.update",t,this._path,!1);const e=new B.BH;return function(n,t,e,i){if((0,B.xb)(e))return ns("onDisconnect().update() called with empty data.  Don't do anything."),void wg(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,l)=>{"ok"===r&&is(e,(u,f)=>{const m=xi(f);q0(n.onDisconnect_,Di(t,u),m)}),wg(0,i,r,l)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Jo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return Kt(this._path)?null:HP(this._path)}get ref(){return new Fl(this._repo,this._path)}get _queryIdentifier(){const t=o3(this._queryParams),e=RP(t);return"{}"===e?"default":e}get _queryObject(){return o3(this._queryParams)}isEqual(t){if(!((t=(0,B.m9)(t))instanceof Jo))return!1;const e=this._repo===t._repo,i=jP(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function aM(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Cg(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===dd){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Kh)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==ud)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===oi){if(null!=t&&!MT(t)||null!=e&&!MT(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.hu)(n.getIndex()instanceof WP||n.getIndex()===ZP,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function lM(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fl extends Jo{constructor(t,e){super(t,e,new LN,!1)}get parent(){const t=GU(this._path);return null===t?null:new Fl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class ly{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new kn(t),i=cy(this.ref,t);return new ly(this._node.getChild(e),i,oi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new ly(r,cy(this.ref,i),oi)))}hasChild(t){const e=new kn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nH(n,t){return(n=(0,B.m9)(n))._checkNotDeleted("ref"),void 0!==t?cy(n._root,t):n._root}function iH(n,t){(n=(0,B.m9)(n))._checkNotDeleted("refFromURL");const e=PF(t,n._repo.repoInfo_.nodeAdmin);H3("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&cd("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),nH(n,e.path.toString())}function cy(n,t){return null===Yt((n=(0,B.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xT("child","path",e,!1)):xT("child","path",t,!1),new Fl(n._repo,Di(n._path,t));var e}function FF(n,t){n=(0,B.m9)(n),Ol("set",n._path),hd("set",t,n._path,!1);const e=new B.BH;return MF(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function zW(n,t){U3("update",t,n._path,!1);const e=new B.BH;return function(n,t,e,i){K0(n,"update",{path:t.toString(),value:e});let r=!0;const l=OT(n),u={};if(is(e,(f,m)=>{r=!1,u[f]=F3(Di(t,f),xi(m),n.serverSyncTree_,l)}),r)ns("update() called with empty data.  Don't do anything."),wg(0,i,"ok",void 0);else{const f=rM(n),m=function(n,t,e,i){!function(n,t,e,i){(0,B.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=sF(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=ai.fromObject(e);return Y0(n,new W0({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,u,f);iM(n.eventQueue_,m),n.server_.merge(t.toString(),e,(w,D)=>{const T="ok"===w;T||vo("update at "+t+" failed: "+w);const k=bg(n.serverSyncTree_,f,!T),F=k.length>0?Q0(n,t):t;Pl(n.eventQueue_,F,k),wg(0,i,w,D)}),is(e,w=>{const D=xF(n,Di(t,w));Q0(n,D)}),Pl(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function qW(n){return function(n,t){const e=function(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(w,D)=>{const T=bo(w,e);i=i||yg(D,T)});let r=n.syncPointTree_.get(e);r?i=i||yg(r,En()):(r=new T3,n.syncPointTree_=n.syncPointTree_.set(e,r));const l=null!=i,u=l?new mg(i,!0,!1):null;return function(n){return $N(n.viewCache_)}(S3(r,t,GN(n.pendingWriteTree_,t._path),l?u.getNode():Ft.EMPTY_NODE,l))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(i=>{const r=xi(i).withIndex(t._queryParams.getIndex()),l=IT(n.serverSyncTree_,t._path,r);return AF(n.eventQueue_,t._path,l),Promise.resolve(r)},i=>(K0(n,"get for query "+(0,B.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,B.m9)(n))._repo,n).then(t=>new ly(t,new Fl(n._repo,n._path),n._queryParams.getIndex()))}class cM{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new J3("value",this,new ly(t.snapshotNode,new Fl(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new X3(this,t,e):null}matches(t){return t instanceof cM&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class uM{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new X3(this,t,e):null}createEvent(t,e){(0,B.hu)(null!=t.childName,"Child events should have a childName.");const i=cy(new Fl(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new J3(t.type,this,new ly(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof uM&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function PT(n,t,e,i,r){let l;if("object"==typeof i&&(l=void 0,r=i),"function"==typeof i&&(l=i),r&&r.onlyOnce){const m=e,w=(D,T)=>{RF(n._repo,n,f),m(D,T)};w.userCallback=e.userCallback,w.context=e.context,e=w}const u=new eH(e,l||void 0),f="value"===t?new cM(u):new uM(t,u);return function(n,t,e){let i;i=".info"===Yt(t._path)?R3(n.infoSyncTree_,t,e):R3(n.serverSyncTree_,t,e),AF(n.eventQueue_,t._path,i)}(n._repo,n,f),()=>RF(n._repo,n,f)}function LF(n,t,e,i){return PT(n,"value",t,e,i)}function rH(n,t,e,i){return PT(n,"child_added",t,e,i)}function sH(n,t,e,i){return PT(n,"child_changed",t,e,i)}function oH(n,t,e,i){return PT(n,"child_moved",t,e,i)}function aH(n,t,e,i){return PT(n,"child_removed",t,e,i)}function lH(n,t,e){let i=null;const r=e?new eH(e):null;"value"===t?i=new cM(r):t&&(i=new uM(t,r)),RF(n._repo,n,i)}class Vc{}class cH extends Vc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){hd("endAt",this._value,t._path,!0);const e=JP(t._queryParams,this._value,this._key);if(lM(e),Cg(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jo(t._repo,t._path,e,t._orderByCalled)}}class ZW extends Vc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){hd("endBefore",this._value,t._path,!1);const e=function(n,t,e){let i,r;return n.index_===dd?("string"==typeof t&&(t=i3(t)),r=JP(n,t,e)):(i=null==e?Kh:i3(e),r=JP(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(lM(e),Cg(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jo(t._repo,t._path,e,t._orderByCalled)}}class uH extends Vc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){hd("startAt",this._value,t._path,!0);const e=QP(t._queryParams,this._value,this._key);if(lM(e),Cg(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Jo(t._repo,t._path,e,t._orderByCalled)}}class QW extends Vc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){hd("startAfter",this._value,t._path,!1);const e=function(n,t,e){let i;if(n.index_===dd)"string"==typeof t&&(t=n3(t)),i=QP(n,t,e);else{let r;r=null==e?ud:n3(e),i=QP(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(lM(e),Cg(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Jo(t._repo,t._path,e,t._orderByCalled)}}class XW extends Vc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Jo(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class t5 extends Vc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Jo(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class i5 extends Vc{constructor(t){super(),this._path=t}_apply(t){aM(t,"orderByChild");const e=new kn(this._path);if(Kt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new WP(e),r=VN(t._queryParams,i);return Cg(r),new Jo(t._repo,t._path,r,!0)}}class s5 extends Vc{_apply(t){aM(t,"orderByKey");const e=VN(t._queryParams,dd);return Cg(e),new Jo(t._repo,t._path,e,!0)}}class a5 extends Vc{_apply(t){aM(t,"orderByPriority");const e=VN(t._queryParams,oi);return Cg(e),new Jo(t._repo,t._path,e,!0)}}class c5 extends Vc{_apply(t){aM(t,"orderByValue");const e=VN(t._queryParams,ZP);return Cg(e),new Jo(t._repo,t._path,e,!0)}}class d5 extends Vc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(hd("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cH(this._value,this._key)._apply(new uH(this._value,this._key)._apply(t))}}function Bc(n,...t){let e=(0,B.m9)(n);for(const i of t)e=i._apply(e);return e}(function(n){(0,B.hu)(!ZN,"__referenceConstructor has already been defined"),ZN=n})(Fl),function(n){(0,B.hu)(!KN,"__referenceConstructor has already been defined"),KN=n}(Fl);const VF={};function hH(n,t,e,i,r){let l=i||n.options.databaseURL;void 0===l&&(n.options.projectId||cd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ns("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,w,u=PF(l,r),f=u.repoInfo;"undefined"!=typeof process&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(m=!0,l=`http://${w}?ns=${f.namespace}`,u=PF(l,r),f=u.repoInfo):m=!u.repoInfo.secure;const D=r&&m?new fT(fT.OWNER):new iz(n.name,n.options,t);H3("Invalid Firebase Database URL",u),Kt(u.path)||cd("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function(n,t,e,i){let r=VF[t.name];r||(r={},VF[t.name]=r);let l=r[n.toURLString()];return l&&cd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new DW(n,false,e,i),r[n.toURLString()]=l,l}(f,n,D,new nz(n.name,e));return new y5(T,n)}class y5{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=LP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new BN(n.repoInfo_,(i,r,l,u)=>{z3(n,i,r,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>q3(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new iy(n.repoInfo_,t,(i,r,l,u)=>{z3(n,i,r,l,u)},i=>{q3(n,i)},i=>{!function(n,t){is(t,(e,i)=>{NF(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function(n,t){const e=n.toString();return FP[e]||(FP[e]=t()),FP[e]}(n.repoInfo_,()=>new cq(n.stats_,n.server_)),n.infoData_=new rq,n.infoSyncTree_=new M3({startListening:(i,r,l,u)=>{let f=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(f=IT(n.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),NF(n,"connected",!1),n.serverSyncTree_=new M3({startListening:(i,r,l,u)=>(n.server_.listen(i,l,r,(f,m)=>{const w=u(f,m);Pl(n.eventQueue_,i._path,w)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fl(this._repo,En())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=VF[t];(!e||e[n.key]!==n)&&cd(`Database ${t}(${n.repoInfo_}) has already been deleted.`),Z3(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&cd("Cannot call "+t+" on a deleted database.")}}function C5(n,t){pU(n,t)}class I5{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}iy.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},iy.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},cU(Ca.SDK_VERSION),(0,Ca._registerComponent)(new Ea.wA("database",(t,{instanceIdentifier:e})=>hH(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Ca.registerVersion)(aU,"0.12.4",void 0),(0,Ca.registerVersion)(aU,"0.12.4","esm2017");const R5=new _l.Yd("@firebase/database-compat"),fH=function(n){R5.warn("FIREBASE WARNING: "+n)};class O5{constructor(t){this._delegate=t}cancel(t){(0,B.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,B.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,B.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,B.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,B.Dv)("OnDisconnect.set",1,2,arguments.length),(0,B.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,B.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),l=>i(l)),r}update(t,e){if((0,B.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let l=0;l<t.length;++l)r[""+l]=t[l];t=r,fH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class P5{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,B.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Eg{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,B.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,B.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,B.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,B.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,B.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),xT("DataSnapshot.child","path",t,!1),new Eg(this._database,this._delegate.child(t))}hasChild(t){return(0,B.Dv)("DataSnapshot.hasChild",1,1,arguments.length),xT("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,B.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,B.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,B.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Eg(this._database,e)))}hasChildren(){return(0,B.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,B.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,B.Dv)("DataSnapshot.ref",0,0,arguments.length),new Pa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Is{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var l;(0,B.Dv)("Query.on",2,4,arguments.length),(0,B.Wj)("Query.on","callback",e,!1);const u=Is.getCancelAndContextArgs_("Query.on",i,r),f=(w,D)=>{e.call(u.context,new Eg(this.database,w),D)};f.userCallback=e,f.context=u.context;const m=null===(l=u.cancel)||void 0===l?void 0:l.bind(u.context);switch(t){case"value":return LF(this._delegate,f,m),e;case"child_added":return rH(this._delegate,f,m),e;case"child_removed":return aH(this._delegate,f,m),e;case"child_changed":return sH(this._delegate,f,m),e;case"child_moved":return oH(this._delegate,f,m),e;default:throw new Error((0,B.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,B.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,B.Wj)("Query.off","callback",e,!0),(0,B.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,lH(this._delegate,t,r)}else lH(this._delegate,t)}get(){return qW(this._delegate).then(t=>new Eg(this.database,t))}once(t,e,i,r){(0,B.Dv)("Query.once",1,4,arguments.length),(0,B.Wj)("Query.once","callback",e,!0);const l=Is.getCancelAndContextArgs_("Query.once",i,r),u=new B.BH,f=(w,D)=>{const T=new Eg(this.database,w);e&&e.call(l.context,T,D),u.resolve(T)};f.userCallback=e,f.context=l.context;const m=w=>{l.cancel&&l.cancel.call(l.context,w),u.reject(w)};switch(t){case"value":LF(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":rH(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":aH(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":sH(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":oH(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,B.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(t){return(0,B.Dv)("Query.limitToFirst",1,1,arguments.length),new Is(this.database,Bc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new XW(n)}(t)))}limitToLast(t){return(0,B.Dv)("Query.limitToLast",1,1,arguments.length),new Is(this.database,Bc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new t5(n)}(t)))}orderByChild(t){return(0,B.Dv)("Query.orderByChild",1,1,arguments.length),new Is(this.database,Bc(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xT("orderByChild","path",n,!1),new i5(n)}(t)))}orderByKey(){return(0,B.Dv)("Query.orderByKey",0,0,arguments.length),new Is(this.database,Bc(this._delegate,new s5))}orderByPriority(){return(0,B.Dv)("Query.orderByPriority",0,0,arguments.length),new Is(this.database,Bc(this._delegate,new a5))}orderByValue(){return(0,B.Dv)("Query.orderByValue",0,0,arguments.length),new Is(this.database,Bc(this._delegate,new c5))}startAt(t=null,e){return(0,B.Dv)("Query.startAt",0,2,arguments.length),new Is(this.database,Bc(this._delegate,function(n=null,t){return kT("startAt","key",t,!0),new uH(n,t)}(t,e)))}startAfter(t=null,e){return(0,B.Dv)("Query.startAfter",0,2,arguments.length),new Is(this.database,Bc(this._delegate,function(n,t){return kT("startAfter","key",t,!0),new QW(n,t)}(t,e)))}endAt(t=null,e){return(0,B.Dv)("Query.endAt",0,2,arguments.length),new Is(this.database,Bc(this._delegate,function(n,t){return kT("endAt","key",t,!0),new cH(n,t)}(t,e)))}endBefore(t=null,e){return(0,B.Dv)("Query.endBefore",0,2,arguments.length),new Is(this.database,Bc(this._delegate,function(n,t){return kT("endBefore","key",t,!0),new ZW(n,t)}(t,e)))}equalTo(t,e){return(0,B.Dv)("Query.equalTo",1,2,arguments.length),new Is(this.database,Bc(this._delegate,function(n,t){return kT("equalTo","key",t,!0),new d5(n,t)}(t,e)))}toString(){return(0,B.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,B.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,B.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Is))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,B.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,B.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,B.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Pa(this.database,new Fl(this._delegate._repo,this._delegate._path))}}class Pa extends Is{constructor(t,e){super(t,new Jo(e._repo,e._path,new LN,!1)),this.database=t,this._delegate=e}getKey(){return(0,B.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,B.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Pa(this.database,cy(this._delegate,t))}getParent(){(0,B.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Pa(this.database,t):null}getRoot(){return(0,B.Dv)("Reference.root",0,0,arguments.length),new Pa(this.database,this._delegate.root)}set(t,e){(0,B.Dv)("Reference.set",1,2,arguments.length),(0,B.Wj)("Reference.set","onComplete",e,!0);const i=FF(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,B.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let l=0;l<t.length;++l)r[""+l]=t[l];t=r,fH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ol("Reference.update",this._delegate._path),(0,B.Wj)("Reference.update","onComplete",e,!0);const i=zW(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,B.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,B.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function(n,t,e){if(Ol("setWithPriority",n._path),hd("setWithPriority",t,n._path,!1),IF("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new B.BH;return MF(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),l=>i(l)),r}remove(t){(0,B.Dv)("Reference.remove",0,1,arguments.length),(0,B.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return Ol("remove",n._path),FF(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,B.Dv)("Reference.transaction",1,3,arguments.length),(0,B.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,B.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,B.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function(n,t,e){var i;if(n=(0,B.m9)(n),Ol("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==e?void 0:e.applyLocally)||void 0===i||i,l=new B.BH,f=LF(n,()=>{});return function(n,t,e,i,r,l){K0(n,"transaction on "+t);const u={path:t,update:e,onComplete:i,status:null,order:dU(),applyLocally:l,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=kF(n,t,void 0);u.currentInputSnapshot=f;const m=u.update(f.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{RT("transaction failed: Data returned ",m,u.path),u.status=0;const w=eM(n.transactionQueueTree_,t),D=ay(w)||[];let T;D.push(u),DF(w,D),"object"==typeof m&&null!==m&&(0,B.r3)(m,".priority")?(T=(0,B.DV)(m,".priority"),(0,B.hu)(MT(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(QN(n.serverSyncTree_,t)||Ft.EMPTY_NODE).getPriority().val();const k=OT(n),F=xi(m,T),j=wF(F,f,k);u.currentOutputSnapshotRaw=F,u.currentOutputSnapshotResolved=j,u.currentWriteId=rM(n);const te=pF(n.serverSyncTree_,t,j,u.currentWriteId,u.applyLocally);Pl(n.eventQueue_,t,te),sM(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(m,w,D)=>{let T=null;m?l.reject(m):(T=new ly(D,new Fl(n._repo,n._path),oi),l.resolve(new I5(w,T)))},f,r),l.promise}(this._delegate,t,{applyLocally:i}).then(l=>new P5(l.committed,new Eg(this.database,l.snapshot)));return e&&r.then(l=>e(null,l.committed,l.snapshot),l=>e(l,!1,null)),r}setPriority(t,e){(0,B.Dv)("Reference.setPriority",1,2,arguments.length),(0,B.Wj)("Reference.setPriority","onComplete",e,!0);const i=function(n,t){n=(0,B.m9)(n),Ol("setPriority",n._path),IF("setPriority",t,!1);const e=new B.BH;return MF(n._repo,Di(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,B.Dv)("Reference.push",0,2,arguments.length),(0,B.Wj)("Reference.push","onComplete",e,!0);const i=function(n,t){n=(0,B.m9)(n),Ol("push",n._path),hd("push",t,n._path,!0);const e=G3(n._repo),i=Kz(e),r=cy(n,i),l=cy(n,i);let u;return u=null!=t?FF(l,t).then(()=>l):Promise.resolve(l),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(this._delegate,t),r=i.then(u=>new Pa(this.database,u));e&&r.then(()=>e(null),u=>e(u));const l=new Pa(this.database,i);return l.then=r.then.bind(r),l.catch=r.catch.bind(r,void 0),l}onDisconnect(){return Ol("Reference.onDisconnect",this._delegate._path),new O5(new tH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class FT{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,i={}){!function(n,t,e,i={}){(n=(0,B.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&cd("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let l;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&cd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new fT(fT.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:(0,B.Sg)(i.mockUserToken,n.app.options.projectId);l=new fT(u)}!function(n,t,e,i){n.repoInfo_=new OP(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,l)}(this._delegate,t,e,i)}ref(t){if((0,B.Dv)("database.ref",0,1,arguments.length),t instanceof Pa){const e=iH(this._delegate,t.toString());return new Pa(this,e)}{const e=nH(this._delegate,t);return new Pa(this,e)}}refFromURL(t){(0,B.Dv)("database.refFromURL",1,1,arguments.length);const i=iH(this._delegate,t);return new Pa(this,i)}goOffline(){return(0,B.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,B.m9)(n))._checkNotDeleted("goOffline"),Z3(n._repo)}(this._delegate)}goOnline(){return(0,B.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,B.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume($3)}(n._repo)}(this._delegate)}}FT.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var L5=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:l=!1}){cU(e);const u=new Ea.zt("auth-internal",new Ea.H0("database-standalone"));return u.setComponent(new Ea.wA("auth-internal",()=>i,"PRIVATE")),{instance:new FT(hH(n,u,void 0,t,l),n),namespace:r}}});const V5=FT.ServerValue;function pH(n){return null==n}function gH(n){return"function"==typeof n.set}function mH(n,t){return gH(t)?t:n.ref(t)}function _H(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(gH(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function LT(n,t,e="on",i=ah.z){return new Cn.y(r=>{let l=null;return l=n[e](t,(u,f)=>{i.schedule(()=>{r.next({snapshot:u,prevKey:f})}),"once"===e&&i.schedule(()=>r.complete())},u=>{i.schedule(()=>r.error(u))}),"on"===e?{unsubscribe(){null!=l&&n.off(t,l)}}:{unsubscribe(){}}}).pipe((0,et.U)(r=>{const{snapshot:l,prevKey:u}=r;let f=null;return l.exists()&&(f=l.key),{type:t,payload:l,prevKey:u,key:f}}),(0,oU.B)())}function yH(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function G5(n,t){const{payload:e,prevKey:i,key:r}=t,l=yH(n,r),u=function(n,t){if(pH(t))return 0;{const e=yH(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let f=null;t.payload.forEach(m=>{const w={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,w],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==i&&(n=n.filter(m=>m.payload.key!==e.key)).splice(u,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(u,0,t)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===r?t:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(u,0,f),n}return n;default:return n}}function vH(n){return(pH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function bH(n,t,e){return function(n,t,e){return LT(n,"value","once",e).pipe(Hn(i=>{const r=[(0,He.of)(i)];return t.forEach(l=>r.push(LT(n,l,"on",e))),(0,rh.T)(...r).pipe(ol(G5,[]))}),lh())}(n,t=vH(t),e)}function wH(n,t,e){const i=(t=vH(t)).map(r=>LT(n,r,"on",e));return(0,rh.T)(...i)}function CH(n,t){return function(i,r){return _H(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function Z5(n){return function(e){return e?_H(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function EH(n,t){return function(){return LT(n,"value","on",t)}}!function(n){n.INTERNAL.registerComponent(new Ea.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new FT(r,i)},"PUBLIC").setServiceProps({Reference:Pa,Query:Is,Database:FT,DataSnapshot:Eg,enableLogging:C5,INTERNAL:L5,ServerValue:V5}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.4")}(V1.Z);const Q5=new a.OlP("angularfire2.realtimeDatabaseURL"),J5=new a.OlP("angularfire2.database.use-emulator");let X5=(()=>{class n{constructor(e,i,r,l,u,f,m,w,D,T,k,F,j,te,de){this.schedulers=f;const Pe=m,Ve=(0,Or.on)(e,u,i);w&&mm(Ve,u,D,k,F,j,T,te),this.database=(0,Or.cc)(`${Ve.name}.database.${r}`,"AngularFireDatabase",Ve.name,()=>{const pt=u.runOutsideAngular(()=>Ve.database(r||void 0));return Pe&&pt.useEmulator(...Pe),pt},[Pe])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>mH(this.database,e));let l=r;return i&&(l=i(r)),function(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:CH(i,"update"),set:CH(i,"set"),push:r=>i.push(r),remove:Z5(i),snapshotChanges:r=>bH(n,r,e).pipe($n.iC),stateChanges:r=>wH(n,r,e).pipe($n.iC),auditTrail:r=>function(n,t,e){return function(n,t,e){return function(n,t){return LT(n,"value","on",t).pipe((0,et.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(AN(t),(0,et.U)(([r,l])=>{const u=r.lastKeyToLoad,f=l.map(m=>m.key);return{actions:l,lastKeyToLoad:u,loadedKeys:f}}),function(n){return t=>t.lift(new G8(n))}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,et.U)(r=>r.actions))}(n,wH(n,t).pipe(ol((r,l)=>[...r,l],[])),e)}(n,r,e).pipe($n.iC),valueChanges:(r,l)=>bH(n,r,e).pipe((0,et.U)(f=>f.map(m=>l&&l.idField?Object.assign(Object.assign({},m.payload.val()),{[l.idField]:m.key}):m.payload.val())),$n.iC)}}(l,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>EH(n,t.schedulers.outsideAngular)().pipe($n.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>EH(n,t.schedulers.outsideAngular)().pipe($n.iC,(0,et.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>mH(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Or.Dh),a.LFG(Or.xv,8),a.LFG(Q5,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG($n.HU),a.LFG(J5,8),a.LFG(_m,8),a.LFG(Ww,8),a.LFG(gm,8),a.LFG(Tv,8),a.LFG(Zw,8),a.LFG(Sv,8),a.LFG(Yw,8),a.LFG(Ev,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eZ=(()=>{class n{constructor(){ip.Z.registerVersion("angularfire",$n.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[X5]}),n})(),pZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[UO]]}),n})(),RZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[pZ,ld],ld]}),n})();class xZ{call(t,e){return e.subscribe(new OZ(t))}}class OZ extends ic{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let i=0;i<e&&!this.hasFirst;i++){const l=Un(this,t[i],void 0,i);this.subscriptions&&this.subscriptions.push(l),this.add(l)}this.observables=null}}notifyNext(t,e,i){if(!this.hasFirst){this.hasFirst=!0;for(let r=0;r<this.subscriptions.length;r++)if(r!==i){let l=this.subscriptions[r];l.unsubscribe(),this.remove(l)}this.subscriptions=null}this.destination.next(e)}}var PZ=U(8640);new Cn.y(PZ.Z);var bM=U(377);function wM(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,sl.n)(n,void 0).lift(new FZ(t))}class FZ{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new LZ(t,this.resultSelector))}}class LZ extends an.L{constructor(t,e,i=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,la.k)(t)?e.push(new BZ(t)):e.push("function"==typeof t[bM.hZ]?new VZ(t[bM.hZ]()):new UZ(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let i=0;i<e;i++){let r=t[i];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,i=this.destination;for(let u=0;u<e;u++){let f=t[u];if("function"==typeof f.hasValue&&!f.hasValue())return}let r=!1;const l=[];for(let u=0;u<e;u++){let f=t[u],m=f.next();if(f.hasCompleted()&&(r=!0),m.done)return void i.complete();l.push(m.value)}this.resultSelector?this._tryresultSelector(l):i.next(l),r&&i.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}class VZ{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class BZ{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[bM.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class UZ extends Ji.Ds{constructor(t,e,i){super(t),this.parent=e,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[bM.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,Ji.ft)(this.observable,new Ji.IY(this))}}U(1593);const tw=["*"],kY=["dialog"];function Dg(n){return null!=n}function iw(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const UH={animation:!0,transitionTimerDelayMs:5};let rs=(()=>{class n{constructor(){this.animation=UH.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const G7=()=>{},{transitionTimerDelayMs:z7}=UH,HT=new Map,$r=(n,t,e,i)=>{let r=i.context||{};const l=HT.get(t);if(l)switch(i.runningTransition){case"continue":return Qi.E;case"stop":n.run(()=>l.transition$.complete()),r=Object.assign(l.context,r),HT.delete(t)}const u=e(t,i.animation,r)||G7;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>u()),(0,He.of)(void 0).pipe(function(n){return t=>new Cn.y(e=>t.subscribe(u=>n.run(()=>e.next(u)),u=>n.run(()=>e.error(u)),()=>n.run(()=>e.complete())))}(n));const f=new nt.xQ,m=new nt.xQ,w=f.pipe(function(...n){return t=>Oo(t,(0,He.of)(...n))}(!0));HT.set(t,{transition$:f,complete:()=>{m.next(),m.complete()},context:r});const D=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const T=jr(t,"transitionend").pipe(In(w),_n(({target:F})=>F===t));(function(...n){if(1===n.length){if(!(0,la.k)(n[0]))return n[0];n=n[0]}return(0,sl.n)(n,void 0).lift(new xZ)})(xO(D+z7).pipe(In(w)),T,m).pipe(In(w)).subscribe(()=>{HT.delete(t),n.run(()=>{u(),f.next(),f.complete()})})}),f.asObservable()};let zH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),qH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),ZH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),QH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),JH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();var Qt=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Qt||(Qt={})),Qt))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const ij=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function rj(n){const t=Array.from(n.querySelectorAll(ij)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))i=t.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{const l=this.offsetParent(t);i=this.offset(t,!1),l!==document.documentElement&&(r=this.offset(l,!1)),r.top+=l.clientTop,r.left+=l.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i}offset(t,e=!0){const i=t.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft;let l={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return e&&(l.height=Math.round(l.height),l.width=Math.round(l.width),l.top=Math.round(l.top),l.bottom=Math.round(l.bottom),l.left=Math.round(l.left),l.right=Math.round(l.right)),l}positionElements(t,e,i,r){const[l="top",u="center"]=i.split("-"),f=r?this.offset(t,!1):this.position(t,!1),m=this.getAllStyles(e),w=parseFloat(m.marginTop),D=parseFloat(m.marginBottom),T=parseFloat(m.marginLeft),k=parseFloat(m.marginRight);let F=0,j=0;switch(l){case"top":F=f.top-(e.offsetHeight+w+D);break;case"bottom":F=f.top+f.height;break;case"left":j=f.left-(e.offsetWidth+T+k);break;case"right":j=f.left+f.width}switch(u){case"top":F=f.top;break;case"bottom":F=f.top+f.height-e.offsetHeight;break;case"left":j=f.left;break;case"right":j=f.left+f.width-e.offsetWidth;break;case"center":"top"===l||"bottom"===l?j=f.left+f.width/2-e.offsetWidth/2:F=f.top+f.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(j)}px, ${Math.round(F)}px)`;const te=e.getBoundingClientRect(),de=document.documentElement,Pe=window.innerHeight||de.clientHeight,Ve=window.innerWidth||de.clientWidth;return te.left>=0&&te.top>=0&&te.right<=Ve&&te.bottom<=Pe}},new Date(1882,10,12),new Date(2174,10,25);let pj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An,Q2]]}),n})(),yj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),vj=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(rs))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(rs))},token:n,providedIn:"root"}),n})();class py{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}const jK=()=>{};let bj=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):jK}_adjustBody(e){const i=this._document.body,r=i.style.paddingRight,l=parseFloat(window.getComputedStyle(i)["padding-right"]);return i.style["padding-right"]=`${l+e}px`,()=>i.style["padding-right"]=r}_isPresent(e){const i=this._document.body.getBoundingClientRect();return window.innerWidth-(i.left+i.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const i=this._document.body;i.appendChild(e);const r=e.getBoundingClientRect().width-e.clientWidth;return i.removeChild(e),r}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ne))},token:n,providedIn:"root"}),n})(),$K=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(ti(1)).subscribe(()=>{$r(this._zone,this._el.nativeElement,(e,i)=>{i&&iw(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return $r(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,i){2&e&&(a.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),a.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();class wj{close(t){}dismiss(t){}}class GK{constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new nt.xQ,this._dismissed=new nt.xQ,this._hidden=new nt.xQ,t.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,u)=>{this._resolve=l,this._reject=u}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(In(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(In(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(i=>{!1!==i&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,He.of)(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),wM(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var WT=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(WT||(WT={})),WT))();let zK=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new nt.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new nt.xQ,this.hidden=new nt.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ti(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},u=wM($r(this._zone,e,()=>e.classList.remove("show"),i),$r(this._zone,this._dialogEl.nativeElement,()=>{},i));return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){const e={animation:this.animation,runningTransition:"continue"};wM($r(this._zone,this._elRef.nativeElement,(l,u)=>{u&&iw(l),l.classList.add("show")},e),$r(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{jr(e,"keydown").pipe(In(this._closed$),_n(r=>r.which===Qt.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(WT.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;jr(this._dialogEl.nativeElement,"mousedown").pipe(In(this._closed$),(0,Ln.b)(()=>i=!1),Hn(()=>jr(e,"mouseup").pipe(In(this._closed$),ti(1))),_n(({target:r})=>e===r)).subscribe(()=>{i=!0}),jr(e,"click").pipe(In(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(WT.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=rj(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&$r(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(ne),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&a.Gf(kY,7),2&e){let r;a.iGM(r=a.CRH())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(a.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),a.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),a.ekj("fade",i.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:tw,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(a.F$t(),a.TgZ(0,"div",0,1),a.TgZ(2,"div",2),a.Hsn(3),a.qZA(),a.qZA()),2&e&&a.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),Cj=(()=>{class n{constructor(e,i,r,l,u,f){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=l,this._rendererFactory=u,this._ngZone=f,this._activeWindowCmptHasChanged=new nt.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{n.runOutsideAngular(()=>{const r=jr(t,"focusin").pipe(In(e),(0,et.U)(l=>l.target));jr(t,"keydown").pipe(In(e),_n(l=>l.which===Qt.Tab),AN(r)).subscribe(([l,u])=>{const[f,m]=rj(t);(u===f||u===t)&&l.shiftKey&&(m.focus(),l.preventDefault()),u===m&&!l.shiftKey&&(f.focus(),l.preventDefault())}),i&&jr(t,"click").pipe(In(e),AN(r),(0,et.U)(l=>l[1])).subscribe(l=>l.focus())})})(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}open(e,i,r,l){const u=l.container instanceof HTMLElement?l.container:Dg(l.container)?this._document.querySelector(l.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),m=this._scrollBar.compensate(),w=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!u)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);const D=new wj,T=this._getContentRef(e,l.injector||i,r,D,l);let k=!1!==l.backdrop?this._attachBackdrop(e,u):void 0,F=this._attachWindowComponent(e,u,T),j=new GK(F,T,k,l.beforeDismiss);return this._registerModalRef(j),this._registerWindowCmpt(F),j.result.then(m,m),j.result.then(w,w),D.close=te=>{j.close(te)},D.dismiss=te=>{j.dismiss(te)},this._applyWindowOptions(F.instance,l),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),k&&k.instance&&(this._applyBackdropOptions(k.instance,l),k.changeDetectorRef.detectChanges()),F.changeDetectorRef.detectChanges(),j}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let l=e.resolveComponentFactory($K).create(this._injector);return this._applicationRef.attachView(l.hostView),i.appendChild(l.location.nativeElement),l}_attachWindowComponent(e,i,r){let u=e.resolveComponentFactory(zK).create(this._injector,r.nodes);return this._applicationRef.attachView(u.hostView),i.appendChild(u.location.nativeElement),u}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{Dg(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{Dg(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,l,u){return r?r instanceof a.Rgc?this._createFromTemplateRef(r,l):function(n){return"string"==typeof n}(r)?this._createFromString(r):this._createFromComponent(e,i,r,l,u):new py([])}_createFromTemplateRef(e,i){const l=e.createEmbeddedView({$implicit:i,close(u){i.close(u)},dismiss(u){i.dismiss(u)}});return this._applicationRef.attachView(l),new py([l.rootNodes],l)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new py([[i]])}_createFromComponent(e,i,r,l,u){const f=e.resolveComponentFactory(r),m=a.zs3.create({providers:[{provide:wj,useValue:l}],parent:i}),w=f.create(m),D=w.location.nativeElement;return u.scrollable&&D.classList.add("component-host-scrollable"),this._applicationRef.attachView(w.hostView),new py([[D]],w.hostView,w)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(ne),a.LFG(bj),a.LFG(a.FYo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.z2F),a.LFG(a.gxx),a.LFG(ne),a.LFG(bj),a.LFG(a.FYo),a.LFG(a.R0b))},token:n,providedIn:"root"}),n})(),qK=(()=>{class n{constructor(e,i,r,l){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=l}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(Cj),a.LFG(vj))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a._Vd),a.LFG(a.gxx),a.LFG(Cj),a.LFG(vj))},token:n,providedIn:"root"}),n})(),Ej=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[qK]}),n})(),Ij=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),Pj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),Vj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),Bj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),Uj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),Gj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),zj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})(),qj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();new a.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let Yj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[An]]}),n})();const N9=[zH,qH,ZH,QH,JH,pj,yj,Ej,Ij,Pj,Vj,Bj,Uj,Gj,zj,qj,Yj];let M9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[N9,zH,qH,ZH,QH,JH,pj,yj,Ej,Ij,Pj,Vj,Bj,Uj,Gj,zj,qj,Yj]}),n})(),R9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[U8]}),n.\u0275inj=a.cJS({providers:[sU,IN],imports:[[Rd,Q2,B8,eZ,sO,U4,J2,x8,RZ,Or.hO.initializeApp({apiKey:"AIzaSyDL3wmCFclCGqHcklMh_XImLBwYqXoVEZY",authDomain:"sucd-database.firebaseapp.com",projectId:"sucd-database",storageBucket:"sucd-database.appspot.com",messagingSenderId:"1034313338206",appId:"1:1034313338206:web:473760fc9916c82f6013cf",measurementId:"G-C7K6JN4KH3"}),M9]]}),n})();(0,a.G48)(),Ro().bootstrapModule(R9).catch(n=>console.error(n))},3394:(Ye,we,U)=>{"use strict";U.d(we,{Z:()=>Ae});var a=U(3854),se=U(3910),H=U(8026),fe=U(5422);class ae{constructor(_e,le){this._delegate=_e,this.firebase=le,(0,H._addComponent)(_e,new se.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,H.deleteApp)(this._delegate)))}_getService(_e,le=H._DEFAULT_ENTRY_NAME){var ve;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(_e);return!Fe.isInitialized()&&"EXPLICIT"===(null===(ve=Fe.getComponent())||void 0===ve?void 0:ve.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:le})}_removeServiceInstance(_e,le=H._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(le)}_addComponent(_e){(0,H._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,H._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ne=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function K(){const Ce=function(Ce){const _e={},le={__esModule:!0,initializeApp:function(Tt,xn={}){const St=H.initializeApp(Tt,xn);if((0,a.r3)(_e,St.name))return _e[St.name];const vt=new Ce(St,le);return _e[St.name]=vt,vt},app:Fe,registerVersion:H.registerVersion,setLogLevel:H.setLogLevel,onLog:H.onLog,apps:null,SDK_VERSION:H.SDK_VERSION,INTERNAL:{registerComponent:function(Tt){const xn=Tt.name,St=xn.replace("-compat","");if(H._registerComponent(Tt)&&"PUBLIC"===Tt.type){const vt=(Ht=Fe())=>{if("function"!=typeof Ht[St])throw ne.create("invalid-app-argument",{appName:xn});return Ht[St]()};void 0!==Tt.serviceProps&&(0,a.ZB)(vt,Tt.serviceProps),le[St]=vt,Ce.prototype[St]=function(...Ht){return this._getService.bind(this,xn).apply(this,Tt.multipleInstances?Ht:[])}}return"PUBLIC"===Tt.type?le[St]:null},removeApp:function(Tt){delete _e[Tt]},useAsService:function(Tt,xn){return"serverAuth"===xn?null:xn},modularAPIs:H}};function Fe(Tt){if(!(0,a.r3)(_e,Tt=Tt||H._DEFAULT_ENTRY_NAME))throw ne.create("no-app",{appName:Tt});return _e[Tt]}return le.default=le,Object.defineProperty(le,"apps",{get:function(){return Object.keys(_e).map(Tt=>_e[Tt])}}),Fe.App=Ce,le}(ae);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:K,extendNamespace:function(le){(0,a.ZB)(Ce,le)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),Ce}(),G=new fe.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=V;(0,H.registerVersion)("@firebase/app-compat","0.1.8",undefined)},8026:(Ye,we,U)=>{"use strict";U.r(we),U.d(we,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>Ba,_DEFAULT_ENTRY_NAME:()=>Ns,_addComponent:()=>Ys,_addOrOverwriteComponent:()=>Co,_apps:()=>jt,_clearComponents:()=>On,_components:()=>Jt,_getProvider:()=>wn,_registerComponent:()=>Ms,_removeServiceInstance:()=>Va,deleteApp:()=>Si,getApp:()=>Rs,getApps:()=>Ie,initializeApp:()=>as,onLog:()=>Xt,registerVersion:()=>Ke,setLogLevel:()=>ls});var a=U(8239),se=U(3910),H=U(5422),fe=U(3854);class ae{constructor(ut){this.container=ut}getPlatformInfoString(){return this.container.getProviders().map(xt=>{if(function(st){const ut=st.getComponent();return"VERSION"===(null==ut?void 0:ut.type)}(xt)){const Ot=xt.getImmediate();return`${Ot.library}/${Ot.version}`}return null}).filter(xt=>xt).join(" ")}}const ne="@firebase/app",J="0.7.7",K=new H.Yd("@firebase/app"),Ns="[DEFAULT]",La={[ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},jt=new Map,Jt=new Map;function Ys(st,ut){try{st.container.addComponent(ut)}catch(xt){K.debug(`Component ${ut.name} failed to register with FirebaseApp ${st.name}`,xt)}}function Co(st,ut){st.container.addOrOverwriteComponent(ut)}function Ms(st){const ut=st.name;if(Jt.has(ut))return K.debug(`There were multiple attempts to register component ${ut}.`),!1;Jt.set(ut,st);for(const xt of jt.values())Ys(xt,st);return!0}function wn(st,ut){return st.container.getProvider(ut)}function Va(st,ut,xt=Ns){wn(st,ut).clearInstance(xt)}function On(){Jt.clear()}const zt=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Pn{constructor(ut,xt,Ot){this._isDeleted=!1,this._options=Object.assign({},ut),this._config=Object.assign({},xt),this._name=xt.name,this._automaticDataCollectionEnabled=xt.automaticDataCollectionEnabled,this._container=Ot,this.container.addComponent(new se.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ut){this.checkDestroyed(),this._automaticDataCollectionEnabled=ut}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ut){this._isDeleted=ut}checkDestroyed(){if(this.isDeleted)throw zt.create("app-deleted",{appName:this._name})}}const Ba="9.4.0";function as(st,ut={}){"object"!=typeof ut&&(ut={name:ut});const xt=Object.assign({name:Ns,automaticDataCollectionEnabled:!1},ut),Ot=xt.name;if("string"!=typeof Ot||!Ot)throw zt.create("bad-app-name",{appName:String(Ot)});const cr=jt.get(Ot);if(cr){if((0,fe.vZ)(st,cr.options)&&(0,fe.vZ)(xt,cr.config))return cr;throw zt.create("duplicate-app",{appName:Ot})}const nn=new se.H0(Ot);for(const rt of Jt.values())nn.addComponent(rt);const Le=new Pn(st,xt,nn);return jt.set(Ot,Le),Le}function Rs(st=Ns){const ut=jt.get(st);if(!ut)throw zt.create("no-app",{appName:st});return ut}function Ie(){return Array.from(jt.values())}function Si(st){return ci.apply(this,arguments)}function ci(){return(ci=(0,a.Z)(function*(st){const ut=st.name;jt.has(ut)&&(jt.delete(ut),yield Promise.all(st.container.getProviders().map(xt=>xt.delete())),st.isDeleted=!0)})).apply(this,arguments)}function Ke(st,ut,xt){var Ot;let cr=null!==(Ot=La[st])&&void 0!==Ot?Ot:st;xt&&(cr+=`-${xt}`);const nn=cr.match(/\s|\//),Le=ut.match(/\s|\//);if(nn||Le){const rt=[`Unable to register library "${cr}" with version "${ut}":`];return nn&&rt.push(`library name "${cr}" contains illegal characters (whitespace or "/")`),nn&&Le&&rt.push("and"),Le&&rt.push(`version name "${ut}" contains illegal characters (whitespace or "/")`),void K.warn(rt.join(" "))}Ms(new se.wA(`${cr}-version`,()=>({library:cr,version:ut}),"VERSION"))}function Xt(st,ut){if(null!==st&&"function"!=typeof st)throw zt.create("invalid-log-argument");(0,H.Am)(st,ut)}function ls(st){(0,H.Ub)(st)}Ms(new se.wA("platform-logger",ut=>new ae(ut),"PRIVATE")),Ke(ne,J,""),Ke(ne,J,"esm2017"),Ke("fire-js","")},3910:(Ye,we,U)=>{"use strict";U.d(we,{wA:()=>H,H0:()=>J,zt:()=>ae});var a=U(8239),se=U(3854);class H{constructor(V,G,W){this.name=V,this.instanceFactory=G,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const fe="[DEFAULT]";class ae{constructor(V,G){this.name=V,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const G=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(G)){const W=new se.BH;if(this.instancesDeferred.set(G,W),this.isInitialized(G)||this.shouldAutoInitialize())try{const he=this.getOrInitializeService({instanceIdentifier:G});he&&W.resolve(he)}catch(he){}}return this.instancesDeferred.get(G).promise}getImmediate(V){var G;const W=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),he=null!==(G=null==V?void 0:V.optional)&&void 0!==G&&G;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(he)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Ee){if(he)return null;throw Ee}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if("EAGER"===V.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:fe})}catch(G){}for(const[G,W]of this.instancesDeferred.entries()){const he=this.normalizeInstanceIdentifier(G);try{const Ee=this.getOrInitializeService({instanceIdentifier:he});W.resolve(Ee)}catch(Ee){}}}}clearInstance(V=fe){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,a.Z)(function*(){const G=Array.from(V.instances.values());yield Promise.all([...G.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...G.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=fe){return this.instances.has(V)}getOptions(V=fe){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:G={}}=V,W=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const he=this.getOrInitializeService({instanceIdentifier:W,options:G});for(const[Ee,Ae]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Ee)&&Ae.resolve(he);return he}onInit(V,G){var W;const he=this.normalizeInstanceIdentifier(G),Ee=null!==(W=this.onInitCallbacks.get(he))&&void 0!==W?W:new Set;Ee.add(V),this.onInitCallbacks.set(he,Ee);const Ae=this.instances.get(he);return Ae&&V(Ae,he),()=>{Ee.delete(V)}}invokeOnInitCallbacks(V,G){const W=this.onInitCallbacks.get(G);if(W)for(const he of W)try{he(V,G)}catch(Ee){}}getOrInitializeService({instanceIdentifier:V,options:G={}}){let W=this.instances.get(V);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(K=V,K===fe?void 0:K),options:G}),this.instances.set(V,W),this.instancesOptions.set(V,G),this.invokeOnInitCallbacks(W,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,W)}catch(he){}var K;return W||null}normalizeInstanceIdentifier(V=fe){return this.component?this.component.multipleInstances?V:fe:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const G=this.getProvider(V.name);if(G.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);G.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const G=new ae(V,this);return this.providers.set(V,G),G}getProviders(){return Array.from(this.providers.values())}}},5422:(Ye,we,U)=>{"use strict";U.d(we,{in:()=>se,Yd:()=>ne,Ub:()=>J,Am:()=>K});const a=[];var se=(()=>{return(V=se||(se={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",se;var V})();const H={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},fe=se.INFO,ae={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},ie=(V,G,...W)=>{if(G<V.logLevel)return;const he=(new Date).toISOString(),Ee=ae[G];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ee](`[${he}]  ${V.name}:`,...W)};class ne{constructor(G){this.name=G,this._logLevel=fe,this._logHandler=ie,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in se))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?H[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...G),this._logHandler(this,se.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...G),this._logHandler(this,se.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,se.INFO,...G),this._logHandler(this,se.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,se.WARN,...G),this._logHandler(this,se.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...G),this._logHandler(this,se.ERROR,...G)}}function J(V){a.forEach(G=>{G.setLogLevel(V)})}function K(V,G){for(const W of a){let he=null;G&&G.level&&(he=H[G.level]),W.userLogHandler=null===V?null:(Ee,Ae,...Ce)=>{const _e=Ce.map(le=>{if(null==le)return null;if("string"==typeof le)return le;if("number"==typeof le||"boolean"==typeof le)return le.toString();if(le instanceof Error)return le.message;try{return JSON.stringify(le)}catch(ve){return null}}).filter(le=>le).join(" ");Ae>=(null!=he?he:Ee.logLevel)&&V({level:se[Ae].toLowerCase(),message:_e,args:Ce,type:Ee.name})}}}},8239:(Ye,we,U)=>{"use strict";function a(H,fe,ae,ie,ne,J,K){try{var V=H[J](K),G=V.value}catch(W){return void ae(W)}V.done?fe(G):Promise.resolve(G).then(ie,ne)}function se(H){return function(){var fe=this,ae=arguments;return new Promise(function(ie,ne){var J=H.apply(fe,ae);function K(G){a(J,ie,ne,K,V,"next",G)}function V(G){a(J,ie,ne,K,V,"throw",G)}K(void 0)})}}U.d(we,{Z:()=>se})}},Ye=>{Ye(Ye.s=5911)}]);